require=function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return o(r?r:e)},d,d.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({TL7Kjz:[function(e,t,r){"use strict";function n(e){var t={};switch(e){case d.HTML5_HLS:t={acceptedProtocols:["http"],preferredFormats:["m3u8"],acceptedFormats:["m3u8","m3u8_playlist"]};break;case d.HTML5_RAW:t={acceptedProtocols:["http"],preferredFormats:m,acceptedFormats:y};break;case d.HTML5_DASH:t={acceptedProtocols:["http"],preferredFormats:["mp4dash"],acceptedFormats:["mp4dash","mpd"]};break;case d.HTML5_TV:case d.HTML5_TV_TIZEN:case d.HTML5_TV_ORSAY:t={acceptedProtocols:["http"],preferredFormats:["m3u8","mp4"],acceptedFormats:["m3u8","m3u8_playlist","mp4"]};break;case d.FLASH:t={acceptedProtocols:["http","rtmp"],preferredFormats:["m3u8","mp4","flv","f4m","x-flv"],acceptedFormats:["m3u8","m3u8_playlist","mp4","flv","f4m","x-flv",""]};break;case d.FLASH_SIMPLE:t={acceptedProtocols:["http"],preferredFormats:["mp4","flv","x-flv"],acceptedFormats:["mp4","flv","x-flv",""]}}return t}function o(e){return"probably"===e}t.exports=n;var i,a=e("./user-agent"),s=e("../nextgen/src/util"),l=document.createElement("video"),d=e("../nextgen/src/renderers/type");try{if(i=!1,l.canPlayType){var c=l.canPlayType('application/vnd.apple.mpegURL; codecs="avc1.42E01E, mp4a.40.2"');i=a.android?!!c:o(c),!i&&a.tv&&(i=o(l.canPlayType("application/vnd.apple.mpegurl")))}}catch(p){i=!1}a.tv&&(window.noHLS&&(i=!1),window.hls&&(i=!0));var u;try{u=l.canPlayType?o(l.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')):!1}catch(p){u=!1}var _;try{_=l.canPlayType?o(l.canPlayType('video/webm; codecs="vp8, vorbis"')):!1}catch(p){_=!1}a.tv&&(_=!1);var m=[];if(a.android&&m.push("mp4b"),(i||a.android&&s.isAndroidVersionAbove4())&&m.push("m3u8"),u&&m.push("mp4"),_){var v=m.indexOf("mp4");a.firefox&&v>-1?m.splice(v,0,"webm"):m.push("webm")}var y=m.slice(),f=y.indexOf("mp4b");f>-1&&y.splice(f+1,0,"mp4"),y.push("")},{"../nextgen/src/renderers/type":54,"../nextgen/src/util":"jJTEqU","./user-agent":"ty5FFo"}],"./lib/capability.js":[function(e,t,r){t.exports=e("TL7Kjz")},{}],3:[function(e,t,r){"use strict";function n(e){var t=this;t._client=e,t._commands=[]}t.exports=n;var o=e("./index");n.prototype.destroy=function(){var e=this;e.flush(!1)},n.prototype.enQueue=function(e,t){var r=this;r._commands.push({commandName:e,args:t})},n.prototype.flush=function(e){var t=this;o.isNullOrUndefined(e)&&(e=!1);var r=t._commands;t._commands=[],e&&r.forEach(function(e){if(t._client){var r=e.commandName,n=e.args;t._client[r].apply(t._client,n)}})},n.prototype.deQueue=function(e,t){var r=this;if(e){o.isNullOrUndefined(t)&&(t=!1);for(var n=0;n<r._commands.length;n++){var i=r._commands[n];if(i.commandName===e){t&&r._client&&r._client[i.commandName].apply(r._client,i.args),r._commands.splice(n,1);break}}}},n.prototype.getLength=function(){var e=this;return e._commands.length}},{"./index":"bRhrlU"}],"./lib/event-bus.js":[function(e,t,r){t.exports=e("3ECu9u")},{}],"3ECu9u":[function(e,t,r){"use strict";function n(e){var t=this;t.name=e?e:"unnamed",t._events={},t._noLogEvents={"controls-bar-change":1,"cc-position-float":1,beaconSend:1,"seek-bar-mouseover":1,"seek-bar-mouseout":1,"volume-hover":1,"playback-info":1,"ad-metrics":1,"ad-opportunity":1}}t.exports=n;var o=e("./logger");n.prototype.once=function(e,t,r){function n(){i&&i()}var o=this,i=o.subscribe(e,function(){t.apply(r,Array.prototype.slice.call(arguments,0)),i()},o);return n},n.prototype.subscribe=function(e,t,r){function n(){o._unsubscribe(e,i)}var o=this;if(o._events){o._events[e]||(o._events[e]=[]);var i={subscriber:r,cb:t};return o._events[e].push(i),n.detach=n,n}},n.prototype._unsubscribe=function(e,t){var r=this;if(r._events&&e in r._events){var n=r._events[e].indexOf(t);n>-1&&r._events[e].splice(n,1)}},n.prototype.publish=function(e){var t=this;if(t._events){var r=Array.prototype.slice.call(arguments,1);if(e in t._events){var n=t._events[e].slice(0);t._log(e,n.length,r);for(var i=0;i<n.length;i++)try{n[i].cb.apply(n[i].subscriber,Array.prototype.slice.call(arguments,1))}catch(a){o.error("error in event handler:",a.message||a,a.stack)}}else t._log(e,0,r)}},n.prototype._log=function(e,t,r){var n=this,i=e.toLowerCase();if(-1===i.indexOf("timeupdate")&&-1===i.indexOf("progress")&&!(e in n._noLogEvents)){var a=["["+n.name+" bus][event]["+e+"]["+t+" subscribers]",r];!r.length&&a.pop(),o.log.apply(o,a)}},n.prototype.destroy=function(){var e=this;e._events=e._noLogEvents=e.name=null}},{"./logger":"IS9j5T"}],"./lib/index.js":[function(e,t,r){t.exports=e("bRhrlU")},{}],bRhrlU:[function(e,t,r){function n(e){return Object.prototype.toString.call(e)}r.isArray=function(e){return Array.isArray(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isNullOrUndefined=function(e){return null==e},r.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},r.isString=function(e){return"string"==typeof e},r.isObject=function(e){return"[object Object]"===n(e)},r.isFunction=function(e){return"function"==typeof e}},{}],"./lib/logger.js":[function(e,t,r){t.exports=e("IS9j5T")},{}],IS9j5T:[function(e,t,r){var n=e("./index"),o=e("./user-agent");r.keepConsoleLogs="undefined"==typeof false||false,o.phantomJS&&(r.keepConsoleLogs=!1),function(){var e=function(){},t=["log","error","warn"];t.forEach(function(t){if(n.isNullOrUndefined(window.console)||"log"===t&&!r.keepConsoleLogs)r[t]=e;else if(console[t].apply)r[t]=function(){window.console[t].apply(console,arguments)};else{var o=Function.prototype.bind.apply(console[t],console);r[t]=function(){o.apply(console,arguments)}}})}()},{"./index":"bRhrlU","./user-agent":"ty5FFo"}],"./lib/user-agent.js":[function(e,t,r){t.exports=e("ty5FFo")},{}],ty5FFo:[function(e,t,r){"use strict";function n(e){if(null===e)return!1;var t=e[1];return parseFloat(t.replace("_",".").split(".",2).join("."))||1}var o=/<[A-Za-z]+.*?(\/>|>.*?<\/[A-Za-z]+>)|javascript:/g,i=navigator.userAgent.toLowerCase().replace(o,"");r.ua=i,r.chromium=n(/chromium\/([^\s]*)/.exec(i)),r.edge=n(/edge\/([^\s]*)/.exec(i)),r.opera=/opr\/|opera\//.test(i),r.chrome=!r.chromium&&!r.edge&&!r.opera&&(n(/chrome\/([^\s]*)/.exec(i))||n(/crios\/([^\s]*)/.exec(i))),r.ie=n(/msie ([^;]*)/.exec(i))||n(/trident.*; rv:([0-9.]+)/.exec(i)),r.firefox=n(/firefox\/([^\s]*)/.exec(i)),r.android=/android/.test(i),r.androidTablet=r.android&&!/mobile/.test(i),r.htc_one=/htc_one/.test(i),r.vizio=/Vizio/i.test(i)||window.YAHOO&&window.YAHOO.SmartTV&&"vizio"===window.YAHOO.SmartTV.manufacturer,r.tivo=/TiVo/i.test(i),r.firetv=r.android&&/amazonwebappplatform/.test(i)&&/aft/.test(i),r.lg=/web0s/.test(i),r.tizen=/tizen/.test(i),r.orsay=/smarttv/.test(i)&&!r.tizen&&!r.lg,r.samsung=r.orsay||r.tizen,r.sony=/(sony)/.test(i),r.ps4=/(playstation 4)/.test(i),r.ios=/(ipad|iphone|ipod)/.test(i),r.iphone=/(iphone|ipod)/.test(i)&&!/ipad/.test(i),r.ipad=r.ios&&!r.iphone,r.androidBrowser=!r.chrome&&/android/.test(i),r.androidVersion=n(/android\s([0-9\.]*)/.exec(i)),r.safari=!r.chrome&&!r.chromium&&!r.android&&/safari\/([^\s]*)/.test(i)&&n(/version\/([^\s]*)/.exec(i)),r.iosWebView=r.ios&&!navigator.standalone&&!r.safari,r.iosVersion=r.ios&&n(/\bos ((\d+_?){2,3})\s/.exec(i)),r.mobile=r.ios||r.android&&!r.firetv,r.safariDesktop=!r.mobile&&r.safari,r.tv=r.vizio||r.tivo||r.firetv||r.samsung||r.sony||r.ps4||r.lg,r.desktop=!r.mobile&&!r.tv,r.phantomJS=window.window&&window.window._phantom,r.tv?r.vizio?r.os="vizio":r.tivo?r.os="tivo":r.firetv?r.os="firetv":r.lg?r.os="lg":r.samsung?r.os="samsung":r.sony?r.os="sony":r.ps4?r.os="ps4":r.os=null:r.ios?r.os="ios":r.android?r.os="android":/windows|win32/.test(i)?r.os="windows":/macintosh|mac_powerpc/.test(i)?r.os="macintosh":/symbos/.test(i)?r.os="symbos":/linux/.test(i)?r.os="linux":r.os=null,r.winXP="windows"===r.os&&/(windows nt 5\.[1-3])/.test(i),r.winVista="windows"===r.os&&/(windows nt 6\.0)/.test(i),r.win7="windows"===r.os&&/(windows nt 6\.1)/.test(i),r.win8="windows"===r.os&&/(windows nt 6\.2)/.test(i),r.win8_1="windows"===r.os&&/(windows nt 6\.3)/.test(i),r.win10="windows"===r.os&&/(windows nt 10\.0)/.test(i),r.win64="windows"===r.os&&/(wow64|win64)/.test(i)},{}],12:[function(e,t,r){"use strict";function n(e,t,r,n){var o=this,i=r.YVAP;if(!i||!(i.accountId||i.standaloneAd.xml||i.standaloneAd.gemini||i.standaloneAd.brxd))return o._enabled=!1,void n.createAdsInfoPanel(null);o._enabled=!0,o._ads={},o._eventBus=e,o._model=r,o._view=n,o._vodAdBreaks=[],o._lastBreaks=[],o._seeked=!1;var l=o._view.rootElem.querySelector(".yvp-content");l.setAttribute("id","yvp-content-node-"+Math.floor(1e4*Math.random())),t.skipNormalAd=function(){var e=o._model.playbackState.isAdPlaying(),t=e&&o._model.playbackState.ad.type===a.ADTYPES.NORMAL;return o._enabled&&o._currentAdId&&e&&t?(o.cancelAd(),o._maybePlayImpl(),!0):!1},t.createAdsInfoPanel=o._view.createAdsInfoPanel,i.volume=r.playbackState.volume,i.mute=r.playbackState.mute,o._view._profiler.add(s.Metrics.YVAP_READY),o._yvap=new m({yvap:i},o._eventBus,l,t,o._view.adsOverlay?o._view.adsOverlay.node:null),o._view._profiler.setEndTime(s.Metrics.YVAP_READY),o._targetBitrate=o._model.playback.desiredBitrate,o._eventBus.subscribe(s.ADS_OBJS_UPDATE,o._onAdsUpdate,o),o._eventBus.subscribe(s.ADS_READY,o._onAdsReady,o),o._eventBus.subscribe(s.AD_BREAK_TIMELINE,o._onAdBreakTimeline,o),o._eventBus.subscribe(s.AD_PLAYBACK_STARTED,o._onAdPlaybackStarted,o),o._eventBus.subscribe(s.AD_PLAYBACK_ENDED,o._onAdPlaybackEnded,o),o._eventBus.subscribe(s.Ad.PLAYING,o._onPlaying,o),o._eventBus.subscribe(s.Ad.PAUSE,o._onPaused,o),o._eventBus.subscribe(s.Ad.TIMEUPDATE,o._onTimeupdate,o),o._eventBus.subscribe(s.Ad.ENDED,o._onEnded,o),o._eventBus.subscribe(s.Ad.ERROR,o._onError,o),o._eventBus.subscribe(s.Ad.CLICK,o._onClick,o),o._eventBus.subscribe(s.CONTROLS_SEEK_END,o._onSeekEnd,o),o._eventBus.subscribe(s.AD_PLAYBACK_PROGRESS,function(e,t,r){o._ads[o._currentAdId].playbackProgress=t}),o._eventBus.subscribe(s.BEFORE_INCOMPLETE_EXIT,function(e){e.vpaidLatencies=o._yvap.getVPAIDLatencies()})}function o(e,t){return!u.isNullOrUndefined(i(e,t))}function i(e,t){for(var r=Object.keys(e),n=0;n<r.length;n++){var o=r[n],i=e[o];if(t(i))return o}return null}t.exports=n;var a=e("./yvap/ads-json"),s=e("./event"),l=e("./states"),d=e("./stream"),c=e("../../lib/user-agent"),p=e("./media-store"),u=e("../../lib"),_=e("../../lib/logger"),m=e("./yvap/video-ad-plugin"),v=e("./renderers/type"),y=e("./constants"),f=e("./perf");n.prototype.prepare=function(e){var t=this;if(f&&f.startDebugMode(y.PERF.VP_AD_FETCH),t._enabled){t._ads={},t._mediaItem=e,t._lastBreaks=e.progress.adbreaks;try{t._adsReady=!1,e.isCCM?t._yvap.beginAdExperience(e.id,e.progress.position):t._yvap.getAdsFor({clipId:e.id})}catch(r){_.error("[yvap] prepare error",r.message||r,r.stack),t._enabled=!1}}f&&f.endDebugMode(y.PERF.VP_AD_FETCH)},n.prototype._setupTimeout=function(){var e=this;if(f&&f.startDebugMode(y.PERF.VP_AD_SETUP_TIMEOUT),f&&f.startDebugMode(y.PERF.VP_AD_WAIT_FOR_AD_READY),c.desktop&&!e._adsReady){var t=e._model.YVAP&&e._model.YVAP.timeout;t?(clearTimeout(e._adTimeout),e._adTimeout=setTimeout(function(){f&&f.endDebugMode(y.PERF.VP_AD_SETUP_TIMEOUT),e._clearAdTimeoutAndPlay()},1e3*t)):(e._adsReady=!0,e._maybePlayImpl())}},n.prototype._clearAdTimeoutAndPlay=function(){var e=this;e._adsReady=!0,e._adTimeout&&(clearTimeout(e._adTimeout),e._adTimeout=null,e._maybePlayImpl())},n.prototype.maybePlay=function(e,t){var r=this;if(!r._enabled)return void t(!1);if(f&&f.startDebugMode(y.PERF.VP_AD_MAYBE_PLAY),r._cb=t,"start"===e)r._currentAdPosition=a.POSITION.bumper,r._setupTimeout();else{if("end"!==e)return void r._cb(!1);r._currentAdPosition=a.POSITION.postroll}r._resetAdPlaybackInfo(),r._resetState(),r._adTimeout||r._maybePlayImpl()},n.prototype._countAds=function(e,t){var r,n,o,i=this,s=i._ads,l=Object.keys(s),d=function(e,t){return e.some(function(e){return t===e})},c=0;if(!s||!e||"object"!=typeof s)return c;"string"==typeof e&&(e=[e]),l=Object.keys(s);for(var p=0;p<l.length;p++)r=l[p],n=s[r].pos,t&&s[r].type===a.ADTYPES.NO_AD||(o=d(e,n),o&&c++);return c},n.prototype._maybePlayImpl=function(){var e=this,t=e._playCount>0;if(f&&f.endDebugMode(y.PERF.VP_AD_MAYBE_PLAY),e._currentAdPosition!==a.POSITION.bumper||o(e._ads,function(e){return e.pos===a.POSITION.bumper})||(e._currentAdPosition=a.POSITION.preroll),e._currentAdId=i(e._ads,function(t){return t.pos===e._currentAdPosition}),e._currentAdId){var r=e._ads[e._currentAdId];r.playbackProgress=0,e._model.playbackState.ad=r,e._currentAdPosition===a.POSITION.midroll?r.type!==a.ADTYPES.NO_AD&&(e._midrollCurrent++,e._eventBus.publish(s.UPDATE_AD_COUNT,e._midrollCurrent,e._midrollCount)):e._eventBus.publish(s.UPDATE_AD_COUNT),e._eventBus.publish(s.AD_PLAYBACK_REQUEST,r.playbackId),e._play(r)}else e._model.playback.adPlaybackOnly||e._cb(t)},n.prototype._resetState=function(){var e=this;e._currentAdId=null,e._model.playbackState.ad=null,e._hasPlaybackStarted=!1},n.prototype._resetAdPlaybackInfo=function(){var e=this;e._playCount=0,e._adsStartedCount=0,e._adsErrorCount=0,e._erroredAdsDuration=0,e._adsPlayDurationExpected=0,e._adsPlayDurationActual=0,e._playedAdCreativeIds=[],e._unplayedDuration=0,e._adBreakCancelReason="na",e._adBreakCueInTime="na"},n.prototype._play=function(e){var t,r=this,n=r._model.adsRendererTypes;if(e.type===a.ADTYPES.VPAID)t=-1!==n.indexOf(v.FLASH_SIMPLE)?v.FLASH_SIMPLE:n.length>0?n[0]:v.HTML5_RAW,f&&f.startDebugMode(y.PERF.VP_AD_VPAID_PREPARE_RENDERER),r._view.prepareNextRenderer({rendererType:t,ad:e},function(){f&&f.endDebugMode(y.PERF.VP_AD_VPAID_PREPARE_RENDERER),r._view.switchToNextRenderer(),f&&f.startDebugMode(y.PERF.VP_AD_PREPARE_START),r._playVPAIDAd(e)});else if(e.type===a.ADTYPES.NO_AD)r._eventBus.publish(s.Ad.NO_AD,r._currentAdId),r._onAdPlaybackEnded();else{var o,i,c=r._model.adsCapabilities;if(e.streams.length)for(var p=0;p<n.length&&(t=n[p],i=c[t],!(o=d.findStreamByProperty(e.streams,"bitrate",r._targetBitrate,i)));p++);o?(r._playCount++,r._currentAdBitrate=o.bitrate,r._requestedTime=Date.now(),e&&e.adObj&&(e.adObj.mtype=o.format,e.adObj.mapif=o.apiFramework),r._model.playbackState.state=l.VIDEO,f&&f.startDebugMode(y.PERF.VP_AD_NORMAL_PREPARE_RENDERER),r._view.prepareNextRenderer({rendererType:t,ad:e},function(){f&&f.endDebugMode(y.PERF.VP_AD_NORMAL_PREPARE_RENDERER),r._view.preloadNextAdRenderer({bestStream:o,mediaItem:r._mediaItem,rendererType:t,ad:e}),f&&f.startDebugMode(y.PERF.VP_AD_PREPARE_START),r._view.switchAndPlayNextRenderer(),r._model.playback.fullscreen&&r._view.setFullscreen(!0)})):(r._eventBus.publish(s.Ad.NO_PLAYABLE_STREAM,r._currentAdId),r._onEnded())}},n.prototype._playVPAIDAd=function(e){var t=this;t._playCount++,t._model.playbackState.state=l.VIDEO,t._model.playbackState.loading=!1,t._view.syncViewState(),t._model.playbackState.paused||t._view.pause(),t._yvap.renderVPAIDAd(e.playbackId,t._targetBitrate,t._view.rootElem.clientWidth,t._view.rootElem.clientHeight,t._model.playbackState.volume,t._model.playbackState.mute,t._model.playbackState.rendererType)},n.prototype.updateYVAPData=function(e){var t=this;if(t._enabled)try{t._yvap.updatePlayerData(e)}catch(r){_.error("[yvap] updatePlayerData error",r.message||r,r.stack),t._enabled=!1}},n.prototype._onAdsUpdate=function(e){var t=this;e.forEach(function(e){var r=e.playbackId;if(t._ads[r]?Object.keys(e).forEach(function(n){t._ads[r][n]=e[n]}):t._ads[r]=e,e.streams){var n=e.streams.map(function(e){return new p.Stream(e)});t._ads[r].streams=n}})},n.prototype._onAdsReady=function(){var e=this;e._model.YVAP&&(e._model.YVAP.adsReady=!0),f&&f.endDebugMode(y.PERF.VP_AD_WAIT_FOR_AD_READY),e._clearAdTimeoutAndPlay()},n.prototype._onPaused=function(){var e=this;e._model.playbackState.paused=!0,e._eventBus.publish(s.AD_PLAYBACK_PAUSED),e._view.syncViewState()},n.prototype._onPlaying=function(){var e=this;if(e._hasPlaybackStarted)e._eventBus.publish(s.AD_PLAYBACK_RESUMED,e._currentAdId);else{e._hasPlaybackStarted=!0,e._model.playbackState.loading=!1,e._view.syncViewState();var t=Date.now()-e._requestedTime;e._eventBus.publish(s.AD_PLAYBACK_STARTED,e._currentAdId,e._currentAdBitrate,t)}e._model.playbackState.paused=!1,e._view.syncViewState()},n.prototype._onTimeupdate=function(e,t,r){var n=this;n._eventBus.publish(s.AD_PLAYBACK_PROGRESS,n._currentAdId,e,t,r)},n.prototype.cancelAd=function(){var e=this;e._enabled&&(e._eventBus.publish(s.Ad.CANCELED,e._currentAdId),e._clearAndResetAdState(),e._view.syncViewState())},n.prototype._cancelAdBreak=function(e){var t=this;if(t._currentAdId){var r=t._ads[t._currentAdId],n=r.duration-r.playbackProgress,o=[],i=[],a=Object.keys(t._ads);t._unplayedDuration+=n>0?n:0;for(var l=0;l<a.length;l++){var d=a[l],c=t._ads[d];c.pos===t._currentAdPosition&&d!==t._currentAdId&&(o.push(c.adObj.creativeId),i.push(c.playbackId),t._unplayedDuration+=c.duration,delete t._ads[d])}t._yvap.skipAd(),t._unplayedDuration=Math.round(t._unplayedDuration),t._adBreakCancelReason=e||t._adBreakCancelReason,t._eventBus.publish(s.Ad.BREAK_CANCELLED,{currentPlaybackId:t._currentAdId,position:t._currentAdPosition,unplayedCreativeIds:o,unplayedPlaybackIds:i,unplayedDuration:t._unplayedDuration,reason:t._adBreakCancelReason})}},n.prototype._setupAdBreakForceEndTimeout=function(e){var t=this;if(window.clearTimeout(t._adbreakForceEndTimeout),t._adbreakForceEndTimeout=null,e.adDuration){var r=10;t._adbreakForceEndTimeout=window.setTimeout(function(){window.clearTimeout(t._adbreakForceEndTimeout),t._adbreakForceEndTimeout=null,t._cancelAdBreak("timeout")},1e3*(e.adDuration+r))}},n.prototype._clearAndResetAdState=function(){var e=this;e._currentAdId&&(delete e._ads[e._currentAdId],e._resetState())},n.prototype._onEnded=function(){var e=this;e._eventBus.publish(s.AD_PLAYBACK_ENDED,e._currentAdId)},n.prototype._onAdPlaybackStarted=function(e,t,r,n,o,i){var a=this,s=a._ads[a._currentAdId];f&&f.endDebugMode(y.PERF.VP_AD_PREPARE_START),s&&(a._maybePrepareNextContent(),a._trackPlayedAds(r,i))},n.prototype._maybePrepareNextContent=function(){var e=this,t=e._ads[e._currentAdId],r=[a.POSITION.bumper,a.POSITION.preroll],n=!0;t&&-1!==r.indexOf(t.pos)&&1===e._countAds(r,n)&&e._eventBus.publish(s.RENDERER_PP_NEXT,e._mediaItem)},n.prototype._trackPlayedAds=function(e,t){var r=this,n=r._ads[r._currentAdId],o=r._currentAdId,i=r._eventBus.subscribe(s.AD_PLAYBACK_PROGRESS,function(e,t,a){i(),o===r._currentAdId&&(r._adsPlayDurationActual+=a,r._adsPlayDurationExpected+=n.duration)},r);if(r._adsStartedCount++,n.type!==a.ADTYPES.NO_AD){n.adObj&&n.adObj.creativeId&&r._playedAdCreativeIds.push(n.adObj.creativeId);var l=n.type===a.ADTYPES.VPAID?t:e;r._fireAdBreakInfoEvt&&r._fireAdBreakInfoEvt(l)}},n.prototype._onAdPlaybackEnded=function(){var e=this;e._clearAndResetAdState(),e._maybePlayImpl()},n.prototype._onError=function(e,t){var r=this;_.error("Ad errored out",e),r._eventBus.publish(s.AD_PLAYBACK_ERROR,r._currentAdId,e,t);var n=r._ads[r._currentAdId];r._adsErrorCount++,r._erroredAdsDuration+=n&&n.duration||0,r._onEnded()},n.prototype._onClick=function(e){var t=this;if(t._currentAdId){var r=t._ads[t._currentAdId];t._eventBus.publish(s.AD_CLICK,t._currentAdId,e),window.open(r.clickUrl,"_blank")}},n.prototype.hasOccured=function(e){var t=(new Date).getTime(),r=t-e;return 36e5>r},n.prototype._onAdBreakTimeline=function(e){var t=this;c.mobile||(t._vodAdBreaks=e.map(function(e,r){return{time:e,occurred:t.hasOccured(t._lastBreaks[r]||0)}}),t._eventBus.publish(s.UPDATE_AD_BREAKS,t._vodAdBreaks))},n.prototype._startAdBreak=function(e,t,r){var n=this;n._resetAdPlaybackInfo(),n._resetState(),n._currentAdPosition=a.POSITION.midroll,t.occurred=!0,n._nextBreak=null,void 0!==t.adDuration&&n._eventBus.publish(s.UPDATE_AD_BREAKS,n._vodAdBreaks),n._cb=function(e){if(window.clearTimeout(n._adbreakForceEndTimeout),n._adbreakForceEndTimeout=null,e){var t=(new Date).getTime(),o=n._eventBus.subscribe(s.Video.PLAYING,function(){o();var e=(new Date).getTime()-t;n._fireAdBreakEndedEvt&&n._fireAdBreakEndedEvt(e)});n._breakEndEvtTimeout=window.setTimeout(n._fireAdBreakEndedEvt,5e3,"TO")}else n._fireAdBreakEndedEvt&&n._fireAdBreakEndedEvt();r(e)};var o=n._yvap.getMidrollAds(t.time,t.adDuration);n._eventBus.publish(s.AD_BREAK_STARTED,e,t.time);var i=o.filter(function(e){return e.type!==a.ADTYPES.NO_AD});n._createAdBreakEvtSenders(e,t,o,i),o.length>0?(n._midrollCount=i.length,n._midrollCurrent=0,n._eventBus.publish(s.ADS_OBJS_UPDATE,o),n._midrollCount>0?(n._breakInfoEvtTimeout=window.setTimeout(n._fireAdBreakInfoEvt,5e3,"TO"),n._setupAdBreakForceEndTimeout(t)):n._fireAdBreakInfoEvt(),n._maybePlayImpl()):(n._fireAdBreakInfoEvt(),n._cb(!1))},n.prototype.maybeAdBreak=function(e,t){var r=this,n=e.currentTime,o=e.isLive,i=e.adDuration;if(o||!(10>n)){if(!r._enabled)return void t(!1);if(!r._model.playbackState.seeking){if(o){var a={time:n,adDuration:i};return void r._startAdBreak(n,a,t)}r._nextBreak||(r._nextBreak=r._findNextBreak(n,r._vodAdBreaks.filter(function(e){return!e.occurred})));var s=function(e){t(e,d)};if(r._seeked){r._seeked=!1,r._nextBreak=null;var l=r._findPreviousBreak(n,r._vodAdBreaks),d=r._vodAdBreaks.indexOf(l);l&&!l.occurred&&r._startAdBreak(n,l,s)}else r._nextBreak&&r._nextBreak.time<n?r._startAdBreak(n,r._nextBreak,s):t(!1)}}},n.prototype.maybeEndAdBreak=function(e,t){var r=this;r._adBreakCueInTime="number"==typeof t?t:"unknown",r._cancelAdBreak(e)},n.prototype._createAdBreakEvtSenders=function(e,t,r,n){var o=this;window.clearTimeout(o._breakInfoEvtTimeout),window.clearTimeout(o._breakEndEvtTimeout),o._breakInfoEvtTimeout=null,o._breakEndEvtTimeout=null;var i=0;n.forEach(function(e){i+=e.duration});var a=o._yvap.isAdBlockerDetected();o._fireAdBreakInfoEvt=function(l){window.clearTimeout(o._breakInfoEvtTimeout),o._breakInfoEvtTimeout=null,o._fireAdBreakInfoEvt=null;var d=n.map(function(e){return e.adObj.creativeId});o._eventBus.publish(s.AD_BREAK_INFO,{adStartLatency:l||"na",creativeIds:d,numMidrollsTotal:r.length,numMidrollsValid:n.length,readyAdsDuration:Math.round(i),adBlockerDetected:a,adBreakDuration:t.adDuration,contentTime:e,time:t.time})},o._fireAdBreakEndedEvt=function(r){window.clearTimeout(o._breakEndEvtTimeout),o._breakEndEvtTimeout=null,o._fireAdBreakEndedEvt=null,o._eventBus.publish(s.AD_BREAK_ENDED,{videoStartLatency:r||"na",creativeIds:o._playedAdCreativeIds,adsStartedCount:o._adsStartedCount,readyAdsDuration:Math.round(i),adsPlayDurationExpected:Math.round(o._adsPlayDurationExpected),adsPlayDurationActual:Math.round(o._adsPlayDurationActual),adsErrorCount:o._adsErrorCount,erroredAdsDuration:o._erroredAdsDuration,adBlockerDetected:a,unplayedDuration:o._unplayedDuration,adBreakCueInTime:o._adBreakCueInTime,adBreakDuration:t.adDuration,contentTime:e,time:t.time})}},n.prototype._findNextBreak=function(e,t){var r=null;return t.forEach(function(t){t.time>e&&(!r||t.time<r.time)&&(r=t)}),r},n.prototype._findPreviousBreak=function(e,t){var r=null;return t.forEach(function(t){t.time<e&&(!r||t.time>r.time)&&(r=t)}),r},n.prototype._onSeekEnd=function(){var e=this;e._seeked=!0},n.prototype.destroy=function(){var e=this;e._yvap&&e._yvap.destroy()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./constants":18,"./event":"YJm+dH","./media-store":29,"./perf":43,"./renderers/type":54,"./states":57,"./stream":"Af6MnA","./yvap/ads-json":108,"./yvap/video-ad-plugin":160}],13:[function(e,t,r){"use strict";function n(e,t,r,n,o){var i=this;i._eventBus=e,i._view=r,i._model=t,i._controller=n,i._fetcher=o}t.exports=n,t.exports.AGE_GATE_SCREEN_TYPES=l;var o=e("./util"),i=e("../../lib"),a=e("./event"),s=e("./strings"),l={login:"login",birthday:"birthday",warning:"warning",block:"block"},d="vpReleaseTime",c=864e5,p="WAIT";n.prototype._initiateAgeGateScreen=function(e){var t=this;t._view.destroyAgeGateScreen(),t._view.renderAgeGateScreen(t._getScreenStringsObj(e),t),t._activeScreenType=e,t._eventBus.publish(a.API.UI_INTERACT,{srcElement:"age-"+t._ageGateType}),t._model.ui.showAgeGate=!0,t._waitTimeout&&clearTimeout(t._waitTimeout)},n.prototype.run=function(){var e=this,t=e._model.userPreferences.isAuthenticated,r=!o.isOffNetwork(),n=e._model.userPreferences.isAdult,i=e._isUser24HrsBanned();e._ageGateType=e._model.playlist.getCurrentItem()&&e._model.playlist.getCurrentItem().ageGate;var a=e._getApplicableAgeGateScreen(t,r,n,i);a&&"none"!==e._ageGateType?a===p?e._waitTimeout=setTimeout(function(){e._model.ui.showAgeGate||this._initiateAgeGateScreen(l.warning)},1e4):this._initiateAgeGateScreen(a):e._continuePlayerFlow()},n.prototype._getApplicableAgeGateScreen=function(e,t,r,n){var o=this;return e||n?!n&&r?null:i.isNullOrUndefined(o._model.userPreferences.isAdult)&&!n?(o._fetcher.getUserPreferences(),p):l.block:t?l[o._ageGateType]:o._ageGateType===l.birthday?l[o._ageGateType]:l.warning},n.prototype._getScreenStringsObj=function(e){var t=this,r={title:t._getLocalizedString("CONTENT_RESTRICTED"),desc:"",button:"",isBirthday:!1,isBlock:!1};e===l.login?(r.desc=t._getLocalizedString("AGE_GATE_DESC"),r.button=t._getLocalizedString("SIGN_IN_TO_VIEW_ACTION")):e===l.warning?(r.desc=t._getLocalizedString("AGE_GATE_DESC"),r.button=t._getLocalizedString("CONTINUE_ACTION")):e===l.birthday?(r.desc=t._getLocalizedString("AGE_GATE_BDAY_DESC"),r.button=t._getLocalizedString("SUBMIT_ACTION"),r.isBirthday=!0):e===l.block&&(r.desc=t._getLocalizedString("AGE_GATE_NOT_ALLOWED_DESC"),r.isBlock=!0);var n=t._model.playlist.getCurrentItem();return r.imageSrc=n.images.defaultThumbnail,r.width=t._model.uiState.width,r.height=t._model.uiState.height,r},n.prototype._isUser24HrsBanned=function(){var e=this;if(!e._user24HrsBanned){var t=o.localStorage.get(d);isNaN(parseInt(t))||(e._user24HrsBanned=(new Date).getTime()-t<0)}return e._user24HrsBanned},n.prototype._continuePlayerFlow=function(){var e=this;e._model.ui.showAgeGate=!1,e._view.destroyAgeGateScreen(),e._activeScreenType=null,e._waitTimeout&&clearTimeout(e._waitTimeout),e._controller.play()},n.prototype._getLocalizedString=function(e){return s.i18n[e]},n.prototype._handleLoginClick=function(){var e=this;e._eventBus.publish(a.UI_LOGIN,"ui_agebl"),o.showUserAuthPage(e._model)},n.prototype._handleBirthDayClick=function(e,t){if(t){var r=this,n=r._isValidDate(t.inputMonth.value,t.inputDay.value,t.inputYear.value);o.classList(t.inputMonth).remove("validate-error"),o.classList(t.inputDay).remove("validate-error"),o.classList(t.inputYear).remove("validate-error");for(var i=r._getInvalidDateInputNodes(t.inputMonth,t.inputDay,t.inputYear),a=0;a<i.length;a++)o.classList(i[a]).add("validate-error");if(!n||i.length>0)return;r._isUserAdult(new Date(t.inputYear.value,t.inputMonth.value-1,t.inputDay.value),r._model.baseConfig.region)?r._continuePlayerFlow():(r._initiateAgeGateScreen(l.block),o.localStorage.put(d,(new Date).getTime()+c))}},n.prototype._handleWarningClick=function(){var e=this;e._continuePlayerFlow()},n.prototype.handleClickEvent=function(e,t){var r=this;r._activeScreenType===l.login?r._handleLoginClick(e):r._activeScreenType===l.birthday?(r._eventBus.publish(a.CTRL_AGEGATE_BDAY),r._handleBirthDayClick(e,t)):r._activeScreenType===l.warning&&r._handleWarningClick(e),r._eventBus.publish(a.API.UI_INTERACT,{srcElement:"age-"+r._activeScreenType+"-btn"})},n.prototype._isValidDate=function(e,t,r){var n=/^\d{1,2}$/,o=/^\d{4}$/;if(!(n.test(e)&&n.test(t)&&o.test(r)))return!1;var i=parseInt(t),a=parseInt(e),s=parseInt(r);if(1e3>s||s>3e3||0===a||a>12)return!1;var l=[31,28,31,30,31,30,31,31,30,31,30,31];return(s%400===0||s%100!==0&&s%4===0)&&(l[1]=29),i>0&&i<=l[a-1]},n.prototype._getInvalidDateInputNodes=function(e,t,r){var n,o,i,a,s,l,d=[];try{n=parseInt(e.value),a=n>=1&&12>=n}catch(c){a=!1}try{o=parseInt(t.value),s=o>=1&&31>=o}catch(c){s=!1}try{i=parseInt(r.value),l=i>=1900&&i<=(new Date).getFullYear()}catch(c){l=!1}return a||d.push(e),s||d.push(t),l||d.push(r),d},n.prototype._isUserAdult=function(e,t){if(i.isNullOrUndefined(e))return!1;var r=new Date((new Date).getTime()-e.getTime()).getUTCFullYear()-1970;return t.toLowerCase()in["kr","sg","th"]?r>=21:r>=18},n.prototype.filterNonDigitInput=function(e){var t,r,n,o,i=[9,37,39];return e?(n=e.keyCode,o=e.shiftKey,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,t=n>=48&&57>=n||n>=96&&105>=n||8===n||46===n,r=i.indexOf(n)>-1,!o&&t||r?!0:(e.preventDefault?e.preventDefault():e.returnValue=!1,!1)):!1},n.prototype.isWaitingAuthentication=function(){var e=this;return!i.isNullOrUndefined(e._waitTimeout)},n.prototype.getPlayerWidth=function(){var e=this;return e._model.uiState.width},n.prototype.getPlayerHeight=function(){var e=this;return e._model.uiState.height},n.prototype.destroy=function(){var e=this;e._model.ui.showAgeGate=!0}},{"../../lib":"bRhrlU","./event":"YJm+dH","./strings":"XwKsC9","./util":"jJTEqU"}],14:[function(e,t,r){"use strict";function n(e,t,r,n){function o(e,t){return e-t}var i=this;i._videoTag=e,i._availableBitrates=t?t.sort(o):[],i.reservoirLength=r||s,i.cushionLength=n||l,i.currentBitrate=0,i._bufferingEventsForBitrates={},i._availableBitrates.forEach(function(e){i._bufferingEventsForBitrates[e]=0}),e&&e.addEventListener("waiting",function(){i._bufferingEventsForBitrates[i.currentBitrate]=i._bufferingEventsForBitrates[i.currentBitrate]+1},!1)}t.exports=n;var o=e("./util"),i="yvpTargetBitrate",a=900,s=10,l=20;n.prototype.setTargetBitrate=function(e){o.localStorage.put(i,e)},n.prototype.getTargetBitrate=function(){var e=this,t=o.localStorage.get(i);return t||(t=a,e.setTargetBitrate(a)),t},n.prototype.getBufferOccupancy=function(){for(var e=this,t=e._videoTag.buffered,r=e._videoTag.currentTime,n=0;n<t.length;n++){var o=t.start(n),i=t.end(n);if(r>=o&&i>=r){var a=i-r;if(a>=e._videoTag.length-r)return Number.MAX_VALUE}return a}return 0},n.prototype._getIdealRecommendedBitrate=function(e,t){var r=this;if(t===Number.MAX_VALUE)return r.currentBitrate;var n=e[0];if(t>r.reservoirLength){var o=e[0],i=e[e.length-1],a=(i-o)/r.cushionLength;n=(t-r.reservoirLength)*a+o}return n},n.prototype._findMaxLessEqualIdealRate=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(t>=n)return n}return e[0]},n.prototype._findMinGreaterEqualIdealRate=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n>=t)return n}return e[e.length-1]},n.prototype.getRecommendedBitrate=function(e,t,r){var n=this;t=t||n._availableBitrates,r=void 0===r?n.getBufferOccupancy():r,e=void 0===e?t.indexOf(n.currentBitrate):e;var o=t[e],i=t[0],a=t[t.length-1],s=o===a?a:t[e+1],l=o===i?i:t[e-1],d=n._getIdealRecommendedBitrate(t,r),c=o;return d>=s?c=n._findMaxLessEqualIdealRate(t,d):l>=d&&(c=n._findMinGreaterEqualIdealRate(t,d)),c},n.prototype.getNumberOfBufferingsForBitrate=function(e){var t=this;return t._bufferingEventsForBitrates[e]}},{"./util":"jJTEqU"}],15:[function(e,t,r){"use strict";function n(e,t){var r=this;r._model=e,r._eventBus=t,s=window.chrome,r._session=null,r._sessionStatus=null,r._mediaSession=null,r._currentLocalMediaItem=null,r._currentCastingYVPMediaItem=null,r._receiverAvailable=!1,r._progressTimer=null,s.cast?s.cast.isAvailable?r._initializeCastApi():setTimeout(r._initializeCastApi.bind(r),1e3):window.__onGCastApiAvailable||(window.__onGCastApiAvailable=function(e,t){e&&r._initializeCastApi()},d.lazyLoad(m,1e4,function(e){})),r._eventBus.subscribe(l.MEDIA_ITEM_LOADED,r._onLocalPlayerMediaItemLoaded,r)}function o(e){return{onSuccess:function(){var t=Array.prototype.slice.call(arguments,1);i("[media command executed]",e,t.length?t:"")},onError:function(){var t=Array.prototype.slice.call(arguments,1);a("[media command failed]",e,t.length?t:"")}}}function i(){p.log.apply(console,["[cast]"].concat(Array.prototype.slice.call(arguments)))}function a(){p.warn.apply(console,["[cast]"].concat(Array.prototype.slice.call(arguments)))}t.exports=n;var s,l=e("./event"),d=e("./util"),c=e("../../lib"),p=e("../../lib/logger"),u=e("./error"),_=e("./constants"),m="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",v=1e3,y="urn:x-cast:com.yahoo.video.custom",f={
hls:"application/vnd.apple.mpegurl",dash:"application/dash+xml",mp4:"video/mp4"};n.prototype._initializeCastApi=function(){var e=this,t={CUSTOM:_.CHROMECAST_RECEIVER_ID,DEFAULT:s.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID},r=new s.cast.SessionRequest(t.CUSTOM),n=e._sessionListener.bind(e),o=e._receiverListener.bind(e),a=s.cast.AutoJoinPolicy.PAGE_SCOPED,d=new s.cast.ApiConfig(r,n,o,a),c=function(){i("cast sender-api initialization: Successful"),e._initialized=!0,e._resetCastState(),e._eventBus.subscribe(l.API.UI_INTERACT,e._onUIInteract,e),e._eventBus.subscribe(l.API.PLAYER_MUTE_CHANGE,e.setMute,e),e._eventBus.subscribe(l.CONTROLS_SET_VOLUME,e.setVolume,e),e._eventBus.subscribe(l.API.PLAYER_VOLUME_CHANGE,e.setVolume,e),e._eventBus.subscribe(l.CONTROLS_SEEKING,e.seek,e),e._eventBus.subscribe(l.TOGGLE_PLAY_PAUSE,e._togglePlayPause,e),e._eventBus.subscribe(l.CC.TOGGLE,e._onCCToggle,e)},p=function(t){i("cast sender-api initialization: Error",t),e._initialized=!1};s.cast.initialize(d,c,p)},n.prototype._resetCastState=function(){var e=this;e._model.castState={connected:!1,mediaLoaded:!1,paused:!1,playerState:s.cast.media.PlayerState.IDLE,progress:null,volume:{level:null,muted:null},items:{},currentItemId:null,currentItemYVPUUID:null,captionsOn:!1,captionsAvailable:!1},e._model.castState.getCurrentCastingYVPMediaItem=function(){return e._model.playlist.getMediaItemById(this.currentItemYVPUUID)}},n.prototype._receiverListener=function(e){i("receiverStatus",e);var t=this;t._receiverAvailable=e===s.cast.ReceiverAvailability.AVAILABLE,t._updateCastingAvailability(),!t._receiverAvailable&&t._session&&t._updateSession(null)},n.prototype._togglePlayPause=function(){var e=this;if(e._session)if(e.isCastMediaLoaded()){var t=e._model.castState.playerState;t===s.cast.media.PlayerState.PLAYING?e.pause():e.play()}else e._requestMediaLoad()},n.prototype._onCCToggle=function(e){var t=this;t.isCastMediaLoaded()&&(e?t._enableCaptions():t._disableCaptions())},n.prototype._updateCastingAvailability=function(){var e=this,t=e._receiverAvailable&&e._isMediaItemCastable(e._currentLocalMediaItem);e._eventBus.publish(l.API.CAST_AVAILABILITY_CHANGE,t),i("Is receiver available: %s. Is casting available = %s",e._receiverAvailable,t)},n.prototype._sessionListener=function(e){i("sessionListener found pre-existing session for auto-joining with numMediaItems="+e.media.length);var t=this;t._updateSession(e),0!==e.media.length&&(t._onMediaDiscovered("Auto-Joining exisiting session",e.media[0]),t._onMediaStatusUpdate())},n.prototype._requestNewCastingSession=function(){var e=this;i("requesting new casting session"),s.cast.requestSession(e._onRequestSessionSuccess.bind(e),e._onRequestSessionError.bind(e))},n.prototype._onRequestSessionSuccess=function(e){i("new casting session request: success");var t=this;t._updateSession(e),t._requestMediaLoad()},n.prototype._onRequestSessionError=function(e){var t=this;i("new casting session request: error",e),t._publishCastError(u.CAST_CODES.E_CAST_CONNECTION_REQUEST_FAILED,e)},n.prototype._updateSession=function(e){i("updateSession",{session:e});var t=this;if(t._session=e,!e){var r=t._model.castState.items[t._model.castState.currentItemId];return t._updateCastingMediaSession(null),void t._handleCastConnectionChanged(!1,r)}t._session.addUpdateListener(t._sessionUpdateListener.bind(t)),t._sessionUpdateListener(),t._session.addMediaListener(function(e){i("** Session.Medialistener **** A sender from current session changed a media on cast device",e)}),t._session.addMessageListener(y,function(e,t){var r=JSON.parse(t);i("** cast msg received **",r)})},n.prototype._sessionUpdateListener=function(){var e=this,t=s.cast.SessionStatus;if(i("_sessionUpdateListener, status=",e._session.status,{s:e._session}),e._sessionStatus!==e._session.status)switch(e._sessionStatus=e._session.status,e._session.status){case t.STOPPED:e._updateSession(null);break;case t.CONNECTED:e._handleCastConnectionChanged(!0);break;case t.DISCONNECTED:}e._session&&(e._model.castState.volume.level!==e._session.receiver.volume.level&&(e._model.castState.volume.level=e._session.receiver.volume.level,e._eventBus.publish(l.CAST.VOLUME_CHANGED,e._session.receiver.volume.level)),e._model.castState.volume.muted!==e._session.receiver.volume.muted&&(e._model.castState.volume.muted=e._session.receiver.volume.muted,e._eventBus.publish(l.CAST.MUTE_CHANGED,e._session.receiver.volume.muted)))},n.prototype._endSession=function(){var e=this,t=function(e){i("end session success")},r=function(){i("end session error",arguments)};e._session.stop(t,r)},n.prototype._onLocalPlayerMediaItemLoaded=function(e){var t=this;t._currentLocalMediaItem=e,t._updateCastingAvailability()},n.prototype._onUIInteract=function(e){var t=this;switch(e.srcElement){case"ctrl-cast-start":case"ctrl-cast-stop":i("chromecast icon clicked"),t.isCastConnected()?t._endSession():t._requestNewCastingSession();break;case"ctrl-cast-disconnect":t._endSession();break;case"ctrl-cast-overlay":t._eventBus.publish(l.TOGGLE_PLAY_PAUSE)}},n.prototype._requestMediaLoad=function(){var e=this;if(i("sending request for media-load"),e._session&&!e._attemptingLoadMedia){var t=e._model.playlist.position,r=e._generateMediaInfo(e._currentLocalMediaItem),n=new s.cast.media.LoadRequest(r);n.autoplay=!0,n.currentTime=e._currentLocalMediaItem.progress.position||0,n.customData={media_uuid:r.customData.uuid,playlist_pos:t>-1?t:"unknown",videoSession:e._currentLocalMediaItem.videoSession,pageSpaceId:e._model.baseConfig.pageSpaceId,site:e._model.baseConfig.site,pls:e._model.guid,senderType:"desktop"};var o=function(t){e._attemptingLoadMedia=!1,e._onMediaDiscovered("loadMedia request",t)},a=function(){e._attemptingLoadMedia=!1,i("receiver cast device media load request errored",arguments)};e._attemptingLoadMedia=!0,e._session.loadMedia(n,o,a)}},n.prototype._onMediaDiscovered=function(e,t){var r=this;if(i("New casting media discovered via:",e),r._mediaSession===t)return void i("same mediasession as before, therefore not updating it");r._updateCastingMediaSession(t);var n=r._onMediaStatusUpdate.bind(r);r._mediaSession.addUpdateListener(n),t.currentTime&&t.items&&t.items.length&&r._eventBus.publish(l.CAST.PLAYBACK_PROGRESS,t.media.customData.uuid,t.currentTime,t.media.duration),setTimeout(function(){var e=r._mediaSession;e&&e.playerState!==r._model.castState.playerState&&(a("playerState not synced. _onMediaStatusUpdate() was not called. calling _checkReceiverPlayerStatus"),r._checkReceiverPlayerStatus())},2e3)},n.prototype._onMediaStatusUpdate=function(){var e=this,t=e._model.castState.currentItemId;if(i("_onMediaStatusUpdate.",e._mediaSession.playerState,{mediasession:e._mediaSession}),e._hasLoadedMediaChanged()&&(e._awaitingPlaybackStart=!0,e._handleCastMediaChanged(e._mediaSession.media.customData)),e._model.castState.currentItemId=e._mediaSession.currentItemId,e._model.castState.playerState!==e._mediaSession.playerState){e._stopProgressTimer();var r=e._model.castState.playerState;switch(e._model.castState.playerState=e._mediaSession.playerState,r===s.cast.media.PlayerState.BUFFERING&&e._handleCastBufferingChanged(!1),e._mediaSession.playerState){case s.cast.media.PlayerState.PLAYING:e._progressTimer=setInterval(e._updateProgress.bind(e),v),e._awaitingPlaybackStart&&(e._awaitingPlaybackStart=!1,e._handleCastPlayingChanged(!0));break;case s.cast.media.PlayerState.PAUSED:e._awaitingPlaybackStart=!0,e._handleCastPlayingChanged(!1);break;case s.cast.media.PlayerState.BUFFERING:e._handleCastBufferingChanged(!0);break;case s.cast.media.PlayerState.IDLE:e._mediaSession.idleReason===s.cast.media.IdleReason.FINISHED&&e._handleCastVideoEnded(t),e._hasPlaylistEnded()&&(e._handleCastMediaChanged(null),e._handleCastPlaylistEnded(),e._updateCastingMediaSession(null))}}},n.prototype._hasLoadedMediaChanged=function(){var e=this,t=e._mediaSession.currentItemId,r=null!==t&&t!==e._model.castState.currentItemId;return r},n.prototype._hasPlaylistEnded=function(){var e=this;return null===e._mediaSession.items},n.prototype._updateCastingMediaSession=function(e){var t=this;t._mediaSession=e,t._mediaSession||(t._currentCastingYVPMediaItem=null,t._model.castState.currentItemId=null,t._model.castState.currentItemYVPUUID=null,t._model.castState.paused=!1,t._model.castState.mediaLoaded=!1,t._stopProgressTimer(),t._model.castState.captionsAvailable=!1),t._attemptingLoadMedia=!1,t._updatePlaylistItemsData()},n.prototype._handleCastConnectionChanged=function(e,t){if("boolean"==typeof e){var r=this,n=r._model.castState;if(e!==n.connected){var o={};e?o.receiverName=r._session.receiver.friendlyName:t&&(o.uuid=t.media_uuid,o.playlist_pos=t.playlist_pos),r._model.castState.connected=e,r._eventBus.publish(l.CAST.CONNECTION_STATUS_CHANGED,e,o),!e&&r._resetCastState()}}},n.prototype._handleCastMediaChanged=function(e){var t=this;if(t._model.castState.mediaLoaded=!!e,e?(t._model.castState.currentItemYVPUUID=e.uuid,t._currentCastingYVPMediaItem=t._model.castState.getCurrentCastingYVPMediaItem()):t._model.castState.currentItemYVPUUID=null,t._eventBus.publish(l.CAST.MEDIA_CHANGED,e),e){var r=t._mediaSession.media&&t._mediaSession.currentItemId||null,n=null!==r?t._model.castState.items[r]:null;t._model.castState.captionsAvailable=!!(n&&n.captions&&n.captions.length)}else t._model.castState.captionsAvailable=!1;t._eventBus.publish(l.CAST.CAPTION_AVAILABILITY_CHANGED,t._model.castState.captionsAvailable),t._model.castState.captionsAvailable&&t._model.userPreferences.closedCaptions.show&&t._enableCaptions()},n.prototype._handleCastPlayingChanged=function(e){var t=this;t._model.castState.paused=!e,t._eventBus.publish(l.CAST.TOGGLE_PLAYING,e)},n.prototype._handleCastBufferingChanged=function(e){var t=this;t._eventBus.publish(l.CAST.BUFFERING,e)},n.prototype._handleCastVideoEnded=function(e){var t=this;t._model.castState.mediaLoaded=!1,t._model.castState.paused=!1,t._currentCastingYVPMediaItem&&(t._currentCastingYVPMediaItem.progress.position=0);var r=t._model.castState.items[e];t._eventBus.publish(l.CAST.VIDEO_ENDED,r.media_uuid)},n.prototype._handleCastPlaylistEnded=function(e){var t=this;t._eventBus.publish(l.CAST.PLAYLIST_ENDED)},n.prototype._checkReceiverPlayerStatus=function(){var e=this,t=o("get-status");e._mediaSession&&e._mediaSession.getStatus(null,t.onSuccess,t.onError)},n.prototype._updateProgress=function(){var e=this;if(e._session&&e._mediaSession){var t,r=e._mediaSession.media;r&&null!==r.duration?(t=e._mediaSession.getEstimatedTime(),e._eventBus.publish(l.CAST.PLAYBACK_PROGRESS,r.customData.uuid,t,r.duration)):(t=0,e._stopProgressTimer()),e._currentCastingYVPMediaItem&&(e._currentCastingYVPMediaItem.progress.position=t),e._model.castState.progress=t}},n.prototype._stopProgressTimer=function(){var e=this;e._progressTimer&&(clearInterval(e._progressTimer),e._progressTimer=null)},n.prototype._updatePlaylistItemsData=function(){var e=this;e._model.castState.items={};var t=e._mediaSession&&e._mediaSession.items;t&&t.forEach(function(t){var r=[];t.media.tracks&&t.media.tracks.forEach(function(e){e.type===s.cast.media.TrackType.TEXT&&r.push(e)}),e._model.castState.items[t.itemId]=t.customData,e._model.castState.items[t.itemId].captions=r})},n.prototype._enqueueMediaOnReceiver=function(e){var t=this,r=t._model.playlist,n=[],o=r.items.length-r.position-1,i=r.position+1;e&&(o=e.length,i=0);for(var a=i,s=i+o;s>a;a++){var l=e?e[a]:r.getMediaItemAt(a);l&&t._isMediaItemCastable(l)&&n.push(l)}n.length&&t._insertMediaItems(n)},n.prototype._insertMediaItems=function(e){var t=this,r=[];e.forEach(function(e){var n=t._generateMediaInfo(e),o=new s.cast.media.QueueItem(n);o.autoplay=!0,o.customData={media_uuid:n.customData.uuid,playlist_pos:"unknown"},o.preloadTime=10,o.startTime=0,r.push(o)});var n=new s.cast.media.QueueInsertItemsRequest(r),a=o("queue-items"),l=function(){i("queue-items successful"),t._updatePlaylistItemsData()};t._mediaSession.queueInsertItems(n,l,a.onError)},n.prototype._generateMediaInfo=function(e){var t=this,r=s.cast.media.StreamType,n=Math.floor(e.streams.length/2),o=e.streams[n].url,i=e.images.large||e.images.thumbnail||e.images.medium||e.images.small||e.images.provider,a=new s.cast.media.MediaInfo(o);a.metadata=new s.cast.media.GenericMediaMetadata,a.metadata.metadataType=s.cast.media.MetadataType.GENERIC,a.metadata.title=e.title,a.metadata.images=[{url:i}],a.streamType=e.isLive()?r.LIVE:r.BUFFERED,a.duration=e.duration,a.customData={uuid:e.id,title:e.title,thumbnail:i,mediaURL:o,isCCM:e.isCCM};var l=e.getType();return a.contentType=f[l],a.textTrackStyle=new s.cast.media.TextTrackStyle,a.tracks=t._createMediaInfoTracks(e,a),a},n.prototype._createMediaInfoTracks=function(e){var t;if(e.closedCaptions.length){var r=1,n=[];e.closedCaptions.forEach(function(e){var t=new s.cast.media.Track(r,s.cast.media.TrackType.TEXT);t.trackContentId=e.url,t.trackContentType=e.content_type,t.language=e.lang,t.name=e.lang,t.customData=null,r++,n.push(t)}),t=n.sort(function(e,t){return e.language===t.language?-1*e.trackContentType.localeCompare(t.trackContentType):e.language.localeCompare(t.language)})}return t},n.prototype._isMediaItemCastable=function(e){return!0},n.prototype._publishCastError=function(e,t){var r=this;r._eventBus.publish(l.WARNING,d.createErr("P",r._model.playbackState,u.E_CAST,e,t))},n.prototype._setCaptionTracks=function(e,t,r){var n=this,o=new s.cast.media.EditTracksInfoRequest(e);n._mediaSession.editTracksInfo(o,t,r)},n.prototype._enableCaptions=function(e){var t=this;if(t._mediaSession&&!c.isNullOrUndefined(t._mediaSession.currentItemId)){e=(e||t._model.userPreferences.closedCaptions.lang).toLocaleLowerCase();var r=t._model.castState,n=r.items[t._mediaSession.currentItemId].captions;if(0!==n.length){for(var o,s=function(){i("enable-captions successful"),r.captionsOn=!0},l=function(){a("enable-captions error")},d=0;d<n.length;d++){var p=(n[d].language||"").toLocaleLowerCase();if(p===e){o=n[d];break}}o||(o=n[0]),t._setCaptionTracks([o.trackId],s,l)}}},n.prototype._disableCaptions=function(){var e=this;if(e._mediaSession&&!c.isNullOrUndefined(e._mediaSession.currentItemId)){var t=function(){i("disable-captions successful"),e._model.castState.captionsOn=!1},r=function(){a("disable-captions error")};e._setCaptionTracks([],t,r)}},n.prototype._executeMediaCommand=function(e,t){var r=this;if(!r._mediaSession)return void i("trying "+e+" without a casting media loaded");if(!r._mediaSession[e])return void i("Command "+e+" is not allowed to be executed");var n=null;if("seek"===e){if("number"!=typeof t||0>t)throw"numSeconds while requesting seek on cast device needs to be defined and positive";n=new s.cast.media.SeekRequest,n.currentTime=t||0,n.resumeState=s.cast.media.ResumeState.PLAYBACK_START}var a=o(e);r._mediaSession[e](n,a.onSuccess,a.onError)},n.prototype.isCastMediaLoaded=function(){var e=this;if(e._initialized){var t=s.cast.media.PlayerState;return!(!e._mediaSession||e._mediaSession.playerState===t.IDLE)}return!1},n.prototype.isCastConnected=function(){var e=this;return e._initialized?!(!e._session||e._session.status!==s.cast.SessionStatus.CONNECTED):!1},n.prototype.play=function(){var e=this;e.isCastMediaLoaded()?e._executeMediaCommand("play"):(i("no castingMediaLoaded. Requesting to load media and cancelling this play request"),e._requestMediaLoad())},n.prototype.pause=function(){var e=this;e._executeMediaCommand("pause")},n.prototype.stop=function(){var e=this;e._executeMediaCommand("stop")},n.prototype.seek=function(e){var t=this;t._executeMediaCommand("seek",e)},n.prototype.setMute=function(e){var t=this;t._session&&t._session.setReceiverMuted(e)},n.prototype.setVolume=function(e){var t=this;t._session&&t._session.setReceiverVolumeLevel(e)}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./constants":18,"./error":22,"./event":"YJm+dH","./util":"jJTEqU"}],zKzgQw:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._eventBus=e,n._model=t,n._view=r,n._userPreferences=n._model.userPreferences.closedCaptions,n._syncCCLocalStorage(),n._eventBus.subscribe(s.Video.PLAYING,n._onVideoPlaybackStarted,n),n._eventBus.subscribe(s.PLAYBACK_STARTED,n._onVideoPlaybackStarted,n),l.tv||(n._eventBus.subscribe(s.AD_PLAYBACK_STARTED,n._onAdPlaybackStarted,n),n._eventBus.subscribe(s.Ad.PLAYING,n._onAdPlaybackStarted,n),n._eventBus.subscribe(s.AD_BREAK_STARTED,n._onAdPlaybackStarted,n),n._eventBus.subscribe(s.AD_BREAK_ENDED,n._onVideoPlaybackStarted,n)),n._eventBus.subscribe(s.PLAYBACK_ENDED,n.disable,n),n._eventBus.subscribe(s.PLAYBACK_PROGRESS,n._onPlaybackProgress,n),n._eventBus.subscribe(s.FULLSCREEN_CHANGE,n._adjustCCSizeToScreen,n),n._eventBus.subscribe(s.API.PLAYER_VIEWPORT_CHANGE,n._adjustCCSizeToScreen,n),n._eventBus.subscribe(s.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),n._eventBus.subscribe(s.VTT_SEGMENT_LOADED,n._loadVttSegment,n),n._eventBus.subscribe(s.CC.REQUEST_UI_DATA_FOR_MEDIA_ITEM,n._onMediaItemLoaded,n),n._eventBus.subscribe(s.CC.LANGUAGE_CHANGE,n._onLanguageChange,n),n._eventBus.subscribe(s.CC.UI_TOGGLE,n._toggleFromUI,n),n._eventBus.subscribe(s.CC.UPDATE_STYLE,n._updateCCStyle,n),n._eventBus.subscribe(s.CC.POSITION_CHANGE,n._updateCCPosition,n),n._eventBus.subscribe(s.CC.POSITION_FLOAT,n._floatCCPosition,n),n._eventBus.subscribe(s.CC.SAVE_TO_LOCAL_STORAGE,n._saveCCSettingsToLocalStorage,n),n._eventBus.subscribe(s.RECOVERY_START,n._onRecoveryStart,n),n._eventBus.subscribe(s.CC.USER_STYLE_PREFERENCES_CHANGE,n._syncCCPreferences,n),n._isAvailable=!1,n._vttPresent=!1,n._currentMediaCCPool=[],n._defaultLang=p,n._ccElement=document.createElement("div"),i.classList(n._ccElement).add("cc-element"),n._CCElementInnerSpan=document.createElement("span"),n._ccElement.appendChild(n._CCElementInnerSpan),n._currentFontSize=n._userPreferences.fontSize,n._updateCCStyle(),n._view.getMainElement()&&n._view.getMainElement().appendChild(n._ccElement),(l.tv||l.safariDesktop&&n._model.isHtmlEnforced())&&a.isFunction(d)&&(n._vttFetcher=new d(n._eventBus,n._model))}var o=e("xhr"),i=e("./util"),a=e("../../lib"),s=(e("../../lib/logger"),e("./event")),l=e("../../lib/user-agent"),d=e("./vtt-fetcher"),c=e("./renderers/type");t.exports=n;var p="en-us",u="text/vtt",_="application/ttml+xml",m="yvpCC",v={none:"",dropshadow:"2px 1px 1px rgba(0, 0, 0, 1)",raised:"3px 3px 4px rgba(0, 0, 0, 0.75)",depressed:"0px -4px 4px rgba(0, 0, 0, 0.54)",uniform:"-2px -2px 0 #000, -2px 2px 0 #000, -2px 0 0 #000, 2px -2px 0 #000, 2px 2px 0 #000, 2px 0 0 #000, 0 -2px 0 #000, 0 2px 0 #000"},y=Math.floor((Math.pow(2,33)-1)/90);n.prototype._onPlaybackProgress=function(e,t,r){var n=this;n._isLive?n._renderLiveCC(t):n._renderVODCC(t,r)},n.prototype._renderVODCC=function(e,t){var r=this;if(!r._isAvailable||!r._currentCCParsedCaptions||!r._currentCCParsedCaptions.length)return void(r._CCElementInnerSpan.innerHTML="");for(var n=e/t,o=Math.floor(n*r._currentCCParsedCaptions.length);o>0&&o<r._currentCCParsedCaptions.length&&e<r._currentCCParsedCaptions[o].begin;)o--;for(;o<r._currentCCParsedCaptions.length&&e>r._currentCCParsedCaptions[o].end;)o++;var i=o>=0&&o<r._currentCCParsedCaptions.length;if(i=i&&r._currentCCParsedCaptions[o].begin<=e&&e<=r._currentCCParsedCaptions[o].end&&!!r._currentCCParsedCaptions[o].text){r._decorateCCSpan(!0);var a=r._currentCCParsedCaptions[o].text||"";r._CCElementInnerSpan.innerHTML=l.tv?a:r._breakLinesAndPadSides(a)}else r._CCElementInnerSpan.innerHTML="",r._decorateCCSpan()},n.prototype._decorateCCSpan=function(e){var t=this;if(t._CCSpanHasBeenDecorated!==e){var r=0,n=0;e&&i.classList(t._ccElement).contains("yvp-show")&&(r="1.38em",n="0.104em"),t._CCSpanHasBeenDecorated=e,t._CCElementInnerSpan.style.lineHeight=r,t._CCElementInnerSpan.style.padding=n}},n.prototype._breakLinesAndPadSides=function(e){var t,r=this;if(e){var n=e.split("<br/>");if(n.length>1){for(t=0;t<n.length;t++)n[t].trim()&&(n[t]="&nbsp;"+n[t]+"&nbsp;",t<n.length-1&&(n[t]+="<br/>"));return n.join("")}e=e.trim(),r._CCElementInnerSpan.innerHTML=e;var o,i=Math.floor(r._CCElementInnerSpan.offsetHeight/(r._currentFontSize+2)),a=[],s=0;for(t=0;i>t;t++){if(o=t===i-1)l=e.length;else{var l=Math.floor(e.length/i*(t+1));/\s/.test(e.charAt(l))||(l=e.indexOf(" ",e.lastIndexOf(" ",l)))}l>s&&a.push("&nbsp;"+e.substring(s,l)+"&nbsp;"+(o?"":"<br/>")),s=l+1}return a.join("")}return e},n.prototype._renderLiveCC=function(e){var t=this;if(t._currentCCParsedCaptions&&t._currentCCParsedCaptions.length){for(var r=0;r<t._currentCCParsedCaptions.length&&t._currentCCParsedCaptions[r].end<e;)r++;if(r>0){var n=setTimeout(function(){t._currentCCParsedCaptions.splice(0,r),n=null},100);if(r>=t._currentCCParsedCaptions.length)return}var o=!1;t._currentCCParsedCaptions[r]&&(o=e>=t._currentCCParsedCaptions[r].begin&&e<=t._currentCCParsedCaptions[r].end),o?(t._decorateCCSpan(!0),t._CCElementInnerSpan.innerHTML=t._breakLinesAndPadSides(t._currentCCParsedCaptions[r].text||"")):t._ccLiveClearTO||(t._ccLiveClearTO=setTimeout(function(){t._CCElementInnerSpan.innerHTML="",t._decorateCCSpan(),clearTimeout(t._ccLiveClearTO),t._ccLiveClearTO=null},1e3))}else""!==t._CCElementInnerSpan.innerHTML&&(t._CCElementInnerSpan.innerHTML="",t._decorateCCSpan())},n.prototype._syncCCLocalStorage=function(){var e=this,t=i.localStorage.get(m),r=t&&t.ccSettings;if(r)for(var n in r)r.hasOwnProperty(n)&&!a.isNullOrUndefined(r[n])&&(e._userPreferences[n]=r[n])},n.prototype._syncCCPreferences=function(){var e=this;e._updateCCStyle()},n.prototype._adjustCCSizeToScreen=function(){var e=this,t=e._view.getMainElement()&&e._view.getMainElement().offsetWidth,r=Math.ceil(e._userPreferences.fontSize*(t/640));t>640?r=Math.ceil(.8*r):640>t?10>r&&(r=10):r=e._userPreferences.fontSize,e._currentFontSize=r,e._ccElement.style.fontSize=e._currentFontSize+"px"},n.prototype._onLanguageChange=function(e){var t=this;t.enableAndPersist(e)},n.prototype._toggleFromUI=function(e){var t=this;e?t.enableAndPersist():t.disableAndPersist()},n.prototype.enableAndPersist=function(e){var t=this;t._enable(e,!0)},n.prototype.enable=function(e){var t=this;t._enable(e,!1)},n.prototype.disableAndPersist=function(){var e=this;e._disable(!0)},n.prototype.disable=function(){var e=this;e._disable(!1)},n.prototype._onVideoPlaybackStarted=function(){var e=this;e._previouslyPlayingAd&&(e._isAvailable&&(e._userPreferences.show&&e.enable(),e._eventBus.publish(s.CC.SHOW_CONTROLS,!0)),e._previouslyPlayingAd=null)},n.prototype._onAdPlaybackStarted=function(){var e=this;e._previouslyPlayingAd=!0,e._hideAndDisableCC()},n.prototype._hideAndDisableCC=function(e){var t=this;t._eventBus.publish(s.CC.SHOW_CONTROLS,!1),t._currentCC=null,t.disable(),e&&(t._isAvailable=!1,t._currentMediaCCPool=[],t._eventBus.publish(s.CC.REMOVED))},n.prototype._loadVttSegment=function(e,t){var r=this;r._currentCCParsedCaptions&&r._isAvailable||(r._currentCCParsedCaptions=r._currentCCParsedCaptions||[],r._isAvailable=!0,r._eventBus.publish(s.CC.FETCHED,{langList:["en-US"],selectedLang:"en-US"}),r._eventBus.publish(s.CC.SHOW_CONTROLS,!0),r._userPreferences.show&&r.enable());var n=e.adjustedTime?e.adjustedTime:0;r._currentCCParsedCaptions=r._currentCCParsedCaptions.concat(r._parseVTT(e.data,n,t))},n.prototype._onRecoveryStart=function(){var e=this;e._currentCCParsedCaptions=[]},n.prototype._onMediaItemLoaded=function(e){var t=this;t._currentCCParsedCaptions=null,t._isLive=e.isLive(),t._canPlayVtt(e)?(t._vttPresent=!0,t._hideAndDisableCC(!0)):(t._isAvailable=!0,t._currentCC=null,t._eventBus.publish(s.CC.SHOW_CONTROLS,!0),t._processAndPropagateCC(e.closedCaptions))},n.prototype._canPlayVtt=function(e){var t=this;return e?(t._isLive||!t._isLive&&e.rendererType===c.HTML5_HLS)&&e.subtitleStreams&&e.subtitleStreams.length>0?!0:e.closedCaptions&&e.closedCaptions.length?!1:!0:!1},n.prototype._processAndPropagateCC=function(e){var t=this,r=function(e){t._currentMediaCCPool=e,t._currentMediaCCPool.length>0?(l.mobile?t._eventBus.publish(s.CC.FETCH_MOBILE,{langList:t._currentMediaCCPool,selectedLang:t._userPreferences.lang}):t._eventBus.publish(s.CC.FETCHED,{langList:t._currentMediaCCPool.map(function(e){return e.lang}),selectedLang:t._userPreferences.lang}),t._userPreferences.show?t.enable(t._userPreferences.lang):t.disable()):t._hideAndDisableCC(!0)};t._getCCByRenderer(r,e,l.desktop||l.tv)},n.prototype._transformTTMLToVTT=function(e,t){var r=this,n=!1,o=[],i=function(r){o.push(r),o.length===t.length&&e(o)};t.forEach(function(t){r._ccUrlToVttBlobUrl(t.url,function(r){r?(t.url=r,i(t)):(!n&&e(o),n=!0)})})},n.prototype._ccUrlToVttBlobUrl=function(e,t){var r=this,n={url:e};l.ie&&l.ie<10&&(n.cors=!0),o(n,function(n,o,i){if(n)return void t(null);try{var a=e.indexOf("ttml")>-1?r._ttmlToVtt(i):i,s=new Uint8Array(r._utf8ToBytes(a)),l=URL.createObjectURL(new Blob([s],{type:"text/vtt"}));t(l)}catch(n){t(null)}})},n.prototype._getCCByRenderer=function(e,t,r){var n,o=this,i=function(e){return e.content_type===n};if(r)n=_,e(t.filter(i));else{n=u;var a=t.filter(i);0===a.length?o._transformTTMLToVTT(e,t):e(a)}},n.prototype._utf8ToBytes=function(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127>=n)t.push(n);else{var o=r;n>=55296&&57343>=n&&r++;for(var i=encodeURIComponent(e.slice(o,r+1)).substr(1).split("%"),a=0;a<i.length;a++)t.push(parseInt(i[a],16))}}return t},n.prototype._ttmlToVtt=function(e){var t="WEBVTT\n\n",r=new window.DOMParser,n=r.parseFromString(e,"application/xml"),o=n.documentElement.querySelectorAll("p");return Array.prototype.forEach.call(o,function(e){var r=e.getAttribute("id"),n=e.getAttribute("begin"),o=e.getAttribute("end"),i="";Array.prototype.forEach.call(e.childNodes,function(e){""!==e.textContent&&(i+=e.textContent+" ")}),i=i.replace(/<br.*?\/\>/," "),t+=r+"\n",t+=n+" --> "+o+"\n",t+=i+"\n\n"}),t},n.prototype._grabCCFromTTML=function(e){for(var t=this,r=[],n=new window.DOMParser,o=n.parseFromString(e,"application/xml"),i=o.documentElement.querySelectorAll("p"),a=0;a<i.length;a++){var s={};if(s.begin=t._parseToSeconds(i[a].getAttribute("begin")),s.end=t._parseToSeconds(i[a].getAttribute("end")),!s.end&&(s.end=t._parseToSeconds(i[a].getAttribute("dur"))&&t._parseToSeconds(i[a].getAttribute("begin"))+t._parseToSeconds(i[a].getAttribute("dur")),!s.end)){r=null,t._hideAndDisableCC(!0);break}""!==i[a].textContent&&(s.text=i[a].textContent),r.push(s)}return r},n.prototype._parseVTT=function(e,t,r){for(var n,o=this,i=/\r\n|\r|\n/,a=e.split(i),s=a.length,d=/(\d{2,}:\d{2}:?\d{2}\.?\d{3})\s+.+\s+(\d{2,}:\d{2}:?\d{2}\.?\d{3})/,c=[],p=0,u=0,_=0;s>_;_++)if(d.test(a[_])){if(u>0){for(n=u;_>n;n++)c[p].text+=a[n]+(_>n+2?"<br/>":"");p++}var m=a[_].match(d);!r||o._zeroTimeIndicator||l.tizen||(o._zeroTimeIndicator=1e3*o._parseToSeconds(m[1]));var v=1e3*o._parseToSeconds(m[1]),f=1e3*o._parseToSeconds(m[2]);r&&!l.tizen?(v-=o._zeroTimeIndicator,f-=o._zeroTimeIndicator):(v=v%y+t,f=f%y+t),c[p]={begin:v/1e3,end:f/1e3,text:""},u=_+1}if(u>0&&s>u)for(n=u;s>n;n++)c[p].text+=a[n]+(s>n+2?"<br/>":"");return c},n.prototype._parseToSeconds=function(e){if(e){for(var t=0,r=e.split(":"),n=2;n>=0;n--)t+=r[r.length-1-n]*Math.pow(60,n);return t}},n.prototype._saveAndPropagateData=function(e,t){var r,n,o=this;e||(e={}),r=e&&e.show,n=e&&e.lang,o._eventBus.publish(s.CC.TOGGLE,r),t&&(a.isBoolean(r)&&(o._userPreferences.show=r),n&&a.isString(n)&&(o._userPreferences.lang=n),o._eventBus.publish(s.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:o._userPreferences}))},n.prototype._prepareCCForRendering=function(e){var t=this,r={url:e.url};l.ie&&l.ie<10&&(r.cors=!0),e.parsedCC||o(r,function(r,n,o){return r?void t._hideAndDisableCC():void(t._currentCCParsedCaptions=e.parsedCC=t._grabCCFromTTML(o))})},n.prototype._enable=function(e,t){var r=this;return r._isAvailable?r._vttPresent?(i.classList(r._ccElement).remove("yvp-hide"),i.classList(r._ccElement).add("yvp-show"),r._isLive&&i.classList(r._ccElement).add("yvp-live-cc"),r._saveAndPropagateData({show:!0,lang:p},t),!0):(r._currentCC=r._getCCByLanguage(e),r._currentCC||(r._currentCC=r._getCCByLanguage(r._userPreferences.lang)||r._currentMediaCCPool[0]),l.desktop||l.tv?(r._prepareCCForRendering(r._currentCC),r._currentCCParsedCaptions=r._currentCC.parsedCC,i.classList(r._ccElement).remove("yvp-hide"),i.classList(r._ccElement).add("yvp-show"),r._saveAndPropagateData({show:!0,lang:r._currentCC.lang},t),!0):!1):!1},n.prototype._disable=function(e){var t=this;return this._saveAndPropagateData({show:!1},e),t._isLive||t._vttPresent||(t._currentCCParsedCaptions=null),i.classList(t._ccElement).remove("yvp-show"),i.classList(t._ccElement).add("yvp-hide"),t._decorateCCSpan(!1),!0},n.prototype._getCCByLanguage=function(e){for(var t,r=this,n=0;n<r._currentMediaCCPool.length;n++){if(e&&r._currentMediaCCPool[n].lang.toLowerCase()===e.toLowerCase().replace("_","-"))return r._currentMediaCCPool[n];r._currentMediaCCPool[n].lang===p&&(t=r._currentMediaCCPool[n])}return t},n.prototype._updateCCStyle=function(){var e=this;if(e._ccElement){var t=i.cssHexToRgb(e._userPreferences.bgColor)||{r:0,g:0,b:0},r=0===e._userPreferences.bgOpacity?"transparent":"rgba("+t.r+","+t.g+","+t.b+","+e._userPreferences.bgOpacity+")",n=v[e._userPreferences.fontEffect];e._ccElement.style.fontFamily=e._userPreferences.fontName,e._adjustCCSizeToScreen(),e._ccElement.style.color=e._userPreferences.fontColor,e._CCElementInnerSpan.style.backgroundColor=r,e._ccElement.style.textShadow=n,l.tv&&(l.samsung&&e._applyExtraCCSettings(),e._ccElement.style.position="absolute",e._ccElement.style.width="100%",e._ccElement.style.textAlign="center",e._ccElement.style.bottom="14%",e._ccElement.style.zIndex="30")}},n.prototype._floatCCPosition=function(e){var t=this,r=t._ccElement;if(t._isAvailable&&!i.classList(r).contains("yvp-hide")){var n=t._userPreferences.ccPos;"bottom"===n&&(e?(i.classList(r).remove("float"),i.classList(r).add("bottom")):(i.classList(r).add("float"),i.classList(r).remove("bottom")))}},n.prototype._updateCCPosition=function(e){var t=this,r=t._ccElement;e?(i.classList(r).remove("bottom"),i.classList(r).add("top")):(i.classList(r).add("bottom"),i.classList(r).remove("top"))},n.prototype.destroy=function(){},n.prototype._saveCCSettingsToLocalStorage=function(e){var t=i.localStorage.get(m)||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.localStorage.put(m,t)},n.prototype._applyExtraCCSettings=function(){var e=this,t=v[e._userPreferences.fontEffect],r=i.cssHexToRgb(e._userPreferences.windowBgColor)||{r:0,g:0,b:0},n=0===e._userPreferences.windowBgOpacity?"transparent":"rgba("+r.r+","+r.g+","+r.b+","+e._userPreferences.windowBgOpacity+")";e._ccElement.style.backgroundColor=n;var o=i.cssHexToRgb(e._userPreferences.fontColor)||{r:255,g:255,b:255},a=0===e._userPreferences.fontOpacity?"transparent":"rgba("+o.r+","+o.g+","+o.b+","+e._userPreferences.fontOpacity+")";e._CCElementInnerSpan.style.color=a;var s=i.cssHexToRgb(e._userPreferences.fontEdgeColor);switch(e._userPreferences.fontEffect){case"dropshadow":case"raised":case"depressed":t=t.replace("rgba(0, 0, 0","rgba("+s.r+", "+s.g+", "+s.b);break;case"uniform":t=t.replace(/#000/g,e._userPreferences.fontEdgeColor)}e._ccElement.style["text-shadow"]=t},n.prototype.getLanguageForCode=function(e){e=e.toLowerCase().split("-"),e.length>1&&(e.pop(),e=e.join("-"));var t={id:"Bahasa Indonesia",ms:"Bahasa Melayu",cs:"čeština",da:"dansk",de:"Deutsch",et:"eesti",en:"English",es:"español",fil:"Filipino",fr:"français",hr:"hrvatski",it:"italiano",lv:"latviešu",lt:"lietuvių",hu:"magyar",nl:"Nederlands",nb:"norsk bokmål",pl:"polski",pt:"português",ro:"română",sk:"slovenčina",sl:"slovenščina",fi:"suomi",sv:"svenska",vi:"Tiếng Việt",tr:"Türkçe",el:"Ελληνικά",bg:"български",ru:"русский","sr-cyrl":"Српски",uk:"українська",he:"‎עברית‏‎",ar:"‎العربية‏‎",mr:"मराठी",hi:"हिन्दी",bn:"বাংলা",gu:"ગુજરાતી",ta:"தமிழ்",te:"తెలుగు",kn:"ಕನ್ನಡ",ml:"മലയാളം",th:"ไทย",ur:"اردو زبان",ko:"한국어","zh-hans":"简体中文","zh-hant":"繁體中文",ja:"日本人"};return t[e]}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./event":"YJm+dH","./renderers/type":54,"./util":"jJTEqU","./vtt-fetcher":107,xhr:230}],"./nextgen/src/cc.js":[function(e,t,r){t.exports=e("zKzgQw");
},{}],18:[function(e,t,r){"use strict";r.VIDEO_TAG_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},r.CHROMECAST_RECEIVER_ID="EF65F6AF",r.PLAYLIST_THUMB_DIMENSION="130x72",r.PLAYLIST_POS_BOTTOM="bottom",r.PLAYLIST_POS_RIGHT="right",r.PLAYLIST_POS_HIDDEN="hidden",r.PLAYLIST_COUNT_PER_PAGE=12,r.PLAYLIST_HIDDEN_COUNT_PER_PAGE=6,r.PLAYLIST_ENDSCREEN_COUNT_PER_PAGE=12,r.LIVE_STATES_FOR_VOD={SCHEDULED:"scheduled",NO_ARCHIVE:"no-archive",REPLAY:"replay",VOD:"vod"},r.PERF={VP_SCRIPT_EXEC:"VP_SCRIPT_EXEC",VP_INIT:"VP_INIT",VP_CTRL_RENDER:"VP_CTRL_RENDER",VP_CTRL_FETCH_METADATA:"VP_CTRL_FETCH_METADATA",VP_CTRL_PREPARE_AUTOPLAY:"VP_CTRL_PREPARE_AUTOPLAY",VP_CTRL_LOAD_METADATA:"VP_CTRL_LOAD_METADATA",VP_CTRL_PREPARE_START:"VP_CTRL_PREPARE_START",VP_RC_SETUP:"VP_RC_SETUP_",VP_RC_PREPARE_NEXT:"VP_RC_PREPARE_NEXT_",VP_RC_PRELOAD_NEXT_AD:"VP_RC_PRELOAD_NEXT_AD_",VP_RC_PRELOAD_NEXT:"VP_RC_PRELOAD_NEXT_",VP_AD_FETCH:"VP_AD_FETCH",VP_AD_SETUP_TIMEOUT:"VP_AD_SETUP_TIMEOUT",VP_AD_WAIT_FOR_AD_READY:"VP_AD_WAIT_FOR_AD_READY",VP_AD_MAYBE_PLAY:"VP_AD_MAYBE_PLAY",VP_AD_VPAID_PREPARE_RENDERER:"VP_AD_VPAID_PREPARE_RENDERER",VP_AD_PREPARE_START:"VP_AD_PREPARE_START",VP_AD_NORMAL_PREPARE_RENDERER:"VP_AD_NORMAL_PREPARE_RENDERER"},r.PLAYLIST_RENDERING_TYPE={PLAYLIST_ID:"playlist_id",PLAYLIST_ID_AND_MEDIA_ITEMS:"playlist_id_and_mediaItems",ONLY_MEDIA_ITEMS:"mediaItems"}},{}],19:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._profiler=new v(e,r),n._profiler.add(d.Metrics.INIT_TO_STARTSCREEN),n._profiler.add(d.Metrics.INIT_TO_SAPI),n._profiler.add(d.Metrics.RENDER_TO_SWF),n._profiler.add(d.Metrics.VP_CONSTRUCTOR),n._eventBus=new c("internal"),n._model=new m.Model(e,t,r),n._restAPI=new h(n._model,n._profiler),n.ifPlaybackProgressCalled=!1,n._firstPlaylistBatchLoaded=!1,window.performance&&window.performance.timing&&window.performance.timing.navigationStart&&(n._model.metrics.pageLatency=(new Date).getTime()-window.performance.timing.navigationStart),n._model.playback.adPlaybackOnly&&(n._model.playback.autoplay=!0),(g.localStorage.get("yvp-dont-autoplay")||!n._model.isAutoplayAllowed())&&(n._model.playback.autoplay=!1),f.android&&n._model.playback.canPlayInline&&n._model.playback.autoplaySupported&&(n._model.playbackState.waitingForUserTap=!0,n._eventBus.once(d.USERTAP_RESTRICTION_REMOVED,function(){n._model.playbackState.waitingForUserTap=!1})),(!n._model.playback.autoplay||n._model.playbackState.waitingForUserTap)&&(n._model.ui.showStartScreen=!0),n._firstPlay=!0,n._model.playback.autoplay&&(n._profiler.add(d.Metrics.INIT_TO_START),n._profiler.add(d.Metrics.HLS_FIRST_TS_LOAD_START)),n._model.endScreenToPlaylistEnabled()&&n._migrateEndScreenExprience(),n._metrics=new _.Metrics(n._model,n._eventBus,n._profiler,e.rapidConfig),n._eventBus.subscribe(d.ERROR,n._onError,n),n._eventBus.subscribe(d.INFO,n._onError,n),n._eventBus.subscribe(d.WARNING,n._onWarning,n),n._eventBus.subscribe(d.START_SCREEN_CLICK,n._onStartScreenClick,n),n._eventBus.subscribe(d.RELATED_ITEM_CLICK,n._onRelatedItemClick,n),n._eventBus.subscribe(d.FETCH_MORE_RELATED_ITEMS,n._onFetchMoreRelatedItems,n),n._eventBus.subscribe(d.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),n._eventBus.subscribe(d.TOGGLE_PLAY_PAUSE,n._togglePlayPause,n),n._eventBus.subscribe(d.CONTROLS_SEEK_START,n._onControlsSeekStart,n),n._eventBus.subscribe(d.CONTROLS_SEEK_END,n._onControlsSeekEnd,n),n._eventBus.subscribe(d.CONTROLS_SEEKING,n._onControlsSeeking,n),n._eventBus.subscribe(d.Video.CLICK,n._onVideoClick,n),n._eventBus.subscribe(d.Video.PLAYING,n._onPlaybackPlaying,n),n._eventBus.subscribe(d.Video.TIMEUPDATE,n._onPlaybackProgress,n),n._eventBus.subscribe(d.Video.PAUSE,n._onPlaybackPaused,n),n._eventBus.subscribe(d.Video.SEEKING,n._onSeeking,n),n._eventBus.subscribe(d.Video.SEEKED,n._onSeeked,n),n._eventBus.subscribe(d.Video.ENDED,n._onPlaybackEnded,n),n._eventBus.subscribe(d.Video.ERROR,n._onPlaybackError,n),n._eventBus.subscribe(d.Video.WAITING,n._onWaiting,n),n._eventBus.subscribe(d.PLAYBACK_REQUEST,n._setPlaybackTimeout,n),n._playbackStartEvenUnsubscriber=n._eventBus.subscribe(d.PLAYBACK_STARTED,function(){M&&M.endDebugMode(C.PERF.VP_CTRL_PREPARE_START),n._notifyVideoStarted()}),n._adPlaybackStartEvenUnsubscriber=n._eventBus.subscribe(d.AD_PLAYBACK_STARTED,function(){n._notifyVideoStarted()}),n._eventBus.subscribe(d.SELECTED_STREAM_CHANGE,n._onSelectedStreamChange,n),n._eventBus.subscribe(d.SELECTED_STREAM_URL_CHANGE,n._onSelectedStreamChange,n),n._eventBus.subscribe(d.PLAYER_DIMENSION_CHANGE,n._onDimensionChange,n),n._eventBus.subscribe(d.MEDIA_RELOAD_BEGIN,n._onMediaReloadBegin,n),n._eventBus.subscribe(d.MEDIA_RELOAD_END,n._onMediaReloadEnd,n),n._eventBus.subscribe(d.QUALITY_CHANGE,n._onQualityChange,n),n._eventBus.subscribe(d.METADATA_AVAILABLE,n._onMetadata,n),n._eventBus.subscribe(d.REFRESH_METADATA_AVAILABLE,n._updateYVAPData,n),n._eventBus.subscribe(d.SAPI_REFRESH_REQUEST,n._refreshMetadata,n),n._eventBus.subscribe(d.USER_AUTHENTICATED,n._onUserAuthentication,n),n._eventBus.subscribe(d.CONTROLS_SET_VOLUME,n._onVolumeChange,n),n._eventBus.subscribe(d.CONTROLS_SET_MUTE,n._onMuteChange,n),n._eventBus.subscribe(d.API.BITRATE_CHANGE,n._onBitrateChange,n),n._eventBus.subscribe(d.KEYDOWN,n._onKeyDown,n),n._eventBus.subscribe(d.QUALITY_SELECTED,n._onQualitySelected,n),n._eventBus.subscribe(d.BITRATE_LIST_CHANGED,n._onBitrateListChanged,n),n._eventBus.subscribe(d.PTS_DISCONTINUITY,n._onPTSDiscontinuity,n),n._eventBus.subscribe(d.RELOAD_FRAGMENT,n._onReloadFragment,n),n._eventBus.subscribe(d.RECOVERY_START,n._onRecoveryStart,n),n._eventBus.subscribe(d.RECOVERY_METADATA_READY,n._onRecoveryMetadata,n),n._eventBus.subscribe(d.ER_READY,n._onER,n),n._eventBus.subscribe(d.API.CUEPOINT_STARTED,n._onHLSCueStart,n),n._eventBus.subscribe(d.API.CUEPOINT_STOPPED,n._onHLSCueEnd,n),n._eventBus.subscribe(d.TIMED_METADATA_RECEIVED,n._onTimedMetadata,n),n._eventBus.subscribe(d.RENDERER_SWITCHED,n._onRendererSwitched,n),n._fetcher=new p(n._model,n._eventBus,n._profiler);var o=n._model.playlist.getCurrentItem();o&&n._eventBus.publish(d.VIDEO_REQUEST,o.isPrefetch),n._playbackStarted={},n._profiler.setEndTime(d.Metrics.VP_CONSTRUCTOR),n._profiler.add(d.Metrics.INIT_RENDER_GAP),b.isFunction(a)&&(n._darlaController=new a(n._eventBus)),f.chrome>=32&&!n._model.disableCasting&&f.desktop&&(n._castController=new i(n._model,n._eventBus),n._eventBus.subscribe(d.CAST.CONNECTION_STATUS_CHANGED,n._onCastConnectionChange,n),n._eventBus.subscribe(d.CAST.PLAYLIST_ENDED,n._onCastPlaylistEnded,n),n._eventBus.subscribe(d.CAST.TOGGLE_PLAYING,function(){n._view.syncViewState()},n),n._eventBus.subscribe(d.CAST.VIDEO_ENDED,function(){n._view.syncViewState()},n))}t.exports=n;var o=e("./ads-controller"),i=e("./cast-controller"),a=e("./darla-controller"),s=e("./age-gate-controller"),l=e("./error"),d=e("./event"),c=e("../../lib/event-bus"),p=e("./metadata-fetcher"),u=e("./media-store"),_=e("./metrics/metrics"),m=e("./model"),v=e("./profiler"),y=e("./states"),f=e("../../lib/user-agent"),g=e("./util"),b=e("../../lib"),A=e("../../lib/logger"),E=e("./view"),h=e("./restapi"),T=e("./cc"),S=e("./metrics/metrics-constants"),I=e("./recoverer"),L=e("./renderers/type"),M=e("./perf"),C=e("./constants"),N="yvpVolume",D=1e4,R=1e4,P=30,w="yvpResumeTimeItems";n.prototype._togglePlayPause=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.state===y.VIDEO&&(e._model.playbackState.paused?(e.play(),e._eventBus.publish(d.CTRL_PLAYPAUSE,"play")):(e.pause(),e._eventBus.publish(d.CTRL_PLAYPAUSE,"pause")))},n.prototype.render=function(e){var t=this;t._profiler.setEndTime(d.Metrics.INIT_RENDER_GAP),t._profiler.add(d.Metrics.CREATE_RENDERER),M&&M.startDebugMode(C.PERF.VP_CTRL_RENDER);var r;r=b.isString(e)?document.querySelector(e):e._node||e,null===r&&t._eventBus.publish(d.Error,g.createErr("C",t._model.playbackState,l.E_PLAYER,l.PLAYER_CODES.E_INVALID_CONFIGURATION,"Invalid DOM node or CSS selector specified. Cannot render player.")),t._metrics.setRootElem(r),t._view=new E(r,t._model,t._eventBus,t._profiler),t._view.render(t._model),t._playlistController=t._view.getPlaylistController(),b.isFunction(T)&&(t._ccController=new T(t._eventBus,t._model,t._view));var n={play:function(){t.play()},pause:function(){t.pause()},setOverlayActive:function(e){t._view.setOverlayActive(e)}};if(t._initVolume(),b.isFunction(o)&&(t._adsController=new o(t._eventBus,n,t._model,t._view)),t._playerReadyEventFired=!1,t._enterInitState(),t._model.playback.autoplay)var i={type:S.AUTOPLAY,action:S.AUTOPLAY};var a=t._model.getPlaylistRenderingType(),s=C.PLAYLIST_RENDERING_TYPE;return(a===s.ONLY_MEDIA_ITEMS||a===s.PLAYLIST_ID_AND_MEDIA_ITEMS)&&(M&&M.startDebugMode(C.PERF.VP_CTRL_FETCH_METADATA),t._fetcher.updateMetadata()),a===s.PLAYLIST_ID&&(M&&M.startDebugMode(C.PERF.VP_CTRL_FETCH_METADATA),t._playlistController.fetchMore(C.PLAYLIST_COUNT_PER_PAGE,function(e){e?t.error({code:l.E_SAPI_RELATED,type:l.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_ERROR,message:""}):t._model.playlist.setPosition(0),t.setPlaylistPosition(0,t._model.playback.autoplay,i),t.setContinuousPlay(!0)})),t._model.playback.autoplay&&(M&&M.startDebugMode(C.PERF.VP_CTRL_PREPARE_AUTOPLAY),t.play(i)),t._eventBus.publish(d.API.PLAYER_RENDERED),t._profiler.setEndTime(d.Metrics.CREATE_RENDERER),M&&M.endDebugMode("VP_CTRL_RENDER"),t},n.prototype._initVolume=function(){var e=this,t=1,r=!1,n=g.localStorage.get(N);n&&(t=n.volume,r=n.mute),null===e._model.playbackState.volume&&(e._model.playbackState.volume=t),null===e._model.playbackState.mute&&(e._model.playbackState.mute=r)},n.prototype._onVolumeChange=function(e){var t=this,r=t._model.playbackState.volume;t._model.playbackState.volume=e,e>0&&(t._model.playbackState.mute=!1),t._view.setVolume(e),g.localStorage.put(N,{volume:e,mute:t._model.playbackState.mute}),t._eventBus.publish(d.CTRL_VOLUME,r)},n.prototype._onMuteChange=function(e){var t=this;t._model.playbackState.mute=e,t._view.setMute(e),g.localStorage.put(N,{volume:t._model.playbackState.volume,mute:e})},n.prototype._onKeyDown=function(e){var t=this,r=e.keyCode,n="key-"+r;(32===r||38===r||40===r)&&(e.preventDefault(),t._eventBus.publish(d.API.UI_INTERACT,{srcElement:n}))},n.prototype.getRootElement=function(){var e=this;return e._view.getRootElement()},n.prototype.getCustomControlsNode=function(){var e=this;return e._view.getCustomControlsNode()},n.prototype.getVideoElement=function(){var e=this;return e._view.getVideoElement()},n.prototype.supportSendBeacon=function(){return!(f.ie||f.safari||f.ios)},n.prototype.saveResumeTime=function(e){var t=g.localStorage.get(w)||{};t[e.id]=e.progress,g.localStorage.put(w,t)},n.prototype._onMetadata=function(e){var t=this,r=t._model.playlist.getCurrentItem();M&&M.endDebugMode(C.PERF.VP_CTRL_FETCH_METADATA),t._updateYVAPData(e),r&&-1!==e.indexOf(r.id)&&r.recoveryStatus!==u.ItemRecoveryStatus.RECOVERING&&t._loadMediaItem(r)},n.prototype._updateYVAPData=function(e){var t=this,r=[];t._adsController&&(e.forEach(function(e){var n=t._model.mediaStore.get(e),o="dash"===n.rendererType?"html":n.rendererType,i=n.isLive();r.push({clipId:n.id,clipDuration:n.duration,licenseId:n.license.licenseId,spaceId:n.metrics.pageSpaceId,playlistId:t._model.playlist.id,yvap:n.yvap,isLive:i,hasLiveMidrolls:i&&!!n.liveMidrollsMaxDur,liveMidrollsMaxDur:n.liveMidrollsMaxDur,rendererType:o})}),t._adsController.updateYVAPData(r))},n.prototype._refreshMetadata=function(e){var t=this;t._fetcher.refreshMetadata(e)},n.prototype._loadMediaItem=function(e){var t=this;if(e.hasLiveStreams()&&e.hasLiveStateForVod())return void t._eventBus.publish(d.WARNING,g.createErr("P",t._model.playbackState,l.E_WARNING,l.WARNING_CODES.E_LIVE_PLAYBACK_COMPLETE),!0);var r=e.status.code,n=e.progress&&e.progress.position||t._model.playback.startTime;if(M&&M.startDebugMode(C.PERF.VP_CTRL_LOAD_METADATA),t._createRecoverer(),e.state===u.ItemState.HAS_DATA)t._model.playbackState.attemptingPlayback()||t._findCriticalError()||t._enterInitState(),t._adsController&&t._adsController.prepare(e),t._view.prepareNextRenderer({rendererType:e.rendererType,mediaItem:e,isRecovering:e.recoveryStatus===u.ItemRecoveryStatus.RECOVERING},function(r){return r?void t._clearPlaybackTimeout():(t._notifedVideoStarted=!1,t._view.preloadNextRenderer({mediaItem:e,startTime:n})||t._eventBus.publish(d.ERROR,g.createErr("S",t._model.playbackState,l.E_SAPI_STREAM,l.SAPI_CODES.E_SAPI_NO_PLAYABLE_STREAMS)),t._model.playbackState.loadedItem=e,M&&M.endDebugMode(C.PERF.VP_CTRL_LOAD_METADATA),void t._eventBus.publish(d.MEDIA_ITEM_LOADED,e))});else{if(t._model.playbackState.loadedItem=e,r&&r.length>0||(r=l.SAPI_CODES.E_SAPI_NOT_FOUND),!t._isSAPIRequestError(r)){var o=l.isInfoCode(r);t._eventBus.publish(o?d.INFO:d.ERROR,g.createErr("S",t._model.playbackState,o?l.E_INFO:l.E_SAPI_STREAM,r))}M&&M.endDebugMode(C.PERF.VP_CTRL_LOAD_METADATA),t._eventBus.publish(d.MEDIA_ITEM_LOADED,e)}},n.prototype._isSAPIRequestError=function(e){return e===l.E_PLAYER_CMS_JSONP_REQUEST_FAILURE||e===l.E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL||e===l.E_PLAYER_CMS_RESPONSE||e===l.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT||e===l.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL||e===l.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED||e===l.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT||e===l.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED||e===l.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT||e===l.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED||e===l.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT||e===l.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408||e===l.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE||e===l.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT||e===l.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408||e===l.E_PLAYER_CMS_XHR_REQUEST_ERROR||e===l.E_PLAYER_CMS_XHR_REQUEST_TIMEOUT},n.prototype._onMediaItemLoaded=function(e){var t=this;t._playerReadyEventFired||(t._playerReadyEventFired=!0,t._eventBus.publish(d.API.PLAYER_READY)),t._attachWatchHistoryHandler(e)},n.prototype._attachWatchHistoryHandler=function(e){var t=this,r=function(){t._watchHistoryHandlerUnsub&&t._watchHistoryHandlerUnsub(),t._watchHistoryHandlerUnsub=null},n=function(){r(),t._model.userPreferences.isAuthenticated&&t._restAPI.saveToWatchHistory(e.id,function(e,t){},t)};r(),e.duration<=P?t._watchHistoryHandlerUnsub=t._eventBus.subscribe(d.PLAYBACK_ENDED,n,t):t._watchHistoryHandlerUnsub=t._eventBus.subscribe(d.PLAYBACK_PROGRESS,function(e,t){t>=P&&n()},t)},n.prototype._onCastConnectionChange=function(e,t){var r=this;if(e)r._model.playbackState.isVideoPlaying()&&r._pausePlayer();else if(t.playlist_pos===r._model.playlist.position){var n=r._model.playlist.getCurrentItem();r._model.playbackState.state!==y.VIDEO||n.isLive()||r.seek(n.progress.position),r.play()}else if(b.isNumber(t.playlist_pos)&&"unknown"!==t.playlist_pos)r.setPlaylistPosition(t.playlist_pos,!0);else if(t.media_uuid){var o=r._model.playlist.items.indexOf(t.media_uuid);r.setPlaylistPosition(o>-1?o:0,!0)}else r.play();r._view.syncViewState()},n.prototype._onCastPlaylistEnded=function(){var e=this;e._model.playlist.position=e._model.playlist.items.length-1,e._onPlaybackEnded()},n.prototype.play=function(e,t){var r=this;if(r._model.castState&&r._model.castState.connected)return void r._castController.play();if(f.mobile&&!r._mobilePlaybackStartAllowed(e))return void r._view.syncViewState();if(r._model.playbackState.waitingForUserTap)return void(r._scheduledPlayUnsub||(r._scheduledPlayUnsub=r._eventBus.once(d.USERTAP_RESTRICTION_REMOVED,function(){delete r._scheduledPlayUnsub,r.play(e,t)})));var n=b.isNullOrUndefined(t)?!0:t;if(r._model.playbackState.paused&&r._model.playbackState.isVpaidAdPlaying())return r._eventBus.publish(d.RESUME_VPAID),void r._onPlaybackResumed();if(!r._model.playbackState.attemptingPlayback()){var o=r._model.playlist.getCurrentItem();if(o){if(r._spinnerMonitorStartTime=null,r._model.playbackState.paused)return void r._view.play();if(e&&(r._model.playback.requestType=e.type,e.action&&(r._model.playback.requestAction=e.action)),o.ageGate&&r._model.ui.showAgeGate)return void r._initiateAgeGate();if(r._model.ui.showAgeGate&&r._view.destroyAgeGateScreen(),r._profiler.add(d.Metrics.PLAYBACK_START),r._resetStateFlags(),o===r._model.playbackState.loadedItem)r._model.playbackState.loading=!0,r.setSelectedStreams(),r._eventBus.publish(d.PLAYBACK_REQUEST,o.id),r._startPlaying(o,n);else if(f.mobile&&!r._model.playback.autoplaySupported)r._eventBus.publish(d.INFO,g.createErr("C",r._model.playbackState,l.E_WARNING,l.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_PLAY_INITIATED_BEFORE_METADATA_READY,"Cannot play before metadata is available"));else{r._model.playbackState.state=y.WAITING,r._model.playbackState.loading=!0;var i=r._eventBus.subscribe(d.MEDIA_ITEM_LOADED,function(t){if(t===o){if(i(),f.mobile&&!r._mobilePlaybackStartAllowed(e))return void r._enterInitState();if(r.setSelectedStreams(),o.ageGate&&r._model.ui.showAgeGate)return r._model.playbackState.state=y.INIT,void r._initiateAgeGate();r._eventBus.publish(d.PLAYBACK_REQUEST,o.id),r._startPlaying(o,n)}})}r._view.syncViewState()}}},n.prototype._mobilePlaybackStartAllowed=function(e){var t=this;if(!f.mobile||!t._firstPlay)return!0;e=e||{};var r=e.type===S.CLICK;return r||t._model.isAutoplayAllowed()?!0:(e.type===S.AUTOPLAY&&t._model.playback.autoplay&&(t._model.playback.autoplay=!1,t._model.ui.showStartScreen=!0),!1)},n.prototype.setSelectedStreams=function(){var e=this,t=e._model.playlist.getCurrentItem();t&&t.selectedStreams&&0===t.selectedStreams.length&&t.streams.length&&e._view.setSelectedStreams(t.streams)},n.prototype._startPlaying=function(e,t){var r=this,n="start";if(e===r._model.playlist.getCurrentItem()&&!r._findCriticalError()){e.restartIfNeeded();var o=function(){M&&M.startDebugMode(C.PERF.VP_CTRL_PREPARE_START),r.getAutoplay()||r._firstClickToStartPlayCalled||(r._firstClickToStartPlayCalled=!0,r._profiler.add(d.Metrics.CLICK_TO_START));var t=r._model.playback.startTime;e.isLongForm()&&isNaN(r._model.playback.startTime)&&e.progress.position>0&&(r._model.playback.isResume=!0,t=e.progress.position),r._view.switchAndPlayNextRenderer(t),r._model.playback.fullscreen&&r._view.setFullscreen(!0)},i=function(){r._model.playbackState.state=y.VIDEO,r._resetStateFlags(),r._model.playbackState.loading=!0,r._view.syncViewState()};r._firstPlay=!1,r._adsController&&t?(M&&M.endDebugMode(C.PERF.VP_CTRL_PREPARE_AUTOPLAY),r._adsController.maybePlay(n,function(t){i(),t?(r._profiler.add(d.Metrics.PLAYBACK_START),r._view.prepareNextRenderer({rendererType:e.rendererType,mediaItem:e},function(){r._view.preloadNextRenderer({mediaItem:e}),o()})):o()})):(M&&M.endDebugMode(C.PERF.VP_CTRL_PREPARE_AUTOPLAY),i(),o())}},n.prototype._setPlaybackTimeout=function(){var e=this,t=e._model.playlist.getCurrentItem();e._view.didRendererTimeOut()||e._playbackTimeout||"error"===t.state||(e._playbackTimeout=setTimeout(function(){e._eventBus.publish(d.API.PLAYBACK_TIMEOUT,g.createErr("P",e._model.playbackState,l.E_WARNING,l.WARNING_CODES.E_PLAYBACK_TIMEOUT,"No playback after 10 seconds of requesting to play on player"))},D))},n.prototype._clearPlaybackTimeout=function(){var e=this;e._playbackTimeout&&clearTimeout(e._playbackTimeout)},n.prototype._notifyVideoStarted=function(){var e=this;e._notifedVideoStarted||(e._eventBus.publish(d.API.VIDEO_STARTED),e._notifedVideoStarted=!0),e._clearPlaybackTimeout()},n.prototype.pause=function(){var e=this,t=e._model.castState;t&&t.connected?!t.paused&&e._castController.pause():"function"==typeof e._scheduledPlayUnsub?(e._scheduledPlayUnsub(),delete e._scheduledPlayUnsub):e._pausePlayer()},n.prototype._pausePlayer=function(){var e=this;e._model.playbackState.isVpaidAdPlaying()?(e._eventBus.publish(d.PAUSE_VPAID),e._onPlaybackPaused()):e._model.playbackState.attemptingPlayback()&&(e._view.pause(),e._clearPlaybackTimeout())},n.prototype.seek=function(e){var t=this;t._model.castState&&t._model.castState.connected?t._castController.seek(e):t._model.playbackState.state===y.VIDEO&&t._view.seek(e)},n.prototype.recover=function(){var e=this;e._recoverer.recover()},n.prototype.preload=function(e){var t=this,r=t._model.playlist.getCurrentItem();b.isNumber(e)&&r&&e>0&&e<=r.duration&&t._view.preload(e)},n.prototype.disableControls=function(){var e=this;e._view.disableControls()},n.prototype.enableControls=function(){var e=this;e._view.enableControls()},n.prototype.enableCC=function(e){var t=this;t._ccController&&t._ccController.enable(e)},n.prototype.disableCC=function(){var e=this;e._ccController&&e._ccController.disable()},n.prototype.isPlaying=function(){var e=this;return"video"===e._model.playbackState.state&&!e._model.playbackState.paused},n.prototype.isLoading=function(){var e=this;return e._model.playbackState.videoLoading()},n.prototype.endVideo=function(){var e=this;e._view.endVideo()},n.prototype.getOpenSimSim=function(){var e=this;return e._view.getOpenSimSim()},n.prototype.setFullscreen=function(e){var t=this;t._view.setFullscreen(e)},n.prototype.getFullscreen=function(){var e=this;return e._view.getFullscreen()},n.prototype.setVolume=function(e){var t=this;t._eventBus.publish(d.CONTROLS_SET_VOLUME,e)},n.prototype.getVolume=function(){var e=this;return e._model.playbackState.volume},n.prototype.setMute=function(e){var t=this;t._eventBus.publish(d.CONTROLS_SET_MUTE,e)},n.prototype.getMute=function(){var e=this;return e._model.playbackState.mute},n.prototype.setLoop=function(e){var t=this;t._model.playback.loop=e},n.prototype.getLoop=function(){var e=this;return e._model.playback.loop},n.prototype.setContinuousPlay=function(e){var t=this;t._model.playback.continuousPlay=e},n.prototype.getContinuousPlay=function(){var e=this;return e._model.playback.continuousPlay},n.prototype.resumeContinuousPlay=function(e){var t=this;if(t.setContinuousPlay(!0),t._model.playbackState.state===y.END){var r=t._model.playlist.getNextPosition(t._model.playback.continuousPlay,t._model.playback.loop);-1!==r&&t.setPlaylistPosition(r,!0,e)}},n.prototype.getAutoplay=function(){var e=this;return e._model.playback.autoplay},n.prototype.getMediaStore=function(){var e=this;return e._model.mediaStore},n.prototype.getPlaybackState=function(){var e=this;return e._model.playbackState.state},n.prototype.getCurrentMediaItem=function(){var e=this;return e._model.playlist.getCurrentItem()},n.prototype.getPlaylistItems=function(){var e=this;return e._model.playlist.items},n.prototype.getPlaylist=function(){var e=this;return e._model.playlist},n.prototype._onDimensionChange=function(e){var t=this;t._model.uiState.width=e.width,t._model.uiState.height=e.height},n.prototype._onRendererSwitched=function(e){var t=this,r=e.active;t._metrics.setActiveRenderer(r)},n.prototype._onSelectedStreamChange=function(e,t){var r,n=this,o=n._model.playlist.getCurrentItem();if(t){t.cdn=g.getMediaCDNName(o,e,t.selectedStreamUrl),t.url=t.selectedStreamUrl;var i=[t];r=i}else{for(var a=e.length,s=0;a>s;s++)e[s].cdn=g.getMediaCDNName(o,e,null);r=e}o.fillSelectedStreams(r,null)},n.prototype._findCriticalError=function(){for(var e=this,t=e._model.errors,r=0;r<t.length;r++)if(t[r].category||t[r].subcategory)return t[r];return null},n.prototype._onStartScreenClick=function(){var e=this;e._eventBus.publish(d.CTRL_PLAYREQUEST,"ctp"),e._profiler.add(d.Metrics.HLS_FIRST_TS_LOAD_START);var t={type:S.CLICK,action:S.CLICK};e.play(t)},n.prototype._onVideoClick=function(){var e=this;if(e._eventBus.publish(d.API.UI_INTERACT,{srcElement:"video-click"}),e._view.controls)if(e._model.playbackState.rendererType===L.FLASH||e._model.playbackState.rendererType===L.FLASH_SIMPLE){var t=e._model.playbackState.paused?"play":"pause";e._eventBus.publish(d.CTRL_PLAYPAUSE,t),e._view.setKeyboardFocus()}else e._togglePlayPause()},n.prototype._onRelatedItemClick=function(e,t,r){var n,o=this,i=o._model.playlist,a="next-vid-",s={srcElement:a+t},l=-1===t?d.CTRL_REPLAY:d.CTRL_ENDSCREEN_VID;-1===t&&(s.srcElement="es-rpl"),t>-2&&o._eventBus.publish(d.API.UI_INTERACT,s),o._eventBus.publish(l,{vid:e,vindex:t});var c={type:S.CONTINUOUS,action:r?S.AUTOPLAY:S.CLICK};n=i.getItemPosition(e),o.setPlaylistPosition(n,!0,c)},n.prototype._onFetchMoreRelatedItems=function(e,t,r){var n=this,o=function(e,t){var o=[];t||(t=[]),t&&t.length>0&&(o=t.map(function(e){return n.getPlaylistItems().indexOf(e)<0&&n._model.playlist.appendItem(e),n._model.mediaStore.get(e)})),r&&r(e,o)};n._fetcher.getRelatedVideosChannel(e,t,o)},n.prototype.setPlaylistPosition=function(e,t,r){var n=this;n._resetPlaybackStarted(),n._model.errors=[],n._model.playbackState.criticalError=null,n._model.playbackState.isAdPlaying()&&n._adsController.cancelAd();var o=n._model.playlist,i=o.getCurrentItem();n.endVideo(),n._recoverer&&n._recoverer.stopTimers(),o.position=e;var a=o.getCurrentItem();if(n._model.playbackState.looped=!1,n._model.playback.startTime=NaN,a){var s=a.streams.length>0&&a.streams[0].path?u.getSapiVsId(a.streams[0].path):"";a.videoSession=s+"_"+a.generateVSid(),a.samplingId=a.generateSamplingId(),u.updateVsInStreams(a.streams,a.videoSession),n._view.resetState(),n._eventBus.publish(d.API.PLAYLIST_POSITION_CHANGE,o.position),n._enterInitState(),n._eventBus.publish(d.VIDEO_REQUEST,a.isPrefetch),a.fetchFinished()&&n._loadMediaItem(a)}else t=!1;a&&"error"!==a.state?t&&n.play(r):(null!==i&&n._endPlayback(i),n._destroyRecoverer())},n.prototype.setContentHeightForNFL=function(){var e=this,t=e._model.playlist.getCurrentItem(),r=t?t.provider:null;r&&"video.nflhighlights.com"===r.providerId&&e._view._setContentHeightForNFL()},n.prototype.sendPrefetchInfo=function(e){var t=this,r={url:e.url,source:e.source,latency:e.latency||"na",http_code:e.http_code||"na",resp_len:e.resp_len||"na",instrument:e.instrument||"na",perfInfo:e.perfInfo||"na",perfStack:e.perfStack||"na"};return r.source&&r.url?(t._eventBus.publish(d.API_CALLED,r),!0):!1},n.prototype._endPlayback=function(e){var t=this;t._view.setFullscreen(!1),t._model.playbackState.previousItem=e,t._model.playbackState.state=y.END,t._resetStateFlags(),t._view.syncViewState()},n.prototype._enterInitState=function(){var e=this;e._model.playbackState.state=y.INIT,e._resetStateFlags(),e._view.syncViewState()},n.prototype._resetStateFlags=function(){var e=this,t=e._model.playbackState;t.paused=!1,t.seeking=!1,t.loading=!1},n.prototype.removePlaylistItems=function(e,t){var r=this,n=r._model.playlist;n.items.splice(e,t),n.position>=e+t?n.position-=t:e<=n.position&&n.position<e+t&&r.setPlaylistPosition(-1)},n.prototype.prefetch=function(e){var t=this,r=!(t._model.playlist.getCurrentItem().id in e);t._fetcher.prefetch(e,r)},n.prototype._onPlaybackError=function(e){var t=this;t._eventBus.publish(d.PLAYBACK_ERROR,e)},n.prototype._onError=function(e){var t=this;if(!t._recoverer||t._recoverer.shouldRenderErrorScreen(e)){try{throw new Error("Stack Trace")}catch(r){A.error(r.stack)}t._model.errors.push(e),t._maybeSkip(function(){var e=t._findCriticalError();e&&(t._clearPlaybackTimeout(),t._applyErrorFilters(e),t._model.playbackState.criticalError=e,t._model.playbackState.state=y.END,t.disableCC(),t._resetStateFlags(),t._view.syncViewState())})}},n.prototype._onWarning=function(e,t){var r=this;t&&r._onError(e)},n.prototype._onPTSDiscontinuity=function(e){var t=this;t._eventBus.publish(d.WARNING,g.createErr("P",t._model.playbackState,l.E_WARNING,l.PLAYER_CODES.E_PLAYER_PTS_DISCONTINUITY,null,"consecutive frame time diference is "+e))},n.prototype._onReloadFragment=function(e){var t=this;t._eventBus.publish(d.WARNING,g.createErr("P",t._model.playbackState,l.E_WARNING,l.PLAYER_CODES.E_PLAYER_RELOAD_FRAGMENT,null,e))},n.prototype._applyErrorFilters=function(e){var t=this,r=function(){!g.isFlashInstalled()&&f.desktop&&(e.category=l.E_PLAYER,e.subcategory=l.PLAYER_CODES.E_PLAYER_NOT_ENABLED)};switch(e.category){case l.E_SAPI_ABSTRACT:case l.E_SAPI_STREAM:case l.E_SAPI_PLAYLIST:case l.E_SAPI_RELATED:case l.E_SAPI_POPULAR:switch(e.subcategory){case l.SAPI_CODES.E_SAPI_EXTERNAL_NO_STREAMS:var n=t._model.playlist.getCurrentItem();n&&n.shareUrl&&g.redirect(n.shareUrl,!0);break;case l.SAPI_CODES.E_SAPI_UNSUPPORTED_FORMAT:r();break;case l.INFO_CODES.E_SAPI_UNSUPPORTED_LIVE_ON_HTML:f.android?(e.category=l.E_INFO,e.subcategory=l.INFO_CODES.E_PLAYER_ANDROID_CHROME_REQUIRED):r();break;case l.SAPI_CODES.E_SAPI_DRM_RESTRICTED:f.desktop&&r()}break;case l.E_PLAYER:switch(e.subcategory){case l.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED:r()}}},n.prototype._initiateAgeGate=function(){var e=this;e._ageGateController||(e._ageGateController=new s(e._eventBus,e._model,e._view,e,e._fetcher)),e._ageGateController.run()},n.prototype._onUserAuthentication=function(){var e=this;e._ageGateController&&e._ageGateController.isWaitingAuthentication()&&e._initiateAgeGate()},n.prototype._onPlaybackStarted=function(e){var t=this;t.ifPlaybackProgressCalled=!1,t._eventBus.publish(d.PLAYBACK_STARTED,e.id,t._view.getCurrentTime()),t._playbackStarted[e.id]=!0,t._model.playback.startTime=NaN},n.prototype._onPlaybackPlaying=function(){var e=this,t=e._model.playlist.getCurrentItem();e._model.playbackState.videoLoading()&&(f.android||e._toggleSpinner(!1)),e._model.playbackState.paused&&(e._eventBus.publish(d.PLAYBACK_RESUMED,t.id),e._onPlaybackResumed()),e._playbackStarted[t.id]||e._onPlaybackStarted(t)},n.prototype._resetPlaybackStarted=function(){var e=this;e._playbackStarted={}},n.prototype._onPlaybackProgress=function(e,t,r){var n=this;f.android&&!n.ifPlaybackProgressCalled&&(n._toggleSpinner(!1),n.ifPlaybackProgressCalled=!0);var o=n._model.playlist.getCurrentItem();if(o){o.progress.position=Math.floor(e);var i=1.5,a=n._view.getClientVideoDimension();n._model.playerDimension.width!==a.width&&n._model.playerDimension.height!==a.height&&(n._model.playerDimension.width=a.width,n._model.playerDimension.height=a.height,n._eventBus.publish(d.PLAYER_DIMENSION_CHANGE,{width:n._model.playerDimension.width,height:n._model.playerDimension.height})),n._eventBus.publish(d.PLAYBACK_PROGRESS,o.id,e,t,r),!b.isNumber(e)||!b.isNumber(t)||e>t+1||(o.isCCM||null!==o.duration||o.isLive()||(o.duration=t),n._model.playbackState.loading&&(!f.safari||f.safari<6)?n._spinnerMonitorStartTime?e-n._spinnerMonitorStartTime>=i&&(n._spinnerMonitorStartTime=null,n._toggleSpinner(!1)):n._spinnerMonitorStartTime=e:n._spinnerMonitorStartTime=null,o.isLive()||(n._model.castState&&n._model.castState.connected||n._tryPlayAdBreak(o),!o.isLongForm()||o.progress.position%10!==0||n._model.playbackState.seeking||n._model.playbackState.ad||n.saveResumeTime(o)))}},n.prototype._onTimedMetadata=function(e){var t=this;e&&"cue_out"===e.type&&void 0!==e.duration&&t._onHLSCueStart(1e3*e.duration)},n.prototype._onHLSCueStart=function(e){var t=this;e=parseInt(e,10);var r=t._model.playlist.getCurrentItem(),n=isNaN(e)?null:e/1e3;t._tryPlayAdBreak(r,n)},n.prototype._tryPlayAdBreak=function(e,t){var r=this,n=e.progress.position,o={currentTime:n,isLive:e.isLive(),adDuration:t};r._adsController&&r._adsController.maybeAdBreak(o,function(t,o){t&&(r._model.playbackState.state=y.VIDEO,r._resetStateFlags(),r._model.playbackState.loading=!0,r._view.prepareNextRenderer({rendererType:e.rendererType,mediaItem:e},function(){r._view.preloadNextRenderer({mediaItem:e}),r._view.switchAndPlayNextRenderer(n),e.progress.adbreaks[o]=(new Date).getTime()}))})},n.prototype._onHLSCueEnd=function(e){var t=this;t._model.playbackState.isAdPlaying()&&t._adsController&&t._adsController.maybeEndAdBreak("cuein",e)},n.prototype._onControlsSeekStart=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.seeking||(e._model.playbackState.seeking=!0,e._view.syncViewState())},n.prototype._onControlsSeekEnd=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.seeking&&(e._model.playbackState.paused||e._view.play(),e._model.playbackState.seeking=!1,e._view.syncViewState())},n.prototype._onControlsSeeking=function(e){var t=this;t._model.castState&&t._model.castState.connected||t._view.seek(e);
},n.prototype._onPlaybackPaused=function(){var e=this;e._model.playbackState.state!==y.INIT&&e._model.playbackState.state!==y.END&&(e._model.playbackState.paused=!0,e._view.syncViewState())},n.prototype._onPlaybackResumed=function(){var e=this;e._model.playbackState.paused=!1,e._view.syncViewState()},n.prototype._onPlaybackEnded=function(){var e=this;e._resetPlaybackStarted();var t=e._model.playlist,r=t.getCurrentItem();if(r){var n=e._model.playback.continuousPlay,o=e._model.playback.loop,i=e._model.playback.playlistLoop,a={playlistLoop:i},s=t.getNextPosition(n,o,a);e._eventBus.publish(d.PLAYBACK_ENDED,r.id,a.ended);var l=function(){if(r.progress.position=0,!r.isLongForm()||e._model.playbackState.seeking||e._model.playbackState.ad||e.saveResumeTime(r),-1!==s){if(n||o)var t={type:S.CONTINUOUS,action:S.AUTOPLAY};e.setPlaylistPosition(s,n||o,t),e._model.playbackState.looped=a.looped}else e._endPlayback(r),e._eventBus.publish(d.API.PLAYLIST_COMPLETE)};e._adsController?e._adsController.maybePlay("end",l):l()}},n.prototype._onSeeking=function(){var e=this;e._toggleSpinner(!0)},n.prototype._onSeeked=function(){var e=this;e._toggleSpinner(!1),e._eventBus.publish(d.API.PLAYBACK_SEEK_COMPLETE),e._spinnerMonitorStartTime=null},n.prototype._onBitrateChange=function(e){var t=this;t._model.playback.bitrate=e},n.prototype.error=function(e){var t=this;e&&t._eventBus.publish(d.ERROR,g.createErr("C",t._model.playbackState,e.type,e.code,e.msg))},n.prototype._onMediaReloadBegin=function(){var e=this;e._toggleSpinner(!0)},n.prototype._onMediaReloadEnd=function(){var e=this;e._toggleSpinner(!1)},n.prototype._onQualityChange=function(){return!1},n.prototype._toggleSpinner=function(e){var t=this;t._model.playbackState.loading=e,t._view.syncViewState()},n.prototype._onQualitySelected=function(e){var t=this;t._view.setQuality(e)},n.prototype._onBitrateListChanged=function(e,t){var r=this;r._model.playback.bitrates=e,r._model.playback.heights=t},n.prototype._onRecoveryStart=function(e){var t=this;t._model.playbackState.loading||(t._model.playbackState.loading=!0,t._view.syncViewState()),t._fetcher.updateMetadata(e)},n.prototype._onRecoveryMetadata=function(){var e=this,t=e._model.playbackState.state;e._view.getCurrentTime()>0&&(e._model.playback.startTime=e._view.getCurrentTime()),e.pause(),e._view.stopMedia(),e._loadMediaItem(e._model.playlist.getCurrentItem()),e._model.playbackState.loading=!1,e._view.syncViewState(),e._model.playbackState.state=y.INIT,e._model.playlist.getCurrentItem().recoveryStatus=u.ItemRecoveryStatus.RECOVERED,t===y.VIDEO&&e.play(null,!1)},n.prototype._onER=function(e){var t=this;t._fetcher.fillFromER(e),t._onRecoveryMetadata()},n.prototype._onWaiting=function(e){var t=this;if(!f.tv){var r=e&&e.value;if(t._toggleSpinner(r),r&&!e.ignoreBuffering)t._profiler.add(d.Metrics.PLAYBACK_STALLED);else if(!e.ignoreBuffering){t._profiler.setEndTime(d.Metrics.PLAYBACK_STALLED);var n=t._profiler.getItem(d.Metrics.PLAYBACK_STALLED);n&&t._eventBus.publish(d.PLAYBACK_STALLED,n.timeDiff?n.timeDiff/1e3:"")}}},n.prototype._migrateEndScreenExprience=function(){var e=this,t=e._model.ui.showEndScreen,r=e._model.ui.showReplayOnlyEndScreen,n=e._model.ui.playlistUI&&e._model.ui.playlistUI.show;t===!0&&r===!1&&n===!1&&(e._model.ui.playlistUI.show=!0,e._model.ui.playlistUI.position="hidden",e._model.ui.playlistUI.theme="light")},n.prototype.isDocked=function(){var e=this;return e._view.isDocked()},n.prototype.updateDockingConfig=function(e,t,r,n,o,i){var a=this;a._view.updateDockingConfig(e,t,r,n,o,i)},n.prototype.dockVideoPlayer=function(){var e=this;e._view.dockVideoPlayer()},n.prototype.undockVideoPlayer=function(e){var t=this;t._view.undockVideoPlayer(e)},n.prototype.destroy=function(){var e=this;e._view&&e._view.destroy(),e._destroyRecoverer(),e._fetcher&&e._fetcher.destroy(),e._eventBus&&e._eventBus.destroy(),e._ccController&&e._ccController.destroy(),e._adsController&&e._adsController.destroy(),e._metrics&&e._metrics.destroy(),e._model&&e._model.destroy(),e._darlaController&&e._darlaController.destroy()},n.prototype._destroyRecoverer=function(){var e=this;e._recoverer&&(e._recoverer.destroy(),e._recoverer=null)},n.prototype._createRecoverer=function(){var e=this;e._recoverer||f.mobile||(e._recoverer=new I(e._eventBus,e._model))},n.prototype._maybeSkip=function(e){var t=this,r=t._model.skipOnError;switch(r){case"always":t._maybeSkipImpl(e);break;case"timebased":e(),setTimeout(function(){t._maybeSkipImpl()},R);break;case"never":e();break;default:e()}},n.prototype._maybeSkipImpl=function(e){var t=this,r=t._model.playlist.getNextPosition(!0,t.getLoop()),n=t._model.playlist.position;if(-1===r||r===n){var o=t._model.playlist.getCurrentItem();t._onFetchMoreRelatedItems(o,{videoUuid:o.id,playlistId:t._model.ui.playlistUI.playlistId},function(o,i){r=t._model.playlist.getNextPosition(!0,t.getLoop()),o||-1===r||r===n?e&&e():(t.setPlaylistPosition(r,t._model.playback.autoplay),t._view.syncViewState())})}else t.setPlaylistPosition(r,t._model.playback.autoplay),t._view.syncViewState()}},{"../../lib":"bRhrlU","../../lib/event-bus":"3ECu9u","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./ads-controller":12,"./age-gate-controller":13,"./cast-controller":15,"./cc":"zKzgQw","./constants":18,"./darla-controller":20,"./error":22,"./event":"YJm+dH","./media-store":29,"./metadata-fetcher":"QCpdmG","./metrics/metrics":37,"./metrics/metrics-constants":36,"./model":41,"./perf":43,"./profiler":45,"./recoverer":46,"./renderers/type":54,"./restapi":55,"./states":57,"./util":"jJTEqU","./view":67}],20:[function(e,t,r){"use strict";function n(e){var t=this;t._eventsHandlers={},t._eventBus=e,t._notifiedAdStarted=!1,t._enabled=function(e){var t,r=!1;if(e=e||window,e.parent==window.top)try{t=e&&e.$sf&&e.$sf.ext,t&&("function"==typeof t.register||"function"==typeof t.supports)&&(r=!0)}catch(n){r=!1}return r}(),t._enabled&&(t._eventsHandlers[o.AD_PLAYBACK_STARTED]=t._eventBus.subscribe(o.AD_PLAYBACK_STARTED,t._onAdStart,t),t._eventsHandlers[o.PLAYBACK_ENDED]=t._eventBus.subscribe(o.PLAYBACK_ENDED,t._onVideoEnded,t))}t.exports=n;var o=e("./event");e("./states"),e("../../lib/logger");n.prototype.destroy=function(){var e=this;for(var t in e._eventsHandlers)if(e._eventsHandlers.hasOwnProperty(t))try{e._eventsHandlers[t]()}catch(r){}},n.prototype._onAdStart=function(){var e=this;if(e._enabled&&!e._notifiedAdStarted){try{Y.SandBox.vendor.video(!0)}catch(t){}e._notifiedAdStarted=!0}},n.prototype._onVideoEnded=function(){var e=this;if(e._enabled){if(e._notifiedAdStarted)try{Y.SandBox.vendor.video(!1)}catch(t){}e._notifiedAdStarted=!1}}},{"../../lib/logger":"IS9j5T","./event":"YJm+dH","./states":57}],21:[function(e,t,r){"use strict";function n(e,t){var r=this;r._cb=t,r._touches=[],r._type=e,r._bindTouchEvents(),r._bindKeys()}t.exports=n;var o={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",TAP:"tap"},i={AD:[{combination:[38,38,40,40,191],alt:!0}],NORMAL:[{combination:[79,80,69,78,83,73,77,83,73,77]},{combination:[79,80,83,83]},{combination:[37,37,39,39,13],alt:!0}]},a={AD:[o.LEFT,o.RIGHT,o.UP,o.DOWN,o.TAP,o.TAP,o.TAP],NORMAL:[o.UP,o.DOWN,o.LEFT,o.RIGHT,o.TAP,o.TAP]};n.prototype._bindKeys=function(){var e=this,t=[],r=0,n=0,o=i[e._type];o.forEach(function(e){e.length=e.combination.length,e.value=e.length?e.combination.toString():null,e.length>r&&(r=e.length)}),e._onKeyDown=function(i){n=i.altDown||i.altKey?n+1:0,t.push(i.keyCode),t.length>r&&t.shift();var a=o.some(function(e){var r=t.slice(Math.max(t.length-e.length,0)).toString(),o=r===e.value;return e.alt?o&&n>e.length:o});a&&e._cb(),"AD"===e._type},document.addEventListener("keydown",e._onKeyDown,!1)},n.prototype._bindTouchEvents=function(){var e=this,t=a[e._type];e._touchstart=function(t){e._startX=t.changedTouches[0].pageX,e._startY=t.changedTouches[0].pageY,e._stopX=0,e._stopY=0},document.addEventListener("touchstart",e._touchstart,!1),e._touchmove=function(t){if(1===t.touches.length){var r=t.touches[0];e._stopX=r.pageX,e._stopY=r.pageY}},document.addEventListener("touchmove",e._touchmove,!1),e._touchend=function(){var r;if(e._stopX||e._stopY){var n=Math.abs(e._startX-e._stopX),i=Math.abs(e._startY-e._stopY);r=n>i?e._startX-e._stopX<0?o.RIGHT:o.LEFT:e._startY-e._stopY<0?o.DOWN:o.UP}else r=o.TAP;e._touches.push(r),e._touches.length>t.length&&e._touches.shift(),e._touches.length===t.length&&e._touches.every(function(e,r){return e===t[r]})&&e._cb()},document.addEventListener("touchend",e._touchend,!1)},n.prototype.destroy=function(){var e=this;document.removeEventListener("keydown",e._onKeyDown,!1),document.removeEventListener("touchstart",e._touchstart,!1),document.removeEventListener("touchmove",e._touchmove,!1),document.removeEventListener("touchend",e._touchend,!1)}},{}],22:[function(e,t,r){"use strict";function n(e){return e.group+e.phase+"-"+e.category+"-"+e.subcategory}function o(e,t,r,n,o){var i=this;if(!e||!t||!r)throw"Error must be created with a group, category, and subcategory!";i.errorInfo=n,i.userAgent=o,i.group=e,i.phase=i._getPhaseFromState(n),i.category=t,i.subcategory=r,i._msg=n?n.msg:null,i.debugMessage=n?n.debugMsg:null,i.prefetch=n&&void 0!==n.prefetch?n.prefetch:!1}var i=e("./strings"),a=e("./states"),s=["305","306","307"];r.E_INFO="100",r.E_WARNING="200",r.E_YVAP="300";var l=r.E_PLAYER="400",d=r.E_PLAYER_FAILOVER="407",c=r.E_PLAYER_DRM="410",p=r.E_PLAYER_DASH="420",u=r.E_PLAYER_JS_HLS="430",_=r.E_SAPI_ABSTRACT="500";r.E_SAPI_STREAM="501",r.E_SAPI_PLAYLIST="502",r.E_SAPI_RELATED="503",r.E_SAPI_POPULAR="504";var m=r.E_SAPI_CLOSEDCAPTION="505";r.E_CAST="800";var v=r.INFO_CODES={E_SAPI_LICENSE_ERROR:"200",E_SAPI_UNAVAILABLE_TEMP:"201",E_SAPI_GEO:"202",E_SAPI_DEVICE:"203",E_SAPI_EMBED:"204",E_SAPI_BLACKOUT:"208",E_SAPI_UNSUPPORTED_LIVE_ON_HTML:"305",E_PLAYER_ANDROID_CHROME_REQUIRED:"500",E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE:"610",E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE:"611",E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE:"612",E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING:"613",E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN:"614",E_PLAYER_NO_COMPATIBLE_FORMAT:"700"},y=r.WARNING_CODES={E_PLAYBACK_TIMEOUT:"1",E_LIVE_PLAYBACK_COMPLETE:"800",E_FLASH_CRASHED:"801",E_PLAYBACK_FROZEN_DETECTED:"900",E_ER_TRY:"901"},f=r.PLAYER_CODES={E_PLAYER_PLAYBACK_ERROR:"100",E_PLAYER_NOT_ENABLED:"200",E_PLAYER_NOT_UPTO_DATE:"201",E_PLAYER_PTS_DISCONTINUITY:"250",E_PLAYER_RELOAD_FRAGMENT:"251",E_PLAYER_HTML5_PLAYBACK_ERROR:"303",E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED:"304",E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK:"305",E_PLAYER_HTML5_PLAYBACK_ERROR_DECODE:"306",E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED:"307",E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED:"308",E_PLAYER_HTML5_PLAYBACK_ERROR_PLAY_INITIATED_BEFORE_METADATA_READY:"309",E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_AUTHORIZED:"310",E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_FOUND:"311",E_PLAYER_CMS_JSONP_REQUEST_FAILURE:"101",E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL:"102",E_PLAYER_CMS_RESPONSE:"405",E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT:"408",E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL:"409",E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED:"700",E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT:"701",E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED:"710",E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT:"711",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED:"720",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT:"721",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408:"722",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE:"730",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT:"731",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408:"732",E_PLAYER_CMS_XHR_REQUEST_ERROR:"740",E_PLAYER_CMS_XHR_REQUEST_TIMEOUT:"750",E_PLAYER_CMS_XHR_REQUEST_CORS_ERROR:"760",E_INTERNAL_VIOLATION:"600",E_INVALID_CONFIGURATION:"601",E_RECOVERY_FAILURE:"602"},g=r.FLASH_CODES={E_PLAYER_SECURITY_CROSS_DOMAIN_XML_ERROR:2,E_PLAYER_MEDIA_LOAD_FAILURE:7,E_PLAYER_INVALID_F4M:23,E_PLAYER_FLASH_CONNECTION_REJECTED:11,E_PLAYER_FLASH_CONNECTION_APP_INVALID:12,E_PLAYER_FLASH_CONNECTION_FAILED:13,E_PLAYER_FLASH_CONNECTION_TIMEOUT:14,E_PLAYER_FLASH_STREAM_FAILED:15,E_PLAYER_FLASH_STREAM_NOT_FOUND:16,E_FLASH_HLS_FRAGMENT_PARSING_ERROR:55,E_FLASH_HLS_FRAGMENT_HTTP_GET_ERROR:56,E_FLASH_HLS_FRAGMENT_TIMEOUT_ERROR:57,E_FLASH_HLS_FRAGMENT_NW_ERROR:58,E_HLS_CLIENT_DISABLE_COOKIES:59,E_PLAYER_FLASH_ACCESSOR_ERROR:301,E_PLAYER_FLASH_URL_ACCESSOR_ERROR:302},b=r.PLAYER_DRM_CODES={E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR:52,E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR:53,E_FLASH_DRM_SYSTEM_UPDATE_ERROR:54,E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR:601,E_FLASH_DRM_LOWER_BOUND_ERROR:3301,E_FLASH_DRM_UPPER_BOUND_ERROR:3766,E_FLASH_DRM_INCOGNITO_MODE_ERROR:3365,E_FLASH_DRM_VOUCHER_INVALID:3300,E_FLASH_DRM_INTERNAL_ACCESS_FAILURE:3307,E_FLASH_DRM_FILE_SYSTEM_WRITE:3313,E_FLASH_DRM_DEVICE_BINDING:3322,E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_1:3323,E_FLASH_DRM_RESET_LICENSE_FILES:3324,E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_2:3325,E_FLASH_DRM_VOUCHER_EXPIRED:3332,E_FLASH_DRM_INTERNAL_ERROR:3343,E_FLASH_DRM_FAILED_MIGRATING_DATA:3346,E_FLASH_DRM_CHROME_SETTING_ERROR:3370},A=r.PLAYER_DASH_CODES={E_DASH_REQUEST_FAILURE:"1",E_DASH_REQUEST_LENGTH:"2",E_DASH_REQUEST_TIMEOUT:"3",E_DASH_METADATA_LENGTH:"4",E_DASH_METADATA_FORMAT:"5",E_DASH_NO_FRAGMENTS:"6",E_DASH_ALIGNMENT:"7",E_DASH_BAD_MIME_TYPE:"8",E_DASH_DESTROYED:"9",E_DASH_OPERATION_ABORTED:"10",E_DASH_BUFFFER_APPEND:"11",E_DASH_MANIFEST_LOAD:"12",E_DASH_MANIFEST_PARSE:"13"},E=r.PLAYER_JS_HLS_CODES={MEDIA_ERR_ABORTED:"1",MEDIA_ERR_NETWORK:"2",MEDIA_ERR_DECODE:"3",MEDIA_ERR_SRC_NOT_SUPPORTED:"4",ERR_XHR_LOAD:"11",ERR_PLAYLIST_LOAD:"12",ERR_SUBS_LOAD:"13",ERR_SEGMENT_LOAD:"14",ERR_PARTIAL_LOAD:"15",ERR_MASTER_PLAYLIST_PARSE:"16",ERR_MEDIA_PLAYLIST_PARSE:"17",ERR_API_NO_NODE:"18"},h=r.SAPI_CODES={E_SAPI_INCOMPATIBLE_FORMAT:"100",E_SAPI_NO_STREAMS_RETURNED:"103",E_SAPI_USER_NOT_AUTHORIZED:"205",E_SAPI_RESTRICTED_TO_INTERNAL:"206",E_SAPI_DRM_RESTRICTED:"207",E_SAPI_UNSUPPORTED_FORMAT:"300",E_SAPI_EXTERNAL_NO_STREAMS:"301",E_SAPI_NO_PLAYABLE_STREAMS:"302",E_SAPI_NOT_FOUND:"400",E_SAPI_TEMP_ERR_JAPI_TIMEOUT:"500",E_SAPI_TEMP_ERR_JAPI_UNKNOWN:"502",E_SAPI_TEMP_ERR_JAPI_CARMOT:"503",E_SAPI_TEMP_ERR_JAPI_UNMAPPED:"550",E_SAPI_EMPTY_ATLAS_ACCOUNT_NAME:"401",E_SAPI_EMPTY_SECURE_KEY:"402",E_SAPI_EMPTY_LIST:"403",E_SAPI_INVALID_DATA:"404",E_SAPI_INVALID_VIDEO:"405",E_SAPI_EMPTY_STREAM_URL:"406",E_SAPI_MISSING_PROVIDER:"501",E_SAPI_SYSTEM_ERROR:"504"},T=(r.CAST_CODES={E_CAST_CONNECTION_REQUEST_FAILED:"1"},function(e,t,r){t.forEach(function(t){e[t]=r})}),S=function(e){var t=[];if(e)for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},I={};T(I,[v.E_SAPI_LICENSE_ERROR,v.E_SAPI_UNAVAILABLE_TEMP,v.E_SAPI_GEO,v.E_SAPI_BLACKOUT],i.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE),S(v).forEach(function(e){I[e]||(I[e]=i.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO)});var L={};L[v.E_SAPI_UNAVAILABLE_TEMP]=i.i18n.ERR_UNAVAILABLE,L[v.E_SAPI_LICENSE_ERROR]=i.i18n.ERR_UNAVAILABLE,L[v.E_SAPI_GEO]=i.i18n.ERR_GEO,L[v.E_SAPI_BLACKOUT]=i.i18n.ERR_BLACKOUT,L[v.E_SAPI_DEVICE]=i.i18n.ERR_DEVICE,L[v.E_SAPI_EMBED]=i.i18n.ERR_EMBED,L[v.E_PLAYER_ANDROID_CHROME_REQUIRED]=i.i18n.ERR_ANDROID_LIVE_CHROME_REQUIRED,L[v.E_PLAYER_NO_COMPATIBLE_FORMAT]=i.i18n.ERR_BROWSER_UNSUPPORTED,T(L,[v.E_SAPI_UNSUPPORTED_LIVE_ON_HTML,v.E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE,v.E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE,v.E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE,v.E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING,v.E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN],i.i18n.ERR_FLASH_IS_BLOCKED);var M={};M[f.E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED]=i.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,T(M,[f.E_PLAYER_NOT_ENABLED,f.E_PLAYER_NOT_UPTO_DATE,f.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED],i.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO),S(f).forEach(function(e){M[e]||(M[e]=i.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)});var C={};C[f.E_PLAYER_NOT_ENABLED]=i.i18n.ERR_FLASH_LATEST_DOWNLOAD,C[f.E_PLAYER_NOT_UPTO_DATE]=i.i18n.ERR_FLASH_LATEST_DOWNLOAD,C[f.E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK]=i.i18n.ERR_NETWORK_ISSUE,S(f).forEach(function(e){C[e]||(C[e]=i.i18n.ERR_GENERAL_ERROR)}),M[g.E_FLASH_HLS_FRAGMENT_NW_ERROR]=i.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO,M[g.E_HLS_CLIENT_DISABLE_COOKIES]=i.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO,M[g.E_PLAYER_FLASH_STREAM_NOT_FOUND]=i.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,S(g).forEach(function(e){M[e]||(M[e]=i.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)}),C[g.E_FLASH_HLS_FRAGMENT_NW_ERROR]=i.i18n.ERR_NETWORK_ISSUE,C[g.E_HLS_CLIENT_DISABLE_COOKIES]=i.i18n.ERR_COOKIE_DISABLED,S(g).forEach(function(e){e!==g.E_FLASH_HLS_FRAGMENT_NW_ERROR&&e!==g.E_HLS_CLIENT_DISABLE_COOKIES&&(C[e]=i.i18n.ERR_GENERAL_ERROR)});var N={};N[b.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR]=i.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,T(N,[b.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR,A.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR,A.E_FLASH_DRM_SYSTEM_UPDATE_ERROR,A.E_FLASH_DRM_LOWER_BOUND_ERROR,A.E_FLASH_DRM_UPPER_BOUND_ERROR,A.E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_2],i.i18n.ERR_TITLE_SOMETHING_WENT_WRONG),S(b).forEach(function(e){N[e]||(N[e]=i.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO)});var D={};D[b.E_FLASH_DRM_CHROME_SETTING_ERROR]=i.i18n.ERR_DRM_CHROME_SETTING,D[b.E_FLASH_DRM_INCOGNITO_MODE_ERROR]=i.i18n.ERR_DRM_INCOGNITO_MODE,D[b.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR]=i.i18n.ERR_MISSING_OR_DAMAGED,T(D,[b.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR,b.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR,b.E_FLASH_DRM_SYSTEM_UPDATE_ERROR,b.E_FLASH_DRM_LOWER_BOUND_ERROR,b.E_FLASH_DRM_UPPER_BOUND_ERROR,b.E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_2],i.i18n.ERR_GENERAL_ERROR),S(b).forEach(function(e){D[e]||(D[e]=i.i18n.ERR_DRM_BAD_LICENSE_FILE)});var R={};S(E).forEach(function(e){R[e]=i.i18n.ERR_TITLE_SOMETHING_WENT_WRONG});var P={};S(E).forEach(function(e){P[e]=i.i18n.ERR_GENERAL_ERROR});var w={};w[A.E_DASH_BAD_MIME_TYPE]=i.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,S(A).forEach(function(e){e!==A.E_DASH_BAD_MIME_TYPE&&(w[e]=i.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)});var O={};O[A.E_DASH_BAD_MIME_TYPE]=i.i18n.ERR_MISSING_OR_DAMAGED,S(A).forEach(function(e){e!==A.E_DASH_BAD_MIME_TYPE&&(O[e]=i.i18n.ERR_GENERAL_ERROR)});var k={};T(k,[h.E_SAPI_INCOMPATIBLE_FORMAT,h.E_SAPI_NO_STREAMS_RETURNED,h.E_SAPI_TEMP_ERR_JAPI_TIMEOUT,h.E_SAPI_TEMP_ERR_JAPI_UNKNOWN,h.E_SAPI_TEMP_ERR_JAPI_CARMOT,h.E_SAPI_TEMP_ERR_JAPI_UNMAPPED],i.i18n.ERR_TITLE_SOMETHING_WENT_WRONG),T(k,[h.E_SAPI_USER_NOT_AUTHORIZED,h.E_SAPI_DRM_RESTRICTED],i.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO),S(h).forEach(function(e){k[e]||(k[e]=i.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE)});var x={};x[h.E_SAPI_USER_NOT_AUTHORIZED]=i.i18n.ERR_UNAUTHORIZED,x[h.E_SAPI_RESTRICTED_TO_INTERNAL]=i.i18n.ERR_UNAVAILABLE,x[h.E_SAPI_DRM_RESTRICTED]=i.i18n.ERR_DRM_RESTRICTED,T(x,[h.E_SAPI_INCOMPATIBLE_FORMAT,h.E_SAPI_NO_STREAMS_RETURNED,h.E_SAPI_TEMP_ERR_JAPI_TIMEOUT,h.E_SAPI_TEMP_ERR_JAPI_UNKNOWN,h.E_SAPI_TEMP_ERR_JAPI_CARMOT,h.E_SAPI_TEMP_ERR_JAPI_UNMAPPED],i.i18n.ERR_GENERAL_ERROR),S(h).forEach(function(e){x[e]||(x[e]=i.i18n.ERR_MISSING_OR_DAMAGED)});var B={};S(y).forEach(function(e){e!==y.E_LIVE_PLAYBACK_COMPLETE&&(B[e]=i.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)}),B[y.E_LIVE_PLAYBACK_COMPLETE]=i.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE;var j={};j[y.E_LIVE_PLAYBACK_COMPLETE]=i.i18n.ERR_LIVE_PLAYBACK_COMPLETE,S(y).forEach(function(e){e!==y.E_LIVE_PLAYBACK_COMPLETE&&(j[e]=i.i18n.ERR_GENERAL_ERROR)}),r.Error=o,Object.defineProperty(o.prototype,"rep",{get:function(){return n(this)}}),o.prototype._getPhaseFromState=function(e){var t="S";return e&&e.playbackState&&(e.playbackState.state===a.VIDEO||e.playbackState.state===a.END)&&(t="P"),t},o.prototype.isSAPIError=function(){var e=this;return e.category>=_&&e.category<=m},Object.defineProperty(o.prototype,"title",{get:function(){var e=this,t=null,n=e.errorInfo.playbackState&&e.errorInfo.playbackState.loadedItem&&e.errorInfo.playbackState.loadedItem.isLive();if(e.isSAPIError())t=k;else{if(e.category===l&&-1!==s.indexOf(e.subcategory)&&n&&e.userAgent&&(e.userAgent.android||e.userAgent.ios))return i.i18n.ERR_TITLE_SOMETHING_WENT_WRONG;e.category===l||e.category===d?t=M:e.category===r.E_WARNING?t=B:e.category===r.E_INFO?t=I:e.category===c?t=N:e.category===p?t=w:e.category===u&&(t=R)}return t&&t[e.subcategory]||i.i18n.ERR_TITLE_SOMETHING_WENT_WRONG}}),Object.defineProperty(o.prototype,"message",{get:function(){var e=this,t=null,n=e.errorInfo.playbackState&&e.errorInfo.playbackState.loadedItem&&e.errorInfo.playbackState.loadedItem.isLive();if(e.isSAPIError())t=x;else{if(e.category===l&&-1!==s.indexOf(e.subcategory)&&n&&e.userAgent&&(e.userAgent.android||e.userAgent.ios))return i.i18n.ERR_LIVE_IOS_PLAYBACK;e.category===l||e.category===d?t=C:e.category===r.E_WARNING?t=j:e.category===r.E_INFO?t=L:e.category===c?t=D:e.category===p?t=O:e.category===u&&(t=P)}return this._msg||t&&t[e.subcategory]||i.i18n.ERR_TECH_DIFFICULTIES}}),r.isInfoCode=function(e){for(var t in v)if(v.hasOwnProperty(t)&&v[t]===e)return!0;return!1}},{"./states":57,"./strings":"XwKsC9"}],"./nextgen/src/event.js":[function(e,t,r){t.exports=e("YJm+dH")},{}],"YJm+dH":[function(e,t,r){"use strict";r.API={PLAYER_RENDERED:"render",PLAYER_READY:"playerReady",PLAYER_ERROR:"playerError",PLAYER_FULLSCREEN_CHANGE:"fullscreenChange",PLAYER_VOLUME_CHANGE:"volumeChange",PLAYER_MUTE_CHANGE:"muteChange",PLAYBACK_ERROR:"playbackError",PLAYBACK_READY:"playbackReady",PLAYBACK_START:"playbackStart",DURATION_CHANGE:"durationChange",BITRATE_CHANGE:"bitrateChange",PLAYBACK_PAUSE:"playbackPause",PLAYBACK_RESUMED:"playbackResumed",PLAYBACK_TIME_UPDATE:"playbackTimeUpdate",PLAYBACK_SEEK_COMPLETE:"playbackSeek",PLAYBACK_COMPLETE:"playbackComplete",AD_PLAYBACK_START:"adStart",AD_PLAYBACK_PAUSE:"adPause",AD_PLAYBACK_RESUME:"adResume",AD_PLAYBACK_PROGRESS:"adProgress",AD_PLAYBACK_STOP:"adComplete",AD_NONE:"adNone",AD_ERROR:"adError",PLAYLIST_COMPLETE:"playlistComplete",PLAYLIST_POSITION_CHANGE:"playlistPositionChange",UI_INTERACT:"uiInteract",BEACON_SEND:"beaconSend",LOADING_BEGIN:"loading-begin",LOADING_END:"loading-end",PLAYBACK_TIMEOUT:"playback-timeout",VIDEO_STARTED:"video-started",METADATA_READY:"metadata-ready",CC_AVAILABLE:"media-item-cc-available",CAST_AVAILABILITY_CHANGE:"cast-availability-change",CAST_CONNECTED_STATE_CHANGE:"cast-connected-state-change",CUEPOINT_STARTED:"cuepointStarted",CUEPOINT_STOPPED:"cuepointStopped",CUEPOINT_DETECTED:"cuepointDetected",PLAYER_VIEWPORT_CHANGE:"player-viewport-change",PLAYER_DOCKED_CHANGE:"player-docked-change"},r.TIMED_METADATA_RECEIVED="timed-metadata-received",r.ERROR="player-error",r.WARNING="player-warning",r.INFO="player-info",r.KEYDOWN="keydown",r.START_SCREEN_RENDERED="start-screen-rendered",r.START_SCREEN_CLICK="start-screen-click",r.END_SCREEN_RENDERED="end-screen-rendered",r.CTRL_ENDSCREEN_VID="selected-endscreen-video",r.RELATED_ITEM_CLICK="related-item-click",r.FETCH_MORE_RELATED_ITEMS="fetch-more-related-items",r.UP_NEXT_PG_CLICK="upnext-pg-click",r.SEEK_BAR_MOUSEOVER="seek-bar-mouseover",r.SEEK_BAR_MOUSEOUT="seek-bar-mouseout",r.TOGGLE_PLAY_PAUSE="toggle-play-pause",r.CONTROLS_SEEK_START="controls-seek-start",r.CONTROLS_SEEK_END="controls-seek-end",r.CONTROLS_SEEKING="controls-seeking",r.CONTROLS_SET_VOLUME="controls-set-volume",r.CONTROLS_SET_MUTE="controls-set-mute",r.FULLSCREEN_CHANGE="fullscreen-change",r.PLAYER_DIMENSION_CHANGE="player-dimension-change",r.CONTROLS_BAR_CHANGE="controls-bar-change",r.METADATA_AVAILABLE="metadata-available",r.REFRESH_METADATA_AVAILABLE="refresh-metadata-available",r.RELATED_ITEMS_LOADED="related-items-loaded",r.RENDERER_SWITCHED="renderer-switched",r.RENDERER_PP_NEXT="renderer-prepare-preload-next",r.USERTAP_RESTRICTION_REMOVED="mobile-usertap-restriction-removed",r.RENDER_PLAYLIST_FIRST_BATCH="render-playlist-first-batch",r.MEDIA_ITEM_LOADED="media-item-loaded",r.CAST={TOGGLE_PLAYING:"cast-toggle-playing",BUFFERING:"cast-buffering",MEDIA_CHANGED:"cast-media-changed",PLAYBACK_PROGRESS:"cast-playback-progress",VIDEO_ENDED:"cast-video-ended",PLAYLIST_ENDED:"cast-playlist-ended",CONNECTION_STATUS_CHANGED:"cast-connection-changed",VOLUME_CHANGED:"cast-receiver-volume-changed",MUTE_CHANGED:"cast-receiver-mute-changed",CAPTION_AVAILABILITY_CHANGED:"cast-captions-availability-changed"},r.SWF_READY="swf-ready",r.SWF_READY_TIMEOUT="swf-ready-timeout",r.PAUSE_VPAID="pause-vpaid",r.RESUME_VPAID="resume-vpaid",r.PLAYER_RESIZE="player-resize",r.SELECTED_STREAM_CHANGE="selectedStreamChange",r.SELECTED_STREAM_URL_CHANGE="selectedStreamUrlChange",r.RENDERER_PLUGIN_LOADED="rendererPluginLoaded",r.RENDERER_PLUGIN_LOAD_FAILED="rendererPluginLoadFailed",r.RENDERER_PLUGIN_LOAD_TIMED_OUT="rendererPluginLoadTimedOut",r.VTT_SEGMENT_LOADED="vttSegmentLoaded",r.SEGMENT_FIRST_BYTE_LOADED="segmentFirstByteLoaded",r.MEDIA_RELOAD_BEGIN="mediaReloadBegin",r.MEDIA_RELOAD_END="mediaReloadEnd",r.MEDIA_PLAYLIST_LOADED="mediaPlaylistLoaded",r.MEDIA_PLAYLIST_UPDATED="mediaPlaylistUpdated",r.SUBTITLE_PLAYLIST_UPDATED="subtitlePlaylistUpdated",r.QUALITY_CHANGE="qualityChange",r.QUALITY_SELECTED="qualitySelected",r.BITRATE_LIST_CHANGED="bitrateListChanged",r.ABR_DATA_UPDATE="abrDataUpdate",r.FRAG_LOAD_RETRY_FAILURE="fragLoadRetryFailure",r.LIVE_MEDIA_PLAYLIST_LOAD_RETRY_FAILURE="liveMediaPlaylistLoadRetryFailure",r.LIVE_LOADING_LATE="liveLoadingLate",r.RECOVERY_START="recoveryStart",r.RECOVERY_METADATA_READY="recoveryMetadataReady",r.ER_READY="erReady",r.PLAYBACK_INFO="playback-info",r.USER_AUTHENTICATED="user-authenticated",r.OPEN_FEEDBACK="open-feedback",r.CC_HOVER="cc-hover",r.VOLUME_HOVER="volume-hover",r.PTS_DISCONTINUITY="PTSDiscontinuity",r.RELOAD_FRAGMENT="ReloadFragment",r.nativeVideoEvents=["ended","error","loadedmetadata","loadeddata","pause","stalled","loadstart","play","playing","seeking","seeked","timeupdate","volumechange","waiting"],r.html5HlsEvents=["infoUpdate","segmentFirstByteLoaded","vttSegmentLoaded","streamSwitched","liveLoadingLate","streamUpdated","hlsWaiting","cuepointDetected","cuepointStarted","subtitleStreamUpdated","abrDataUpdated","preloadProgress","segInfoMetricsAvailable"],r.SEG_INFO_AVAILABLE="segInfoAvailable",r.Video={CLICK:"video-click",SWITCHING:"switching",SWITCHED:"switched",WARNING:"warning"},r.Ad={CLICK:"ad-click",NO_AD:"ad-no-ad",NO_PLAYABLE_STREAM:"ad-no-playable-stream",CANCELED:"ad-canceled",BREAK_CANCELLED:"ad-break-cancelled"},r.nativeVideoEvents.forEach(function(e){r.Video[e.toUpperCase()]="video-"+e,r.Ad[e.toUpperCase()]="ad-"+e}),r.VIDEO_REQUEST="video-request",r.PLAYBACK_REQUEST="playback-request",r.PLAYBACK_STARTED="playback-started",r.PLAYBACK_RESUMED="playback-resumed",r.PLAYBACK_PROGRESS="playback-progress",r.PLAYBACK_STALLED="playback-stalled",r.PLAYBACK_ENDED="playback-ended",r.PLAYBACK_ERROR="playback-error",r.API_CALLED="api-called",r.FEEDBACK_INFO="feedback-info",r.HLS_FIRST_TS_LOAD_START="hls-first-ts-load-start",r.HLS_FIRST_TS_FIRST_BYTE_ARRIVE="hls-first-ts-first-byte-arrive",r.CTRL_PLAYPAUSE="ctrl-play-pause",r.CTRL_SEEK="ctrl-seek",r.CTRL_VOLUME="ctrl-volume",r.CTRL_FULLSCREEN="ctrl-fullscreen",r.CTRL_SETTINGS="ctrl-settings",r.CTRL_AGEGATE_BDAY="ctrl-agegate-bday",r.CTRL_SHARE="ctrl-share",r.CTRL_REPLAY="ctrl-replay",r.CTRL_TIMER="ctrl-timer",r.CTRL_PLAYREQUEST="ctrl-playrequest",r.UI_LOGIN="ui-login",r.AD_PLAYBACK_REQUEST="ad-playback-request",r.AD_PLAYBACK_STARTED="ad-playback-started",r.AD_PLAYBACK_PAUSED="ad-playback-paused",r.AD_PLAYBACK_RESUMED="ad-playback-resumed",r.AD_PLAYBACK_PROGRESS="ad-playback-progress",r.AD_PLAYBACK_ENDED="ad-playback-ended",r.AD_BREAK_STARTED="ad-break-started",r.AD_BREAK_INFO="ad-break-info",r.AD_BREAK_ENDED="ad-break-ended",r.CUEIN_DETECTED="cue-in-detected",r.AD_PLAYBACK_ERROR="ad-playback-error",r.AD_CLICK="ad-exposed-click",r.UPDATE_AD_COUNT="update-ad-count",r.UPDATE_AD_BREAKS="update-ad-breaks",r.ADS_OBJS_UPDATE="ads-object-update",r.ADS_READY="ads-ready",r.AD_BREAK_TIMELINE="ad-break-timeline",r.YVAP_INFO_UPDATE="yvap-info-update",r.YVAP_MIDROLL_CACHE_UPDATE="yvap-midroll-cache-update",r.YVAP_SWF_PROXIED_EVENT="yvap-swf-proxied-event",r.AD_METRICS="ad-metrics",r.SAPI_REFRESH_REQUEST="sapi-refresh-request",r.CC={SETTINGS:"cc-settings",TOGGLE:"cc-toggle",UI_TOGGLE:"cc-ui-toggle",FETCHED:"cc-fetched",FETCH_MOBILE:"cc-fetche-mobile",REQUEST_UI_DATA_FOR_MEDIA_ITEM:"cc-request-ui-data-for-media-item",REMOVED:"cc-destroy",SHOW_CONTROLS:"cc-show-controls",LANGUAGE_CHANGE:"cc-language-change",CC_OPTIONS_LANGUAGE_CHANGE:"cc-options-language-change",FONT_SIZE_CHANGE:"cc-font-size-change",FONT_FACE_CHANGE:"cc-font-face-change",BG_OPACITY_CHANGE:"cc-bg-opacity-change",USER_STYLE_PREFERENCES_CHANGE:"cc-user-style-preferences-change",SAVE_TO_LOCAL_STORAGE:"cc-save-to-local-storage",UPDATE_STYLE:"cc-update-style",POSITION_CHANGE:"cc-position-change",POSITION_FLOAT:"cc-position-float"},r.CTV={GET_BITRATE_FOR_OPSS:"ctv-get-bitrate-for-opss"},r.BEFORE_PROGRESS_BEACON="before-progress-beacon",r.BEFORE_INCOMPLETE_EXIT="before-incomplete-exit",r.Metrics={INIT_TO_STARTSCREEN:{type:"titssc",desc:"VideoPlayer init to StartScreen Rendered"},HLS_FIRST_TS_LOAD_START:{type:"hftls",desc:"First ts loading starts in HLS"},HLS_FIRST_TS_FIRST_BYTE_ARRIVE:{type:"hftfba",desc:"First byte arrives for the first ts loading in HLS"},CLICK_TO_START:{type:"ttsapf",desc:"Player click to playback start"},INIT_TO_START:{type:"ttsapt",desc:"Init to playback start (autoplay)"},PLAYBACK_START:{type:"tpb",desc:"Playback request to playback start"},PLAYBACK_STALLED:{type:"tps",desc:"Playback buffering start to buffering end"},LOAD_TO_LOADED_DATA:{type:"tltld",desc:"Time from load() to loaded data"},SAPI_REQUEST:{type:"tsapic",desc:"SAPI request to SAPI response"},SWF_READY:{type:"tswfr",desc:"Player SWF is ready"},SWF_OBJECT_TO_INIT_START:{type:"tobtswfinit",desc:"Time from creation of object tag to call of swf constructor"},INIT_RENDER_GAP:{type:"tirg",desc:"Time gap between end of construction and beginning of render"},INIT_TO_SAPI:{type:"titsc",desc:"Time from beginning of construction to first updateMetaData"},RENDER_TO_SWF:{type:"trtswf",desc:"Time from init to object tag creation"},DRM_METADATA_IS_SET:{type:"tdmds",desc:"Time interval from play to drm meta data is set"},DRM_AUTH_COMPLETE:{type:"ttauth",desc:"Time to complete DRM authentication after drm metadata is set"},SET_WATCH_HISTORY:{type:"tsetwh",desc:"YQL+ call to save watch history"},VP_CONSTRUCTOR:{type:"tcons",desc:"VideoPlayer Constructor"},GET_USER_PREFS:{type:"tgetcc",desc:"YQL+ call to get captions preferences"},PLAYLIST_LOADED:{type:"tploaded",desc:"Playlist loaded"},SAPI_LOADCLIPS:{type:"tsapiclips",desc:"SAPI request for clips"},CREATE_RENDERER:{type:"trcreate",desc:"Creating the renderer (swf/html)"},YVAP_READY:{type:"tyvapr",desc:"VideoAdPlugin is ready"},YVAP_NOAD:{type:"tyvapadn",desc:"Ad None"},YVAP_ADSTARTED:{type:"tyvapads",desc:"Ad Started"},STREAM_REQUEST_TO_RENDER:{type:"treqtr",desc:"Stream Latency (From request to render)"},STREAM_PLAY_TO_RENDER:{type:"tsltps",desc:"Media playback start to video render"},SAPI_LOADRELATED:{type:"tsapilr",desc:"SAPI Get for related videos"}}},{}],25:[function(e,t,r){"use strict";function n(e){var t=this;t._eventBus=e,t._scenarios=[o,i,a,s]}function o(e){var t=e.querySelector("object");if(t&&"none"===t.style.display){var r=l.safari?p.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE:p.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE;return d.createErr("R","S",p.E_INFO,r)}return null}function i(e){return e&&e.querySelector("div[bginactive]")?d.createErr("R","S",p.E_INFO,p.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE):null}function a(e){return l.safari&&e&&e.querySelector('div[aria-label~="Safari Power Saver"]')?d.createErr("R","S ",p.E_INFO,p.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING):null}function s(e){return e&&e.querySelector('div[style~="chrome-extension"]')?d.createErr("R","S ",p.E_INFO,p.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN):null}t.exports=n;var l=e("../../lib/user-agent"),d=e("./util"),c=e("./event"),p=e("./error");n.prototype.destroy=function(){var e=this;e._observer&&e._observer.disconnect()},n.prototype.detect=function(e){
var t=this;if(!t._isFlashBlocked(e)){var r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(l.ie&&l.ie<11||"undefined"==typeof r)return;t._observer=new r(function(r){var n={};try{r.forEach(function(r){if(t._isFlashBlocked(e))throw n})}catch(o){if(o!==n)throw o;t._observer.disconnect()}});var n={attributes:!0,childList:!0,characterData:!0};t._observer.observe(e,n)}},n.prototype._isFlashBlocked=function(e){var t=this;if(!e)return!1;for(var r=0;r<t._scenarios.length;r++){var n=t._scenarios[r].call(t,e);if(n)return t._eventBus.publish(c.INFO,n),t._observer&&t._observer.disconnect(),!0}return!1}},{"../../lib/user-agent":"ty5FFo","./error":22,"./event":"YJm+dH","./util":"jJTEqU"}],26:[function(e,t,r){"use strict";function n(e,t){var r=this;r._model=t,r._eventBus=e,r._segments={},r._events=[],r._processedCueOuts={},r._processedCueIns={},r._trackedCueOutSeqNum=null,r._masterPlaylist="",r._mediaPlaylist="",r._processingTime=0,r._refreshPlaylistTimer=null,r._bindEvents()}t.exports=n;var o=e("./util"),i=e("./event"),a=(e("../../lib"),e("../../lib/logger"),8e3),s=/^#(EXT-X-MEDIA-SEQUENCE|EXTINF|EXT-X-CUE-OUT(?:-CONT)?|EXT-X-CUE-IN|EXT-X-ENDLIST):?([0-9\.]+)?(?:\/([0-9\.]+)?)?,?$/;n.prototype.updatePlaylistURLs=function(e,t){var r=this;r._masterPlaylist=e,r._mediaPlaylist=t},n.prototype._initCueTracking=function(e,t){var r=this;r._getMediaPlaylist(e,t,function(e,t){e||r._extractCuePoints(t)}),r._stopCueTracking(),r._refreshPlaylistTimer=setTimeout(function(){r._initCueTracking(e,t)},a)},n.prototype._stopCueTracking=function(){var e=this;clearTimeout(e._refreshPlaylistTimer),e._refreshPlaylistTimer=null},n.prototype._extractCuePoints=function(e){for(var t=this,r=e.split("\n"),n=0;r.length;){var o=r.shift(),a=o.match(s);if(a)switch(a[1]){case"EXT-X-MEDIA-SEQUENCE":n=parseInt(a[2]);break;case"EXTINF":if(n++,t._segments[n]){t._processingTime=t._segments[n].end;break}var l=parseFloat(a[2]);t._processingTime+=l,t._segments[n]={dur:l,end:t._processingTime};break;case"EXT-X-CUE-OUT":t._processingTime=0,t._processedCueOuts[n]||(t._trackedCueOutSeqNum=n,t._processedCueOuts[n]=!0);break;case"EXT-X-CUE-IN":if(!t._processedCueIns[n]){var d=Math.round(t._processingTime);t._events.push({type:i.API.CUEPOINT_STOPPED,seqNum:n,cueOutSeqNum:t._trackedCueOutSeqNum,time:d}),t._processedCueIns[n]=!0,t._onCueInDetected(d,t._trackedCueOutSeqNum)}break;case"EXT-X-ENDLIST":t._stopCueTracking()}}},n.prototype._checkCues=function(e,t){var r=this,n=null,o=-1;if(r._events.forEach(function(r,i){e>=r.time&&t===r.cueOutSeqNum&&(n=r,o=i)}),n){r._events=r._events.slice(o+1);var a=[n.type];n.type===i.API.CUEPOINT_STOPPED&&a.push(n.time),r._eventBus.publish.apply(r._eventBus,a)}},n.prototype._bindEvents=function(){function e(){clearInterval(o._cueOutTimeUpdater),o._cueOutTimeUpdater=null}function t(e){if(!o._model)return null;var t=o._model.playlist.getCurrentItem().streamProfiles||[];return t=t.filter(function(e){return"stream"===e.type}),t[e]?t[e].url:null}function r(r,n,i){var s=1e3;a=i.cueoutStartSeqNum,o._mediaPlaylist=t(i.cueoutStreamIndex)||o._mediaPlaylist,o._initCueTracking(o._masterPlaylist,o._mediaPlaylist),e();var l=0;o._cueOutTimeUpdater=window.setInterval(function(){o._checkCues(++l,a)},s)}function n(){e(),o._stopCueTracking(),o._events.length=0}var o=this,a=null;o._onCueInDetected=function(e,t){t===a&&o._eventBus.publish(i.CUEIN_DETECTED,e)},o._eventBus.subscribe(i.API.CUEPOINT_STARTED,r,o),o._eventBus.subscribe(i.API.CUEPOINT_STOPPED,n,o),o._eventBus.subscribe(i.AD_BREAK_ENDED,n,o)},n.prototype._getMediaPlaylist=function(e,t,r){var n=this;return n._masterPlaylist=e,t?(n._mediaPlaylist=t,n._fetchPlaylist(n._mediaPlaylist,r)):void o.ajax(n._masterPlaylist,{method:"GET",context:n,successHandler:function(e){return n._mediaPlaylist=n._getPlaylistUrl(e),""!==n._mediaPlaylist?n._fetchPlaylist(n._mediaPlaylist,r):r("bad mpl url")},failureHandler:function(e){return r(e)}})},n.prototype._fetchPlaylist=function(e,t){var r=this;if(!e.match(/^https?:/)){var n=r._masterPlaylist.match(/^(https?:.*\/).*?\.m3u8?/)[1];n&&(e=n+e)}o.ajax(e,{method:"GET",context:r,successHandler:function(e){return t(null,e)},failureHandler:function(e){return t(e)}})},n.prototype._getPlaylistUrl=function(e){for(var t=e.split("\n");t.length;){var r=t.shift();if(r.match(/^[^#].*\.m3u8.*?$/))return r}return""},n.prototype.destroy=function(){var e=this;e._stopCueTracking()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./event":"YJm+dH","./util":"jJTEqU"}],27:[function(e,t,r){"use strict";function n(e,t,r){var n=this,i=o.getWindow(),a=i.location.protocol;n._iframeControlsGetMethods={isPlaying:null,getDuration:null,getCurrentTime:null,getTimeRemaining:null,getFullscreen:null,getVolume:null,getMute:null},n._iframePlaylistGetMethods={getCurrentItemTitle:null,getCurrentItemDescription:null,getCurrentItemProviderName:null},n._iframeVID="VID-"+Math.floor(1e3*Math.random()),n._configData=JSON.parse(JSON.stringify(e)),n._player=r,n._iframe=null,n._startTime=Date.now(),n._iframeLoaded=!1,n._receiveMessageHandlerOnPage=null,n._receiveMessageHandlerOnIframe=null,n._iframeHost="https:"===a?"https://s.yimg.com":"http://l.yimg.com",e.insideIframeConfig||(n._receiveMessageHandlerOnPage=n._pageReceiveFromIframe.bind(n),window.addEventListener("message",n._receiveMessageHandlerOnPage,!1))}t.exports=n;var o=e("./util"),i=e("../../lib"),a=e("./error"),s=e("./event"),l={EVENT:"EVENT",CLEAR_IFRAME_NAME:"CLEAR_IFRAME_NAME"};n.prototype.destroy=function(){var e=this;e._receiveMessageHandlerOnPage&&window.removeEventListener("message",e._receiveMessageHandlerOnPage,!1),e._receiveMessageHandlerOnIframe&&window.removeEventListener("message",e._receiveMessageHandlerOnIframe,!1)},n.prototype.constructIframe=function(e){var t,r=this,n=o.getWindow();if(t=i.isString(e)?document.querySelector(e):e._node||e,null===t)return void r._eventBus.publish(s.Error,o.createErr("C",null,a.E_PLAYER,a.PLAYER_CODES.E_INVALID_CONFIGURATION,"Invalid DOM node or CSS selector specified. Cannot render player."));r._configData.insideIframeConfig={startTime:r._startTime,iframeVID:r._iframeVID,parentURL:n.location.protocol+"//"+n.location.host};var l=document.createElement("iframe"),d=encodeURIComponent(JSON.stringify(r._configData)),c=r._iframeHost+"/rx/builds/7.86.188.1476334231/iframe-controller-page.html";l.setAttribute("src",c),l.setAttribute("name",d),l.setAttribute("id",r._iframeVID),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("frameBorder","0"),l.setAttribute("allowFullScreen",""),t.appendChild(l),r._iframe=l,r._iframe.onload=function(){r._iframeLoaded=!0}},n.prototype._pageSendToIframe=function(){var e=this;if(e._iframe&&e._iframeLoaded){var t=Array.prototype.slice.call(arguments),r=JSON.stringify(t);e._iframe.contentWindow.postMessage(r,e._iframeHost)}},n.prototype._pageReceiveFromIframe=function(e){var t=this,r=null,n=null,o={},a=null,s=t._iframeControlsGetMethods,d=t._iframePlaylistGetMethods;if(e.origin===t._iframeHost){try{r=JSON.parse(e.data)}catch(c){return}if(r&&i.isArray(r)&&r.length>=2){if(a=r.pop(),!i.isString(a)||0!==a.indexOf("VID-"))return;if(t._iframeVID!==a)return;if(n=r.pop(),!n||!l[n])return;switch(n){case l.EVENT:o=r.pop(),Object.keys(o).forEach(function(e){t._iframeControlsGetMethods.hasOwnProperty(e)?s[e]=o[e]:t._iframePlaylistGetMethods.hasOwnProperty(e)&&(d[e]=o[e])}),t._player._iframeController._iframeControlsGetMethods=s,t._player._iframeController._iframePlaylistGetMethods=d,t._player.publish.apply(t._player,r);break;case l.CLEAR_IFRAME_NAME:t._iframe.setAttribute("name","")}}}},n.prototype.routeControlsApiToIframe=function(){var e=this,t="controls",r="playlist",n=["addItems","addItem","setPositionById","setPosition","removeItem","removeItems","removeItemById","removeItemsById"],o=["getCurrentItemTitle","getCurrentItemDescription","getCurrentItemProviderName"],i=function(r){return function(){var n=Array.prototype.slice.call(arguments);e._pageSendToIframe(t,r,n)}},a=function(t){return function(){return e._iframeControlsGetMethods[t]}},s=function(t){return-1!==n.indexOf(t)?function(){var n=Array.prototype.slice.call(arguments);e._pageSendToIframe(r,t,n)}:-1!==o.indexOf(t)?function(){return e._iframePlaylistGetMethods[t]}:function(){throw new Error("playlist API "+t+" is not supported when safe frame is enabled")}},l=function(e){return function(){throw new Error("player API "+e+" is not supported when safe frame is enabled")}};for(var d in e._player[t])if("function"==typeof e._player[t][d]){if(void 0!==e._iframeControlsGetMethods[d]){e._player[t][d]=a(d);continue}e._player[t][d]=i(d)}for(var c in e._player[r])"function"==typeof e._player[r][c]&&(e._player[r][c]=s(c));e._player.getCustomControlsNode=l("getCustomControlsNode"),e._player.fetchMetaData=l("fetchMetaData"),e._player.getMediaStore=l("getMediaStore")},n.prototype.routeAPIeventToPage=function(e){var t=this,r=window.YAHOO.VideoPlatform.API_Events[e];t._player.on(r,function(){var e=Array.prototype.slice.call(arguments);e.unshift(r),e.push(t.refreshControlsAPIData()),e.push(l.EVENT),e.push(t._configData.insideIframeConfig.iframeVID),t._iframeSendToPage(JSON.stringify(e))})},n.prototype.sendClearIframeNameToPage=function(){var e=this,t=[];t.push(l.CLEAR_IFRAME_NAME),t.push(e._configData.insideIframeConfig.iframeVID),e._iframeSendToPage(JSON.stringify(t))},n.prototype._iframeSendToPage=function(e){var t=this,r=null;t._configData.insideIframeConfig&&(r=t._configData.insideIframeConfig.parentURL),window.parent.postMessage(e,r)},n.prototype._iframeReceiveFromPage=function(e){var t=this,r=null,n=null,o=null,i=null;if(e.data){try{i=JSON.parse(e.data)}catch(a){return}Array.isArray(i)&&(r=i.length>0?i[0]:null,n=i.length>1?i[1]:null,o=i.length>2?i[2]:null),r&&n&&t._player&&t._player[r]&&t._player[r][n]&&t._player[r][n].apply(t._player[r],o)}},n.prototype.refreshControlsAPIData=function(){var e=this,t={isPlaying:e._player.controls.isPlaying(),getDuration:e._player.controls.getDuration(),getCurrentTime:e._player.controls.getCurrentTime(),getTimeRemaining:e._player.controls.getTimeRemaining(),getFullscreen:e._player.controls.getFullscreen(),getVolume:e._player.controls.getVolume(),getMute:e._player.controls.getMute(),getCurrentItemTitle:e._player.playlist.getCurrentItemTitle(),getCurrentItemDescription:e._player.playlist.getCurrentItemDescription(),getCurrentItemProviderName:e._player.playlist.getCurrentItemProviderName()};return t},n.prototype.setupIframeToPageCommunication=function(){var e=this;e._receiveMessageHandlerOnIframe=e._iframeReceiveFromPage.bind(e),window.addEventListener("message",e._receiveMessageHandlerOnIframe,!1);for(var t in window.YAHOO.VideoPlatform.API_Events)window.YAHOO.VideoPlatform.API_Events.hasOwnProperty(t)&&e.routeAPIeventToPage(t)}},{"../../lib":"bRhrlU","./error":22,"./event":"YJm+dH","./util":"jJTEqU"}],28:[function(e,t,r){"use strict";var n=e("./event"),o=e("./util"),i=e("./video-player");o.setSingleton("VideoPlayer",i),o.setSingleton("API_Events",n.API)},{"./event":"YJm+dH","./util":"jJTEqU","./video-player":66}],29:[function(e,t,r){"use strict";function n(e){return f.isString(e)&&""!==e}function o(e,t){var r=this;s(L,e,r,t),f.isString(r.url)&&0!==r.url.length||(r.url=r.host+r.path),r.format||(r.format=y.getFormat(r.url)),!r.host&&r.url.length>0&&(r.host=y.getHostname(r.url))}function i(){var e=this;e.streams=[],e.selectedStreams=[],e.relatedVideoIds=[],e.state=_.NO_DATA,e.recoveryStatus=m.NOT_RECOVERING,e.isCCM=!0,e.tryCount=1,e.failoverCount=0}function a(){var e=this;e._items={},e._finishedListeners=[]}function s(e,t,r,n){l(e,t,r,null,n),t.CMS&&Object.keys(t.CMS).forEach(function(e){r.CMS[e]=t.CMS[e]}),t.html5_hls&&Object.keys(t.html5_hls).forEach(function(e){r.html5_hls[e]=t.html5_hls[e]})}function l(e,t,r,n,o){var i=r,a=t,s=!0,c=!1;if("configName"in e&&(n=e.configName),n&&(f.isObject(t)&&n in t?(a=t[n],c=!0):s=!1),s&&"transform"in e&&(a=e.transform(a)),"defaultVal"in e){var p=e.defaultVal;if(void 0===r&&(i=f.isFunction(p)?p():p),c){var u=!0;if("overwrite"in e){var _=e.overwrite;f.isFunction(e.overwrite)?u=_(i,a):_||(u=i===p)}u&&("validator"in e?e.validator(a)?i=a:d("Bad configuration data for '"+n+"'",o):i=a)}else e.required&&d("Missing required configuration parameter '"+n+"'",o)}else{i=r||{},s&&!f.isObject(a)&&(n?d("Expecting object in configuration for '"+n+"'",o):d("Expecting object for configuration",o),s=!1),s||(a={});for(var m in e)if(e.hasOwnProperty(m)&&-1===N.indexOf(m)){var v=e[m];i[m]=l(v,a,i[m],m,o)}}return i}function d(e,t){var r=new Error(e);if(!t)throw r;t.push(r)}function c(e){if(!e)return"";for(var t=e.split("&"),r=0;r<t.length;r++)if(0===t[r].indexOf("ps=")&&t[r].length>3){var n=t[r].substring(3),o=n.split("_");return o[0]}return""}function p(e,t){for(var r=e.split("&"),n=0;n<r.length;n++)if(0===r[n].indexOf("ps=")&&r[n].length>3){r[n]=r[n].replace(r[n].substring(3),t);break}return r.join("&")}function u(e,t){e&&e.length>0&&e.forEach(function(e){e.path&&(e.path=p(e.path,t)),e.url&&(e.url=p(e.url,t)),e.hlsInfo&&e.hlsInfo.ts_url&&(e.hlsInfo.ts_url=p(e.hlsInfo.ts_url,t))})}var _={NO_DATA:"no-data",FETCHING:"fetching",HAS_DATA:"has-data",ERROR:"error"},m={NOT_RECOVERING:"not-recovering",RECOVERING:"recovering",RECOVERED:"recovered"};t.exports={MediaStore:a,Stream:o,MediaItem:i,ItemState:_,ItemRecoveryStatus:m,fillFromConfig:s,addError:d,getSapiVsId:c,updateVsInStreams:u};var v=e("./event"),y=e("./util"),f=e("../../lib"),g=e("../../lib/logger"),b=e("./stream"),A=e("./error"),E=e("./constants"),h="yvpResumeTimeItems",T=10,S={Community:{providerId:"video.community.sony.com"},"Sin City Saints":{providerId:""},"Other Space":{providerId:""}},I="application/vnd.apple.mpegurl",L={mimeType:{configName:"mime_type",defaultVal:"",validator:n},format:{defaultVal:"",transform:function(e){if(!f.isString(e))return null;var t=e.toLowerCase().split("/");return t[t.length-1]},validator:n},width:{defaultVal:0,validator:f.isNumber},height:{defaultVal:0,validator:f.isNumber},bitrate:{defaultVal:0,validator:f.isNumber},duration:{defaultVal:0,validator:f.isNumber},host:{defaultVal:"",validator:f.isString},path:{defaultVal:"",validator:f.isString},url:{defaultVal:"",validator:n},live:{defaultVal:!1,validator:f.isBoolean},isPrimary:{configName:"is_primary",defaultVal:!1,validator:f.isBoolean},cdn:{configName:"cdn",defaultVal:"",validator:f.isString},hlsInfo:{configName:"hls_info",defaultVal:null},dashInfo:{configName:"dash_info",defaultVal:null},drmType:{configName:"drm_type",defaultVal:null},deliveryType:{defaultVal:""},manifestContent:{configName:"mediaPlaylist",defaultVal:null},type:{defaultVal:"",validator:f.isString},frameRate:{defaultVal:0,validator:f.isNumber,configName:"framerate"},channels:{configName:"channels",defaultVal:null}};o.prototype.isRTMP=function(){var e=this,t=/^rtmp(?:e|t|te|s)?:\/\//;return t.test(e.host)||t.test(e.url)},o.prototype.isRTX=function(){var e=this;return e.url.indexOf("/rtx/")>-1},o.prototype.isAtlas=function(){var e=this,t=e.host;return e.hlsInfo&&(t=e.hlsInfo.ts_url),/atlas\.cdn\.yimg\.com/.test(t)},o.prototype.isDrmProtected=function(){var e=this;return"adobe"===e.drmType||"apple"===e.drmType},o.prototype.isStreamCompatibleForDrm=function(e){var t=this;return t.isDrmProtected()?"flash"===e&&"f4m"===t.format?1:-1:0},o.prototype._getProtocol=function(){var e=this,t="http",r=e.url.split(":");return r.length>1&&(t=r[0]),t},o.prototype.getType=function(){var e=this,t="unknown",r=e.url,n=e._getProtocol();return r&&(n&&(n.indexOf("rtmp")>-1||n.indexOf("rtsp")>-1)?t=n:/\/*\.f4m/i.test(r)?t=e.isRTX()?"rtx-hds":"hds":/\/*\.m3u8/i.test(r)||r.length>0&&r.indexOf("content=hls")>-1?t=e.isRTX()?"rtx-hls":"hls":/\/*\.mp4/i.test(r)?t="mp4":/\/*\.webm/i.test(r)&&(t="webm")),t};var M={id:{configName:"id",defaultVal:null,validator:f.isString},license:{configName:"license",licensorName:{configName:"account_name",defaultVal:"",validator:f.isString},licensorId:{configName:"account_id",defaultVal:"",validator:f.isString},licenseName:{configName:"title",defaultVal:"",validator:f.isString},licenseId:{configName:"salesforce_id",defaultVal:"",validator:f.isString},originatingProperty:{configName:"originating_property",defaultVal:"",validator:f.isString}},metrics:{ywa:{defaultVal:[],validator:function(e){return f.isArray(e)&&e.every(f.isString)}},comscoreC5:{configName:"comscore_cm5",defaultVal:"",validator:f.isString},comscoreC6:{configName:"comscore6",defaultVal:"",validator:f.isString},pageSpaceId:{configName:"pspid",defaultVal:"",validator:f.isString},beacons:{defaultVal:{},transform:function(e){if(!f.isArray(e))return null;for(var t={},r=0;r<e.length;r++){var n=e[r],o=n.events,i=n.target||"",a=n.data||"",s=n.urlTemplate;if(!f.isArray(o))return null;f.isString(s)||(s=null);for(var l=0;l<o.length;l++){var d=o[l],c=d.param||"";if(!f.isObject(d)||!f.isString(d.name))return null;d.name in t||(t[d.name]=[]);var p={url:s};a&&c&&(p.target=i,p.addParam="&"+a+c),t[d.name].push(p)}}return t},validator:f.isObject},mmActivityId:{configName:"mmActivityId",defaultVal:"",validator:f.isString},mediametrie:{configName:"mediametrie",defaultVal:null,validator:f.isString}},status:{code:{defaultVal:"",validator:f.isString},msg:{defaultVal:"",validator:f.isString}},yvap:{defaultVal:{}},closedCaptions:{configName:"closedcaptions",defaultVal:[],url:{validator:f.isString},lang:{validator:f.isString}},visualSeek:{configName:"visualseek",defaultVal:{},frequency:{defaultVal:0,validator:f.isNumber},width:{defaultVal:0,validator:f.isNumber},height:{defaultVal:0,validator:f.isNumber},images:{defaultVal:[],validator:f.isArray}},vpaTraceDigest:{defaultVal:"",validator:f.isString},progress:{position:{defaultVal:null,validator:f.isNumber},adbreaks:{defaultVal:[],validator:f.isArray}},seriesInfo:{defaultVal:{},series_id:{configName:"series_id",defaultVal:null,validator:f.isNumber},videoType:{configName:"type",defaultVal:"",validator:f.isString},seasonNumber:{configName:"season_number",defaultVal:0,validator:f.isNumber},episodeNumber:{configName:"episode_number",defaultVal:0,validator:f.isNumber}},annotations:{configName:"annotations",defaultVal:{},content:{defaultVal:[],validator:f.isArray},theme:{defaultVal:"dark",validator:f.isString},transition:{defaultVal:{},"class":{defaultVal:"dissolve",validator:f.isString}},version:{defaultVal:"1",validator:f.isString}},algo:{defaultVal:null,transform:function(e){return e.algo_name},validator:f.isString},instrument:{defaultVal:{},transform:function(e){return e?e:{}},validator:f.isObject}},C={description:{defaultVal:"",validator:f.isString,transform:function(e){return y.sanitizeAndUnescape(e)}},title:{defaultVal:"",validator:f.isString,transform:function(e){return y.sanitizeAndUnescape(e)}},snapshots:{count:{defaultVal:null,validator:f.isNumber},height:{defaultVal:null,validator:f.isNumber},width:{defaultVal:null,validator:f.isNumber},url:{defaultVal:null,validator:f.isString}},provider:{name:{defaultVal:"",validator:f.isString},providerId:{configName:"provider_id",defaultVal:null,validator:f.isString},providerVideoId:{configName:"provider_video_id",defaultVal:null,validator:f.isString},publisherId:{configName:"publisher_id",defaultVal:null,validator:f.isString},providerLogoUrl:{configName:"logourl",defaultVal:null,validator:f.isString}},provisioningSource:{configName:"provisioning_source",defaultVal:"",validator:f.isString},playlistConfig:{defaultVal:{},configName:"playlist_config",validator:f.isObject},genres:{configName:"genre",defaultVal:[],transform:function(e){return f.isString(e)?e.split(","):null},validator:f.isArray},duration:{defaultVal:null,validator:f.isNumber},publishTime:{configName:"publish_time",defaultVal:null,validator:f.isString},credits:{mainArtists:{configName:"main_artists",defaultVal:[],transform:function(e){return f.isString(e)?e.split(/[,;]/):null},validator:f.isArray},label:{defaultVal:null,validator:f.isString}},images:{large:{defaultVal:null,validator:f.isString},medium:{defaultVal:null,validator:f.isString},small:{defaultVal:null,validator:f.isString},provider:{defaultVal:null,validator:f.isString},thumbnail:{defaultVal:null,validator:f.isString}},_thumbnail:{configName:"thumbnail",defaultVal:null,validator:f.isString},thumbnails:{configName:"thumbnails",defaultVal:[],validator:f.isArray},resized_thumbnails:{configName:"resized_thumbnails",defaultVal:[],validator:f.isArray},showName:{configName:"show_name",defaultVal:"",validator:f.isString},shareUrl:{configName:"url",defaultVal:"",overwrite:!1,validator:f.isString},embedCode:{configName:"embedCode",defaultVal:"",overwrite:!1,validator:f.isString},embedRights:{configName:"embed_rights",defaultVal:!1,validator:f.isBoolean},eventBeginTime:{configName:"event_start",defaultVal:null,validator:f.isNumber},eventEndTime:{configName:"event_stop",defaultVal:null,validator:f.isNumber},liveState:{configName:"live_state",defaultVal:null,validator:f.isString},ageGate:{configName:"age_gate",defaultVal:"",validator:f.isString},castable:{configName:"castable",defaultVal:!0,validator:f.isBoolean},liveMidrollsMaxDur:{configName:"midroll_adpod_dur",defaultVal:null,validator:f.isNumber},seriesInfo:{configName:"seriesInfo",defaultVal:{},type:{defaultVal:"",validator:f.isString}}};i.prototype.getRecoveryStatusForBeacon=function(){var e=this,t=e.recoveryStatus===m.RECOVERED;return t&&(e.recoveryStatus=m.NOT_RECOVERING),t},i.prototype.fetchFinished=function(){var e=this;return e.state===_.HAS_DATA||e.state===_.ERROR},i.prototype.isLongForm=function(){var e=this;return e.duration>600},i.prototype.fillFromRaw=function(e,t,r,n){var i=this;e.shareUrl&&(e.url=e.shareUrl),s(M,e,i,n);var a=e.meta||e;if(s(C,a,i,n),null===i.id&&(i.isCCM=!1,i.id=y.generateGuid()),null!==i.duration&&i.isLongForm()){if(null===i.progress.position){var l=y.localStorage.get(h);l&&l[i.id]?i.progress=l[i.id]:i.progress.position=0}i.restartIfNeeded()}if(i.thumbnails.forEach(function(e){e.hasOwnProperty("tag")&&e.tag===E.PLAYLIST_THUMB_DIMENSION&&(i.images.small=e.url)}),i.resized_thumbnails.forEach(function(e){e.hasOwnProperty("tag")&&e.tag===E.PLAYLIST_THUMB_DIMENSION&&(i.images.small=e.url)}),i.images.thumbnail=i.images.thumbnail||i._thumbnail,i.images.defaultThumbnail=i.images.large||i.images.thumbnail||i.images.medium||i.images.small||i.images.provider,i.fillStreamsFromRaw(e.streams,t,r,n),i.subtitleStreams=i.subtitleStreams||[],i.streamProfiles=i.streamProfiles||[],e.streamProfiles&&e.streamProfiles.forEach(function(e){"subtitle"===e.type?i.subtitleStreams.push(new o(e,n)):i.streamProfiles.push(new o(e,n))}),i.closedCaptions&&!i.subtitleStreams.length){var d=i.closedCaptions.filter(function(e){return e.content_type===I});d.forEach(function(e){var t={host:e.url,format:"m3u8",mime_type:e.content_type,mediaPlaylist:'#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME="English",DEFAULT=YES,AUTOSELECT=YES,FORCED=NO,LANGUAGE="eng",URI="'+e.url+'"'};i.subtitleStreams.push(new o(t,n))}),i.subtitleStreams&&i.subtitleStreams.length&&i.streamProfiles.forEach(function(e){e.manifestContent||(e.manifestContent='#EXT-X-STREAM-INF:SUBTITLES="subs"')})}i.isCCM?i.hasStreams()&&i.hasThumbnail()?i.state=_.HAS_DATA:i.hasStreams()&&i.state===_.FETCHING&&(i.state=_.HAS_DATA):i.hasStreams()?i.state=_.HAS_DATA:i.state=_.ERROR},i.prototype.hasPlaylistConfig=function(){var e=this;return Object.keys(e.playlistConfig).length>0?!0:!1},i.prototype.isBumper=function(){var e=this;return e.playlistConfig&&e.playlistConfig.is_bumper?!0:!1},i.prototype.getSectionType=function(){var e=this;return e.playlistConfig&&e.playlistConfig.section&&e.playlistConfig.section.type?e.playlistConfig.section.type:null},i.prototype.getPlaylistSource=function(){var e=this;return e.playlistConfig&&e.playlistConfig.source?e.playlistConfig.source:null},i.prototype.restartIfNeeded=function(){var e=this;e.progress.position+T>e.duration&&(e.progress.position=0)},i.prototype.hasStreams=function(){var e=this;return 0!==e.streams.length},i.prototype.getCDN=function(){var e=this;return e.selectedStreams.length>0?e.selectedStreams[0].cdn:null},i.prototype.isLive=function(){var e=this;return e.hasLiveStreams()?!0:e.liveState?!e.hasLiveStateForVod():!1},i.prototype.hasLiveStreams=function(){for(var e=this,t=0;t<e.streams.length;t++)if(e.streams[t].live)return!0;return!1},i.prototype.hasLiveStateForVod=function(){var e=this;if(e.liveState){for(var t=E.LIVE_STATES_FOR_VOD,r=Object.keys(t),n=0;n<r.length;n++)if(t[r[n]]===e.liveState)return!0;return!1}return!1},i.prototype.hasThumbnail=function(){var e=this;return!!e.images.defaultThumbnail},i.prototype.fillStreamsFromRaw=function(e,t,r,n){var i=this;if(e&&0===i.streams.length){var a=e.map(function(e){return new o(e,n)});if(a.length){for(var s=0;s<t.length;s++){var l=t[s],d=r[l],c=b.findAcceptedStreams(a,d);if(0!==c.length){i.rendererType=l,i.streams=c;break}}if(0===i.streams.length){var p=new Error("None of the streams is accepted. Possiblemismatch in accepted format or/and protocol.");g.error(p.message),n.push(p),i.status.code=A.SAPI_CODES.E_SAPI_INCOMPATIBLE_FORMAT,i.status.msg=p.message,"m3u8"===a[0].format&&a[0].live&&-1===t.indexOf("flash")&&(i.status.code=A.INFO_CODES.E_SAPI_UNSUPPORTED_LIVE_ON_HTML)}else i.streams.sort(function(e,t){return e.bitrate-t.bitrate})}else{var u=new Error("No streams returned");g.error(u.message),n.push(u),i.status.code=A.SAPI_CODES.E_SAPI_NO_STREAMS_RETURNED,i.status.msg=u.message}}},i.prototype.generateVSid=function(){for(var e=[],t="abcdefghijklmnopqrstuvwxyz123456789",r=0;8>r;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));var n=e.join("");return n},i.prototype.generateSamplingId=function(){return Math.floor(10*Math.random())},i.prototype.fillSelectedStreams=function(e,t){var r=this,n=e.map(function(e){return new o(e,t)});n.length&&(r.selectedStreams=n),r.selectedStreams&&r.selectedStreams.length>1&&r.selectedStreams.sort(function(e,t){return e.bitrate-t.bitrate})},i.prototype.hasDrmStreams=function(){for(var e=this,t=0;t<e.streams.length;t++)if(e.streams[t].isDrmProtected())return!0;return!1},i.prototype.getType=function(){var e=this;return e.hasStreams()?e.selectedStreams.length>0?e.selectedStreams[0].getType():e.streams[0].getType():"none"},i.prototype.getShowName=function(){var e=this;return e.showName},i.prototype.isOriginalShow=function(e){var t=this;return e||(e=t.getShowName()),e&&S[e]?!0:!1},i.prototype.isSeriesEpisode=function(){var e=this;return e.seriesInfo&&"episode"===e.seriesInfo.videoType?!0:!1},i.prototype.updateVideoSession=function(e){var t=this;t.isPrefetch=!1,e.streams&&e.streams.length>0?(t.videoSession=c(e.streams[0].path)+"_"+t.generateVSid(),t.isPrefetch=!0):e.algo||(t.videoSession=t.generateVSid()),t.samplingId=t.generateSamplingId(),u(e.streams,t.videoSession)},a.prototype.get=function(e){var t=this;return e?t._items[e]||null:null},a.prototype.getAll=function(){var e=this;return e._items},a.prototype.updateItemFromRaw=function(e,t,r,n){var o=this,a=o.get(e.id);return a||(a=new i,a.updateVideoSession(e)),a.fillFromRaw(e,t,r,n),o._items[a.id]=a,a},a.prototype.fillFromSapi=function(e,t,r,n){var o=this;if(f.isArray(e))return e.map(function(e){return o.updateItemFromRaw(e,t,r,n).id});var i=new Error("No SAPI data available");return n.push(i),[]},a.prototype.notifyFetchFinished=function(e,t){var r=this;e.forEach(function(e){var n=r.get(e);n.state!==_.HAS_DATA&&(n.state=_.ERROR,t&&(n.status.code=t))}),r._finishedListeners.forEach(function(t){t(e)})},a.prototype.registerFinished=function(e){var t=this,r=function(t){e.publish(v.METADATA_AVAILABLE,t)};return t._finishedListeners.push(r),function(){var e=t._finishedListeners.indexOf(r);-1!==e&&t._finishedListeners.splice(e,1)}};var N=["configName","defaultVal","validator","transform","overwrite"]},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./constants":18,"./error":22,"./event":"YJm+dH","./stream":"Af6MnA","./util":"jJTEqU"}],"./nextgen/src/metadata-fetcher.js":[function(e,t,r){t.exports=e("QCpdmG")},{}],QCpdmG:[function(e,t,r){function n(e,t,r){var n=this;n._model=e,n._eventBus=t,n._profiler=r,n._sapi=new s(n._model,t,r),n._prefetchEmitted=!1,n._unsubNotifyFinished=n._model.mediaStore.registerFinished(n._eventBus)}var o=e("./error"),i=e("./event"),a=e("./media-store"),s=e("./sapi"),l=e("./util"),d=e("../../lib"),c=e("./navigator-info").network,p=e("../../lib/logger");t.exports=n,n.prototype._emitPrefetchAvailable=function(){var e=this,t=[],r=e._model.mediaStore.getAll();for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];o.state===a.ItemState.HAS_DATA&&t.push(n)}t.length&&e._eventBus.publish(i.METADATA_AVAILABLE,t)},n.prototype.updateMetadata=function(e,t,r){var n=this;n._prefetchEmitted||(n._emitPrefetchAvailable(),n._prefetchEmitted=!0,n._profiler.setEndTime(i.Metrics.INIT_TO_SAPI));var o=[],s=n._model.mediaStore.getAll();for(var l in s)if(s.hasOwnProperty(l)){var d=s[l];(d.state===a.ItemState.NO_DATA||d.recoveryStatus===a.ItemRecoveryStatus.RECOVERING)&&(o.push(l),d.state=a.ItemState.FETCHING)}n._updateUUIDsFromSAPI(o,e,!1,t,r)},n.prototype._getMetaConfig=function(){var e=this;return{width:e._model.ui.thumbnailDimensions.width||e._model.uiState.width,height:e._model.ui.thumbnailDimensions.height||e._model.uiState.height,site:e._model.baseConfig.site,expb:e._model.baseConfig.experienceBucket,expn:e._model.baseConfig.experienceName,lang:e._model.baseConfig.lang,region:e._model.baseConfig.region,synd:e._model.baseConfig.syndication,pspid:e._model.CMS.suppressAdContext?"":e._model.baseConfig.pageSpaceId,acctid:e._model.YVAP.accountId,topic:e._model.YVAP.cTopic,plidl:e._model.CMS.suppressAdContext?"":e._model.YVAP.playContext,rt:e._model.rendererTypes,autoplay:e._model.playback.autoplay,showPlaylist:e._model.ui.playlistUI&&e._model.ui.playlistUI.show}},n.prototype.fetchPlaylist=function(e){var t=this;e=e||function(){};var r=t._getMetaConfig();r.uuid=t._model.playlist.id,t._profiler.add(i.Metrics.PLAYLIST_LOADED),t._sapi.loadPlaylist(r,t._model.capabilities,function(r,n){if(r)return void e(r);try{var a=n.query.results.mediaObj;t._profiler.setEndTime(i.Metrics.PLAYLIST_LOADED)}catch(r){var s=l.createErr("S",t._model.playbackState,o.E_PLAYER,o.PLAYER_CODES.E_PLAYER_CMS_RESPONSE);return t._eventBus.publish(i.ERROR,s),void e(s)}a&&(t._model.playlist.appendFromRaw(a,t._model.rendererTypes,t._model.capabilities,[]),t.updateMetadata(e,null,null))})},n.prototype._updateUUIDsFromSAPI=function(e,t,r,n,o){var a=this;t=t||function(){};var s=a._getMetaConfig();if(s.uuids=e,e.length>0){if(a._model.playlist){var l=a._model.playlist.getCurrentItem();l&&l.id===e[0]&&(s.ps=l.videoSession)}a._profiler.add(i.Metrics.SAPI_LOADCLIPS),a._sapi.loadClips(s,a._model.capabilities,function(i,s,l){t(a._onSAPI(i,s,e,r,l,n,o))},o)}else t(null)},n.prototype.refreshMetadata=function(e){var t=this;t._updateUUIDsFromSAPI(e,void 0,!0)},n.prototype._onSAPI=function(e,t,r,n,a,s,p){var u=this;s=d.isNullOrUndefined(s)?!1:s,p=d.isNullOrUndefined(p)?!1:p;var _=null;if(e){_=e;var m,v=s?i.WARNING:i.ERROR,y=s?o.E_WARNING:o.E_PLAYER;m=e.message===l.JSONP_ERROR?s?o.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL:o.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE:e.message===l.JSONP_TIMED_OUT?s?o.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL:o.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT:e.subcategory,_=l.createErr("S",u._model.playbackState,y,m,null,a+"; "+_.debugMessage,p),u._eventBus.publish(v,_)}else{var f;try{f=t.query.results.mediaObj,u._profiler.setEndTime(i.Metrics.SAPI_LOADCLIPS)}catch(e){_=l.createErr("S",u._model.playbackState,o.E_PLAYER,o.PLAYER_CODES.E_PLAYER_CMS_RESPONSE),u._eventBus.publish(i.ERROR,_)}if(!_){var g=[];u._model.mediaStore.fillFromSapi(f,u._model.rendererTypes,u._model.capabilities,g),g.length}var b=t.query&&t.query.results;u._model.CMS.colo=b&&b.colo||"none",b&&b.connectionType&&!c.available&&c.update(b.connectionType.mobile,b.connectionType.raw),n?u._eventBus.publish(i.REFRESH_METADATA_AVAILABLE,r):u._model.mediaStore.notifyFetchFinished(r,_?_.subcategory:null)}return _},n.prototype.fillFromER=function(e){
var t=this,r=e.query.results.mediaObj,n=[];t._model.mediaStore.fillFromSapi(r,t._model.rendererTypes,t._model.capabilities,n),n.length,t._model.CMS.colo=e.query?e.query.results.colo:"none"},n.prototype.prefetch=function(e,t){for(var r=this,n=!0,o=0,a=e.length;a>o;o++){var s=r._model.mediaStore.get(e[o]);if(!s||"has-data"!==s.state){n=!1;break}}return n?void r._eventBus.publish(i.API.METADATA_READY,e):(e.forEach(function(e){r._model.mediaStore.updateItemFromRaw({id:e})}),void r.updateMetadata(function(){},t,!0))},n.prototype.updateUserPreferences=function(e){var t=this;t._sapi.updateUserPreferences(function(){},e)},n.prototype.getUserPreferences=function(){var e=this;if(e._model.userPreferences.isAuthenticated){if(e._model.userPreferences.closedCaptions.isAvailable&&!d.isNullOrUndefined(e._model.userPreferences.isAdult))return;var t=l.getSingleton("userPrefs");if(!d.isNullOrUndefined(t))return void e._updateUserPreferencesData(t);e._profiler.add(i.Metrics.GET_USER_PREFS),e._sapi.getUserPreferences(function(t,r){return t?void p.error("User preferences failed on SAPI call.",t):void(r.userprefs&&(e._profiler.setEndTime(i.Metrics.GET_USER_PREFS),e._updateUserPreferencesData(r.userprefs,!0)))})}},n.prototype._updateUserPreferencesData=function(e){var t=this,r=e[0]?e[0].closedcaptionprefs:null;if(t._model.userPreferences.isAdult=e[1]?e[1].isAdult:null,!r&&"Invalid_GUID"===e[0].err)return t._model.userPreferences.isAuthenticated=!1,void t._eventBus.publish(i.USER_AUTHENTICATED);if(t._model.userPreferences.isAuthenticated=!0,t._eventBus.publish(i.USER_AUTHENTICATED),r&&!r.err){var n;e[0].closedcaptionprefs.show=t._model.userPreferences.closedCaptions.show,a.fillFromConfig(t._model.getModelSchema().userPreferences.closedCaptions,e[0],t._model.userPreferences.closedCaptions,n),n||(t._model.userPreferences.closedCaptions.isAvailable=!0,t._eventBus.publish(i.CC.USER_STYLE_PREFERENCES_CHANGE),l.setSingleton("userPrefs",e))}},n.prototype.getRelatedVideosChannel=function(e,t,r){var n=this;r=r||function(){},n._sapi.loadRelatedVideosChannel({count:t.count||12,start:t.start||0,region:n._model.baseConfig.region,site:n._model.baseConfig.site,lang:n._model.baseConfig.lang,expn:n._model.baseConfig.experienceName,expb:n._model.baseConfig.experienceBucket,videoUuid:t.videoUuid,playlistId:t.playlistId||"",playlistAlias:t.playlistAlias||""},function(e,t){if(e)return void r(e);var o;try{if(o=t.channel.result[0].videos,d.isNullOrUndefined(o))return void r(null);o.forEach(function(e){e.credits&&!e.credits.mainArtists&&delete e.credits})}catch(e){return void r(e)}var i=[],a=n._model.mediaStore.fillFromSapi(o,n._model.rendererTypes,n._model.capabilities,i);n.updateMetadata(function(e){e?r(e):r(null,a)})})},n.prototype.destroy=function(){var e=this;e._unsubNotifyFinished(),e._sapi.cancelAll()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./error":22,"./event":"YJm+dH","./media-store":29,"./navigator-info":42,"./sapi":56,"./util":"jJTEqU"}],32:[function(e,t,r){"use strict";function n(e){var t=this,r=("https:"===document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/p",n={rn:e.randomVal,C4:e.comscoreC4,C5:e.comscoreC5,C6:e.comscoreC6,C1:function(){return"1"},C2:function(){return"7241469"},cv:function(){return"2.0"}};t.sendOpts={baseUrl:r,target:"cs",paramGetters:n,beginningKeys:["C1","C2","C4","C5","C6","cv","rn"]},t.beaconMappings={PLAYBACK_START:{keys:[],data:{}},AD_START:{keys:[],data:{C5:"09"}}}}t.exports=n},{}],33:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._model=e,n._eventBus=t,n._commonFields=r;var i=e.metrics.skipComscore;if(n._streamSenseTag=i?function(){}:null,n._comscoreBeaconQueue=[],n._comscorePersistentLabels={},n._eventBus.subscribe(a.MEDIA_ITEM_LOADED,n._onMediaItemChanged,n),n._eventBus.subscribe(a.PLAYBACK_ENDED,n._onPlaybackComplete,n),n._eventBus.subscribe(a.Video.SEEKING,n._onPlaybackSeeking,n),n._eventBus.subscribe(a.Video.SEEKED,n._onPlaybackSeeked,n),n._eventBus.subscribe(a.Video.PAUSE,n._onPlaybackPaused,n),n._eventBus.subscribe(a.PLAYBACK_RESUMED,n._onPlaybackResumed,n),n._eventBus.subscribe(a.Video.WAITING,n._onWaiting,n),n._eventBus.subscribe(a.PLAYBACK_STARTED,n.setVideoClipLabels,n),n._eventBus.subscribe(a.Video.PLAYING,n._onPlaying,n),n._eventBus.subscribe(a.CONTROLS_SET_VOLUME,n._onVolumeChanged,n),n._eventBus.subscribe(a.AD_PLAYBACK_ENDED,n._onAdPlaybackComplete,n),n._eventBus.subscribe(a.AD_PLAYBACK_STARTED,n.setAdClipLabels,n),n._eventBus.subscribe(a.AD_PLAYBACK_PAUSED,n._onAdPaused,n),n._eventBus.subscribe(a.AD_PLAYBACK_RESUMED,n._onAdResumed,n),!i&&!p.tv){var l=o.getAssetUrl(e.isLocal(),e.version,s);window.ns_&&window.ns_.StreamSense?n._createStreamingTag():o.lazyLoad(l,d,function(e){e||n._createStreamingTag()},i)}}t.exports=n;var o=e("../util"),i=e("../../../lib"),a=(e("../../../lib/logger"),e("../event")),s="streamsense.min.js",l="scorecardresearch.com/p?c1=2&c2=7241469",d=1e4,c=e("./metrics-constants"),p=e("../../../lib/user-agent");e("../renderers/type");n.prototype._createStreamingTag=function(){var e=this,t=("https:"===document.location.protocol?"https://sb.":"http://b.")+l;e._streamSenseTag=new window.ns_.StreamSense({},t),e._eventMap={play:window.ns_.StreamSense.PlayerEvents.PLAY,pause:window.ns_.StreamSense.PlayerEvents.PAUSE,buffer:window.ns_.StreamSense.PlayerEvents.BUFFER,end:window.ns_.StreamSense.PlayerEvents.END}},n.prototype._onMediaItemChanged=function(){var e=this,t=e._commonFields;e._currentIndex=0,e._contentIndex=null,e._partNumber=0;var r;switch(t.location()){case"3":r="Emb onNet";break;case"4":r="Emb offNet";break;default:r="onProp"}e.setComscorePersistentLabels(e._commonFields),e.addToComscoreQueue(function(){e.setPlaylist({y_lms:t.licenseId(),c6:t.comscoreC6(),y_sp:t.streamProtocol(),y_stype:t.streamType(),ns_st_pl:t.videoTitle(),ns_st_cs:t.dimensions(),y_st:t.site(),y_rg:t.region(),y_lc:r,y_pb:c.STRING_DEFAULT})})},n.prototype._onPlaybackSeeking=function(e){var t=this,r=e>0?e:t._commonFields.playbackPosition();t.addToComscoreQueue(function(){var e=t._model.playbackState.paused?"pause":"play";t.notifyState(e,{ns_st_ui:"seeking"},(1e3*r).toString())})},n.prototype._onPlaybackSeeked=function(e){var t=this;t.addToComscoreQueue(function(){var r=t._model.playbackState.paused?"pause":"play";t.notifyState(r,{ns_st_ui:"seeking"},(1e3*e).toString())})},n.prototype._onWaiting=function(e){var t=this;if(!e||!e.ignoreBuffering&&e.value){var r=t._commonFields.playbackPosition();t.addToComscoreQueue(function(){t.notifyState("buffer",{},(1e3*r).toString())}),t._bufferingStart=!0}},n.prototype._onPlaying=function(){var e=this,t=e._commonFields.playbackPosition();e._bufferingStart&&(e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())}),e._bufferingStart=!1)},n.prototype._onPlaybackComplete=function(e,t){var r=this,n=r._commonFields.playbackPosition(),o=r._model.playback.bitrate,i={ns_st_br:o.toString()};t&&(i.ns_st_pe="1"),r.addToComscoreQueue(function(){r.notifyState("end",i,(1e3*n).toString())})},n.prototype._onPlaybackPaused=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("pause",{},(1e3*t).toString())})},n.prototype._onPlaybackResumed=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())})},n.prototype._onAdPaused=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("pause",{},(1e3*t).toString())})},n.prototype._onVolumeChanged=function(e){var t=this;t.addToComscoreQueue(function(){t.updateClipAttrs({ns_st_vo:Math.round(100*e)})})},n.prototype._onAdResumed=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())})},n.prototype._onAdOrContentStarted=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){var r=e._model.playback.bitrate,n={};0!==r&&(r=r.toString(),n.ns_st_br=r),e.notifyState("play",n,(1e3*t).toString())})},n.prototype._onAdPlaybackComplete=function(){var e=this,t=e._commonFields.adPlaybackPosition();e.addToComscoreQueue(function(){e.notifyState("end",{},(1e3*t).toString())})},n.prototype.setComscorePersistentLabels=function(){var e=this,t=e._commonFields,r=e._comscorePersistentLabels,n=t.rendererType();r.ns_site="yahoo-video","dash"===n?r.ns_st_mp="dash":"html"===n?r.ns_st_mp="h":r.ns_st_mp="f",r.ns_st_mv=t.playerVersion(),r.ca2=t.comscoreCA2(),r.ca4=t.comscoreC4(),r.ca6=t.comscoreC6(),r.c3="*null",r.ca3="*null",r.c4=t.comscoreC4(),r.c7=t.pageUrl(),r.c9=t.pageReferrer(),e.addToComscoreQueue(function(){e.setPersistentLabels(r)})},n.prototype.setVideoClipLabels=function(){var e=this,t=e._commonFields,r="true"===t.autoplay()?"1":"0";i.isNullOrUndefined(e._contentIndex)&&(e._currentIndex++,e._contentIndex=e._currentIndex);var n={c5:t.comscoreC5(),ca5:t.comscoreC5(),ns_st_pr:t.videoTitle(),ns_st_ep:t.videoShowName(),ns_st_ge:t.genre(),ns_st_cu:t.pageUrl(),ns_st_vo:Math.round(t.volumeLevel()),ns_st_ty:t.contentType(),ns_st_cn:e._contentIndex,ns_st_ci:t.videoId(),y_pid:t.providerId(),y_lbl:t.label(),ns_st_pn:++e._partNumber,y_art:t.mainArtist(),y_pvid:t.providerVideoId(),y_s:t.pageSpaceId(),y_c:t.cdn(),y_ap:r},o=t.videoLength(),a="vc11";if("na"!==o&&o>600&&(a="vc12"),t.isLive()){var s=t.eventBegin(),l=t.eventEnd();o=""!==s&&""!==l?l-s:null,n.ns_st_li="1",a="vc23"}n.ns_st_ct=a,n.ns_st_cl=o&&"na"!==o?(1e3*o).toString():c.INT_DEFAULT;var d=e._model.playbackState.looped;e.addToComscoreQueue(function(){d?e.setClip(n,!0):e.setClip(n)}),e._onAdOrContentStarted()},n.prototype.setAdClipLabels=function(){var e=this,t=e._commonFields,r="true"===t.autoplay()?"1":"0",n="va11",o=t.adId()||c.INT_DEFAULT,i=t.adPosition(),a=t.adDuration();t.isLive()?n="va21":"postroll"===i?n="va13":"midroll"===i&&(n="va12");var s={c5:t.comscoreC5ForAd(),ca5:t.comscoreCA5ForAd(),ns_st_ty:t.contentType(),ns_st_ct:n,ns_st_ad:"1",ns_st_pr:"ad",ns_st_ep:"ad",ns_st_cu:c.STRING_DEFAULT,ns_st_vo:Math.round(t.volumeLevel()),ns_st_cn:++e._currentIndex,ns_st_ci:o,ns_st_cl:a?(1e3*a).toString():c.STRING_DEFAULT,ns_st_pn:"1",y_pid:t.providerId(),y_lbl:t.label(),y_art:t.mainArtist(),y_pvid:t.providerVideoId(),y_s:t.pageSpaceId(),y_ap:r};e.addToComscoreQueue(function(){e.setClip(s)}),e._onAdOrContentStarted()},n.prototype.setPersistentLabels=function(e){var t=this;t._streamSenseTag.setLabels(e)},n.prototype.setPlaylist=function(e){var t=this;t._streamSenseTag.setPlaylist(e)},n.prototype.setClip=function(e){var t=this;t._streamSenseTag.setClip(e)},n.prototype.notifyState=function(e,t,r){var n=this;n._streamSenseTag.notify(n._eventMap[e],t,r)},n.prototype.updateClipAttrs=function(e){var t=this,r=t._streamSenseTag.getClip();r&&r.setLabels(e)},n.prototype._fireComscoreBeacons=function(){var e=this,t=e._comscoreBeaconQueue;t.forEach(function(e){e()}),e._comscoreBeaconQueue=[]},n.prototype.addToComscoreQueue=function(e){var t=this,r=t._comscoreBeaconQueue;r.push(e),t._streamSenseTag&&t._fireComscoreBeacons()}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../renderers/type":54,"../util":"jJTEqU","./metrics-constants":36}],34:[function(e,t,r){"use strict";function n(e){var t=this,r=e.mmActivityId(),n=["rnd"],o={rnd:e.randomVal},i={baseUrl:r,keys:[],data:{}};t.sendOpts={baseUrl:r,target:"marketingpixel",paramGetters:o,beginningKeys:n,iFrameBeacon:!0},t.beaconMappings={PLAYBACK_START:i}}var o=e("../../../lib");t.exports=n,n.prototype.shouldFire=function(e){var t=this,r=o.isNullOrUndefined(e.metrics.mmActivityId)?"":e.metrics.mmActivityId.toString();return""!==r&&t.isValidUrl(r)?(t.sendOpts.baseUrl=r,!0):!1},n.prototype.isValidUrl=function(e){return e.match(/^https:\/\/[a-z0-9-\.]+\.[a-z]{2,4}\/?([^\s<>\#%"\,\{\}\\|\\\^\[\]`]+)?$/)}},{"../../../lib":"bRhrlU"}],35:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._model=e,n._eventBus=t,n._commonFields=r;var l=e.metrics.skipComscore;n._streamTag=l?function(){}:null;var d=o.getAssetUrl(e.isLocal(),e.version,a);n._mediaMetrieQueue=[],n._position=0,n._eventBus.subscribe(i.PLAYBACK_STARTED,n._setVideoLabels,n),n._eventBus.subscribe(i.Video.TIMEUPDATE,n._onPlaybackProgress,n),n._eventBus.subscribe(i.API.PLAYLIST_COMPLETE,n._onPlaybackComplete,n),n._eventBus.subscribe(i.API.PLAYLIST_POSITION_CHANGE,n._onPlaybackComplete,n),n._eventBus.subscribe(i.Video.PAUSE,n._onPlaybackPaused,n),n._eventBus.subscribe(i.PLAYBACK_RESUMED,n._onPlaybackResumed,n),n._eventBus.subscribe(i.Video.SEEKING,n._onPlaybackSeeking,n),n._eventBus.subscribe(i.Video.SEEKED,n._onPlaybackSeeked,n),n._eventBus.subscribe(i.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),l||(window.eStatTag?n._mediaMetrieJSLoaded=!0:o.lazyLoad(d,s,function(e){e||(n._mediaMetrieJSLoaded=!0)},l))}t.exports=n;var o=e("../util"),i=(e("../../../lib/logger"),e("../event")),a="mu-yahoo-integration-5.1.js",s=1e4,l=e("./metrics-constants"),d=220020212974;n.prototype._onMediaItemLoaded=function(){var e=this;e._mediaMetrieJSLoaded&&e._createTags()},n.prototype._createTags=function(){var e=this;e._streamTag&&(e._streamTag=null,e.confStreamingAnalyticsMediametrie=null),e.confStreamingAnalyticsMediametrie={serial:e._getSerial(),measure:"streaming",levels:{level_1:"",level_2:"",level_3:"",level_4:"",level_5:""},streaming:{diffusion:"replay",callbackPosition:function(){return e._position},playerObj:e._model.guid,streamDuration:"",playerName:"yahoo video player",playerVersion:e._model.version,streamName:"",streamURL:"",streamGenre:""}},e._mediaMetrieJSLoaded&&(e._streamTag=new window.eStatTag(e.confStreamingAnalyticsMediametrie))},n.prototype._getSerial=function(){var e=this,t=e._model.playlist.getCurrentItem(),r=t&&t.metrics.mediametrie;return r?r:d},n.prototype._setVideoLabels=function(){var e=this,t=e._commonFields;e.addToMediaMetrieQueue(function(){var r=e.confStreamingAnalyticsMediametrie;if(r){r.serial=e._getSerial(),r.levels.level_1=t.site(),r.levels.level_2=t.providerId(),r.levels.level_3=t.licenseId(),r.levels.level_4=t.mediaMetaTags(),t.isLive()&&(r.levels.diffusion="live");var n=t.videoLength();r.streaming.streamDuration=n&&"na"!==n?n.toString():l.INT_DEFAULT,r.streaming.streamName=t.videoTitle(),r.streaming.streamGenre=t.genre(),r.streaming.streamURL=t.pageUrl(),e.setLabels(r)}});var r=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("play",r.toString())})},n.prototype._onPlaybackProgress=function(e){var t=this,r=t._commonFields;t._position=parseInt(e),t.addToMediaMetrieQueue(function(){var e=t.confStreamingAnalyticsMediametrie;e&&r.isLive()&&(e.levels.diffusion="timeshifting",t.setLabels(e))})},n.prototype._onPlaybackComplete=function(){var e=this,t=e._commonFields,r=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("stop",r.toString())})},n.prototype._onPlaybackPaused=function(){var e=this,t=e._commonFields,r=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("pause",r.toString())})},n.prototype._onPlaybackResumed=function(){var e=this,t=e._commonFields,r=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("play",r.toString())})},n.prototype._onPlaybackSeeking=function(e){var t=this,r=t._commonFields,n=r.playbackPosition();t.addToMediaMetrieQueue(function(){t.notifyState("pause",n.toString())})},n.prototype._onPlaybackSeeked=function(e){var t=this;t._model.playbackState.paused||t.addToMediaMetrieQueue(function(){t.notifyState("play",e.toString())})},n.prototype.setLabels=function(e){var t=this;t._streamTag.set(e)},n.prototype.notifyState=function(e,t){var r=this;r._position=parseInt(t),r._streamTag.notifyPlayer(e,r._position)},n.prototype._fireMediaMetrieBeacons=function(){var e=this;e._mediaMetrieQueue.forEach(function(e){e()}),e._mediaMetrieQueue=[]},n.prototype.addToMediaMetrieQueue=function(e){var t=this,r=t._mediaMetrieQueue;r.push(e),t._streamTag&&t._fireMediaMetrieBeacons()}},{"../../../lib/logger":"IS9j5T","../event":"YJm+dH","../util":"jJTEqU","./metrics-constants":36}],36:[function(e,t,r){"use strict";t.exports={PROGRESS_INTERVAL:10,TRUE_STREAMS_INTERVAL:3,QUARTILE_PROGRESS_INTERVAL:25,BEACON_HIDE_VALUE:{},BEACON_HIDE_KEY_VALUE:{},STRING_DEFAULT:"none",INT_DEFAULT:"",CLICK:"click",AUTOPLAY:"autoplay",API:"api",CONTINUOUS:"continuous",HOVER:"hover",SCROLL:"scroll",DEFAULT_PAGE_SPACE_ID:"1111",PLAYBACK_PROGRESS_MODE_CLASSIC:{fixed:[3],recurring:10,playerUnload:!1,playPause:!1,firingCriteria:"FREQ_MODE_CLASSIC"},PLAYBACK_PROGRESS_MODE_STANDARD:{fixed:[3,10],recurring:30,playerUnload:!0,playPause:!0,firingCriteria:"FREQ_MODE_STANDARD"},BEACON_DISASTER_MODE:{global:0,PLAYBACK_START:1,PLAYER_ERROR:.05},SEG_INFO_LENGTH:6}},{}],37:[function(e,t,r){"use strict";function n(e,t,r,n){var i=this;i._model=e,i._eventBus=t,i._profiler=r,i._rapid=n?n.rapid:null,i._rapidClickParams=n?n.clickParams:null,i._rapidUUIDMap={},i._isRapidPlayerPerformanceFired=!1,i._eventBus.subscribe(m.VIDEO_REQUEST,i._onVideoRequest,i),i._eventBus.subscribe(m.START_SCREEN_RENDERED,i._onStartScreenRendered,i),i._eventBus.subscribe(m.HLS_FIRST_TS_LOAD_START,i._onContentFirstTSLoadStart,i),i._eventBus.subscribe(m.HLS_FIRST_TS_FIRST_BYTE_ARRIVE,i._onContentFirstTSFirstByteArrive,i),i._eventBus.subscribe(m.PLAYBACK_STARTED,i._onContentStarted,i),i._eventBus.subscribe(m.PLAYBACK_REQUEST,i._onPlaybackRequested,i),i._eventBus.subscribe(m.PLAYBACK_RESUMED,i._onPlaybackResumed,i),i._eventBus.subscribe(m.PLAYBACK_STALLED,i._onPlaybackStalled,i),i._eventBus.subscribe(m.API.UI_INTERACT,i._onUIInteraction,i),i._eventBus.subscribe(m.API.BITRATE_CHANGE,i._onBitrateChange,i),i._eventBus.subscribe(m.API_CALLED,i._onApiCalled,i),i._eventBus.subscribe(m.FEEDBACK_INFO,i._onFeedbackCalled,i),i._eventBus.subscribe(m.RECOVERY_METADATA_READY,i._onRecoveryMetadata,i),i._eventBus.subscribe(m.ABR_DATA_UPDATE,i._onABRDataUpdate,i),i._eventBus.subscribe(m.SEG_INFO_AVAILABLE,i._onSegInfoAvailable,i),i._eventBus.subscribe(m.SEGMENT_FIRST_BYTE_LOADED,i._onSegmentFirstByteLoaded,i),i._eventBus.subscribe(m.CTRL_PLAYPAUSE,i._onCtrlPlayPause,i),i._eventBus.subscribe(m.CTRL_SEEK,i._onSeek,i),i._eventBus.subscribe(m.CTRL_VOLUME,i._onVolume,i),i._eventBus.subscribe(m.FULLSCREEN_CHANGE,i._onFullscreen,i),i._eventBus.subscribe(m.CTRL_SETTINGS,i._onSettings,i),i._eventBus.subscribe(m.CTRL_PLAYREQUEST,i._onCtrlPlayRequest,i),i._eventBus.subscribe(m.CC.UI_TOGGLE,i._onCCTog,i),i._eventBus.subscribe(m.CC.LANGUAGE_CHANGE,i._onCCLang,i),i._eventBus.subscribe(m.CC.UPDATE_STYLE,i._onCCStyle,i),i._eventBus.subscribe(m.CC.SETTINGS,i._onCCSettings,i),i._eventBus.subscribe(m.CTRL_AGEGATE_BDAY,i._onAgeBday,i),i._eventBus.subscribe(m.CTRL_SHARE,i._onShare,i),i._eventBus.subscribe(m.CTRL_REPLAY,i._onReplay,i),i._eventBus.subscribe(m.QUALITY_SELECTED,i._onQualitySelected,i),i._eventBus.subscribe(m.WL_CHANGE_REQUEST,i._onWatchLaterUpdate,i),i._eventBus.subscribe(m.CTRL_TIMER,i._onTimerUpdate,i),i._eventBus.subscribe(m.UI_LOGIN,i._onUILogin,i),i._eventBus.subscribe(m.CTRL_ENDSCREEN_VID,i._onSelectedEndscreenVideo,i),i._eventBus.subscribe(m.API.PLAYER_MUTE_CHANGE,i._onMuteChange,i),i._eventBus.subscribe(m.Video.TIMEUPDATE,i._onPlaybackProgress,i),i._eventBus.subscribe(m.PLAYBACK_ENDED,i._onPlaybackComplete,i),i._eventBus.subscribe(m.Video.PAUSE,i._onPlaybackPaused,i),i._eventBus.subscribe(m.Video.SEEKING,i._onPlaybackSeeking,i),i._eventBus.subscribe(m.Video.SEEKED,i._onPlaybackSeeked,i),i._eventBus.subscribe(m.Video.WAITING,i._onWaiting,i),i._eventBus.subscribe(m.AD_METRICS,i._onAdMetrics,i),i._eventBus.subscribe(m.AD_PLAYBACK_STARTED,i._onAdPlaybackStarted,i),i._eventBus.subscribe(m.AD_PLAYBACK_PROGRESS,i._onAdPlaybackProgress,i),i._eventBus.subscribe(m.AD_PLAYBACK_ENDED,i._onAdPlaybackComplete,i),i._eventBus.subscribe(m.AD_PLAYBACK_ERROR,i._onAdError,i),i._eventBus.subscribe(m.AD_BREAK_INFO,i._onAdBreakInfo,i),i._eventBus.subscribe(m.AD_BREAK_ENDED,i._onAdBreakEnd,i),i._eventBus.subscribe(m.Ad.BREAK_CANCELLED,i._onAdBreakCancelled,i),i._eventBus.subscribe(m.YVAP_MIDROLL_CACHE_UPDATE,i._onMidrollCacheUpdated,i),i._eventBus.subscribe(m.RENDERER_PLUGIN_LOADED,i._onRendererPluginLoaded,i),i._eventBus.subscribe(m.RENDERER_PLUGIN_LOAD_FAILED,i._onRendererPluginLoadFailed,i),i._eventBus.subscribe(m.RENDERER_PLUGIN_LOAD_TIMED_OUT,i._onRendererPluginLoadTimedOut,i),y.getWindow().addEventListener("unload",i._onWindowUnload.bind(i)),i._rendererPluginLoadStatus=0,i._rootElem=null,i._renderer=null,i._eventBus.subscribe(m.ERROR,i._onError,i),i._eventBus.subscribe(m.WARNING,i._onWarning,i),i._eventBus.subscribe(m.INFO,i._onInfo,i),i._eventBus.subscribe(m.API.PLAYBACK_TIMEOUT,i._onWarning,i),i.debugSt="",i._playEventFired=!1,i._commonFields=i._getCommonFieldsTable(),i._continuousPlayCount=0,i._guid=i._model.guid,i._trueStreamsProgressFired=!1,i._trueStreamsAdProgressFired=!1,i._totalWatchedPlaybackTime=0,i._totalBufferingTime=0,i._segInfo=[],i._buffTimeTrueStream=0,i._buffTimeDiff=0,i._segmentwiseBuffTime=0,i._progressBeaconDistance=0,i._recoveredPlayback=!1,i._jsDownloadTime,i._systems=[],i._beaconDisasterMode=i._model.failOver&&i._model.failOver.beaconDisasterMode||!1,i._progressBeaconMode=I.PLAYBACK_PROGRESS_MODE_STANDARD,i._model.metrics.progressBeaconStrategy&&(i._progressBeaconMode=i._model.metrics.progressBeaconStrategy,i._progressBeaconMode.firingCriteria="FREQ_MODE_CONFIG"),i._warningCount=0,i._warningErrorFiredMap={},i._criticalErrorFiredMap={},i._guidMap={},i._videoQuartile=0,i._adQuartile=0,Math.random()<=i._model.metrics.ultSamplingRate&&i._systems.push(new b(e,i._commonFields)),"vidible"===i._model.baseConfig.syndication&&i._systems.push(new A(i._commonFields)),i._systems.push(new h(i._commonFields)),i._systems.push(new E(i._commonFields)),i._templateMetrics=new o(e,i._commonFields),i._comscoreMetrics=new T(e,i._eventBus,i._commonFields),"FR"===i._model.baseConfig.region.toUpperCase()&&(i._mediaMetrie=new S(e,i._eventBus,i._commonFields)),i._sendPageView(),i._sendPlayerLoaded(),i._funcQueue=[]}function o(e,t){var r=this;r._model=e,r._paramGetters={RANDOM_VALUE:t.randomVal,PLAYLIST_INDEX:t.playlistPosition,VOLUME_LEVEL:t.volumeLevel,DEVICE_NAME:t.deviceName,MAKE:t.deviceMake,MODEL:t.deviceModel,OS:t.deviceOS,AD_ID:t.adId,AD_LOADED:function(){return t.adLoaded()?"yes":"no"},AD_TYPE:t.adType,EVT_NAME:function(e){switch(e){case"PLAYBACK_START":case"AD_START":return"play";case"PLAYBACK_PAUSE":return"pause";case"PLAYBACK_COMPLETE":case"AD_COMPLETE":return"end";default:return"unknown"}}}}function i(e,t){return y.strSubstitute(e,function(e){var r=t(e);return null!==r?r:(g.error("Metrics: unknown substitution key: "+e),"")})}function a(e,t,r,n,o){var i=r.beginningKeys||[],a=r.endKeys||[],l=r.paramGetters,d=[].concat(i,e,a),c=d.filter(function(e,t){return d.indexOf(e)===t}),p=[];c.forEach(function(e){var r;if(r=e in t?t[e]:e in l?l[e]():null,f.isNullOrUndefined(r)&&(r=I.BEACON_HIDE_KEY_VALUE),r===I.BEACON_HIDE_VALUE&&(r=null),r!==I.BEACON_HIDE_KEY_VALUE){var n={};n[e]=r,p.push(n)}});var u=r.baseUrl+"?"+y.querystring(p,"&","=",s);return n&&(u+=n),r.iFrameBeacon?y.sendIframeBeacon(u):r.unloadBeacon?y.sendUnloadBeacon(u):(y.sendImageBeacon(u),void o.publish(m.API.BEACON_SEND,{url:u,date:new Date}))}function s(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")}function l(e){return f.isBoolean(e)&&(e=e?"1":"0"),f.isArray(e)&&(e=e.toString()),e&&""!==e?e:I.STRING_DEFAULT}function d(){try{return window.top.document}catch(e){return null}}function c(e){if(window.performance&&window.performance.getEntriesByType){var t,r=window.performance.getEntriesByType("resource");for(t in r)if(r[t].name.match(e))return r[t].duration}return null}function p(e){return e=u(e),e?e.split("?")[0]:""}function u(e){return e?e.replace(/(_ylt(.)+(\?)|_ylt(.)+)/,"?"):e}function _(){var e=this;e.val=[],e.mode="sync",e.useDefaultBufferDuration=!1}t.exports={Metrics:n};var m=e("../event"),v=e("../../../lib/user-agent"),y=e("../util"),f=e("../../../lib"),g=e("../../../lib/logger"),b=e("./ult-metrics"),A=e("./vidible-metrics"),E=(e("./sizmek-metrics"),e("./marketingpx-metrics")),h=e("./comscore-metrics"),T=e("./comscore"),S=e("./media-metrie"),I=e("./metrics-constants"),L=e("../constants"),M=e("../error"),C=e("../media-store"),N=e("../renderers/type"),D=e("../perf"),R=e("../navigator-info").network,P=4,w=1e3,O={801:1};n.prototype._createClipGuid=function(e){var t=this,r=Math.floor(4294967295*Math.random());return e&&!t._guidMap[e.id]&&(t._guidMap[e.id]=r),r},n.prototype._getCommonFieldsTable=function(){var e=this,t=e._model,r=function(){return t.playlist.getCurrentItem()},n=function(t){var r=e._profiler.getItem(t);return r&&!f.isNullOrUndefined(r.timeDiff)?r.timeDiff:I.INT_DEFAULT},o=function(t){var r=e._profiler.getItem(t);return r&&!f.isNullOrUndefined(r.startTime)?r.startTime+e._profiler.startTime:I.INT_DEFAULT},i=function(e,t){var n,o=r(),i=o?o.metrics.beacons:null;if(i){var a=i[e]&&i[e][0]||{};if("cs"===a.target&&a.addParam){var s=a.addParam.split("&");s.forEach(function(e){-1!==e.indexOf(t)&&(n=e.split("=")[1])})}}return n||I.INT_DEFAULT},a={yvapID:function(){return e._model.YVAP&&e._model.YVAP.accountId?e._model.YVAP.accountId:""},currVolume:function(){return e._model.playbackState.volume},tsapic:function(){var t=e._profiler.getItem(m.Metrics.SAPI_REQUEST);return t&&t.timeDiff&&0!==t.timeDiff?t.timeDiff:""},sapiColo:function(){return e._model.CMS.colo||""},cachedVs:function(){return e._model.CMS.cachedVs||""},flashVersion:function(){var t="na";return e._renderer&&e._model.playbackState.rendererType===N.FLASH&&(t=e._renderer.getFlashVersion(),t&&t.join(".")),t},site:function(){var e=t.baseConfig.siteAnalytics.toLowerCase();return l(e?e.toLowerCase():t.baseConfig.site.toLowerCase())},region:function(){return l(t.baseConfig.region.toLowerCase())},autoplay:function(){return t.playback.autoplay?"true":"false"},dimensions:function(){return t.uiState.width+"x"+t.uiState.height},videoSeqNum:function(){return e._seqNum},isLive:function(){var e=r();return e&&e.isLive()?1:0},isResume:function(){return t.playback.isResume?1:0},liveState:function(){var e=r();return e&&e.liveState?e.liveState:""},bitrate:function(){return t.playback.bitrate},quality:function(){return t.playback.quality},continuousPlay:function(){return t.playback.continuousPlay?1:0},continuousPlayCount:function(){return e._continuousPlayCount},location:function(){return y.isOffNetwork()?4:y.isIFrame()?3:1},offNetwork:function(){return y.isOffNetwork()?1:I.BEACON_HIDE_KEY_VALUE},lang:function(){return t.baseConfig.lang.toLowerCase()},licensorName:function(){var e=r();return l(e?e.license.licensorName:null)},licenseId:function(){var e=r();return e?e.license.licenseId:I.INT_DEFAULT},videoId:function(){var e=r();return e?e.id:I.INT_DEFAULT},videoTitle:function(){var e=r();return l(e?e.title:null)},videoShowName:function(){var e=r();return l(e?e.showName||e.license.licenseName:null)},videoQuartile:function(t){return t===!0?e._adQuartile:e._videoQuartile},playbackPosition:function(){return Math.round(e._playbackPosition)},adPlaybackPosition:function(){return Math.round(e._adPlaybackPosition)},seqStart:function(){return Math.round(e._seqStart)},playerInt32Guid:function(){return e._guid},clipGuid:function(){return e._clipGuid||""},masterPlayerInt32Guid:function(){return e._masterPlayerGuid},videoLength:function(){var e=r();return l(e?e.duration:null)},pageTitle:function(){var e=d();return e?e.title:I.STRING_DEFAULT},pageUrl:function(){return u(y.getHostUrl())},eventBegin:function(){var e=r();return e&&e.eventBeginTime?e.eventBeginTime:""},eventEnd:function(){var e=r();return e&&e.eventEndTime?e.eventEndTime:""},pageReferrer:function(){if(t.baseConfig.referrer)return t.baseConfig.referrer;var e=d();return e&&""===e.referrer&&window.history&&window.history.state&&window.history.state.referer?p(window.history.state.referer):e?p(e.referrer):I.STRING_DEFAULT},streamProtocol:function(){var e=r(),t=e?e.streams[0]:null;return l(t?t.url.split(":")[0]:null)},streamType:function(){var n=r();if(!n){var o=e._model.playlist.items.length,i=t.playlist.position;e.debugSt+="il:"+o,e.debugSt+=",p:"+i}return n?n.getType():"none"},errorCode:function(){for(var e=t.errors,r=0;r<e.length;r++)if(e[r].code)return e[r].code;return 100},syndication:function(){return t.baseConfig.syndication},playerVersion:function(){return t.version},experienceName:function(){return t.baseConfig.experienceName.toLowerCase()},experienceType:function(){return t.baseConfig.experienceType.toLowerCase()},experienceBucket:function(){return t.baseConfig.experienceBucket},playListId:function(){return l(t.playlist.id)},jurisdiction:function(){return t.baseConfig.jurisdiction},randomVal:function(){return Math.random()},pageSpaceId:function(){return t.baseConfig.pageSpaceId||I.DEFAULT_PAGE_SPACE_ID},videoSpaceId:function(){var e=r();return e?e.metrics.pageSpaceId:I.INT_DEFAULT},percentWatched:function(e,t){return t>0?Math.floor(100*e/t):0},ccode:function(){return t.metrics.ccode},sec:function(){return t.metrics.sec},cpos:function(){return t.metrics.cpos},comscoreCA1:function(){return i("PLAYBACK_START","CA1")},comscoreCA2:function(){return i("PLAYBACK_START","CA2")},comscoreCA5ForAd:function(){return i("AD_START","CA5")},comscoreC4:function(){return t.metrics.comscoreC4},comscoreC5:function(){var e=r();return e?e.metrics.comscoreC5:I.INT_DEFAULT},comscoreC5ForAd:function(){return"09"},comscoreC6:function(){var e=r();return e?e.metrics.comscoreC6:I.INT_DEFAULT},rendererType:function(){return e.getMetricRendererType(t.playbackState.rendererType)},contentRendererType:function(){var t=r();return t?e.getMetricRendererType(t.rendererType):I.STRING_DEFAULT},playerType:function(){return"nextgen-desktop"},jsDownloadTime:function(){return l(t.pageLatency.pagePlayerJsDownloadTime)},providerId:function(){var e=r();return e&&e.provider.providerId?e.provider.providerId:I.INT_DEFAULT},providerVideoId:function(){var e=r();return e&&e.provider.providerVideoId?e.provider.providerVideoId:I.INT_DEFAULT},publisherId:function(){var e=r();return l(e?e.provider.publisherId:null)},genre:function(){var e=r();return l(e&&e.genres.length?e.genres[0]:null)},syndicationId:function(){return t.baseConfig.syndication.split("-")[0]},mainArtist:function(){var e=r();return l(e&&e.credits.mainArtists.length?e.credits.mainArtists[0]:null)},label:function(){var e=r();return l(e&&e.credits?e.credits.label:null)},tripleplay:function(){var e=r();return e&&"tripleplay"===e.provisioningSource?1:I.INT_DEFAULT},playlistPosition:function(){return t.playlist.position},volumeLevel:function(){return t.playbackState.mute?0:100*t.playbackState.volume},deviceName:function(){return k.name},deviceMake:function(){return k.make},deviceModel:function(){return k.model},deviceOS:function(){return k.os},networkConnectionType:function(){return R.available?R.mobile?"mobile":"wifi":"unknown"},autoplaySupported:function(){return t.playback.autoplaySupported||"na"},inlinePlaybackSupported:function(){return t.playback.canPlayInline||"na"},adId:function(){var e=t.playbackState.ad;return l(e?e.adId:null)},adDuration:function(){var e=t.playbackState.ad;return l(e?e.duration:null)},adPosition:function(){var e=t.playbackState.ad;return l(e?e.position:null)},adLoaded:function(){return!!t.playbackState.ad},adType:function(){var e=t.playbackState.ad;return l(e?e.position:null)},typeOfContent:function(){return t.playbackState.videoSet()?t.playbackState.ad?"ad":"vid":"na"},playbackState:function(){return t.playbackState.state},mediaMetaTags:function(){var e=r();return l(e?e.metrics.ywa:null)},isDrm:function(){var e=r();return l(e?e.hasDrmStreams():null)},videoSession:function(){var e=r();return e&&e.videoSession?e.videoSession:I.STRING_DEFAULT},samplingId:function(){var e=r();return e&&!isNaN(e.samplingId)?e.samplingId:I.STRING_DEFAULT},isMature:function(){var e=r();return e&&"none"!==e.ageGate?1:0},isMute:function(){return t.playbackState.mute?"m":"um"},cdn:function(){var e=r(),t=e?e.getCDN():null;return t?t:"uncalculated";
},contentType:function(){return e._getContentType()},playerLocation:function(){var e=y.isOffNetwork()?4:y.isIFrame()?3:1;switch(e){case 3:return"Emb onNet";case 4:return"Emb offNet";default:return"onProp"}},ucLatency:function(){var t=e._profiler.getItem(m.Metrics.CLICK_TO_START),r=t?t.timeDiff:null;return r?r:""},apLatency:function(){var t=e._profiler.getItem(m.Metrics.INIT_TO_START),r=t?t.timeDiff:null;return r?r:""},apLatencyStartTime:function(){return o(m.Metrics.INIT_TO_START)},viewability:function(){return e.viewability+"%"},playbackWatchedTime:function(){return Math.round(e._totalWatchedPlaybackTime)},bufferingTime:function(){return Math.round(e._totalBufferingTime)},rendererPluginLoadStatus:function(){return e._rendererPluginLoadStatus},loadFirstFragmentTime:function(){var t=e._profiler.getItem(m.Metrics.HLS_FIRST_TS_LOAD_START),r=t?t.timeDiff:null;return r?r:I.INT_DEFAULT},firstByteFirstFragmentTime:function(){var t=e._profiler.getItem(m.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE),r=t?t.timeDiff:null;return r?r:I.INT_DEFAULT},mmActivityId:function(){var e=r();return e&&e.metrics&&e.metrics.mmActivityId||null},wrapInFn:function(e){return function(){return e}},hostingEnv:function(){var e=y.getSingleton("PlayerHosting");return e&&e.env?e.env:t.isLocal()?"l":"p"},hostingBucket:function(){var e=y.getSingleton("PlayerHosting");return e&&e.bucket?e.bucket:I.STRING_DEFAULT},hostingColo:function(){var e=y.getSingleton("PlayerHosting");return e&&e.colo?e.colo:I.STRING_DEFAULT},algo:function(){var e=r();if(e){if(e.relatedVideoIds.length){var n=t.mediaStore.get(e.relatedVideoIds[0]);return n.instrument&&n.instrument.algo?n.instrument.algo:""}return e.instrument&&e.instrument.algo?e.instrument.algo:""}return null},instrument:function(){var e=r(),t="";return e&&e.instrument&&Object.keys(e.instrument).length>0&&(t=JSON.stringify(e.instrument)),t},displayMode:function(){return e.fullScreenMode?"full":"window"},constructLatency:function(){return n(m.Metrics.VP_CONSTRUCTOR)},renderCreateLatency:function(){return n(m.Metrics.CREATE_RENDERER)},sapiLatency:function(){return n(m.Metrics.SAPI_REQUEST)},sapiLatencyStartTime:function(){return o(m.Metrics.SAPI_REQUEST)},swfLatency:function(){return n(m.Metrics.SWF_READY)},swfLatencyStartTime:function(){return o(m.Metrics.SWF_READY)},initToSapiLatency:function(){return n(m.Metrics.INIT_TO_SAPI)},renderToSwfLatency:function(){return n(m.Metrics.RENDER_TO_SWF)},initRenderGapLatency:function(){return n(m.Metrics.INIT_RENDER_GAP)},ccPrefLatency:function(){return n(m.Metrics.GET_USER_PREFS)},hlsPlaylistLatency:function(){return n(m.Metrics.LOAD_TO_LOADED_DATA)},streamLatency:function(){return n(m.Metrics.STREAM_REQUEST_TO_RENDER)},streamLatencyStartTime:function(){return o(m.Metrics.STREAM_REQUEST_TO_RENDER)},playToRenderLatency:function(){return n(m.Metrics.STREAM_PLAY_TO_RENDER)},segInfo:function(){return JSON.stringify({seg:e._segInfo.slice(0,Math.min(I.SEG_INFO_LENGTH,e._segInfo.length))})},buffTimeDiff:function(){return e._buffTimeDiff},segmentBuffTime:function(){return e._segmentwiseBuffTime},progressBeaconDistance:function(){var t=Math.round(e._totalWatchedPlaybackTime)-Math.round(e._progressBeaconDistance);return t>=0?t:0},getRecoveryStatus:function(){var e=r();return e.getRecoveryStatusForBeacon()},recoveryStatus:function(){var t=r();return e._recoveredPlayback?C.ItemRecoveryStatus.RECOVERED:t&&t.recoveryStatus===C.ItemRecoveryStatus.RECOVERING?C.ItemRecoveryStatus.RECOVERING:I.BEACON_HIDE_KEY_VALUE},watchPercent:function(){var t=r(),n=t&&t.duration>0?Math.round(100*e._totalWatchedPlaybackTime/t.duration):"";return n>100?100:n},pageLatency:function(){return t.metrics.pageLatency?t.metrics.pageLatency:"na"},playerJsDownloadTime:function(){return e._jsDownloadTime||(e._jsDownloadTime=c("videoplayer-nextgen-(?!apps)")),"number"==typeof e._jsDownloadTime?Math.round(e._jsDownloadTime):"na"},playerSwfDownloadTime:function(){return e._swfDownloadTime||(e._swfDownloadTime=c(/player\.swf$/)),"number"==typeof e._swfDownloadTime?Math.round(e._swfDownloadTime):"na"},requestType:function(){return e._model.playback.requestType||I.STRING_DEFAULT},requestAction:function(){return e._model.playback.requestAction||I.STRING_DEFAULT},playlistUI:function(){return e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0?"true":"false"},clientWidth:function(){return e._model.playerDimension.width},clientHeight:function(){return e._model.playerDimension.height},retinaDisplayDetected:function(){return window.devicePixelRatio>1},getVPATraceDigest:function(){var e=r();return e&&e.vpaTraceDigest?e.vpaTraceDigest:"na"},getProgressBeaconMode:function(){return e._progressBeaconMode},manufacturer:function(){return t.CTV.man},deviceClass:function(){return t.CTV["class"]},closedCaptionsUserPreference:function(){var t=e._model.userPreferences&&e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.show;return t?"1":"0"},isPlayerDocked:function(){return e._model.uiState.isDocked},expMode:function(){return t.uiState.isFullscreen?"fullscreen":"lightbox"===t.baseConfig.experienceName.toLowerCase()?"lightbox":t.uiState.isDocked?"docked":"na"},playlistUIType:function(){var t=e._model.ui&&e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0&&e._model.ui.playlistUI.position,r="";return r="right"!==t||e._model.ui.playlistUI.inStream?null!==t?t:"none":"hero"},playlistUIUuid:function(){var t="",n=r();if(n){var o=n.getPlaylistSource();t=o?o:""}return""===t&&e._model.ui&&e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0&&(t=e._model.ui.playlistUI.playlistId||e._model.ui.playlistUI.playlistAlias||""),t},playlistSection:function(){var e=r();return e?e.getSectionType():null},sizmekIfrmValue:function(){return 1},atlasMarker:function(){return e._atlasMarker||""},isBumper:function(){var e=r();return e&&e.isBumper()}};return a},n.prototype.setRootElem=function(e){var t=this;t._rootElem=e},n.prototype.setActiveRenderer=function(e){var t=this;t._renderer=e},n.prototype._sendBeacon=function(e){var t=this,r=Array.prototype.slice.call(arguments,1),n=[],o=null,i={INCOMPLETE_EXIT:!0};t._beaconDisasterMode&&t._checkRateLimit(e)||(r.length>0&&(n=[r[0].data],o=r[0].fireCriteria),t._systems.forEach(function(r){var s=r.beaconMappings[e];if(s){var l=t._model.playlist,d=l?l.getCurrentItem():null;if(!r.shouldFire||r.shouldFire(d)!==!1){var c=s.keys;f.isFunction(c)&&(c=c.apply(r,n));var p=s.data;f.isFunction(p)&&(p=p.apply(r,n));var u=y.extend({},r.sendOpts);if(s.overrideBaseKeys&&(u.beginningKeys=u.endKeys=[]),s.baseUrl&&(u.baseUrl=s.baseUrl),i[e]&&(u.unloadBeacon=!0),d){var _,m=d.metrics.beacons;if(e in m)for(var v=d.metrics.beacons[e]||[],g=0;g<v.length;g++){var b=v[g];if(b.target===u.target&&b.addParam){_=t._generateStackedBeaconParams(b.addParam);break}}}if((!o||s.firingCriteria.indexOf(o)>=0)&&a(c,p,u,_,t._eventBus),s.extras)for(var A=0;A<s.extras.length;A++){u.baseUrl=s.extras[A].baseUrl;var E=s.extras[A].data;f.isFunction(E)&&(E=E.apply(r,n)),a(s.extras[A].keys,E,u,null,t._eventBus)}}}}),t._templateMetrics.sendBeacon(e,n))},n.prototype._checkRateLimit=function(e){var t=I.BEACON_DISASTER_MODE,r=!1;return t.global<1&&(r=Math.random()>t.global),t[e]&&(r=1===t[e]?!1:Math.random()>t[e]),r},n.prototype._generateStackedBeaconParams=function(e){var t=this,r=t._commonFields;return f.isString(e)?e.replace("{COMSCORE_C4}",r.comscoreC4()).replace("{COMSCORE_C5}",r.comscoreC5()).replace("{COMSCORE_C6}",r.comscoreC6()):null},n.prototype._sendPageView=function(){var e=this,t=y.getSingleton("Metrics");t||(t={},y.setSingleton("Metrics",t)),t.PageView?e._masterPlayerGuid=t.MasterPlayer:(e._masterPlayerGuid=e._guid,t.MasterPlayer=e._masterPlayerGuid,t.PageView=!0,e._sendBeacon("PAGE_VIEW"))},n.prototype._onVideoRequest=function(e){var t=this,r=t._commonFields;r.isBumper()||t._continuousPlayCount++,t._sendBeacon("VIDEO_REQUEST",{data:e})},n.prototype._onCtrlPlayRequest=function(e){var t=this;t._sendBeacon("CTRL_PLAYREQUEST",{data:e?e:""})},n.prototype._sendPlayerLoaded=function(){var e=this;e._sendBeacon("PLAYER_LOADED")},n.prototype._onStartScreenRendered=function(){var e=this;e._profiler.setEndTime(m.Metrics.INIT_TO_STARTSCREEN);var t=e._profiler.getItem(m.Metrics.INIT_TO_STARTSCREEN);t&&e._sendBeacon("INIT_TO_STARTSCREEN",{data:t.timeDiff})},n.prototype._onPlaybackRequested=function(){var e=this;e._seeking=!1,e._playbackPosition=0,e._initProgressBeaconState(),e._lastProgressBeaconPosition=e._playbackPosition,e._totalWatchedPlaybackTime=0,e._buffTimeTrueStream=0,e._progressBeaconDistance=0,e._seqNum=1,e._seqStart=e._playbackPosition,e._totalBufferingTime=0,e._recoveredPlayback=e._commonFields.getRecoveryStatus(),e._recoveredPlayback?(e._bufferingStart=!0,e._bufferingStartTime=Date.now()):(e._segInfo=[],e._segmentwiseBuffTime=0,e._trueStreamsProgressFired=!1)},n.prototype._onUIInteraction=function(e){var t=this,r=["ui_pl_nxt_clk","ui_pl_nxt_hvr","ui_pl_scrl","ui_pl_thmb_clk"],n={srcElement:e.srcElement,evt:r.indexOf(e.srcElement)>-1?"ui_pl":"none"};t._sendBeacon("UI_INTERACT",{data:n})},n.prototype._onSeek=function(e){var t=this;t._sendBeacon("CTRL_SEEK",{data:e?e:""})},n.prototype._onVolume=function(e){var t=this,r=t._model.playbackState.volume;r!==e&&t._sendBeacon("CTRL_VOLUME",{data:e})},n.prototype._onCCTog=function(e){var t=this;t._sendBeacon("CC_TOGGLE",{data:e?"1":"0"})},n.prototype._onCCLang=function(e){var t=this;t._sendBeacon("CC_LANG",{data:e?e:"na"})},n.prototype._onCCStyle=function(e){var t=this;t._sendBeacon("CC_STYLE",{data:e?e:"na"})},n.prototype._onCCSettings=function(){var e=this;e._sendBeacon("CC_SETTINGS")},n.prototype._onAgeBday=function(){var e=this;e._sendBeacon("CTRL_AGEGATE_BDAY")},n.prototype._onFullscreen=function(e){var t=this;t.fullScreenMode=e,t._sendBeacon("FULLSCREEN",{data:e?"ON":"OFF"});var r=t._commonFields.videoId();t._rapid&&Object.keys(t._rapid).length&&!t._rapidUUIDMap[r]&&t.fullScreenMode&&(t._fireRapidBeacon("fullscreen"),t._rapidUUIDMap[r]=1)},n.prototype._onSettings=function(){var e=this;e._sendBeacon("CTRL_SETTINGS")},n.prototype._onShare=function(e){var t=this;t._sendBeacon("CTRL_SHARE",{data:e})},n.prototype._onQualitySelected=function(e){var t=this;t._sendBeacon("QUALITY_SELECTED",{data:e.preference})},n.prototype._onReplay=function(){var e=this;e._sendBeacon("CTRL_REPLAY");var t=e._commonFields.videoId();e._rapid&&Object.keys(e._rapid).length&&!e._rapidUUIDMap[t]&&(e._fireRapidBeacon("replay"),e._rapidUUIDMap[t]=1)},n.prototype._onWatchLaterUpdate=function(e){var t=this,r="";"add"===e.operation?r="1":"delete"===e.operation&&(r="0"),t._sendBeacon("WL_CHANGE_REQUEST",{data:r})},n.prototype._onTimerUpdate=function(e){var t=this;t._sendBeacon("CTRL_TIMER",{data:e})},n.prototype._onUILogin=function(e){var t=this;t._sendBeacon("UI_LOGIN",{data:e})},n.prototype._onSelectedEndscreenVideo=function(e){var t=this;t._sendBeacon("CTRL_ENDSCREEN_VID",{data:e})},n.prototype._onMuteChange=function(e){var t=this,r=t._commonFields.videoId();t._rapid&&Object.keys(t._rapid).length&&!t._rapidUUIDMap[r]&&!e&&(t._fireRapidBeacon("unmute"),t._rapidUUIDMap[r]=1)},n.prototype._updatePlayerViewability=function(){var e=this,t=e._rootElem,r=t.getElementsByClassName("yvp-main");e.viewability=y.getElementViewability(r[0])},n.prototype._onContentFirstTSLoadStart=function(){var e=this,t=e._profiler.getItem(m.Metrics.HLS_FIRST_TS_LOAD_START);t&&null===t.endTime&&(e._profiler.setEndTime(m.Metrics.HLS_FIRST_TS_LOAD_START),e._profiler.add(m.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE))},n.prototype._onContentFirstTSFirstByteArrive=function(){var e=this,t=e._profiler.getItem(m.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE);t&&null===t.endTime&&e._profiler.setEndTime(m.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE)},n.prototype._onContentStarted=function(e,t){var r=this;t&&(r._playbackPosition=t);var n=r._profiler.getItem(m.Metrics.PLAYBACK_START);n&&null===n.endTime&&(r._profiler.setEndTime(m.Metrics.PLAYBACK_START),r._onAdOrContentStarted(),r._clipGuid=r._createClipGuid(r._model.playlist.getCurrentItem()),r._updatePlayerViewability(),r._sendBeacon("PLAYBACK_START",{data:{timeDiff:n.timeDiff,debugSt:r.debugSt,startTime:n.startTime+r._profiler.startTime}}),r._model.playback.requestType=null,r._model.playback.requestAction=null),r._isRapidPlayerPerformanceFired||r._fireRapidPlayerPerformanceMeasurements()},n.prototype._getContentType=function(){var e,t=this,r=t._commonFields,n=r.isLive()?"live":r.adLoaded()?"ad":"",o=r.adPosition();switch(n){case"ad":e="ad pre-roll","postroll"===o?e="ad post-roll":"midroll"===o&&(e="ad mid-roll");break;case"live":e=r.liveState()||"live";break;default:e=r.isBumper()?"slate":"vod short";var i=t._model.playlist.getCurrentItem();if(!i)break;var a=r.videoLength();i.isCCM?"na"!==a&&a>600&&(e="vod long"):e="streamurl"}return e},n.prototype._onAdOrContentStarted=function(){var e=this,t={},r=e._profiler.getItem(m.Metrics.LOAD_TO_LOADED_DATA);r&&(t[m.Metrics.LOAD_TO_LOADED_DATA.type]=r.timeDiff);var n=e._profiler.getItem(m.Metrics.DRM_METADATA_IS_SET);n&&(t[m.Metrics.DRM_METADATA_IS_SET.type]=n.timeDiff);var o=e._profiler.getItem(m.Metrics.DRM_AUTH_COMPLETE);o&&(t[m.Metrics.DRM_AUTH_COMPLETE.type]=o.timeDiff);var i=e._profiler.getItem(m.Metrics.STREAM_REQUEST_TO_RENDER);i&&(t[m.Metrics.STREAM_REQUEST_TO_RENDER.type]=i.timeDiff),e._trueStreamsProgressFired=!1,e._trueStreamsAdProgressFired=!1;var a=e._profiler.getItem(m.Metrics.CLICK_TO_START);if(a&&null===a.endTime){e._profiler.setEndTime(m.Metrics.CLICK_TO_START),t[m.Metrics.CLICK_TO_START.type]=a.timeDiff;var s=a.timeDiff;e._sendBeacon("CLICK_TO_START",{data:t}),e._comscoreMetrics.addToComscoreQueue(function(){e._comscoreMetrics.updateClipAttrs({y_ucl:s?s.toString():I.INT_DEFAULT})})}var l=e._profiler.getItem(m.Metrics.INIT_TO_START);if(l&&null===l.endTime){e._profiler.setEndTime(m.Metrics.INIT_TO_START),t[m.Metrics.INIT_TO_START.type]=l.timeDiff,e._sendBeacon("INIT_TO_START",{data:t});var d=l.timeDiff;e._comscoreMetrics.addToComscoreQueue(function(){e._comscoreMetrics.updateClipAttrs({y_apl:d?d.toString():I.INT_DEFAULT})})}},n.prototype._getVideoQuartile=function(e,t){var r=this,n=r._commonFields,o=n.percentWatched(e,t);return Math.floor(o/I.QUARTILE_PROGRESS_INTERVAL)},n.prototype._onPlaybackProgress=function(e){var t=this;if(!t._seeking){var r=e-t._playbackPosition;r&&(t._totalWatchedPlaybackTime+=r),t._playbackPosition=e,t._updateWaitTime(),t._recoveredPlayback&&(t._fireProgressBeacon(null,null,!0),t._recoveredPlayback=t._commonFields.getRecoveryStatus());var n=t._model.playlist.getCurrentItem(),o=n?n.duration:0,i=t._checkProgressFrequency(e,o);i.quartileBeacon&&t._fireProgressBeacon(i.quartileBeacon,!1),i.progressBeacon&&(t._updatePlayerViewability(),t._fireProgressBeacon(i.progressBeacon))}},n.prototype._updateBufferingStats=function(e,t){var r=this;e=e||!1;var n=new _;r._eventBus.publish(m.BEFORE_PROGRESS_BEACON,n),e=n.useDefaultBufferDuration||e,"sync"===n.mode?(r._segInfo=r._segInfo.concat(n.val),r._getBufferingStats(e),t&&t()):r._funcQueue.push(function(){r._getBufferingStats(e),t&&t()})},n.prototype._getBufferingStats=function(e){var t=this;t._computeBuffTimeDiff(),e&&(t._segInfo=[{buf_dur:t._totalBufferingTime}],t._segmentwiseBuffTime=t._totalBufferingTime,t._buffTimeDiff=0)},n.prototype._onSegInfoAvailable=function(e){var t=this;for(t._segInfo=t._segInfo.concat(e);t._funcQueue.length>0;)t._funcQueue.shift()()},n.prototype._onSegmentFirstByteLoaded=function(e){var t=this;t._atlasMarker=e.atlasMarker},n.prototype._updateWaitTime=function(){var e=this;e._bufferingStart&&(e._bufferingStart=!1,e._totalBufferingTime+=Date.now()-e._bufferingStartTime)},n.prototype._checkProgressFrequency=function(e,t){var r=this,n={},o=r._progressBeaconMode.firingCriteria;r._fixedIntervalProgressBeacons&&r._totalWatchedPlaybackTime>=r._fixedIntervalProgressBeacons[0]?(r._fixedIntervalProgressBeacons[0]!==I.TRUE_STREAMS_INTERVAL||r._trueStreamsProgressFired||(o=I.TRUE_STREAMS_INTERVAL,r._trueStreamsProgressFired=!0),n.progressBeacon=o,r._fixedIntervalProgressBeacons.shift()):r._totalWatchedPlaybackTime>=r._lastProgressBeaconPosition+r._progressBeaconMode.recurring&&(n.progressBeacon=r._progressBeaconMode.firingCriteria,r._lastProgressBeaconPosition+=r._progressBeaconMode.recurring);var i=r._getVideoQuartile(e,t);return i&&i!==r._videoQuartile&&(r._videoQuartile=i,n.quartileBeacon=I.QUARTILE_PROGRESS_INTERVAL),n},n.prototype._initProgressBeaconState=function(){var e=this,t=e._model.playlist.getCurrentItem();t?t.duration:0;e._fixedIntervalProgressBeacons=[],e._quartileIntervalProgressBeacons=[],e._fixedIntervalProgressBeacons=e._progressBeaconMode.fixed.slice()},n.prototype._fireProgressBeacon=function(e,t,r){var n=this;e=e||n._progressBeaconMode.firingCriteria,t=f.isNullOrUndefined(t)?!0:t,r=r||!1,n._updateWaitTime(),t?n._updateBufferingStats(r,n._sendProgessBeacon.bind(n,e,t,r)):n._sendProgessBeacon(e,t,r)},n.prototype._sendProgessBeacon=function(e,t,r){var n=this;e===I.TRUE_STREAMS_INTERVAL?(n._sendBeacon("PLAYBACK_STREAM_START",{fireCriteria:I.TRUE_STREAMS_INTERVAL}),n._buffTimeTrueStream=n._totalBufferingTime):n._sendBeacon("PLAYBACK_PROGRESS",{fireCriteria:e,data:{playEventFired:n._playEventFired}}),e!==I.QUARTILE_PROGRESS_INTERVAL&&(n._progressBeaconDistance=n._totalWatchedPlaybackTime),t&&(n._totalBufferingTime=0,n._segInfo.splice(0,Math.min(I.SEG_INFO_LENGTH,n._segInfo.length)))},n.prototype._onPlayerDestroyed=function(e){var t=this;if(t._progressBeaconMode.playerUnload){var r={reason:e?e:null};t._updateBufferingStats(),t._model.playbackState.isVpaidAdPlaying()&&t._eventBus.publish(m.BEFORE_INCOMPLETE_EXIT,r),t._sendBeacon("INCOMPLETE_EXIT",{data:r})}},n.prototype._onWindowUnload=function(){var e=this;e._onPlayerDestroyed("unload")},n.prototype._onAdPlaybackProgress=function(e,t){var r=this;r._commonFields;r._adPlaybackPosition=t,!r._trueStreamsAdProgressFired&&t>=I.TRUE_STREAMS_INTERVAL?(r._trueStreamsAdProgressFired=!0,r._updatePlayerViewability(),r._sendBeacon("AD_PROGRESS",{fireCriteria:I.TRUE_STREAMS_INTERVAL}),r._sendBeacon("AD_STREAMS")):t>=r._lastAdProgressBeaconPosition+I.PROGRESS_INTERVAL&&(r._lastAdProgressBeaconPosition+=I.PROGRESS_INTERVAL,r._updatePlayerViewability(),r._sendBeacon("AD_PROGRESS",{fireCriteria:I.PROGRESS_INTERVAL}))},n.prototype._onPlaybackComplete=function(){var e=this;e._updatePlayerViewability(),e._updateBufferingStats(),e._sendBeacon("PLAYBACK_COMPLETE"),e._totalBufferingTime=0,e._buffTimeTrueStream=0},n.prototype._onPlaybackPaused=function(){var e=this;e._sendBeacon("PLAYBACK_PAUSE")},n.prototype._onPlaybackStalled=function(e){var t=this;t._sendBeacon("PLAYBACK_STALLED",{data:e?e:""})},n.prototype._onPlaybackResumed=function(){var e=this;e._sendBeacon("PLAYBACK_RESUMED")},n.prototype._onCtrlPlayPause=function(e){var t=this;t._sendBeacon("CTRL_PLAYPAUSE",{data:e?e:""}),t._progressBeaconMode.playPause===!0&&"pause"===e&&(t._model.playbackState.ad?t._sendBeacon("AD_PROGRESS"):t._fireProgressBeacon())},n.prototype._onRecoveryMetadata=function(){var e=this;(e._commonFields.progressBeaconDistance()>0||e._totalBufferingTime>0)&&e._fireProgressBeacon(null,null,!0)},n.prototype._onABRDataUpdate=function(e){var t=this;t._sendBeacon("ABR_DATA_UPDATE",{data:e})},n.prototype._onApiCalled=function(e){var t=this;t._sendBeacon("API_CALLED",{data:e})},n.prototype._onFeedbackCalled=function(e){var t=this;t._sendBeacon("FEEDBACK_INFO",{data:e})},n.prototype._onBitrateChange=function(e,t){var r=this;r._sendBeacon("BITRATE_CHANGE",{data:{bitrate:e,reason:t.reason,newFrameRate:t.newFrameRate,oldFrameRate:t.oldFrameRate}})},n.prototype._onPlaybackSeeking=function(e){var t=this;t._seeking||(t._seqStart=e,t._seeking=!0)},n.prototype._onPlaybackSeeked=function(e){var t=this;t._seeking=!1,t._seqNum++,t._playbackPosition=e,t._sendBeacon("PLAYBACK_SEEK"),t._seqStart=e},n.prototype._onWaiting=function(e){var t=this;if(e){if(e.ignoreBuffering===!0)return;if(e.value===!1)return t._bufferingStart=!1,void(t._totalBufferingTime+=Date.now()-t._bufferingStartTime)}t._bufferingStart=!0,t._bufferingStartTime=Date.now()},n.prototype._isCriticalError=function(e){return e.category!==M.E_INFO&&e.category!==M.E_WARNING&&e.category!==M.E_YVAP},n.prototype._onError=function(e){var t=this,r=t._commonFields.videoId(),n=t._isCriticalError(e),o=t._criticalErrorFiredMap[r];e.group=o?"E":e.group,n&&(o?t._criticalErrorFiredMap[r]++:t._criticalErrorFiredMap[r]=1),(!t._criticalErrorFiredMap[r]||t._criticalErrorFiredMap[r]<P)&&(e.category===M.E_PLAYER&&e.subcategory===M.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED?setTimeout(function(){t._sendBeacon("PLAYER_ERROR",{data:e})},1e3):t._sendBeacon("PLAYER_ERROR",{data:e}))},n.prototype._onWarning=function(e){var t=this,r=t._commonFields.videoId();t._warningErrorFiredMap[r]||(t._warningErrorFiredMap[r]={});var n,o=O[e.subcategory]?O[e.subcategory]:w;t._warningErrorFiredMap[r][e.subcategory]?n=t._warningErrorFiredMap[r][e.subcategory]:(t._warningErrorFiredMap[r][e.subcategory]=0,n=0),t._warningCount<w&&o>n&&(t._sendBeacon("PLAYER_WARNING",{data:e}),t._warningCount++,t._warningErrorFiredMap[r][e.subcategory]++)},n.prototype._onInfo=function(e){var t=this;t._sendBeacon("PLAYER_INFO",{data:e})},n.prototype._onAdMetrics=function(e){var t=this;t._sendBeacon("AD_METRICS",{data:e})},n.prototype._onAdPlaybackStarted=function(e,t,r,n,o,i){var a=this;a._adPlaybackPosition=0,a._lastAdProgressBeaconPosition=a._adPlaybackPosition,a._onAdOrContentStarted(),a._clipGuid=a._createClipGuid(),a._updatePlayerViewability();var s=void 0!==i,l=s?i:r;a._sendBeacon("AD_START",{data:{latency:l,isVpaid:s}}),a._isRapidPlayerPerformanceFired||a._fireRapidPlayerPerformanceMeasurements()},n.prototype._onAdPlaybackComplete=function(){var e=this;e._updatePlayerViewability();var t=e._guidMap[e._model.playlist.getCurrentItem().id];t&&(e._clipGuid=t),e._sendBeacon("AD_COMPLETE")},n.prototype._onAdError=function(){var e=this;e._sendBeacon("AD_ERROR")},n.prototype._onAdBreakInfo=function(e){var t=this;t._sendBeacon("AD_BREAK_INFO",{data:e})},n.prototype._onAdBreakEnd=function(e){var t=this;t._sendBeacon("AD_BREAK_ENDED",{data:e})},n.prototype._onAdBreakCancelled=function(e){var t=this;t._sendBeacon("AD_BREAK_CANCELLED",{data:e})},n.prototype._onMidrollCacheUpdated=function(e){var t=this;t._sendBeacon("MIDROLL_CACHE_UPDATE",{data:e})},n.prototype._onRendererPluginLoaded=function(){var e=this;e._rendererPluginLoadStatus=1},n.prototype._onRendererPluginLoadFailed=function(){var e=this;e._rendererPluginLoadStatus=2},n.prototype._onRendererPluginLoadTimedOut=function(){var e=this;e._rendererPluginLoadStatus=3},n.prototype._computeBuffTimeDiff=function(){var e=this,t=e._totalBufferingTime;e._buffTimeTrueStream&&(t+=e._buffTimeTrueStream,e._buffTimeTrueStream=0);var r=e._segInfo.slice(0,Math.min(I.SEG_INFO_LENGTH,e._segInfo.length));e._segmentwiseBuffTime=0;for(var n=0;n<r.length;n++)e._segmentwiseBuffTime+=r[n].buf_dur;e._buffTimeDiff=e._segmentwiseBuffTime-t},n.prototype._fireRapidBeacon=function(e){var t=this,r=t._commonFields.videoId(),n=t._commonFields.videoTitle();if(t._rapidClickParams){t._rapidClickParams.itc=1,t._rapidClickParams.g=t._rapidClickParams.g?t._rapidClickParams.g:r,t._rapidClickParams.vid=r;var o=t._rapidClickParams.sec?t._rapidClickParams.sec:"yvp",i=t._rapidClickParams.slk?t._rapidClickParams.slk:n,a=t._rapidClickParams._p?t._rapidClickParams._p:1;t._rapid.beaconClick(o,i,a,t._rapidClickParams,e)}},n.prototype._fireRapidPlayerPerformanceMeasurements=function(){var e=this,t=e._commonFields,r=t.apLatency(),n={perf_usertime:{utm:{APL:r}}},o=D&&D.getLocalMeasurements(e._guid),i=D&&D.getGlobalMeasurements(),a=L.PERF.VP_SCRIPT_EXEC,s=L.PERF.VP_INIT;n.perf_usertime.utm[a]=i&&i[a]?i[a].startTime.toFixed(2):"",n.perf_usertime.utm[s]=o&&o[s]?o[s].startTime.toFixed(2):"",e._rapid&&"function"==typeof e._rapid.beaconPerformanceData&&e._rapid.beaconPerformanceData(n),e._isRapidPlayerPerformanceFired=!0},n.prototype.getMetricRendererType=function(e){var t=I.STRING_DEFAULT;if(!e)return t;switch(e){case N.FLASH:t="flash";break;case N.FLASH_SIMPLE:t="flash-simple";break;case N.HTML5_HLS:t="html5-hls";break;case N.HTML5_DASH:t="dash";break;case N.HTML5_RAW:case N.HTML5_TV:case N.HTML5_TV_TIZEN:case N.HTML5_TV_ORSAY:t="html";break;default:t="html"}return t},n.prototype.destroy=function(){var e=this;e._onPlayerDestroyed("destroy")},o.prototype.sendBeacon=function(e,t){var r=this,n=r._model.playlist.getCurrentItem();if(n){var o=function(n){var o=r._paramGetters[n];return o?o.apply(null,[e].concat(t)):null},a=n.metrics.beacons[e]||[];a.forEach(function(e){var t=e.url;t&&(t=i(t,o),y.sendImageBeacon(t))})}};var k=function(){return v.android?{name:"android",make:"unknown",model:"android",os:"android"}:v.ipad?{name:"iPad",make:"apple",model:"ipad",os:"ios"}:v.iphone?{name:"iPhone",make:"apple",model:"iphone",os:"ios"}:v.chrome?{name:"web",make:"chrome",model:v.chrome,os:v.os}:v.firefox?{name:"web",make:"firefox",model:v.firefox,os:v.os}:v.ie?{name:"web",make:"ie",model:v.ie,os:v.os}:v.safari?{name:"web",make:"safari",model:v.safari,os:v.os}:{name:"web",make:"na",model:"na",os:v.os}}()},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../constants":18,"../error":22,"../event":"YJm+dH","../media-store":29,"../navigator-info":42,"../perf":43,"../renderers/type":54,"../util":"jJTEqU","./comscore":33,"./comscore-metrics":32,"./marketingpx-metrics":34,"./media-metrie":35,"./metrics-constants":36,"./sizmek-metrics":38,"./ult-metrics":39,"./vidible-metrics":40}],38:[function(e,t,r){"use strict";function n(e){var t=this,r="https://bs.serving-sys.com/Serving/ActivityServer.bs",n=["cn","ActivityId","rnd","ifrm"],o={cn:e.wrapInFn("as"),ActivityId:e.mmActivityId,rnd:e.randomVal,ifrm:e.sizmekIfrmValue},i={baseUrl:r,keys:[],data:{}};t.sendOpts={baseUrl:r,target:"sizmek",paramGetters:o,beginningKeys:n,iFrameBeacon:!0},t.beaconMappings={PLAYBACK_START:i}}var o=e("../../../lib");t.exports=n,n.prototype.shouldFire=function(e){var t=o.isNullOrUndefined(e.metrics.mmActivityId)?"":e.metrics.mmActivityId.toString();return""!==t&&t.match(/^\d+$/)?!0:!1}},{"../../../lib":"bRhrlU"}],39:[function(e,t,r){"use strict";function n(e,t){var r=this,n=["t","_V","s","V_sec","evt","ccode","sec","cpos","type","_ex","_NOL"],s=["vid","pstaid","prt","cprt","lms_id","vs","psz","cdn","st","sp","bit","pls","vlng","site","lang","intl","lbl","synd","pver","expn","expt","expb","loc","auto","cont","bckt","snd","test","_w","vsid","_R","pltype","cached_vs","man","class","smpl","env","am"],l=["ctv_db","ctv_dc","_di","ctv_di","ctv_ddv","ctv_dfv","_dv","_lo","_dm","_dl","_dc","_osv","ctv_yb","_sr","ctv_yr","ctv_ybv","ctv_yv","_an","_av","_at"],d=function(t){return function(){return e.CTV.ctvMetricsParams[t]}},c={ctv_db:d("ctv_db"),ctv_dc:d("ctv_dc"),_di:d("_di"),ctv_di:d("ctv_di"),ctv_ddv:d("ctv_ddv"),ctv_dfv:d("ctv_dfv"),_dv:d("_dv"),_lo:d("_lo"),_dm:d("_dm"),_dl:d("_dl"),_dc:d("_dc"),_osv:d("_osv"),ctv_yb:d("ctv_yb"),_sr:d("_sr"),ctv_yr:d("ctv_yr"),ctv_ybv:d("ctv_ybv"),ctv_yv:d("ctv_yv"),_an:d("_an"),_av:d("_av"),_at:d("_at")},p={t:t.randomVal,s:t.pageSpaceId,vsid:t.videoSpaceId,vid:t.videoId,adid:t.adId,pstaid:t.videoId,lms_id:t.licenseId,pls:t.playerInt32Guid,psz:t.dimensions,site:t.site,lang:t.lang,intl:t.region,prt:t.rendererType,cprt:t.contentRendererType,pltype:t.playerType,lbl:t.label,synd:t.syndicationId,_w:t.pageUrl,ccode:t.ccode,sec:t.sec,cpos:t.cpos,pver:t.playerVersion,expn:t.experienceName,expt:t.experienceType,expb:t.experienceBucket,loc:t.playerLocation,_R:t.pageReferrer,dur:t.playbackWatchedTime,dur_d:t.progressBeaconDistance,vlng:t.videoLength,adlng:t.adDuration,toc:t.typeOfContent,pbst:t.playbackState,_ex:t.offNetwork,_NOL:t.offNetwork,auto:t.autoplay,cont:t.continuousPlayCount,cdn:t.cdn,ucl:t.ucLatency,apl:t.apLatency,s_apl:t.apLatencyStartTime,bit:t.bitrate,view:t.viewability,sp:t.streamProtocol,st:t.streamType,bckt:t.hostingBucket,snd:t.isMute,type:t.contentType,rsm:t.isResume,test:t.experienceBucket,algo:t.algo,disp:t.displayMode,consl:t.constructLatency,trcreate:t.renderCreateLatency,tsltps:t.playToRenderLatency,tmeta_call:t.sapiLatency,s_tsapic:t.sapiLatencyStartTime,tswf_ready:t.swfLatency,s_tswfr:t.swfLatencyStartTime,tcc_pref:t.ccPrefLatency,tltld:t.hlsPlaylistLatency,strml:t.streamLatency,s_strml:t.streamLatencyStartTime,buff_info:t.segInfo,client_width:t.clientWidth,client_height:t.clientHeight,retina:t.retinaDisplayDetected,vpa_td:t.getVPATraceDigest,vs:t.videoSession,cached_vs:t.cachedVs,jsdt:t.jsDownloadTime,pgltcy:t.pageLatency,buf_dur:t.segmentBuffTime,man:t.manufacturer,smpl:t.samplingId,ccap:t.closedCaptionsUserPreference,env:t.hostingEnv,"class":t.deviceClass,expm:t.expMode,pl_type:t.playlistUIType,pl_uuid:t.playlistUIUuid,pl_intr:t.instrument,pl_sec:t.playlistSection,am:t.atlasMarker,_V:function(){return"V"}};s=i.tv?s.concat(l):s,p=i.tv?a.extend(p,c):p,r.sendOpts={baseUrl:"//bats.video.yahoo.com/p",target:"ult",paramGetters:p,beginningKeys:n,endKeys:s},r.beaconMappings={AD_BREAK_INFO:{keys:["poddur","mttl","mvalid","mdur_ready","latency","cids","adblk"],data:function(e){return{V_sec:"pb",evt:"pod-start-inf",poddur:e.adBreakDuration,mttl:e.numMidrollsTotal,mvalid:e.numMidrollsValid,mdur_ready:e.readyAdsDuration,latency:e.adStartLatency,cids:e.creativeIds.join(",")||"none",adblk:e.adBlockerDetected}}},AD_BREAK_ENDED:{keys:["poddur","merr","merr_dur","mnum","mdur_ready","mdur_true","mdur_rndr","latency","cids","adblk","unpld_dur","cuein_time"],data:function(e){return{V_sec:"pb",evt:"pod-end-inf",poddur:e.adBreakDuration,merr:e.adsErrorCount,merr_dur:e.erroredAdsDuration,mnum:e.adsStartedCount,mdur_ready:e.readyAdsDuration,mdur_true:e.adsPlayDurationExpected,mdur_rndr:e.adsPlayDurationActual,latency:e.videoStartLatency,cids:e.creativeIds.join(",")||"none",adblk:e.adBlockerDetected,unpld_dur:e.unplayedDuration,cuein_time:e.adBreakCueInTime}}},MIDROLL_CACHE_UPDATE:{keys:["retry_cnt","target_ads_dur","uniq_ads_num","no_ads_num","dup_ads_num","uniq_ads_dur"],data:function(e){return{V_sec:"pb",evt:"pod-cache-updt",retry_cnt:e.retryCount,target_ads_dur:e.targetAdsDuration,no_ads_num:e.totalNoAds,dup_ads_num:e.totalDuplicatedAds,uniq_ads_num:e.totalUniqueAds,uniq_ads_dur:e.uniqueAdsDuration}}},AD_BREAK_CANCELLED:{keys:["unpld_cids","unpld_dur","reason"],data:function(e){return{V_sec:"pb",evt:"pod-cancelled",unpld_cids:e.unplayedCreativeIds.join(",")||"none",unpld_dur:e.unplayedDuration,reason:e.reason}}},AD_METRICS:{keys:function(e){var t=Object.keys(e.ult);return t.push("V_sec"),t},data:function(e){var t=e.ult;return t.V_sec="pb",t}},ABR_DATA_UPDATE:{keys:["sc","ib","bft","ci","dw","dh","pr","eb","bl","swc","dfr","fbl","ted","ni","rs"],data:function(e){return{V_sec:"pb",evt:"v_abr",sc:e.sc,ib:e.ib,bft:e.bft,ci:e.ci,dw:e.dw,dh:e.dh,pr:e.pr,eb:e.eb,bl:e.bl,swc:e.swc,dfr:e.dfr,fbl:e.fbl?e.fbl.toString():"",ted:e.ted.map(function(e){return JSON.stringify(e)}).toString(),ni:e.ni,rs:e.rs}}},VIDEO_REQUEST:{keys:["prefetch"],data:function(e){return{V_sec:"pb",evt:"v_request",prefetch:e}}},PLAYBACK_START:{keys:["ucl","apl","s_apl","dur","view","rsm","disp","consl","trcreate","tmeta_call","s_tsapic","tswf_ready","s_tswfr","tcc_pref","tltld","strml","s_strml","tsltps","tpb","s_tpb","pgltcy","jsdt","swfdt","req_type","req_action","ccap","d_st","expm","pl_type","pl_uuid","pl_intr","pl_sec","conntype","apsupp","ipsupp"],data:function(e){return{V_sec:"pb",evt:"v_start",rsm:t.isResume(),tmeta_call:t.tsapic(),tpb:e.timeDiff,s_tpb:e.startTime,pgltcy:t.pageLatency(),jsdt:t.playerJsDownloadTime(),swfdt:t.playerSwfDownloadTime(),req_type:t.requestType(),req_action:t.requestAction(),d_st:e.debugSt,conntype:t.networkConnectionType(),apsupp:t.autoplaySupported(),ipsupp:t.inlinePlaybackSupported}}},PLAYBACK_PROGRESS:{keys:["dur","dur_d","view","buff_info","buf_dur","p_width","p_height","retina","rcvr_status","expm","pl_type","pl_uuid","pl_intr","pl_sec","vpa_td"],firingCriteria:[t.getProgressBeaconMode().firingCriteria],data:function(){return{V_sec:"pb",evt:"v_prog",
rcvr_status:t.recoveryStatus(),p_width:t.clientWidth(),p_height:t.clientHeight(),retina:t.retinaDisplayDetected()}}},PLAYBACK_STREAM_START:{keys:["view","buff_info","buf_dur","dur","dur_d","expm","pl_type","pl_uuid","pl_intr","pl_sec","vpa_td"],firingCriteria:[o.TRUE_STREAMS_INTERVAL],data:function(){return{V_sec:"pb",evt:"v_strm_view"}}},PLAYBACK_COMPLETE:{keys:["dur","dur_d","view","watchpct","stall_t","buff_info","buf_dur","expm","pl_type","pl_uuid","pl_intr","pl_sec","vpa_td"],data:function(){return{V_sec:"pb",evt:"v_comp",dur:t.playbackPosition(),watchpct:t.watchPercent(),stall_t:t.bufferingTime()}}},INCOMPLETE_EXIT:{keys:["dur","dur_d","view","watchpct","stall_t","buff_info","buf_dur","rcvr_status","expm","pl_type","pl_uuid","pl_intr","pl_sec","vpa_td","toc","pbst","tswf_ready","tmeta_call","strml","ext_resn","vsl","vil","vst","s_vsl","s_vil","s_vst"],data:function(e){return{V_sec:"pb",evt:"v_ncomp",rcvr_status:t.recoveryStatus(),watchpct:t.watchPercent(),stall_t:t.bufferingTime(),ext_resn:e.reason||"na",vsl:e.vpaidLatencies&&e.vpaidLatencies.vsl||"na",vil:e.vpaidLatencies&&e.vpaidLatencies.vil||"na",vst:e.vpaidLatencies&&e.vpaidLatencies.vst||"na",s_vsl:e.vpaidLatencies&&e.vpaidLatencies.sVsl||"na",s_vil:e.vpaidLatencies&&e.vpaidLatencies.sVil||"na",s_vst:e.vpaidLatencies&&e.vpaidLatencies.sVst||"na"}}},PLAYBACK_RESUMED:{keys:[],data:function(){return{V_sec:"pb",evt:"p_resm"}}},PLAYBACK_STALLED:{keys:["value","play_pos","dur"],data:function(e){return{V_sec:"pb",evt:"v_stall",value:e,play_pos:t.playbackPosition()}}},BITRATE_CHANGE:{keys:["play_pos","value","value_e","dur","reason","fr","fr_old"],data:function(e){return{V_sec:"pb",evt:"v_btrt",play_pos:t.playbackPosition(),value:e.bitrate,value_e:t.bitrate(),reason:e.reason,fr:e.newFrameRate,fr_old:e.oldFrameRate}}},AD_START:{keys:["adid","adlng","ucl","apl","dur","view","latency"],data:function(e){return{V_sec:"pb",evt:"ad_start",dur:t.adPlaybackPosition(),latency:e.latency,vpaid:e.isVpaid}}},AD_PROGRESS:{keys:["dur","adlng","adid","view"],firingCriteria:[o.TRUE_STREAMS_INTERVAL,o.PROGRESS_INTERVAL],data:function(){return{V_sec:"pb",evt:"ad_prog",dur:t.adPlaybackPosition()}}},AD_COMPLETE:{keys:["dur","adlng","adid","view"],data:function(){return{V_sec:"pb",evt:"ad_comp",dur:t.adPlaybackPosition()}}},UI_INTERACT:{keys:["V_slk","dur","algo","pl_intr"],data:function(e){return{V_sec:"ctrl",evt:e.evt,V_slk:e.srcElement}}},CTRL_PLAYPAUSE:{keys:["value","dur","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_pp",value:e,play_pos:t.playbackPosition()}}},CTRL_SEEK:{keys:["value","value_e","dur"],data:function(e){return{V_sec:"ctrl",evt:"ui_seek",value:t.playbackPosition(),value_e:e}}},CTRL_VOLUME:{keys:["value","value_e","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_cv",value:e,value_e:t.currVolume(),play_pos:t.playbackPosition()}}},CTRL_SHARE:{keys:["value"],data:function(e){return{evt:"ui_shbtn",V_sec:"ctrl",value:e}}},CTRL_REPLAY:{keys:[],data:function(){return{evt:"ui_esrpl",V_sec:"ctrl"}}},CTRL_PLAYREQUEST:{keys:["req_type"],data:function(e){return{V_sec:"ctrl",evt:"ui_pb_req",req_type:e}}},QUALITY_SELECTED:{keys:["play_pos","value","dur"],data:function(e){return{evt:"ui_qual",V_sec:"ctrl",value:e,play_pos:t.playbackPosition()}}},CC_TOGGLE:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_cctog",value:e,play_pos:t.playbackPosition()}}},CC_LANG:{keys:["play_pos","value"],data:function(e){return{V_sec:"ctrl",evt:"ui_cclng",play_pos:t.playbackPosition(),value:e}}},CC_STYLE:{keys:["play_pos","value"],data:function(e){return{V_sec:"ctrl",evt:"ui_ccstl",play_pos:t.playbackPosition(),value:e}}},CC_SETTINGS:{keys:["play_pos"],data:function(){return{V_sec:"ctrl",evt:"ui_ccstg",play_pos:t.playbackPosition()}}},CTRL_AGEGATE_BDAY:{keys:[],data:function(){return{V_sec:"ctrl",evt:"ui_agesm"}}},FULLSCREEN:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_fs",value:e,play_pos:t.playbackPosition()}}},CTRL_SETTINGS:{keys:["play_pos"],data:function(){return{V_sec:"ctrl",evt:"ui_stgs",play_pos:t.playbackPosition()}}},WL_CHANGE_REQUEST:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_wltr",play_pos:t.playbackPosition(),value:e}}},CTRL_TIMER:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_timer",play_pos:t.playbackPosition(),value:e}}},UI_LOGIN:{keys:["value"],data:function(e){return{V_sec:"ctrl",evt:"ui_login",value:e}}},CTRL_ENDSCREEN_VID:{keys:["value","value_e"],data:function(e){return{V_sec:"ctrl",evt:"ui_esvid",value:e.vindex,value_e:e.vid}}},PLAYER_ERROR:{keys:["ecode","estring","dur","play_pos"],data:function(e){return{V_sec:"pb",evt:"error",ecode:e.rep,estring:e.debugMessage||e.message,play_pos:t.playbackPosition()}}},PLAYER_WARNING:{keys:["ecode","estring"],data:function(e){return{V_sec:"pb",evt:"warn",ecode:e.rep,estring:e.debugMessage||e.message}}},PLAYER_INFO:{keys:["ecode","estring"],data:function(e){return{V_sec:"pb",evt:"info",ecode:e.rep,estring:e.debugMessage||e.message}}},API_CALLED:{keys:["source","url","latency","http_code","resp_len","instrument","perf_info","perf_stack"],data:function(e){return{V_sec:"pb",evt:"v_api",source:e.source||"na",url:e.url,latency:e.latency||t.tsapic(),http_code:e.http_code||"na",resp_len:e.resp_len||"na",instrument:e.instrument,perf_info:e.perfInfo,perf_stack:e.perfStack}}},FEEDBACK_INFO:{keys:["group","evtlog","fb_text","src"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g1",evtlog:e.eventLog,fb_text:e.feedbackText,src:e.source}},extras:[{baseUrl:r.sendOpts.baseUrl,keys:["group","history"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g2",history:JSON.stringify(e.opssInfo.history)}}},{baseUrl:r.sendOpts.baseUrl,keys:["group","profile"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g3",profile:JSON.stringify(e.opssInfo.profile)}}},{baseUrl:r.sendOpts.baseUrl,keys:["group","playbackInfo"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g4",playbackInfo:JSON.stringify(e.opssInfo.playbackInfo)}}},{baseUrl:r.sendOpts.baseUrl,keys:["group","model"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g5",model:JSON.stringify(e.model)}}}]},STREAMING_SESSION_BEGIN:{keys:[],data:function(){return{V_sec:"streaming",evt:"st_session_begin"}}},STREAMING_SESSION_END:{keys:[],data:function(){return{V_sec:"streaming",evt:"st_session_end"}}},STREAMING_ERROR:{keys:["code","status","details"],data:function(e){return{V_sec:"streaming",evt:"st_error",code:e.code,status:e.status,details:encodeURIComponent(e.details)}}},STREAMING_ISSUE:{keys:["code","playbackTime","desc","details"],data:function(e){return{V_sec:"streaming",evt:"st_issue",code:e.code,playbackTime:e.playbackTime,desc:encodeURIComponent(e.desc),details:encodeURIComponent(e.details)}}},STREAMING_PHASE:{keys:["playbackRequest","playbackStarted","playbackCompleted"],data:function(e){return{V_sec:"streaming",evt:"st_phase",playbackRequest:e.playbackRequest,playbackStarted:e.playbackStarted,playbackCompleted:e.playbackCompleted}}},STREAMING_DATA:{keys:["startupBitrate","bitrateSwitches","bufferEventCount","playTime","totalBufferingTime","totalRebufferingRatio","sampledRebufferingRatio","sampledBufferingTime","sampledBufferingCount","mediaPlaylistLoadCount","minPlaylistUpdateInterval","maxPlaylistUpdateInterval","avgPlaylistUpdateInterval","rebufferingTimeoutCount","playbackFrozenCount","loadingLateCount","recoveryCount"],data:function(e){return{V_sec:"streaming",evt:"st_data",startupBitrate:e.startupBitrate,bitrateSwitches:e.bitrateSwitches,bufferEventCount:e.bufferEventCount,playTime:e.playTime,totalBufferingTime:e.totalBufferingTime,totalRebufferingRatio:e.totalRebufferingRatio,sampledRebufferingRatio:e.sampledRebufferingRatio,sampledBufferingTime:e.sampledBufferingTime,sampledBufferingCount:e.sampledBufferingCount,mediaPlaylistLoadCount:e.mediaPlaylistLoadCount,minPlaylistUpdateInterval:e.minPlaylistUpdateInterval,maxPlaylistUpdateInterval:e.maxPlaylistUpdateInterval,avgPlaylistUpdateInterval:e.avgPlaylistUpdateInterval,rebufferingTimeoutCount:e.rebufferingTimeoutCount,playbackFrozenCount:e.playbackFrozenCount,bufferFrozenCount:e.bufferFrozenCount,loadingLateCount:e.loadingLateCount,recoveryCount:e.recoveryCount}}},STREAMING_WARNING:{keys:["code","playbackTime","desc","details"],data:function(e){return{V_sec:"streaming",evt:"st_warning",code:e.code,playbackTime:e.playbackTime,desc:encodeURIComponent(e.desc),details:encodeURIComponent(e.details)}}},STREAMING_PLAYER_WARNING:{keys:["code","status","details"],data:function(e){return{V_sec:"streaming",evt:"st_player_warning",code:e.code,status:e.status,details:encodeURIComponent(e.details)}}}}}t.exports=n;var o=e("./metrics-constants"),i=e("../../../lib/user-agent"),a=e("../util")},{"../../../lib/user-agent":"ty5FFo","../util":"jJTEqU","./metrics-constants":36}],40:[function(e,t,r){"use strict";function n(e){var t=this,r=["pid","vid","vpt","r","cb"],n={pid:function(){return a},vid:e.videoId,vpt:e.autoplay,w:function(){var t=e.dimensions().split("x");return t[0]},h:function(){var t=e.dimensions().split("x");return t[1]},q:e.videoQuartile,r:e.pageUrl,cb:e.randomVal,nv:function(){return"1"},at:function(){return"preroll"},aen:function(){return"Yahoo"},asn:function(){return"1"},ar:function(){return"yes"},v:function(){return"54d54a0be4b0417331ae4e01"},acid:function(){return"54d54cc3e4b0417331ae4e26"},aert:function(){return"50"},asid:function(){return"54d54cf8e4b0417331ae4e29"}},a=o(e,r,n);t.sendOpts={baseUrl:"//trk.vidible.tv/trk/",target:"vidible",paramGetters:n,beginningKeys:r},t.beaconMappings={PLAYBACK_START:{baseUrl:t.sendOpts.baseUrl+"video-play.gif",keys:["h","w"],data:{}},PLAYBACK_PROGRESS:{baseUrl:t.sendOpts.baseUrl+"video-quartile.gif",firingCriteria:[i.QUARTILE_PROGRESS_INTERVAL],keys:["q"],data:{}},AD_START:{baseUrl:t.sendOpts.baseUrl+"ad-request.gif",keys:["at","asn"],data:{},extras:[{keys:["at","aen","asid","acid","v"],data:{},baseUrl:t.sendOpts.baseUrl+"ad-engine-request.gif"},{keys:["aen","at","ar","asid","acid","aert","v"],data:{},baseUrl:t.sendOpts.baseUrl+"ad-engine-response.gif"},{keys:["at","aen","stg","asid","acid","v"],data:{stg:"loaded"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"},{keys:["at","aen","stg","asid","acid","v"],data:{stg:"win"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"},{keys:["at","aen","asid","acid","stg","v"],data:{stg:"started"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"}]},AD_COMPLETE:{baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif",keys:["at","aen","asid","acid","stg","v"],data:{stg:"finished"}}}}function o(e,t,r){var n=decodeURIComponent(e.experienceType().replace(/&(amp;)+/g,"%26")),o=n.split("&"),i=o.shift();return o.forEach(function(e){var n=e.split("="),o=n[0],i=n[1];r[o]=function(){return i},-1===t.indexOf(o)&&t.push(o)}),i}t.exports=n;var i=e("./metrics-constants")},{"./metrics-constants":36}],41:[function(e,t,r){"use strict";function n(e){return!!e}function o(e,t){var r={defaultVal:e||!1,transform:n};return t&&(r.configName=t),r}function i(e,t){var r={defaultVal:e||"",validator:S.isString};return t&&(r.configName=t),r}function a(){return T.isFlashInstalled()&&S.isFunction(b)}function s(){if(!S.isFunction(f))return!1;var e=window.MediaSource;return e&&e.isTypeSupported('video/mp4; codecs="avc1.640028"')&&e.isTypeSupported('audio/mp4; codecs="mp4a.40.2"')?!0:!1}function l(){return h.mobile?!1:h.chrome&&h.chrome>=37?!0:h.ie?!0:!1}function d(){if(!S.isFunction(g))return!1;var e=window.MediaSource;return e?!0:!1}function c(e,t,r){return h.mobile?!1:!r||"sidekicktv"!==r.toLowerCase()||"news"!==t&&"finance"!==t&&"sports"!==t?h.chrome<47&&h.firefox<44&&h.ie<11&&h.edge<12||window.location.href.indexOf("forceFlash=true")>-1?!1:window.location.href.indexOf("enableHTML5HLS=true")>-1||T.isInternalUser()?!0:h.winXP||h.winVista||h.win8?!1:"windows"!==h.os||h.win64?"cavideo"===r?!1:window.location.href.indexOf("finance.yahoo.com/brklivestream")>-1?!1:h.chrome>=47||h.ie||h.edge?!0:h.firefox>=44?!0:!1:!1:!1}function p(){return h.mobile?!1:!h.safari||h.safari<8||window.location.href.indexOf("forceFlash=true")>-1?!1:window.location.href.indexOf("enableHTML5=true")>-1||T.isInternalUser()?!0:!1}function u(e){var t=this;t.items=[],t.position=-1,t._mediaStore=e,t.videoRecommendations=!0}function _(){var e=this;e.ad=null,e.state=E.INIT,e.paused=!1,e.seeking=!1,e.loading=!0,e.criticalError=null,e.previousItem=null,e.looped=!1,e.loadedItem=null,e.rendererType=null}function m(e,t,r){var n,o,i,m,v=this;if(v.guid=r,v.mediaStore=t||new A.MediaStore,v.errors=[],e){v._config=e,v.playbackState=new _,A.fillFromConfig(D,e,v,v.errors),(e.userprefs||{}).closedcaptionprefs?v.userPreferences.closedCaptions.isAvailable=!0:v.userPreferences.closedCaptions.isAvailable=!1,v.disableCasting="boolean"==typeof e.disableCasting?e.disableCasting:!1,v.ui.chromeless&&(v.ui.showStartScreen=!1,v.ui.showControls=!1,v.ui.showEndScreen=!1,v.ui.showAgeGate=!1),v.playback.canPlayInline=T.isInlinePlaybackSupported(),v.playback.autoplaySupported=T.isAutoplaySupported(),v.isMobileStrmInlineExpr()&&(v.playbackState.mute=!0,v.ui.showControls=!1),v.rendererTypes=[];var f=!1;v.adsRendererTypes=[],n=("hls"===v.baseConfig._html5||c(v._config.region,v._config.site,v._config.expName))&&d()&&"raw"!==v.baseConfig._html5,m=!n&&p(),o=("dash"===v.baseConfig._html5||l())&&s(),f=!o&&v.baseConfig._html5!==!0&&"raw"!==v.baseConfig._html5,i=f&&a()&&!S.isFunction(N)&&!h.mobile&&!h.tv,v.useFlash=i,n&&v.rendererTypes.push(M.HTML5_HLS),m&&v.rendererTypes.push(M.HTML5_RAW),o&&v.rendererTypes.push(M.HTML5_DASH);var g=M.FLASH;i&&(n&&v.useSimpleFlash&&(g=M.FLASH_SIMPLE),v.rendererTypes.push(g)),v.rendererTypes.push(M.HTML5_RAW),i&&v.adsRendererTypes.push(g),v.adsRendererTypes.push(M.HTML5_RAW),h.tv&&(v.rendererTypes=[],v.adsRendererTypes=[],h.tizen?(v.rendererTypes.push(M.HTML5_TV_TIZEN),v.adsRendererTypes.push(M.HTML5_TV_TIZEN)):h.orsay?(v.rendererTypes.push(M.HTML5_TV_ORSAY),v.adsRendererTypes.push(M.HTML5_TV_ORSAY)):(v.rendererTypes.push(M.HTML5_TV),v.adsRendererTypes.push(M.HTML5_TV))),v.capabilities={},v.adsCapabilities={},v.rendererTypes.forEach(function(e){v.capabilities[e]=y(e),v.playback.skipFormats.length>0&&(v.capabilities[e].preferredFormats=v.capabilities[e].preferredFormats.filter(function(e){return-1===v.playback.skipFormats.indexOf(e)}))}),v.adsRendererTypes.forEach(function(e){v.adsCapabilities[e]=y(e),v.playback.skipFormats.length>0&&(v.adsCapabilities[e].preferredFormats=v.adsCapabilities[e].preferredFormats.filter(function(e){return-1===v.playback.skipFormats.indexOf(e)}))}),v.errors.length;var b=(((e.prefetch||{}).query||{}).results||{}).mediaObj;b&&v.mediaStore.fillFromSapi(b,v.rendererTypes,v.capabilities,v.errors);var E=e.prefetchIds;if(E&&S.isArray(E)){var I=E.map(function(e){return{id:e}});v.mediaStore.fillFromSapi(I,v.rendererTypes,v.capabilities,v.errors)}v.playlist=new u(v.mediaStore),e.playlist&&(v.playlist.initializeFromRaw(e.playlist,v.rendererTypes,v.capabilities,v.errors),v.errors.length),e.ignoreEndlist&&(v.playback.ignoreEndlist=!0)}}t.exports={Model:m,Playlist:u,_PlaybackState:_};var v=e("./yvap/ads-json"),y=e("../../lib/capability"),f=e("./renderers/html5-dash"),g=e("./renderers/html5-hls"),b=(e("./renderers/html5-tv"),e("./renderers/tizen"),e("./renderers/orsay"),e("./renderers/flash")),A=e("./media-store"),E=e("./states"),h=e("../../lib/user-agent"),T=e("./util"),S=e("../../lib"),I=(e("../../lib/logger"),e("./metrics/metrics-constants")),L=e("./constants"),M=e("./renderers/type"),C=e("./navigator-info").network,N=(e("./perf"),e("./views/tumblr-controls")),D={version:{defaultVal:"7.86.188.1476334231",validator:S.isString},playlist:{id:{defaultVal:null,validator:S.isString}},CMS:{colo:{defaultVal:null,validator:S.isString},suppressAdContext:o(),enableCache:o(h.tv?!1:!0),cachedVs:{defaultVal:null,validator:S.isString}},pageLatency:{pagePlayerJsDownloadTime:{defaultVal:null,validator:S.isNumber}},forcePreloadBufferLimit:{defaultVal:32,validator:S.isNumber},html5_hls:{useWorker:o(!0),preloadBufferLimit:{defaultVal:8,validator:S.isNumber}},ui:{configName:null,contentTypeLabel:{defaultVal:null,validator:S.isString},chromeless:o(!1,"chromeless"),startScreenConfig:{configName:"startscreen",transform:function(e){return S.isObject(e)?e:{}},showProvider:o(!0),showDescription:o(!0,"showDesc"),showButton:o(!0),showTitle:o(!0)},showStartScreen:{configName:"startscreen",defaultVal:!0,transform:function(e){return S.isObject(e)?!0:n(e)}},showControls:o(!0),showTitleOnStart:{defaultVal:"",validator:S.isString},showTitleOnHover:o(!0),showEndScreen:o(!0,"endscreen"),showFullscreen:o(!0,"fullscreenBtn"),showReplayOnlyEndScreen:o(!1,"replayonlyendscreen"),showAgeGate:{defaultVal:o(!0),validator:S.isBoolean},thumbnailDimensions:{height:{defaultVal:null,validator:S.isNumber},width:{defaultVal:null,validator:S.isNumber}},vttIndex:{defaultVal:null,validator:S.isNumber},playlistUI:{show:o(!1),playlistId:{defaultVal:null,validator:S.isString},playlistAlias:{defaultVal:null,validator:S.isString},position:{defaultVal:null,validator:S.isString},theme:{defaultVal:"light",validator:S.isString},inStream:o(!1)},docking:{enableOnScrollDown:o(!1),enableOnScrollUp:o(!1),fadeInAnimation:o(!0),positionTop:{defaultVal:-1,validator:S.isNumber},positionRight:{defaultVal:20,validator:S.isNumber},positionLeft:{defaultVal:-1,validator:S.isNumber},positionBottom:{defaultVal:20,validator:S.isNumber},width:{defaultVal:320,validator:S.isNumber},height:{defaultVal:180,validator:S.isNumber},threshold:{defaultVal:50,validator:S.isNumber},enableOnMuted:o(!0),showInfoCard:o(!0)}},YVAP:{accountId:{defaultVal:null,validator:S.isString},playContext:{defaultVal:null,validator:S.isString},timeout:{defaultVal:3,transform:function(e){return parseInt(e)}},cTopic:{defaultVal:null,validator:S.isString},standaloneAd:{xml:{defaultVal:null,validator:S.isString},gemini:{defaultVal:null},brxd:{defaultVal:null},rules:{defaultVal:null},beacons:{defaultVal:null},showAdSlug:o(!1)},vpaidTimeout:{defaultVal:null,validator:S.isNumber},adsReady:o(),customSPID:{defaultVal:null,validator:S.isString},customDomain:{defaultVal:"",validator:S.isString},preInitVpaid:o(!1)},metrics:{configName:null,comscoreC4:{defaultVal:"",validator:function(e){return S.isString(e)&&""!==e}},ccode:{defaultVal:"",validator:S.isString},sec:{defaultVal:"",validator:S.isString},skipComscore:{defaultVal:!1,validator:S.isBoolean},skipABRBeacon:o(!0),ywaSamplingRate:{defaultVal:1,validator:S.isNumber},ultSamplingRate:{defaultVal:1,validator:S.isNumber},qosSamplingRate:{defaultVal:1,validator:S.isNumber},cpos:{defaultVal:"",validator:S.isString},progressBeaconStrategy:{configName:"progressBeaconStrategy",defaultVal:null,fixed:{configName:"fixed",defaultVal:[],validator:function(e){return S.isArray(e)&&e.every(function(e){return S.isNumber(e)})}},recurring:{configName:"recurring",defaultVal:null,validator:S.isNumber},playerUnload:o(!1),playPause:o(!1)}},playback:{configName:null,continuousPlay:o(),autoplay:o(),bitrate:{configName:null,defaultVal:0,validator:S.isNumber},targetBitrate:{defaultVal:NaN,validator:S.isNumber},disableGPU:o(!1),quality:{defaultVal:"auto",validator:S.isString},bitrates:{defaultVal:[],validator:function(e){return S.isArray(e)&&e.every(function(e){return S.isNumber(e)})}},heights:{defaultVal:[],validator:function(e){return S.isArray(e)&&e.every(function(e){return S.isNumber(e)})}},desiredBitrate:{defaultVal:900,validator:S.isNumber},loop:o(),startTime:{defaultVal:NaN,validator:S.isNumber},stopBufferingOnPause:o(!1),conviva:o(!0),preload:o(!1,"preload"),preconnect:o(!0),fullscreen:o(),abr:o(),adPlaybackOnly:o(),protocol:{configName:null,defaultVal:"",validator:S.isString},skipFormats:{defaultVal:[],validator:function(e){return S.isArray(e)&&e.every(function(e){return S.isString(e)})}},playInlineVideo:o(!0,"playinlinevideos"),isResume:o(!1),ignoreEndlist:o(!1),requestType:{configName:null,defaultVal:null,validator:function(e){return[null,I.CLICK,I.AUTOPLAY,I.API,I.CONTINUOUS].indexOf(e)>-1}},requestAction:{defaultVal:null,validator:function(e){return[null,I.CLICK,I.AUTOPLAY,I.HOVER,I.SCROLL].indexOf(e)>-1}}},playbackState:{configName:null,mute:{defaultVal:null,transform:n},volume:{defaultVal:null,validator:function(e){return S.isNumber(e)&&e>=0&&1>=e}}},uiState:{configName:null,width:{configName:null,defaultVal:null},height:{configName:null,defaultVal:null},startScreenRendered:{configName:null,defaultVal:!1},isDocked:{configName:null,defaultVal:!1}},userPreferences:{configName:"userprefs",validator:S.isObject,closedCaptions:{configName:"closedcaptionprefs",show:o(!1),lang:{defaultVal:"en-US",validator:S.isString},fontSize:{defaultVal:24,validator:S.isNumber},fontName:{defaultVal:"Arial, Helvetica, sans-serif",validator:S.isString},fontColor:{defaultVal:"#ffffff",validator:S.isString},fontOpacity:{defaultVal:1,validator:S.isNumber},fontEffect:{defaultVal:"none",validator:S.isString},bgColor:{defaultVal:"#000000",validator:S.isString},bgOpacity:{defaultVal:.75,validator:S.isNumber},ccPos:{defaultVal:"bottom",validator:S.isString},isAvailable:o(!1)},isAdult:{defaultVal:null,validator:S.isBoolean},isAuthenticated:{defaultVal:o(!0),validator:S.isBoolean}},baseConfig:{configName:null,site:{defaultVal:"",validator:S.isString},siteAnalytics:{configName:"site_analytics",defaultVal:"",validator:S.isString},region:{defaultVal:"",transform:function(e){return S.isString(e)?e.toUpperCase():void 0},validator:S.isString},lang:{defaultVal:"",validator:S.isString},referrer:{defaultVal:"",validator:S.isString},jurisdiction:{defaultVal:"",validator:S.isString},_html5:{configName:"html5",defaultVal:!1,validator:function(e){return"dash"===e||"hls"===e||"raw"===e||S.isBoolean(e)}},experienceType:{configName:"expType",defaultVal:"",validator:S.isString},experienceName:{configName:"expName",defaultVal:"",validator:S.isString},experienceBucket:{configName:"expBucket",defaultVal:"",validator:S.isString},pageSpaceId:{defaultVal:"",validator:S.isString},syndication:{configName:"synd",defaultVal:"",validator:S.isString}},playerDimension:{configName:null,width:{configName:null,defaultVal:0},height:{configName:null,defaultVal:0}},CTV:{man:{defaultVal:"",validator:S.isString},"class":{defaultVal:"",validator:S.isString},ctvMetricsParams:{ctv_db:i(),ctv_dc:i(),_di:i(),ctv_di:i(),ctv_ddv:i(),ctv_dfv:i(),_dv:i(),_lo:i(),_dm:i(),_dl:i(),_dc:i(),_osv:i(),ctv_yb:i(),_sr:i(),ctv_yr:i(),ctv_ybv:i(),ctv_yv:i(),_an:i(),_av:i(),_at:i()},forceHttp:{defaultVal:!1,validator:S.isBoolean}},skipOnError:{defaultVal:"never",validator:S.isString},useSimpleFlash:{defaultVal:!1,validator:S.isBoolean},failOver:{configName:"failover",beaconDisasterMode:{defaultVal:!1,configName:"beaconDisasterMode",validator:S.isBoolean},sapiUrl:{defaultVal:null,validator:S.isString},convivaSamplingRate:{configName:"convivaSamplingRate",vod:{defaultVal:.05,validator:function(e){return S.isNumber(e)&&e>=0&&1>=e}},live:{defaultVal:.5,validator:function(e){return S.isNumber(e)&&e>=0&&1>=e}}},recoveryFailureTimeout:{defaultVal:120,validator:function(e){return S.isNumber(e)&&e>=0}}}};u.prototype.initializeFromRaw=function(e,t,r,n){var o=this;e&&(S.isObject(e)?(o.id=e.id||null,o.appendFromRaw(e.mediaItems,t,r,n),void 0!==e.videoRecommendations&&(o.videoRecommendations=e.videoRecommendations)):A.addError("Playlist must be an object",n))},u.prototype.appendFromRaw=function(e,t,r,n){var o=this;if(e){if(!S.isArray(e))return void A.addError("mediaItems must be an array",n);for(var i=e.length,a=0;i>a;a++){var s=e[a],l=o._mediaStore.updateItemFromRaw(s,t,r,n);o.items.push(l.id)}i&&-1===o.position&&(o.position=0)}},u.prototype.getMediaItemAt=function(e){var t=this;return 0>e||e>=t.items.length?null:t._mediaStore.get(t.items[e])},u.prototype.getMediaItemById=function(e){var t=this;return e?t._mediaStore.get(e):null},u.prototype.getCurrentItem=function(){var e=this;return e.getMediaItemAt(e.position)},u.prototype.appendItem=function(e){var t=this,r=t.items.length;return t.items.push(e),r},u.prototype.getItems=function(){for(var e=this,t=[],r=0;r<e.items.length;r++)t.push(e.getMediaItemAt(r));return t},u.prototype.getItemPosition=function(e){var t=this,r=t.items.indexOf(e);return r},u.prototype.setPosition=function(e){var t=this;S.isNumber(e)&&(t.position=e)},u.prototype.getNextPosition=function(e,t,r){var n=this;if(r=r||{},r.looped=!1,r.ended=!1,-1===n.position)return-1;if(!n.items.length)return-1;var o=n.position+1;if(r.playlistLoop&&o===n.items.length)return r.looped=!0,0;if(e){if(o<n.items.length)return o;if(t&&o===n.items.length)return r.looped=!0,0;n.playbackStopped=!0}return!e&&t?(r.looped=!0,n.position):(r.ended=!0,-1)},u.prototype.getCurrentVideoShowName=function(){var e=this,t=e.getCurrentItem();return t&&t.getShowName()},u.prototype.isCurrentVideoOriginalShow=function(){var e=this,t=e.getCurrentItem();return t&&t.isOriginalShow()===!0?!0:!1},u.prototype.isCurrentVideoSeriesEpisode=function(){var e=this,t=e.getCurrentItem();return t&&t.isSeriesEpisode()===!0?!0:!1},_.prototype.attemptingPlayback=function(){var e=this;return e.videoSet()&&!e.paused||e.state===E.WAITING},_.prototype.isVideoPlaying=function(){var e=this;return e.videoSet()&&!e.paused},_.prototype.videoSet=function(){var e=this;return e.state===E.VIDEO},_.prototype.isOnCriticalError=function(){var e=this;return e.state===E.END&&e.criticalError},_.prototype.videoLoading=function(){var e=this;return e.videoSet()&&e.loading},_.prototype.isAdPlaying=function(){var e=this;return e.videoSet()&&e.ad},_.prototype.isVpaidAdPlaying=function(){var e=this;return e.isAdPlaying()&&e.ad.type===v.ADTYPES.VPAID},m.prototype.endScreenToPlaylistEnabled=function(){return-1!==window.location.href.indexOf("playlistExp=true")},m.prototype.getConfig=function(){var e=this;return e._config},m.prototype.isPlaylistStructured=function(){var e=this,t=e.playlist.getMediaItemAt(0);return t&&t.hasPlaylistConfig()?!0:!1},m.prototype.isLocal=function(){var e=this;return e.version.indexOf("local")>-1},m.prototype.isFlashRendererEnabled=function(){var e=this;return!!e.useFlash},m.prototype.isHtmlEnforced=function(){var e=this;return e.baseConfig._html5===!0||"dash"===e.baseConfig._html5||"hls"===e.baseConfig._html5},m.prototype.isMobileStrmInlineExpr=function(){var e=this;return(h.ios||h.android)&&"strm-inline"===e.baseConfig.experienceType&&e.playback.canPlayInline},m.prototype.isAutoplayAllowed=function(){var e=this;return h.mobile?e.playback.autoplaySupported&&C.mobile!==!0:!0},m.prototype.destroy=function(){var e=this;e.playlist.position=-1},m.prototype.getModelSchema=function(){return D},m.prototype.getPlaylistRenderingType=function(){var e,t=this,r=t.playlist&&t.playlist.id,n=t._config&&t._config.playlist,o=n&&n.mediaItems;return e=!r||o&&o.length?r&&-1!==o.length?L.PLAYLIST_RENDERING_TYPE.PLAYLIST_ID_AND_MEDIA_ITEMS:L.PLAYLIST_RENDERING_TYPE.ONLY_MEDIA_ITEMS:L.PLAYLIST_RENDERING_TYPE.PLAYLIST_ID}},{"../../lib":"bRhrlU","../../lib/capability":"TL7Kjz","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./constants":18,"./media-store":29,"./metrics/metrics-constants":36,"./navigator-info":42,"./perf":43,"./renderers/flash":49,"./renderers/html5-dash":164,"./renderers/html5-hls":51,"./renderers/html5-tv":164,"./renderers/orsay":164,"./renderers/tizen":164,"./renderers/type":54,"./states":57,"./util":"jJTEqU","./views/tumblr-controls":164,"./yvap/ads-json":108}],42:[function(e,t,r){"use strict";var n=e("./util"),o=function(e,t){return{value:e,enumerable:!0,configurable:!t}},i=t.exports={};Object.defineProperties(i,{network:o({},!0)}),Object.defineProperties(i.network,{available:o(!1,!1),connectionType:o("unknown",!1),update:{value:function(e,t){"boolean"==typeof e&&t&&!i.network.available&&Object.defineProperties(i.network,{mobile:o(e,!0),connectionType:o(t,!0),available:o(!0,!0)})}}}),n.setSingleton("navigatorInfo",i)},{"./util":"jJTEqU"}],43:[function(e,t,r){"use strict";function n(){var e=o.getWindow(),t=e&&e.location&&e.location.search&&-1!==e.location.search.indexOf("vperf=1"),r=!0,n=e.performance;n&&n.now&&n.mark&&n.measure&&n.getEntriesByType||(r=!1),r||(n={originTime:Date.now(),now:function(){return Date.now()-this.originTime}});var s={},l={},d={},c={start:function(e,t){if(t){if(d[t]&&d[t][e]&&d[t][e].startTime)return!1;d[t]||(d[t]={}),d[t][e]={startTime:n.now()}}else{if(l[e]&&l[e].startTime)return!1;l[e]={startTime:n.now()}}return!0},end:function(e,t){if(t){if(!d[t]||!d[t][e]||!d[t][e].startTime)return!1;if(d[t]&&d[t][e]&&d[t][e].endTime)return!1;d[t][e].endTime=n.now()}else{if(!l[e]||!l[e].startTime)return!1;if(l[e]&&l[e].endTime)return!1;l[e].endTime=n.now()}return!0},getLocalMeasurements:function(e){return d&&d[e]?d[e]:void 0},getGlobalMeasurements:function(){return l},removeLocalMeasurements:function(e){d&&d[e]&&delete d[e]},startDebugMode:function(e){return t&&r?s[e]?!1:(s[e]=i,n.mark("mark_"+e+"_start"),!0):!1},endDebugMode:function(e,o){return t&&r&&s[e]?s[e]===a?!1:(s[e]=a,n.mark("mark_"+e+"_end"),o||this.measure(e),!0):!1},measure:function(e){return r&&s[e]&&s[e]===a?(n.measure(e,"mark_"+e+"_start","mark_"+e+"_end"),!0):!1},listMarks:function(){if(r){var e=n.getEntriesByType("mark").map(function(e){return{name:e.name,startTime:e.startTime}});return e}},listMeasures:function(){if(r){var e=n.getEntriesByType("measure").map(function(e){return{name:e.name,startTime:e.startTime,endTime:e.startTime+e.duration,duration:e.duration}});return e}},clearMarks:function(){r&&n.clearMarks()},clearMeasures:function(){r&&n.clearMeasures()},destroy:function(e){d&&d[e]&&delete d[e]}};return e._videoplayer=e._videoplayer||{},e._videoplayer.perf=c,c}var o=(e("../../lib/logger"),e("./util")),i=(e("./constants"),"started"),a="ended";t.exports=n()},{"../../lib/logger":"IS9j5T","./constants":18,"./util":"jJTEqU"}],44:[function(e,t,r){"use strict";function n(e){var t=this;t._view=e,t._rootElem=e.getRootElement(),t._mainElem=e.getMainElement(),t._contentElem=e.getContentNode(),t._model=e.getModel(),t._eventBus=e.getEventBus(),t._seedMediaItem=t._model.playlist.getMediaItemAt(0),t._unsubs=[],t._startIndex=0,t._init(),t._shouldShowPlaylist&&(t._model.playback.continuousPlay=!0,t._setContentDimensionsForPlaylist(),t._unsubs.push(t._eventBus.subscribe(s.MEDIA_ITEM_LOADED,t._onMediaItemLoaded,t)),t._unsubs.push(t._eventBus.subscribe(s.FULLSCREEN_CHANGE,t._onFullScreenChange,t)),t._unsubs.push(t._eventBus.subscribe(s.AD_PLAYBACK_STARTED,t._onAdPlaybackStarted,t)),t._unsubs.push(t._eventBus.subscribe(s.PLAYBACK_STARTED,t._onPlaybackStarted,t)),t._unsubs.push(t._eventBus.subscribe(s.Video.ENDED,t._onVideoEnded,t)),t._unsubs.push(t._eventBus.subscribe(s.Ad.PLAYING,t._onAdPlaying,t)))}t.exports=n;var o=e("../../lib/user-agent"),i=e("./util"),a=e("./tap"),s=e("./event"),l=e("./constants"),d=e("./views/playlist"),c=e("./views/structured-playlist"),p=l.PLAYLIST_POS_BOTTOM,u=l.PLAYLIST_POS_RIGHT,_=l.PLAYLIST_POS_HIDDEN,m=83,v=318,y=276;n.prototype.fetchMore=function(e,t){var r=this,n={start:r._startIndex,count:e,videoUuid:r._seedMediaItem&&r._seedMediaItem.id||"",playlistId:r._playlistId,playlistAlias:r._playlistAlias},o=function(n,o){n||(r._startIndex+=e),t&&t(n,o)};r._eventBus.publish(s.FETCH_MORE_RELATED_ITEMS,r._seedMediaItem,n,o)},n.prototype._onAdPlaying=function(){var e=this;e._enableUpNextButton(!1)},n.prototype._onVideoEnded=function(){var e=this;e._enableUpNextButton(!1)},n.prototype._enableUpNextButton=function(e){var t=this;t._shouldShowPlaylist&&t._upNextContainer&&(e&&!t._model.playlist.getCurrentItem().isLive()?i.classList(t._upNextContainer).remove("disabled"):i.classList(t._upNextContainer).add("disabled"),t._upNEnabled=e)},n.prototype.initDrawPlaylist=function(e,t,r){var n=this;n._shouldShowPlaylist&&(n._onUpNextBtnTap||(n._onUpNextBtnTap=function(){return o.mobile?(n._upNextPlist.style.display="block",void(i.classList(n._upNextPlist).contains("open")?(i.classList(n._bottomBar).remove("yvp-bottom-upnext"),i.classList(n._upNextPlist).remove("open"),n._bottomBarContainer.removeAttribute("style")):(i.classList(n._upNextPlist).add("open"),
n._upNextPlist.style.display="block",n._bottomBarContainer.style.top=n._getUpnextBottomContainerTop()+"px",i.classList(n._bottomBar).add("yvp-bottom-upnext")))):void n._fujiPlaylist.upNextBtnTapHandler()},n._upNextBtnTap=new a(n._upNextBtn),n._upNextBtn.addEventListener("tap",n._onUpNextBtnTap)),r===!0&&t.length<=0&&n._enableUpNextButton(!0),t&&t.length>2?n._fujiPlaylist.renderPlaylist(t):e&&n._enableUpNextButton(!1))},n.prototype._initPlaylistView=function(){var e=this,t=e._view.getControls();return t?(e._bottomBar=t&&t.getBottomBar(),e._bottomBarContainer=e._bottomBar.querySelector(".yvp-bottom-container"),e._upNextBtn=e._bottomBar.querySelector(".yvp-upnext-btn"),e._upNextPlist=e._bottomBar.querySelector(".yvp-upnext-playlist"),e._upNextContainer=e._bottomBar.querySelector(".yvp-upnext-container"),!0):!1},n.prototype._init=function(){var e,t,r=this,n=r._model.ui&&r._model.ui.playlistUI,i=r._model.playlist.id;if(r._hasPlaylistRendered=!1,r._playlistUIPosition=null,r._isPlaylistInStreamMode=!1,r._shouldShowPlaylist=!1,r._playlistId=n&&n.playlistId||i||"",r._playlistAlias=n&&n.playlistAlias||"",n&&n.show===!0&&!r._model.playback.loop&&(r._playlistUIPosition=n.position,n.inStream===!0&&r._playlistUIPosition===u&&(r._isPlaylistInStreamMode=!0),o.mobile||(t=r._rootElem.clientWidth,e=r._model.uiState&&r._model.uiState.width||t,(r._playlistUIPosition===_&&e>=480||r._playlistUIPosition===p&&e>=560||r._playlistUIPosition===u&&(e>=835||t>=835))&&(r._shouldShowPlaylist=!0))),r._shouldShowPlaylist){var a=r._initPlaylistView();a||(r._shouldShowPlaylist=!1)}},n.prototype._setContentDimensionsForPlaylist=function(){var e,t,r,n,o,i,a,l=this;if(l._shouldShowPlaylist&&l._playlistUIPosition!==_)switch(l._playlistDimensions={rootElem:{height:null,width:null},contentElem:{height:null,width:null},mainElem:{height:null,width:null}},l._playlistUIPosition){case p:e=l._rootElem.clientHeight,t=e+m,l._rootElem.style.height=t+"px",l._contentElem.style.height=e+"px",l._contentElemPlaylistHeight=e+"px",l._playlistDimensions.rootElem.height=t,l._playlistDimensions.contentElem.height=l._contentElem.clientHeight;break;case u:r=l._mainElem.clientWidth,n=l._contentElem.clientWidth,i=0,l._isPlaylistInStreamMode?(o=y,a=r-o,l._mainElem.style.width=a+"px",l._mainElemPlaylistWidth=a+"px"):(o=v,a=n-o,i=100*a/n,l._mainElem.style.width=i+"%",l._mainElemPlaylistWidth=i+"%"),l._bindPlaylistWindowResize(),l._playlistDimensions.rootElem.width=l._rootElem.clientWidth,l._playlistDimensions.mainElem.width=a,l._eventBus.publish(s.PLAYER_DIMENSION_CHANGE,{width:a,height:l._rootElem.clientHeight})}},n.prototype._onMediaItemLoaded=function(){var e=this;e._shouldShowPlaylist&&(e._hasPlaylistRendered||e._render())},n.prototype._onAdPlaybackStarted=function(){var e=this;e._shouldShowPlaylist&&e._enableUpNextButton(!1)},n.prototype._onPlaybackStarted=function(){var e=this;e._shouldShowPlaylist&&(e._upNEnabled||e._enableUpNextButton(!0))},n.prototype._getUpnextBottomContainerTop=function(){var e=this,t=e._contentElem.clientHeight,r=e._bottomBarContainer.clientHeight,n=e._view.getNFLBrandingNode(),o=0;return null!==n&&(o=n.clientHeight),t-r-o},n.prototype.attachUpNextMouseEvents=function(){var e=this;e._upNextContainer.addEventListener("mouseover",function(){i.classList(e._bottomBar).contains("yvp-bottom-upnext")||(i.classList(e._bottomBar).add("yvp-bottom-upnext"),e._bottomBarContainer.style.top=e._getUpnextBottomContainerTop()+"px",e._eventBus.publish(s.API.UI_INTERACT,{srcElement:"ctrl-next-hover"}),e._eventBus.publish(s.API.UI_INTERACT,{srcElement:"ui_pl_nxt_hvr"}))}),e._upNextContainer.addEventListener("mouseout",function(){setTimeout(function(){window.getComputedStyle(e._hiddenPlaylistNode).zIndex<0&&(i.classList(e._bottomBar).remove("yvp-bottom-upnext"),e._bottomBarContainer.removeAttribute("style"))},100)})},n.prototype.detachUpNextMouseEvents=function(){var e=this;e._upNextContainer.addEventListener("mouseover",function(){i.classList(e._bottomBar).remove("yvp-bottom-upnext"),e._bottomBarContainer.removeAttribute("style")})},n.prototype._render=function(){var e=this;if(!o.mobile||e._playlistUIPosition===_){switch(e._model.isPlaylistStructured()?(e._fujiPlaylist=new c(e._eventBus,e._view,e._model),e._model.playback.playlistLoop=!0,e.initDrawPlaylist(null,[],!0)):e._fujiPlaylist=new d(e._eventBus,e._view,e._model),e._playlistUIPosition){case _:e._playlistNode=e._fujiPlaylist.create(_),e._hiddenPlaylistNode=e._playlistNode,e._upNextPlist.appendChild(e._hiddenPlaylistNode),i.classList(e._upNextContainer).remove("hide"),o.mobile||e.attachUpNextMouseEvents();break;case p:e._hiddenPlaylistNode=e._fujiPlaylist.create(_),e._playlistNode=e._fujiPlaylist.create(p),e._upNextPlist.appendChild(e._hiddenPlaylistNode),e._contentElem.appendChild(e._playlistNode),i.classList(e._upNextContainer).remove("hide"),i.classList(e._upNextPlist).add("hide");break;case u:e._hiddenPlaylistNode=e._fujiPlaylist.create(_),e._playlistNode=e._fujiPlaylist.create(u),e._upNextPlist.appendChild(e._hiddenPlaylistNode),e._contentElem.appendChild(e._playlistNode),i.classList(e._upNextContainer).remove("hide"),i.classList(e._upNextPlist).add("hide")}e._model.playback.autoplay!==!0&&e._fujiPlaylist.renderFirstBatch(),e._hasPlaylistRendered=!0}},n.prototype._onFullScreenChange=function(){var e,t=this,r=t._view.isDocked();r||t._playlistUIPosition!==_&&(e=t._view.getFullscreen(),e===!0?t._playlistUIPosition===p?t._contentElem.style.height="100%":t._playlistUIPosition===u&&t._mainElem.style&&(t._mainElem.style.width="100%",t._mainElem.style["z-index"]=1):t._playlistUIPosition===p?t._contentElem.style.height=t._contentElemPlaylistHeight:t._playlistUIPosition===u&&(t._mainElem.style.width=t._mainElemPlaylistWidth,t._mainElem.style["z-index"]="auto"))},n.prototype._onResizeHandler=function(){var e=this,t=e._contentElem.clientWidth,r=t-v,n=100*r/t;t>1e3&&e._view.getFullscreen()===!1&&(e._mainElem.style.width=n+"%",e._mainElemPlaylistWidth=n+"%")},n.prototype._bindPlaylistWindowResize=function(){var e=this;e._playlistUIPosition!==u||e._isPlaylistInStreamMode||(e._resizeHandler=e._onResizeHandler.bind(e),window.addEventListener("resize",e._resizeHandler))},n.prototype.togglePlaylistUI=function(e){var t=this;if(!t._view.getFullscreen()&&t._shouldShowPlaylist&&t._playlistUIPosition!==_){var r=".yvp-playlist-mode-"+t._playlistUIPosition,n=t._contentElem.querySelector(r);switch(e?i.classList(n).add("yvp-hide-playlist"):i.classList(n).remove("yvp-hide-playlist"),t._playlistUIPosition){case u:e===!0?(t._mainElem.removeAttribute("style"),t._rootElem.style.width=t._playlistDimensions.mainElem.width+"px"):(t._mainElem.style.width=t._playlistDimensions.mainElem.width+"px",t._rootElem.style.width=t._playlistDimensions.rootElem.width+"px");break;case p:e===!0?t._contentElem.style.height=t._playlistDimensions.rootElem.height+"px":(t._contentElem.style.height=t._playlistDimensions.contentElem.height+"px",t._rootElem.style.height=t._playlistDimensions.rootElem.height+"px")}}},n.prototype.getPlaylistRootElement=function(){var e=this;return e._playlistNode},n.prototype.getPlaylistUIPosition=function(){var e=this;return e._playlistUIPosition},n.prototype.isPlaylistInStream=function(){var e=this;return e._isPlaylistInStreamMode},n.prototype.isPlaylistShown=function(){var e=this;return e._shouldShowPlaylist},n.prototype.destroy=function(){var e=this;e._resizeHandler&&(window.removeEventListener("resize",e._resizeHandler),e._resizeHandler=null),e._unsubs.forEach(function(e){e()}),e._unsubs=[]}},{"../../lib/user-agent":"ty5FFo","./constants":18,"./event":"YJm+dH","./tap":"dsc79Q","./util":"jJTEqU","./views/playlist":94,"./views/structured-playlist":100}],45:[function(e,t,r){"use strict";function n(e){var t=this;t._config=e,t.startTime=e&&e.insideIframeConfig&&e.insideIframeConfig.startTime?e.insideIframeConfig.startTime:Date.now(),t.startTime=Date.now(),t._profileItems=[]}t.exports=n;var o=e("../../lib/user-agent"),i=e("./util"),a=e("./views/profiler.html");n.prototype.add=function(e){var t=this,r=t._findItem(e);r>-1&&t._profileItems.splice(r,1),t._profileItems.push({type:e.type,desc:e.desc,startTime:Date.now()-t.startTime,endTime:null})},n.prototype._findItem=function(e){for(var t=this,r=0;r<t._profileItems.length;r++){var n=t._profileItems[r];if(e.type===n.type)return r}return-1},n.prototype.getItem=function(e){var t=this,r=t._findItem(e);return r>-1?t._profileItems[r]:null},n.prototype.setEndTime=function(e,t,r){var n=this,o=n.getItem(e);t||(t=Date.now(),r=!0),o&&(o.endTime=r?t-n.startTime:t,o.timeDiff=o.endTime-o.startTime)},n.prototype.render=function(e){var t=this,r=t._profileItems.slice(0);r.forEach(function(e){e.startWidth=e.startTime/4,e.barWidth=e.timeDiff/4});var n=i.render(a,{config:JSON.stringify(t._config,null,2),profileItems:r});if(e){var s=document.createElement("div");s.appendChild(n),s.appendChild(e),n=s}if(o.mobile)document.write(n.innerHTML);else{var l=window.open();l&&l.document.write(n.innerHTML)}}},{"../../lib/user-agent":"ty5FFo","./util":"jJTEqU","./views/profiler.html":95}],46:[function(e,t,r){"use strict";function n(e,t){var r=this;r._eventBus=e,r._model=t,r._reset(),r._ER=null,r._eventBus.subscribe(i.Video.WAITING,r._onWaiting,r),r._eventBus.subscribe(i.ERROR,r._onError,r),r._eventBus.subscribe(i.Video.PLAYING,r._onPlaybackPlaying,r)}t.exports=n;var o=e("./error"),i=e("./event"),a=e("./media-store"),s=e("./util"),l=(e("../../lib"),e("../../lib/logger"),["400","501","430"]),d=["7","57"],c=["700","701","710","711","720","721","722","730","731","732","740","750","760"],p=["103","500","502","503","550","403","404","504"],u=["11","12","13","14"],_={INIT_OR_PLAYING:0,BUFFERING:1,ERROR:2,API:3},m=1e4,v=1e4,y=2e3,f=1e4,g=1e4,b=2e4;n.prototype._reset=function(){var e=this;e._recoveryTimeoutVal=Math.random()*v+m,e._recoveryTimeoutIncr=y,e._stopFrozenDetectionTimer(),e._stopFetchERTimer(),e._recoveryState=_.INIT_OR_PLAYING,e._ERTried=!1},n.prototype._onPlaybackPlaying=function(){var e=this;e._stopRecoveryFailureTimer()},n.prototype._onWaiting=function(e){var t=this,r=e&&e.value;r?t._startTimer(t._recoveryTimeoutVal):t._reset()},n.prototype._onError=function(e){var t=this;if(e&&t._shouldRecover(e)){if("400"===e.category.toString()&&"7"===e.subcategory.toString())return t._stopCdnDownTimer(),void(t._cdnDownTimeout=setTimeout(function(){t.recover(_.ERROR)},Math.random()*f));t.recover(_.ERROR)}},n.prototype.recover=function(e){var t=this;t._model.playbackState.ad||t._recoveryState===_.INIT_OR_PLAYING&&(t._stopFrozenDetectionTimer(),t._stopFetchERTimer(),t._startRecoveryFailureTimer(),t._isERConfigured()&&(t._fetchERTimeout=setTimeout(function(){t._getER()},g)),t._recoveryState=e?e:_.API,t._model.playlist.getCurrentItem().failoverCount++,t._model.playlist.getCurrentItem().recoveryStatus=a.ItemRecoveryStatus.RECOVERING,t._eventBus.publish(i.RECOVERY_START,t._onSapiResp.bind(t)))},n.prototype.shouldRenderErrorScreen=function(e){return e?l.indexOf(e.category.toString())<0||d.indexOf(e.subcategory.toString())<0&&c.indexOf(e.subcategory.toString())<0&&p.indexOf(e.subcategory.toString())<0&&u.indexOf(e.subcategory.toString())<0:!1},n.prototype._shouldRecover=function(e){var t=this;return e?(c.indexOf(e.subcategory.toString())>=0||e.category===o.E_SAPI_STREAM)&&t._model.playlist.getCurrentItem().failoverCount>0?!1:!t.shouldRenderErrorScreen(e):!1},n.prototype._isERConfigured=function(){var e=this;return e._model.failOver&&e._model.failOver.sapiUrl},n.prototype._onSapiResp=function(e){var t=this;return t._recoveryState?(t._eventBus.publish(i.WARNING,s.createErr("P",t._model.playbackState,o.E_WARNING,o.WARNING_CODES.E_PLAYBACK_FROZEN_DETECTED,null,t._recoveryState)),void(e?t._isERConfigured()?t._getER():t._restartTimer():(t._eventBus.publish(i.RECOVERY_METADATA_READY),t._reset()))):void t._model.playlist.getCurrentItem().failoverCount--},n.prototype._getER=function(){var e=this;if(e._ER)return e._eventBus.publish(i.ER_READY,e._ER),void e._reset();if(e._ERTried)return void e._restartTimer();var t={context:e,timeout:b,responseTypeJson:!0,jsonpHandler:function(){},successHandler:function(t){e._publishERCallInfo("success "+r),e._ER=t,e._eventBus.publish(i.ER_READY,e._ER),e._reset()},failureHandler:function(t){e._publishERCallInfo("failure "+r),e._restartTimer()}},r=e._model.failOver.sapiUrl.replace(new RegExp("{uuid}"),e._model.playlist.getCurrentItem().id);s.ajax(r,t),e._ERTried=!0},n.prototype._startTimer=function(e){var t=this;t._stopFrozenDetectionTimer(),t._frozenDetectionTimeout=setTimeout(function(){t.recover(t._recoveryState?t._recoveryState:_.BUFFERING)},e)},n.prototype._restartTimer=function(){var e=this;e._recoveryTimeoutVal+=e._recoveryTimeoutIncr,e._recoveryTimeoutIncr*=2,e._startTimer(e._recoveryTimeoutVal),e._ERTried=!1},n.prototype._publishERCallInfo=function(e){var t=this;t._eventBus.publish(i.WARNING,s.createErr("P",t._model.playbackState,o.E_WARNING,o.WARNING_CODES.E_ER_TRY,null,e))},n.prototype._startRecoveryFailureTimer=function(){var e=this;e._recoveryFailureTimeout||(e._recoveryFailureTimeout=setTimeout(function(){e._stopRecoveryFailureTimer();var t=s.createErr("P",e._model.playbackState,o.E_PLAYER,o.PLAYER_CODES.E_RECOVERY_FAILURE);e._reset(),e._eventBus.publish(i.ERROR,t)},1e3*e._model.failOver.recoveryFailureTimeout))},n.prototype._stopFrozenDetectionTimer=function(){var e=this;e._frozenDetectionTimeout&&(clearTimeout(e._frozenDetectionTimeout),e._frozenDetectionTimeout=null)},n.prototype._stopFetchERTimer=function(){var e=this;e._fetchERTimeout&&(clearTimeout(e._fetchERTimeout),e._fetchERTimeout=null)},n.prototype._stopCdnDownTimer=function(){var e=this;e._cdnDownTimeout&&(clearTimeout(e._cdnDownTimeout),e._cdnDownTimeout=null)},n.prototype._stopRecoveryFailureTimer=function(){var e=this;e._recoveryFailureTimeout&&(clearTimeout(e._recoveryFailureTimeout),e._recoveryFailureTimeout=null)},n.prototype.stopTimers=function(){var e=this;e._stopFrozenDetectionTimer(),e._stopFetchERTimer(),e._stopCdnDownTimer(),e._stopRecoveryFailureTimer()},n.prototype.destroy=function(){var e=this;e._reset(),e._ER=null,e.stopTimers()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./error":22,"./event":"YJm+dH","./media-store":29,"./util":"jJTEqU"}],47:[function(e,t,r){"use strict";var n=e("../../lib/user-agent"),o=e("../../lib/logger"),i=e("./util"),a=e("./event"),s=e("./renderers/type"),l=e("./renderers/modes"),d=e("./constants"),c=e("./perf"),p="yvp-mode-",u={};u[s.FLASH]=e("./renderers/flash"),u[s.FLASH_SIMPLE]=e("./renderers/flash-simple"),u[s.HTML5_TV]=e("./renderers/html5-tv"),u[s.HTML5_DASH]=e("./renderers/html5-dash"),u[s.HTML5_HLS]=e("./renderers/html5-hls"),u[s.HTML5_RAW]=e("./renderers/html5-raw"),u[s.HTML5_TV_TIZEN]=e("./renderers/tizen"),u[s.HTML5_TV_ORSAY]=e("./renderers/orsay");var _=function(e){var t=this;t._view=e,t._eventBus=e.getEventBus(),t._model=e.getModel(),t._profiler=e.getProfiler(),t._contentNode=e.getContentNode(),t._mainNode=e.getMainElement(),t._flashRenderer=null,t._flashSimpleRenderer=null,t._activeRenderer=null,t._nextRenderer=null,t._nextRendererSignature=null,t._nextRendererPreloadSignature=null,t._inactiveRenderers={},t._bindEvents()};_.prototype._bindEvents=function(){var e=this;e._eventBus.subscribe(a.RENDERER_PP_NEXT,e._handleAdvancePreparePreloadNextRenderer,e)},_.prototype._createRenderer=function(e){var t=this,r=t._model,o=t._eventBus,i=t._profiler,a=t._model.capabilities[e],d=t._inactiveRenderers[e];if(d)return t._toggleRendererOperation(d,!0),d;switch(e){case s.FLASH:if(t._flashRenderer)return t._flashRenderer;d=new u[s.FLASH](o,r,i),d.detectFlashBlockers(t._mainNode),t._flashRenderer=d;break;case s.FLASH_SIMPLE:if(t._flashSimpleRenderer)return t._flashSimpleRenderer;d=new u[s.FLASH_SIMPLE](o,r,i),d.detectFlashBlockers(t._mainNode),t._flashSimpleRenderer=d;break;case s.HTML5_DASH:d=new u[s.HTML5_DASH](o,r);break;case s.HTML5_HLS:d=new u[s.HTML5_HLS](o,r,i);break;case s.HTML5_TV:d=new u[s.HTML5_TV](o,a,i,r);break;case s.HTML5_TV_TIZEN:d=new u[s.HTML5_TV_TIZEN](o,a,i,r);break;case s.HTML5_TV_ORSAY:d=new u[s.HTML5_TV_ORSAY](o,a,i,r);break;default:d=new u[s.HTML5_RAW](o,a,i,r)}return t._mainNode.appendChild(d.create()),e!==s.FLASH&&e!==s.FLASH_SIMPLE&&t._model.ui&&t._model.ui.showControls&&(n.iphone||n.android)&&(d.node.controls=!0),d.mode=l.VIDEO,t._inactiveRenderers[e]=d,d},_.prototype._setupRenderer=function(e){var t,r=this;return c&&c.startDebugMode(d.PERF.VP_RC_SETUP+e),t=n.tv?n.tizen?r._createRenderer(s.HTML5_TV_TIZEN):n.orsay?r._createRenderer(s.HTML5_TV_ORSAY):r._createRenderer(s.HTML5_TV):r._createRenderer(e),c&&c.endDebugMode(d.PERF.VP_RC_SETUP+e),t},_.prototype._updateSelectedStreams=function(e,t){if(e&&t){for(var r=0;r<t.length;r++)t[r].cdn=i.getMediaCDNName(e,t,null);e.fillSelectedStreams(t,null)}},_.prototype._addToInactiveRenderers=function(e){var t,r=this,n=!0;e&&(t=e.type,r._inactiveRenderers[t]||(r._inactiveRenderers[t]=e,n=!1),r._toggleRendererOperation(e,!1),n&&t!==s.FLASH&&t!==s.FLASH_SIMPLE&&e.destroy())},_.prototype._toggleRendererOperation=function(e,t){var r;e&&(r=e.type,r===s.FLASH||r===s.FLASH_SIMPLE?t||(e.stopMedia(),e.unbindPlaybackEvents()):t?(e.detachNode&&e.detachNode(),e.reattachNode&&e.reattachNode()):(e.detachNode&&e.detachNode(),e.stopMedia&&e.stopMedia()))},_.prototype._handleRendererTimeout=function(){var e=this;e._view.syncViewState(),(n.safari||n.firefox)&&e._view.setBlockedFlashState()},_.prototype._generateRendererSignature=function(e,t){var r,n,o=[],i=e.ad,a=e.mediaItem;return o.push(e.rendererType),o.push(t),i?(o.push("ad"),o.push(i.playbackId),o.push(i.adId),o.push(i.position),r=i.streams,r&&r.length>0&&o.push(r[0].url),n=i.adObj,n&&(o.push(n.adFormat),o.push(n.creativeId),o.push(n.bookingId),o.push(n.serveId))):a&&(o.push("mediaItem"),o.push(a.id),r=a.streams,r&&r.length>0&&o.push(r[0].url)),o.join("|")},_.prototype._handleAdvancePreparePreloadNextRenderer=function(e){var t=this;e&&e.rendererType===s.HTML5_HLS&&t.prepareNextRenderer({rendererType:e.rendererType,mediaItem:e},function(r){r||t._nextRenderer===t._activeRenderer||e.isLive()||t.preloadNextRenderer({mediaItem:e,isAdvancePreload:!0,forcePreloadStream:!0})})},_.prototype.setupDefault=function(){var e=this;return e._model.isFlashRendererEnabled()?void e._setupRenderer(s.FLASH):!0},_.prototype.prepareNextRenderer=function(e,t){var r,i,a=this;return t||(t=function(){}),e?(r=e.rendererType,a._contentNode?r?(c&&c.startDebugMode(d.PERF.VP_RC_PREPARE_NEXT+r),i=a._generateRendererSignature(e),a._nextRendererSignature===i?(c&&c.endDebugMode(d.PERF.VP_RC_PREPARE_NEXT+r),void t()):((n.mobile||n.tv)&&a._activeRenderer||e.isRecovering?a._nextRenderer=a._activeRenderer:a._nextRenderer=a._setupRenderer(r),a._nextRendererSignature=i,void a._nextRenderer.waitForReady(function(e){c&&c.endDebugMode(d.PERF.VP_RC_PREPARE_NEXT+r),e&&a._handleRendererTimeout(),t(e)}))):(o.log("RendererController.prepareNextRenderer: no renderer type is given"),void t(new Error("no renderer type is given"))):(o.log("RendererController.prepareNextRenderer: no container node is set"),void t(new Error("no container node is set")))):void t(new Error("no data is given"))},_.prototype.preloadNextAdRenderer=function(e){var t=this,r=e.bestStream,n=e.mediaItem,o={rendererType:e.rendererType,ad:e.ad};c&&c.startDebugMode(d.PERF.VP_RC_PRELOAD_NEXT_AD+e.rendererType);var i=function(){t.preloadNextAdRenderer(e)},a=function(){var i=t._generateRendererSignature(o),a={streams:[r]},s=!0;return n&&r?(t._updateSelectedStreams(n,a.streams),t._nextRendererPreloadSignature===i?(c&&c.endDebugMode(d.PERF.VP_RC_PRELOAD_NEXT_AD+e.rendererType),!0):t._nextRenderer?(t._nextRendererPreloadSignature=i,s=t._nextRenderer.setStreams(a),c&&c.endDebugMode(d.PERF.VP_RC_PRELOAD_NEXT_AD+e.rendererType),s):void 0):!1},s=t._generateRendererSignature(o);return t._nextRendererSignature===s?a():void t.prepareNextRenderer(o,i)},_.prototype.preloadNextRenderer=function(e){var t,r,n,o,i=!1;if(!e)return!1;if(t=e.mediaItem,r=e.startTime,n=e.forcePreloadStream,o=e.isAdvancePreload,!t)return!1;var a=this,l={rendererType:t.rendererType,mediaItem:t};c&&c.startDebugMode(d.PERF.VP_RC_PRELOAD_NEXT+l.rendererType);var p=function(){a.preloadNextRenderer(e)},u=function(){var e,p=a._generateRendererSignature(l,r),u={streams:t.streams,streamProfiles:t.streamProfiles,subtitleStreams:t.subtitleStreams,abr:a._model.playback.abr,uuid:t.id,isCCM:t.isCCM,startTime:r,ignoreEndlist:t.isLive()&&a._model.playback.ignoreEndlist};return o||a._updateSelectedStreams(t,u.streams),a._nextRendererPreloadSignature===p?(c&&c.endDebugMode(d.PERF.VP_RC_PRELOAD_NEXT+l.rendererType),!0):a._nextRenderer?(a._nextRendererPreloadSignature=p,i=a._nextRenderer.setStreams(u),i&&n&&a._nextRenderer.type===s.HTML5_HLS&&(e=a._model.forcePreloadBufferLimit||30,a._nextRenderer.preload(e)),c&&c.endDebugMode(d.PERF.VP_RC_PRELOAD_NEXT+l.rendererType),i):void 0},_=a._generateRendererSignature(l);return a._nextRendererSignature===_?u():void a.prepareNextRenderer(l,p)},_.prototype.switchToRenderer=function(e){var t=this,r=t._activeRenderer;t._activeRenderer=e,t._model.playbackState.rendererType=t._activeRenderer.type,t.setVolume(t._model.playbackState.volume),t.setMute(t._model.playbackState.mute),r?r!==t._activeRenderer&&(t._activeRenderer.type===s.FLASH&&t._activeRenderer.bindPlaybackEvents(),i.classList(r.node).remove("yvp-renderer-active"),i.classList(t._activeRenderer.node).add("yvp-renderer-active"),t._addToInactiveRenderers(r)):(t._activeRenderer.type===s.FLASH&&t._activeRenderer.bindPlaybackEvents(),i.classList(t._activeRenderer.node).add("yvp-renderer-active")),t._view.syncViewState(),t._eventBus.publish(a.RENDERER_SWITCHED,{active:t._activeRenderer})},_.prototype.switchAndPlayNextRenderer=function(e){var t=this;t.switchToNextRenderer(),t.play(e)},_.prototype.switchToNextRenderer=function(){var e=this;e._nextRenderer&&(delete e._inactiveRenderers[e._nextRenderer.type],e.switchToRenderer(e._nextRenderer),e._nextRendererSignature=null,e._nextRendererPreloadSignature=null)},_.prototype.endVideo=function(){var e=this;e._activeRenderer&&(e._activeRenderer.ended||(e._activeRenderer.ended=!0,e._activeRenderer.type===s.HTML5_TV_TIZEN||e._activeRenderer.type===s.HTML5_TV_ORSAY?e._activeRenderer.stop():e._activeRenderer.node.pause()))},_.prototype.setSelectedStreams=function(e){var t=this;t._activeRenderer&&t._activeRenderer.setSelectedStreams(e)},_.prototype.didRendererTimeOut=function(){var e=this;return e._activeRenderer&&!!e._activeRenderer.timedOut},_.prototype.getActiveRenderer=function(){var e=this;return e._activeRenderer},_.prototype.setRendererMode=function(e){var t=this,r=p+e,n=i.classList(t._contentNode);t._activeRenderer&&(t._activeRenderer.mode=e),Object.keys(l).forEach(function(e){var t=p+l[e];n.contains(t)&&t!==r&&n.remove(t)}),n.contains(r)||n.add(r)},_.prototype.syncPlaybackState=function(){var e=this,t=e._model.playbackState;e._activeRenderer&&(e._activeRenderer.paused=t.paused,e._activeRenderer.seeking=t.seeking)},_.prototype.rewindAfterEnd=function(e){var t=this;if(t._activeRenderer)if(e)switch(t._activeRenderer.type){case s.HTML5_RAW:case s.HTML5_HLS:case s.HTML5_DASH:t._activeRenderer.node.src=""}else t._activeRenderer.seek(0)},_.prototype.play=function(e){var t=this;t._activeRenderer&&t._activeRenderer.play(e)},_.prototype.pause=function(){var e=this;e._activeRenderer&&(e._activeRenderer.type===s.HTML5_TV_TIZEN||e._activeRenderer.type===s.HTML5_TV_ORSAY?e._activeRenderer.pause():e._activeRenderer.node.pause())},_.prototype.preload=function(e){var t=this;t._nextRenderer&&t._nextRenderer.type===s.HTML5_HLS&&t._nextRenderer.preload(e)},_.prototype.setQuality=function(e){var t=this;t._activeRenderer&&t._activeRenderer.setQuality(e)},_.prototype.seek=function(e){var t=this;t._activeRenderer&&t._activeRenderer.seek(e)},_.prototype.setVolume=function(e){var t=this;t._activeRenderer&&t._activeRenderer.setVolume(e)},_.prototype.setMute=function(e){var t=this;t._activeRenderer&&t._activeRenderer.setMute(!!e)},_.prototype.enterFS=function(){var e=this;e._activeRenderer&&e._activeRenderer.enterFullScreen&&e._activeRenderer.enterFullScreen()},_.prototype.exitFS=function(){var e=this;e._activeRenderer&&e._activeRenderer.exitFullScreen&&e._activeRenderer.exitFullScreen()},_.prototype.getCurrentTime=function(){var e=this;return e._activeRenderer&&e._activeRenderer.getCurrentTime()||0},_.prototype.getDuration=function(){var e=this;return e._activeRenderer&&e._activeRenderer.getDuration()||0},_.prototype.stopMedia=function(){var e=this;return e._activeRenderer&&e._activeRenderer.stopMedia()},_.prototype.destroy=function(){var e=this;e._activeRenderer&&e._activeRenderer.destroy()},t.exports=_},{"../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./constants":18,"./event":"YJm+dH","./perf":43,"./renderers/flash":49,"./renderers/flash-simple":48,"./renderers/html5-dash":164,"./renderers/html5-hls":51,"./renderers/html5-raw":52,"./renderers/html5-tv":164,"./renderers/modes":53,"./renderers/orsay":164,"./renderers/tizen":164,"./renderers/type":54,"./util":"jJTEqU"}],48:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n.type=u.FLASH_SIMPLE,n._error=o,n._eventBus=e,n._model=t,n._profiler=r,n._blockDetector=new _(e),n.seeking=!1,n.ended=!1,n._isSeeking=!1;var i=a.VIDEO;Object.defineProperty(n,"mode",{get:function(){return i},set:function(e){i!==e&&(i=e,n._callFlashMethod("set","playMode",e))}}),n._commandQueue=new c(n),n._swfReady=!1,n.timedOut=!1}t.exports=n;var o=e("../error.js"),i=e("../event"),a=e("./modes"),s=e("../../../lib/user-agent"),l=e("../util"),d=e("../../../lib/logger"),c=e("../../../lib/command-queue"),p=e("../states"),u=e("./type"),_=e("../flash-block-detector"),m=e("../stream"),v="simpleplayer.swf";n.prototype.create=function(){var e=this,t=l.generateGuid(),r=l.getAssetUrl(e._model.isLocal(),e._model.version,v);return e._eventHandlerName="__YVPFlashAdHandler_"+e._model.guid,e._bindEvents(),e._profiler&&e._profiler.add(i.Metrics.SWF_OBJECT_TO_INIT_START),e.node=e._createNode({id:t,swfUrl:r,params:[{name:"allowscriptaccess",value:"always"},{name:"allowFullScreen",value:"true"},{name:"wmode",value:e._determineWindowMode()},{name:"flashVars",value:"jsCallback="+e._eventHandlerName+"&allowedDomain="+document.location.hostname}]}),e.node.pause=function(){e._callIfReady("_pause")},e._removeSWFNotReadyTimeout=setTimeout(function(){l.classList(e.node).remove("yvp-swf-not-ready")},1e3),e._swfReadyTimeout=setTimeout(function(){e.timedOut=!0,e._eventBus.publish(i.SWF_READY_TIMEOUT,e.node)},7e3),e._profiler&&(e._profiler.setEndTime(i.Metrics.RENDER_TO_SWF),e._profiler.add(i.Metrics.SWF_READY)),e.node},n.prototype._createNode=function(e){var t='<object id="'+e.id+'" class="yvp-flash-video yvp-swf-not-ready" type="application/x-shockwave-flash" data="'+e.swfUrl+'" width="100%" height="100%">';e.params.forEach(function(e){t+='<param name="'+e.name+'" value="'+e.value+'">'}),t+="</object>";var r=document.createElement("div");return r.innerHTML=t,r.children[0]},n.prototype.waitForReady=function(e){var t=this;if(t._swfReady)return void e();if(t.timedOut)return void e(new Error("swf timeout"));var r=!1;t._eventBus.subscribe(i.SWF_READY_TIMEOUT,function(){r||(r=!0,e(new Error("swf timeout")))}),t._eventBus.subscribe(i.SWF_READY,function(){r||(r=!0,e())})},n.prototype._bindEvents=function(){var e=this;window[e._eventHandlerName]=function(t){try{i.Video[t.type.toUpperCase()]?e._onVideoEvent(t):e._onFlashEvent(t)}catch(r){d.error("Error in flash event handler:",r.message||r,r.stack)}}},n.prototype._onVideoEvent=function(e){var t,r=this,n=e.type;if(r.mode===a.VIDEO)t=i.Video[n.toUpperCase()];else{if(r.mode!==a.AD)return;t=i.Ad[n.toUpperCase()]}switch("playing"===n&&r._profiler&&(r._profiler.setEndTime(i.Metrics.STREAM_PLAY_TO_RENDER),r._profiler.setEndTime(i.Metrics.STREAM_REQUEST_TO_RENDER)),n){case"timeupdate":case"seeking":case"seeked":if("timeupdate"===n&&r._isSeeking)break;if("seeked"===n&&(r._isSeeking=!1),r._model.playbackState.isOnCriticalError()||r._model.playbackState.state===p.END)break;var o=e.buffered,s={length:1,start:function(){return o?o.start:0},end:function(){return o?o.end:0}};r._eventBus.publish(t,e.currentTime,e.duration,s);break;case"error":if(r.mode===a.VIDEO){var l=null;e.critical&&r._callFlashMethod("stopMedia"),r._eventBus.publish(i.ERROR,l)}else r._eventBus.publish(i.Ad.ERROR,e.error);break;case"ended":r.ended=!0,r._eventBus.publish(t);break;case"pause":if(r.ended)break;if(r.seeking)break;r._eventBus.publish(t);break;default:r._eventBus.publish(t,e)}},n.prototype._onFlashEvent=function(e){var t=this,r=e.type;switch(r){case"swfReady":t._swfReady=!0,t._profiler.setEndTime(i.Metrics.SWF_READY),clearTimeout(t._swfReadyTimeout),l.classList(t.node).remove("yvp-swf-not-ready"),t._commandQueue.flush(!0),t._eventBus.publish(i.SWF_READY,t.node);break;case"jsLog":break;case"yvap_flash":t._eventBus.publish(i.YVAP_SWF_PROXIED_EVENT,e);break;case"uiInteract":t.mode===a.VIDEO?t._eventBus.publish(i.Video.CLICK):t.mode===a.AD&&t._eventBus.publish(i.Ad.CLICK,t._callFlashMethod("get","currentTime"));break;case"playerPluginResize":t._eventBus.publish(i.PLAYER_RESIZE,e.width,e.height)}},n.prototype.setStreams=function(e){var t=this;return e.mode=t.mode,t._callIfReady("_setStreamsImpl",[e]),!0},n.prototype._setStreamsImpl=function(e){var t=this,r=e.streams;t.ended=!1,t._isSeeking=!1,!r||r.length<=0||t._setSrc(e)},n.prototype._setSrc=function(e){var t=this,r=e.streams,n=m.findStreamByProperty(r,"bitrate",t._model.playback.desiredBitrate,t._model.capabilities[u.FLASH_SIMPLE]);t._callFlashMethod("set","src",{bitrate:n.bitrate,format:n.format,url:n.url})},n.prototype.play=function(e){var t=this;t._callIfReady("_play",[e])},n.prototype._play=function(e){var t=this,r=t._error;if(!t.seeking||t._model.playbackState.paused){t.seeking=!1,t.ended=!1,t._isSeeking=!1;var n=0;t._model.playback.preconnect||(t.mode===a.VIDEO?t._commandQueue.flush(!0):t.mode===a.AD&&(n=1)),t._commandQueue.getLength()>n&&t._eventBus.publish(i.ERROR,l.createErr("P",t._model.playbackState,r.E_PLAYER,r.PLAYER_CODES.E_INTERNAL_VIOLATION)),t._profiler&&(t._profiler.add(i.Metrics.STREAM_REQUEST_TO_RENDER),t._profiler.add(i.Metrics.STREAM_PLAY_TO_RENDER)),t._callFlashMethod("playMedia",e)}},n.prototype.getCurrentTime=function(){var e=this;return e._callIfReady("_getCurrentTime")},n.prototype._getCurrentTime=function(){var e=this;return e._callFlashMethod("get","currentTime")},n.prototype.getDuration=function(){var e=this;return e._callIfReady("_getDuration")},n.prototype._getDuration=function(){var e=this;return e._callFlashMethod("get","duration")},n.prototype.setQuality=function(e){},n.prototype._pause=function(){var e=this;e._callFlashMethod("pauseMedia")},n.prototype.seek=function(e){var t=this;t._callIfReady("_seek",[e])},n.prototype._seek=function(e){var t=this;t._isSeeking=!0,t._callFlashMethod("set","currentTime",e)},n.prototype.setVolume=function(e){var t=this;t._callIfReady("_setVolume",[e])},n.prototype.setMute=function(e){var t=this;t.setVolume(e?0:t._model.playbackState.volume)},n.prototype._setVolume=function(e){var t=this;t._callFlashMethod("set","volume",e)},n.prototype.stopMedia=function(){var e=this;e._callIfReady("_stopMedia")},n.prototype._stopMedia=function(){var e=this;e._callFlashMethod("stopMedia")},n.prototype._callIfReady=function(e,t){var r=this;return r._swfReady?r[e].apply(r,t):(r._commandQueue.enQueue(e,t),null)},n.prototype._callFlashMethod=function(e){var t=this,r=Array.prototype.slice.call(arguments,1);try{if(t._swfReady&&t.node[e])return t.node[e].apply(t.node,r)}catch(n){t._handleCrash(n)}},n.prototype._handleCrash=function(e){var t=this,r=l.createErr("P",t._model.playbackState,o.E_WARNING,o.WARNING_CODES.E_FLASH_CRASHED);console.error("Flash crashed:",e),t._eventBus.publish(i.WARNING,r,!0)},n.prototype._determineWindowMode=function(){return"macintosh"===s.os&&(s.chrome||s.safari||s.firefox)?"direct":"opaque"},n.prototype.bindPlaybackEvents=function(){},n.prototype.unbindPlaybackEvents=function(){},
n.prototype._unbindEvents=function(){},n.prototype.detectFlashBlockers=function(e){var t=this;t._blockDetector.detect(e)},n.prototype.destroy=function(){var e=this;e.stopMedia(),delete window[e._eventHandlerName],e._unbindEvents(),clearTimeout(e._removeSWFNotReadyTimeout),clearTimeout(e._swfReadyTimeout),e._commandQueue.destroy(),e.node=null,e._blockDetector.destroy()}},{"../../../lib/command-queue":3,"../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../error.js":22,"../event":"YJm+dH","../flash-block-detector":25,"../states":57,"../stream":"Af6MnA","../util":"jJTEqU","./modes":53,"./type":54}],49:[function(e,t,r){"use strict";function n(e){var t='<object id="'+e.id+'" class="yvp-flash-video yvp-swf-not-ready" type="application/x-shockwave-flash" data="'+e.swfUrl+'" width="100%" height="100%">';e.params.forEach(function(e){t+='<param name="'+e.name+'" value="'+e.value+'">'}),t+="</object>";var r=document.createElement("div");return r.innerHTML=t,r.children[0]}function o(e,t,r){var n=this;n.type=_.FLASH,n._error=i,n._eventBus=e,n._model=t,n._profiler=r,n._blockDetector=new v(e),n.seeking=!1,n.ended=!1,n._isSeeking=!1;var o=s.VIDEO;Object.defineProperty(n,"mode",{get:function(){return o},set:function(e){o!==e&&(o=e,n._callFlashMethod("set","playMode",e))}}),n._commandQueue=new p(n),n._swfReady=!1,n.timedOut=!1,n._drmState=f.NO_DRM}t.exports=o;var i=e("../error.js"),a=e("../event"),s=e("./modes"),l=e("../../../lib/user-agent"),d=e("../util"),c=e("../../../lib/logger"),p=e("../../../lib/command-queue"),u=e("../states"),_=e("./type"),m=e("../hls-cue-tracker"),v=e("../flash-block-detector"),y="player.swf",f={NO_DRM:"no-drm",DRM_INITIAL:"drm-initial",DRM_METADATA_IS_SET:"drm-metadata-set",DRM_AUTH_COMPLETE:"drm-auth-complete"};o.prototype.create=function(){var e=this,t=d.generateGuid(),r=d.getAssetUrl(e._model.isLocal(),e._model.version,y);return e._eventHandlerName="__YVPFlashHandler_"+e._model.guid,e._bindEvents(),e._profiler&&e._profiler.add(a.Metrics.SWF_OBJECT_TO_INIT_START),e.node=n({id:t,swfUrl:r,params:[{name:"allowscriptaccess",value:"always"},{name:"allowFullScreen",value:"true"},{name:"wmode",value:e._determineWindowMode()},{name:"flashVars",value:"YUIBridgeCallback="+e._eventHandlerName+"&allowedDomain="+document.location.hostname}]}),e.node.pause=function(){e._swfReady?e._pause():e._commandQueue.enQueue("_pause")},e._removeSWFNotReadyTimeout=setTimeout(function(){d.classList(e.node).remove("yvp-swf-not-ready")},1e3),e._swfReadyTimeout=setTimeout(function(){e.timedOut=!0,e._eventBus.publish(a.SWF_READY_TIMEOUT,e.node)},7e3),e._profiler&&(e._profiler.setEndTime(a.Metrics.RENDER_TO_SWF),e._profiler.add(a.Metrics.SWF_READY)),e.node},o.prototype.waitForReady=function(e){var t=this;if(t._swfReady)return void e();if(t.timedOut)return void e(new Error("swf timeout"));var r=!1;t._eventBus.subscribe(a.SWF_READY_TIMEOUT,function(){r||(r=!0,e(new Error("swf timeout")))}),t._eventBus.subscribe(a.SWF_READY,function(){r||(r=!0,e())})},o.prototype.isReady=function(){var e=this;return e._swfReady},o.prototype._determineWindowMode=function(){return"macintosh"===l.os&&(l.chrome||l.safari||l.firefox)?"direct":"opaque"},o.prototype.setSelectedStreams=function(e){var t=this;t._eventBus.publish(a.SELECTED_STREAM_CHANGE,e)},o.prototype.bindPlaybackEvents=function(){var e=this;e._unsubscribeEventBusEvents=[],e._unsubscribeEventBusEvents.push(e._eventBus.subscribe(a.BEFORE_PROGRESS_BEACON,e._beforeProgressBeaconSend,e))},o.prototype._bindEvents=function(){var e=this;window[e._eventHandlerName]=function(t){try{a.Video[t.type.toUpperCase()]?e._onVideoEvent(t):e._onFlashEvent(t)}catch(r){c.error("Error in flash event handler:",r.message||r,r.stack)}},e._onVideoEvent=function(t){var r,n=t.type;if(e.mode===s.VIDEO)r=a.Video[n.toUpperCase()];else{if(e.mode!==s.AD)return;r=a.Ad[n.toUpperCase()]}switch("playing"===n&&e._profiler&&(e._profiler.setEndTime(a.Metrics.STREAM_PLAY_TO_RENDER),e._profiler.setEndTime(a.Metrics.STREAM_REQUEST_TO_RENDER)),n){case"timeupdate":case"seeking":case"seeked":if("timeupdate"===n&&e._isSeeking)break;if("seeked"===n&&(e._isSeeking=!1),e._model.playbackState.isOnCriticalError()||e._model.playbackState.state===u.END)break;var o=t.buffered,i={length:1,start:function(){return o?o.start:0},end:function(){return o?o.end:0}};e._eventBus.publish(r,t.currentTime,t.duration,i);break;case"error":if(e.mode===s.VIDEO){var l,c=e._error;t.code===c.PLAYER_DRM_CODES.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR?l=d.createErr("C",e._model.playbackState,c.E_PLAYER_DRM,c.PLAYER_DRM_CODES.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR):t.code===c.PLAYER_DRM_CODES.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR?l=d.createErr("S",e._model.playbackState,c.E_PLAYER_DRM,c.PLAYER_DRM_CODES.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR):t.code===c.FLASH_CODES.E_FLASH_DRM_SYSTEM_UPDATE_ERROR?l=d.createErr("R",e._model.playbackState,c.E_PLAYER,c.FLASH_CODES.E_FLASH_DRM_SYSTEM_UPDATE_ERROR,null,t.msg+"; "+t.detail):t.code===c.FLASH_CODES.E_FLASH_DRM_CHROME_SETTING_ERROR?l=d.createErr("R",e._model.playbackState,c.E_PLAYER_DRM,c.FLASH_CODES.E_FLASH_DRM_CHROME_SETTING_ERROR):t.code>=c.FLASH_CODES.E_FLASH_DRM_LOWER_BOUND_ERROR&&t.code<=c.FLASH_CODES.E_FLASH_DRM_UPPER_BOUND_ERROR?l=d.createErr("C",e._model.playbackState,c.E_PLAYER_DRM,t.code,null,t.msg+t.detail):t.code===c.FLASH_CODES.E_HLS_CLIENT_DISABLE_COOKIES?l=d.createErr("R",e._model.playbackState,c.E_PLAYER,t.code,null,t.msg+"; "+t.detail):(0===t.code&&(t.code=c.PLAYER_CODES.E_PLAYER_PLAYBACK_ERROR),l=d.createErr("P",e._model.playbackState,c.E_PLAYER,t.code,null,t.msg+"; "+t.detail)),t.critical&&e._callFlashMethod("stopMedia"),e._eventBus.publish(a.ERROR,l)}else e._eventBus.publish(a.Ad.ERROR,e._callFlashMethod("get","error"));break;case"ended":e.ended=!0,e._eventBus.publish(r);break;case"pause":if(e.ended)break;if(e.seeking)break;e._eventBus.publish(r);break;case"loadeddata":e._profiler&&e._profiler.setEndTime(a.Metrics.LOAD_TO_LOADED_DATA),e._eventBus.publish(r);break;case"warning":/Remove Last Fragment Buffer/.test(t.msg)&&e._eventBus.publish(a.RELOAD_FRAGMENT,t.msg);break;default:e._eventBus.publish(r,t)}}},o.prototype._onFlashEvent=function(e){var t=this,r=e.type;switch(r){case"infoupdate":var n=e.mediaInfo;t._model.playback.bitrate=n.currentStreamBitrate,t._model.playback.protocol=n.deliveryProtocol,t._eventBus.publish(a.PLAYBACK_INFO,n);break;case"swfReady":t._swfReady=!0,t._profiler.setEndTime(a.Metrics.SWF_READY),t._profiler.setEndTime(a.Metrics.SWF_OBJECT_TO_INIT_START,t._callFlashMethod("get","swfInitTimestamp"),!0),clearTimeout(t._swfReadyTimeout),d.classList(t.node).remove("yvp-swf-not-ready"),t._setPlayerInfo(),t._commandQueue.flush(!0),t._eventBus.publish(a.SWF_READY,t.node);break;case"playerPluginResize":t._eventBus.publish(a.PLAYER_RESIZE,e.width,e.height);break;case"selectedStreamChange":t._eventBus.publish(a.SELECTED_STREAM_CHANGE,e.selectedStreams);break;case"selectedStreamUrlChange":t._eventBus.publish(a.SELECTED_STREAM_URL_CHANGE,null,e);break;case"jsLog":break;case"yvap_flash":t._eventBus.publish(a.YVAP_SWF_PROXIED_EVENT,e);break;case"drmMetadataSet":t._profiler&&(t._profiler.setEndTime(a.Metrics.DRM_METADATA_IS_SET),t._profiler.add(a.Metrics.DRM_AUTH_COMPLETE),t._drmState=f.DRM_METADATA_IS_SET);break;case"drmAuthComplete":t._profiler&&(t._profiler.setEndTime(a.Metrics.DRM_AUTH_COMPLETE),t._drmState=f.DRM_AUTH_COMPLETE);break;case"uiInteract":t.mode===s.VIDEO?t._eventBus.publish(a.Video.CLICK):t.mode===s.AD&&t._eventBus.publish(a.Ad.CLICK,t._callFlashMethod("get","currentTime"));break;case"bitratechange":var o=e.bitrate,l=e.info;t._eventBus.publish(a.API.BITRATE_CHANGE,o,l);break;case"durationchange":break;case"pluginLoadComplete":t._eventBus.publish(a.RENDERER_PLUGIN_LOADED);break;case"pluginLoadError":t._eventBus.publish(a.RENDERER_PLUGIN_LOAD_FAILED);break;case"pluginLoadTimedOut":t._eventBus.publish(a.RENDERER_PLUGIN_LOAD_TIMED_OUT);break;case"loadFirstFragment":t._eventBus.publish(a.HLS_FIRST_TS_LOAD_START);break;case"firstFragmentFirstByteFReceived":t._eventBus.publish(a.HLS_FIRST_TS_FIRST_BYTE_ARRIVE);break;case"reloadBegin":t._eventBus.publish(a.MEDIA_RELOAD_BEGIN);break;case"reloadEnd":t._eventBus.publish(a.MEDIA_RELOAD_END);break;case"mediaPlaylistLoaded":t._eventBus.publish(a.MEDIA_PLAYLIST_LOADED);break;case"mediaPlaylistUpdated":t._eventBus.publish(a.MEDIA_PLAYLIST_UPDATED,e.interval);break;case"qualityChanged":t._eventBus.publish(a.QUALITY_CHANGE);break;case"streamLoadBegin":t._profiler&&t._profiler.add(a.Metrics.STREAM_REQUEST_TO_RENDER);break;case"vttSegmentLoaded":t._eventBus.publish(a.VTT_SEGMENT_LOADED,e.vttSegmentInfo);break;case"bitrateListChanged":t._eventBus.publish(a.BITRATE_LIST_CHANGED,e.bitrates,e.heights);break;case"playbackComplete":t._model.playlist.getCurrentItem().isLive()&&t._eventBus.publish(a.WARNING,d.createErr("P",t._model.playbackState,i.E_WARNING,i.WARNING_CODES.E_LIVE_PLAYBACK_COMPLETE),!0);break;case"fragLoadRetryFailure":t._eventBus.publish(a.FRAG_LOAD_RETRY_FAILURE);break;case"liveMediaPlaylistLoadRetryFailure":t._eventBus.publish(a.LIVE_MEDIA_PLAYLIST_LOAD_RETRY_FAILURE);break;case"liveLoadingLate":t._eventBus.publish(a.LIVE_LOADING_LATE);break;case"PTSDiscontinuity":t._eventBus.publish(a.PTS_DISCONTINUITY,e.timedifference);break;case"cuepointStarted":var c={cueoutStartSeqNum:e.startSeqNum,cueoutStreamIndex:e.cueoutStreamIndex};t._eventBus.publish(a.API.CUEPOINT_STARTED,e.cuepointDuration,e.cuepointPlayedTime,c);break;case"cuepointStopped":t._eventBus.publish(a.API.CUEPOINT_STOPPED);break;case"cuepointDetected":t._eventBus.publish(a.API.CUEPOINT_DETECTED,e.cuepointDuration,e.timeGapBeforeCUEOUT);break;case"abrDataUpdated":t._model.metrics.skipABRBeacon||t._eventBus.publish(a.ABR_DATA_UPDATE,e)}},o.prototype._setPlayerInfo=function(){var e=this,t=e._model,r={name:"Fireball",site:t.baseConfig.site,version:t.version,region:t.baseConfig.region,autoplay:t.playback.autoplay,spaceid:t.baseConfig.pageSpaceId,hostEnv:t.isLocal()?"l":"p",lang:t.baseConfig.lang,conviva:t.playback.conviva,bucket:d.bucketize(),browserName:e._getBrowserName(),os:l.os,expType:t.baseConfig.experienceType,expName:t.baseConfig.experienceName,convivaSamplingRate:t.failOver?t.failOver.convivaSamplingRate:null,disableGPU:t.playback.disableGPU};e._callFlashMethod("set","playerInfo",r)},o.prototype._getBrowserName=function(){var e="";return l.chrome?e="chrome":l.firefox?e="firefox":l.safari?e="safari":l.ie?e="ie":l.opera&&(e="opera"),e},o.prototype.setStreams=function(e){var t=this;return e.mode=t.mode,t._swfReady?t._setStreamsImpl(e):t._commandQueue.enQueue("_setStreamsImpl",[e]),!0},o.prototype._setStreamsImpl=function(e){var t=this,r=(t._error,e.streams),n=e.mode;t.ended=!1,t._isSeeking=!1,!r||r.length<=0||(n===s.AD?t._setAdSrc(e):e.isCCM?t._setVideoSrc(e):t._setStreamUrlSrc(e))},o.prototype._setSrc=function(e){var t=this;t._model.playback.preconnect?t._setSrcImpl(e):(t._commandQueue.deQueue("_setSrcImpl"),t._commandQueue.enQueue("_setSrcImpl",[e]))},o.prototype._setSrcImpl=function(e){var t=this;e.live&&"hls"===e.streamType&&(t._hlsCueTracker||(t._hlsCueTracker=new m(t._eventBus,t._model)),t._hlsCueTracker.updatePlaylistURLs(null,e.streams[0].url)),t._callFlashMethod("set","src",e)},o.prototype._setAdSrc=function(e){var t=this,r=e.streams;try{t._callFlashMethod("set","src",{live:!1,rtx:!1,url:r[0].url})}catch(n){t._eventBus.publish(a.Ad.ERROR)}},o.prototype._setStreamUrlSrc=function(e){var t=this,r={live:!1,rtx:!1};if(e.streams&&e.streams.length){var n=e.streams[0];"m3u8"===n.format?(e.streams.forEach(function(e){e.url&&""!==e.url&&(e.host=e.url)}),r.streams=e.streams):r.url=n.url,r.live=n.live,n.isDrmProtected()&&(t._drmState=f.DRM_INITIAL)}t._error;t._profiler.add(a.Metrics.LOAD_TO_LOADED_DATA),t._callFlashMethod("set","src",r)},o.prototype._setVideoSrc=function(e){var t=this,r=t._error,n=e.streamProfiles&&e.streamProfiles.length>0?e.streamProfiles:e.streams;e.mode;t._profiler.add(a.Metrics.LOAD_TO_LOADED_DATA);var o=[],i=[],s=!1;if(e.subtitleStreams&&e.subtitleStreams.forEach(function(e){o.push(e)}),n.forEach(function(e){e=d.extend({},e),e.format.indexOf("m3u8")>-1&&(e.format="m3u8"),e.path&&e.path.indexOf("content=hls")>-1&&(e.format="m3u8"),e.isAtlas()&&t._fixPathForFlash(e);var r=e.isStreamCompatibleForDrm("flash");return-1===r?void(s=!0):(1===r&&(t._drmState=f.DRM_INITIAL),void i.push(e))}),i.length<=0){if(s){var l=d.createErr("C",t._model.playbackState,r.E_PLAYER_DRM,r.PLAYER_DRM_CODES.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR);t._eventBus.publish(a.ERROR,l)}}else{var c=i.filter(function(e){return!t._isProgressiveDownload(e)}),p=t._model.playlist.getCurrentItem(),u={uuid:e.uuid,showName:p?p.showName:"",title:p?p.title:"",duration:p?p.duration:0};e.startTime&&(u.startTime=e.startTime),o.length>0&&(u.subtitles=o),c.length>0?(u.streamType=c[0].getType(),u.streams=c,u.live=c[0].live,u.rtx=c[0].isRTX()):(i=i.sort(function(e,t){return t.bitrate-e.bitrate}),u.streamType=i[0].getType(),u.url=i[0].url,u.rtx=i[0].isRTX(),u.bitrate=i[0].bitrate),t._callFlashMethod("set","stopBufferingOnPause",t._model.playback.stopBufferingOnPause),t._callFlashMethod("set","preload",t._model.playback.preload),t._callFlashMethod("set","ignoreEndlist",e.ignoreEndlist),t._setSrc(u),t._model.playback.targetBitrate&&t._setQuality({preference:"config",bitrate:t._model.playback.targetBitrate})}},o.prototype._fixPathForFlash=function(e){if(e.format){var t="mp4"===e.format.toLowerCase(),r=e.path.replace(/^\/?mp4:/,"");(t||"flv"===e.format.toLowerCase())&&(r=r.replace(/^\//,"")),t&&e.isRTMP()&&(r="mp4:"+r),e.path=r}},o.prototype._isProgressiveDownload=function(e){return!e.host||/^http[s]?:\/\//.test(e.host)&&"m3u8"!==e.format&&"f4m"!==e.format},o.prototype.play=function(e){var t=this,r=t._error;if(!t.seeking||t._model.playbackState.paused)if(t._profiler&&t._profiler.add(a.Metrics.STREAM_PLAY_TO_RENDER),t._swfReady){t.seeking=!1,t.ended=!1,t._isSeeking=!1;var n=0;if(t._model.playback.preconnect||(t.mode===s.VIDEO?t._commandQueue.flush(!0):t.mode===s.AD&&(n=1)),t._commandQueue.getLength()>n&&t._eventBus.publish(a.ERROR,d.createErr("P",t._model.playbackState,r.E_PLAYER,r.PLAYER_CODES.E_INTERNAL_VIOLATION)),t._callFlashMethod("playMedia",e),t._profiler&&t._drmState===f.DRM_INITIAL){var o=t._profiler.getItem(a.Metrics.DRM_METADATA_IS_SET);o||t._profiler.add(a.Metrics.DRM_METADATA_IS_SET)}}else t._commandQueue.enQueue("play",[e])},o.prototype._pause=function(){var e=this;e._callFlashMethod("pauseMedia")},o.prototype.seek=function(e){var t=this;if(t._swfReady)if(t._isSeeking=!0,t._callFlashMethod("get","seekable"))t._callFlashMethod("set","currentTime",e);else var r=t._eventBus.subscribe(a.Video.PLAYING,function(){t._callFlashMethod("set","currentTime",e),r.detach()});else t._commandQueue.enQueue("seek",[e])},o.prototype.getCurrentTime=function(){var e=this;return e._callFlashMethod("get","currentTime")},o.prototype.getDuration=function(){var e=this;return e._callFlashMethod("get","duration")},o.prototype.getFlashVersion=function(){var e=this;return e._swfReady?e._callFlashMethod("get","flashVersion"):null},o.prototype.setVolume=function(e){var t=this;t._swfReady?t._callFlashMethod("set","volume",e):t._commandQueue.enQueue("setVolume",[e])},o.prototype.setMute=function(e){var t=this;t.setVolume(e?0:t._model.playbackState.volume)},o.prototype.setQuality=function(e){var t=this;t._setQuality({preference:e.preference,bitrate:e.stream.bitrate})},o.prototype._setQuality=function(e){var t=this;t._swfReady?t._callFlashMethod("set","quality",e):t._commandQueue.enQueue("_setQuality",[e])},o.prototype._beforeProgressBeaconSend=function(e){var t,r=this,n=document.getElementsByClassName("yvp-main"),o=!d.isPlayerInBackground()&&0!==d.getElementViewability(n[0]);if(r._swfReady&&e)for(t=r._callFlashMethod("get","segmentMetrics");t&&t.length;){var i=t.shift();i.vis||(i.vis=o),e.val.push(i)}},o.prototype.detectFlashBlockers=function(e){var t=this;t._blockDetector.detect(e)},o.prototype._unbindEvents=function(){},o.prototype.unbindPlaybackEvents=function(){var e=this;e._unsubscribeEventBusEvents&&(e._unsubscribeEventBusEvents.forEach(function(e){e()}),e._unsubscribeEventBusEvents=[])},o.prototype._callFlashMethod=function(e){var t=this,r=Array.prototype.slice.call(arguments,1);try{if(t._swfReady)return t.node[e].apply(t.node,r)}catch(n){c.error("Flash crashed:",n);var o,s=!0;"get"===e&&"segmentMetrics"===r[0]&&(s=!1,o="segInfo-flash-error"),t._eventBus.publish(a.WARNING,d.createErr("P",t._model.playbackState,i.E_WARNING,i.WARNING_CODES.E_FLASH_CRASHED,o),s)}},o.prototype.stopMedia=function(){var e=this;e._callFlashMethod("stopMedia")},o.prototype.destroy=function(){var e=this;e._callFlashMethod("stopMedia"),delete window[e._eventHandlerName],e._unbindEvents(),clearTimeout(e._removeSWFNotReadyTimeout),clearTimeout(e._swfReadyTimeout),e._commandQueue.destroy(),e.node=null,e._blockDetector.destroy()}},{"../../../lib/command-queue":3,"../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../error.js":22,"../event":"YJm+dH","../flash-block-detector":25,"../hls-cue-tracker":26,"../states":57,"../util":"jJTEqU","./modes":53,"./type":54}],50:[function(e,t,r){"use strict";function n(){var e=document.createElement("div");return p.tv?e.innerHTML='<video class="yvp-html5-video" preload="meta" crossorigin="anonymous"><source/></video>':e.innerHTML='<video class="yvp-html5-video" preload></video>',e.children[0]}function o(){}t.exports=o;var i=e("../cc"),a=e("../error"),s=e("../event"),l=e("./modes"),d=e("../tap"),c=(e("../../../lib/logger"),e("../util")),p=e("../../../lib/user-agent");o.prototype.create=function(e){var t=this;return t.node=e||n(),t.node.setAttribute("id",c.generateGuid()),t._bindEvents(),p.mobile&&t._setupMobileWebAutoplay(),t.node},o.prototype.detachNode=function(){var e=this;e._unbindEvents(),e.node&&e.node.pause&&e.node.pause()},o.prototype.reattachNode=function(){var e=this;e._bindEvents()},o.prototype._bindEvents=function(){var e=this;e._onVideoEvent=function(t){if(!e.ended){var r,n=t.type;if(e.mode===l.VIDEO)r=s.Video[n.toUpperCase()];else{if(e.mode!==l.AD)return;r=s.Ad[n.toUpperCase()]}e._handleVideoEvent(n,r)}},s.nativeVideoEvents.forEach(function(t){e.node.addEventListener(t,e._onVideoEvent)}),p.iphone||(e._videoTap=new d(e.node),e._onVideoTap=function(){e.mode===l.VIDEO?e._eventBus.publish(s.Video.CLICK):e.mode===l.AD&&(e._eventBus.publish(s.Ad.CLICK,e.node.currentTime),e.node.pause())},e.node.addEventListener("tap",e._onVideoTap)),p.safari>=8&&e._setupTimedMetadataTrackListener(),e._unsubscribeEventBusEvents=[],e._unsubscribeEventBusEvents.push(e._eventBus.subscribe(s.CC.FETCH_MOBILE,e._enableMobilCC,e)),e._unsubscribeEventBusEvents.push(e._eventBus.subscribe(s.FULLSCREEN_CHANGE,function(t){e._eventBus.publish(s.PLAYER_RESIZE,e.node.clientWidth,e.node.clientHeight)},e)),e._unsubscribeEventBusEvents.push(e._eventBus.subscribe(s.BEFORE_PROGRESS_BEACON,e._beforeProgressBeaconSend,e))},o.prototype._enableMobileStrmInlineExpr=function(){var e=this;p.mobile&&e._model.playback.canPlayInline&&(e._updateMuted(!0),e._onVideoNodeTapHandler=new d(e.node,function(){e._updateMuted(!1),e.enterFullScreen()}),e._mobileVideoFullscreenChangeHandler=function(t){var r="boolean"==typeof document.webkitIsFullScreen?document.webkitIsFullScreen:e.node.webkitDisplayingFullscreen;e._updateMuted(!r)},e.node.addEventListener("webkitbeginfullscreen",e._mobileVideoFullscreenChangeHandler,!1),e.node.addEventListener("webkitendfullscreen",e._mobileVideoFullscreenChangeHandler,!1),e.node.addEventListener("webkitfullscreenchange",e._mobileVideoFullscreenChangeHandler,!1),e.node.addEventListener("fullscreenchange",e._mobileVideoFullscreenChangeHandler,!1),p.android&&(e._onAndroidTabVisibilityChanged=function(){document.hidden||e.mode!==l.AD||!e.node.paused||e.node.controls||e.node.play()},document.addEventListener("visibilitychange",e._onAndroidTabVisibilityChanged,!1)))},o.prototype._setupTouchToPlayRestrictionRemoval=function(){var e=this;e._model.playback.autoplaySupported&&(e._unbindUserTapRestrictionEvents=c.bindOneTimeUserGestureEvents(function(){e._unbindUserTapRestrictionEvents=null,e.node.load(),e._eventBus.publish(s.USERTAP_RESTRICTION_REMOVED)}))},o.prototype._setupTouchToUnmuteRestrictionRemoval=function(){var e=this;p.ios&&e._model.playback.canPlayInline&&(e._model.playback.autoplaySupported?e._onVideoNodeTapHandler=new d(e.node,function(){e._onVideoNodeTapHandler.destroy(),e._onVideoNodeTapHandler=null,e._updateMuted(!1)}):e._eventBus.once(s.START_SCREEN_CLICK,function(){e._updateMuted(!1)}))},o.prototype._setupMobileWebAutoplay=function(){var e=this;(p.ios||p.android)&&(p.ios?(e._updateMuted(!0),e.node.setAttribute("playsinline",!0)):p.android&&e._setupTouchToPlayRestrictionRemoval(),e._model.isMobileStrmInlineExpr()?e._enableMobileStrmInlineExpr():p.ios&&e._model.playback.canPlayInline&&e._setupTouchToUnmuteRestrictionRemoval())},o.prototype._beforeProgressBeaconSend=function(e){e.useDefaultBufferDuration=!0},o.prototype.setSelectedStreams=function(e){var t=this;t._eventBus.publish(s.SELECTED_STREAM_CHANGE,e)},o.prototype.seek=function(e){var t=this;try{t.node.currentTime=e}catch(r){if("InvalidStateError"===r.name)var n=t._eventBus.subscribe(s.Video.LOADEDMETADATA,function(){t.node.currentTime=e,n.detach()})}},o.prototype.getCurrentTime=function(){var e=this;return e.node.currentTime},o.prototype.getDuration=function(){var e=this;return e.node.duration},o.prototype.setVolume=function(e){var t=this;t.node&&(t.node.volume=e)},o.prototype.setMute=function(e){var t=this;t.node&&"boolean"==typeof e&&(t.node.muted=e)},o.prototype._updateMuted=function(e){var t=this;t.node&&"boolean"==typeof e&&e!==t.node.muted&&(t.setMute(e),t._eventBus.publish(s.CONTROLS_SET_MUTE,e))},o.prototype.enterFullScreen=function(){var e=this;if(e.node){var t=e.node.requestFullscreen||e.node.webkitRequestFullscreen||e.node.webkitEnterFullscreen;t&&t.call(e.node)}},o.prototype.exitFullScreen=function(){var e=this;if(e.node){var t=document.exitFullscreen||document.webkitExitFullscreen;t?t.call(document):e.node.webkitExitFullscreen&&e.node.webkitExitFullscreen()}},o.prototype._enableMobilCC=function(e){var t=this,r=document.createDocumentFragment();t._deleteTracks(),e.langList.forEach(function(t){var n=document.createElement("track");n.setAttribute("label",i.prototype.getLanguageForCode.call(null,t.lang)),n.setAttribute("srclang",t.lang),n.setAttribute("kind","subtitles"),n.setAttribute("type","text/vtt"),t.lang===e.selectedLang&&n.setAttribute("default",!0),n.src=t.url,n.mode="hidden",r.appendChild(n)}),t.node.appendChild(r)},o.prototype._deleteTracks=function(){for(var e=this,t=e.node.querySelectorAll("track"),r=0;r<t.length;r++)e.node.removeChild(t[r])},o.prototype._setupTimedMetadataTrackListener=function(){var e=this;if(e.node.textTracks){var t=function(t){var r=t.track;"metadata"===r.kind&&(r.mode="hidden",r.addEventListener("cuechange",function(t){var r=t.target,n=r.activeCues[0],o=n.value&&n.value.data;try{o=JSON.parse(o)}catch(i){o={}}e._eventBus.publish(s.TIMED_METADATA_RECEIVED,o)}))};e.node.textTracks.addEventListener("addtrack",t),e._removeTimedMetadataTrackListener=function(){e.node.textTracks.removeEventListener("addtrack",t)}}},o.prototype._unbindEvents=function(){var e=this;e._removeTimedMetadataTrackListener&&e._removeTimedMetadataTrackListener(),s.nativeVideoEvents.forEach(function(t){e.node.removeEventListener(t,e._onVideoEvent)}),e._videoTap&&(e._videoTap.destroy(),e.node.removeEventListener("tap",e._onVideoTap)),e._unsubscribeEventBusEvents&&(e._unsubscribeEventBusEvents.forEach(function(e){e()}),e._unsubscribeEventBusEvents=[])},o.prototype._getCodeForNodeError=function(e){if(!(e&&e instanceof window.MediaError))return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR;switch(e.code){case window.MediaError.MEDIA_ERR_ABORTED:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED;case window.MediaError.MEDIA_ERR_NETWORK:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK;case window.MediaError.MEDIA_ERR_DECODE:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_DECODE;case window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED;case window.MediaError.MEDIA_ERR_ENCRYPTED:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED;default:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR}},o.prototype.destroy=function(){var e=this;e._unbindEvents(),e.node.pause(),e.node.src="",e.node.load(),e._CCStyleTag&&(e._CCStyleTag.parentNode.removeChild(e._CCStyleTag),e._CCStyleTag=null),e.hlsCues&&e.hlsCues.destroy(),e._onVideoNodeTapHandler&&e._onVideoNodeTapHandler.destroy(),e._mobileVideoFullscreenChangeHandler&&(e.node.removeEventListener("webkitbeginfullscreen",e._mobileVideoFullscreenChangeHandler,!1),e.node.removeEventListener("webkitendfullscreen",e._mobileVideoFullscreenChangeHandler,!1),e.node.removeEventListener("webkitfullscreenchange",e._mobileVideoFullscreenChangeHandler,!1),e.node.removeEventListener("fullscreenchange",e._mobileVideoFullscreenChangeHandler,!1)),e._unbindUserTapRestrictionEvents&&(e._unbindUserTapRestrictionEvents(),e._unbindUserTapRestrictionEvents=null),e._onAndroidTabVisibilityChanged&&document.removeEventListener("visibilitychange",e._onAndroidTabVisibilityChanged,!1),e.node.parentNode.removeChild(e.node),e.node=null}},{"../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../cc":"zKzgQw","../error":22,"../event":"YJm+dH","../tap":"dsc79Q","../util":"jJTEqU","./modes":53}],51:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n.type=l.HTML5_HLS,n._eventBus=e,n._model=t,n._profiler=r,n.mode=d.VIDEO,n.seeking=!1,n.ended=!1,n._numVideoStreams=0,n._playingCalled=!0}t.exports=n;var o=e("../error"),i=e("../event"),a=e("./html5-base.js"),s=e("js-hls"),l=e("./type"),d=e("./modes"),c=e("../util"),p=e("../../../lib");e("../../../lib/logger");c.inherits(n,a),n.prototype.create=function(){var e=this;a.prototype.create.apply(e,arguments);var t=e._getHtml5HlsConfig();return e._jsPlayer=new s(e.node,t),i.html5HlsEvents.forEach(function(t){e.node.addEventListener(t,function(t){e._handleVideoEvent(t.type,t)})}),e.node},n.prototype._getHtml5HlsConfig=function(){var e=this,t=e._model.playlist.getCurrentItem();e._sendAbrAnalytics=!1;var r={debug:c.keepConsoleLogs,sendAbrAnalytics:e._sendAbrAnalytics,stopBufferingOnPause:e._model.playback.stopBufferingOnPause,live:t&&t.isLive()},n=e._model.html5_hls;for(var o in n)if(n.hasOwnProperty(o)){if("preloadBufferLimit"===o&&e._model.playback.preload!==!0)continue;r[o]=n[o]}return r},n.prototype.waitForReady=function(e){e(null)},n.prototype._handleVideoEvent=function(e,t){var r=this;if("playing"===e&&r._profiler){r._profiler.setEndTime(i.Metrics.STREAM_PLAY_TO_RENDER);var n=r._profiler.getItem(i.Metrics.STREAM_REQUEST_TO_RENDER);n&&null===n.endTime&&r._profiler.setEndTime(i.Metrics.STREAM_REQUEST_TO_RENDER)}switch(e){case"seeking":case"seeked":"seeked"===e&&(r._seeked=!0),r._eventBus.publish(t,r.node.currentTime,r.node.duration,r.node.buffered);break;case"error":var a=r.node.error;if(r.mode===d.VIDEO){var s,l,u=r._jsPlayer.error||{};p.isNumber(u.code)?(s=u.code.toString(),l=c.createErr("P",r._model.playbackState,o.E_PLAYER_JS_HLS,s,null,u.message)):(s=a.code.toString(),l=c.createErr("P",r._model.playbackState,o.E_PLAYER_JS_HLS,s)),r._eventBus.publish(i.Video.ERROR,a),r._eventBus.publish(i.ERROR,l)}else r._eventBus.publish(i.Ad.ERROR,a);break;case"ended":r.ended=!0,r._hasPlayed=!1,r._model.playlist.getCurrentItem().isLive()?r._eventBus.publish(i.WARNING,c.createErr("P",r._model.playbackState,o.E_WARNING,o.WARNING_CODES.E_LIVE_PLAYBACK_COMPLETE),!0):r._eventBus.publish(t);break;case"pause":if(r.ended)break;if(r.seeking)break;r._eventBus.publish(t);break;case"play":r._playingCalled=!1,r._eventBus.publish(t);break;case"playing":r._playingCalled=!0,r._eventBus.publish(t);break;case"timeupdate":r._eventBus.publish(t,r.node.currentTime,r.node.duration,r.node.buffered),r._playingCalled||(r._playingCalled=!0,r._eventBus.publish(i.Video.PLAYING));break;case"loadeddata":r._profiler&&r._profiler.setEndTime(i.Metrics.LOAD_TO_LOADED_DATA),r._eventBus.publish(t);break;case"infoUpdate":var _=t.detail.mediaInfo;r._model.playback.bitrate=_.currentStreamBitrate,r._model.playback.protocol=_.deliveryProtocol,r._eventBus.publish(i.PLAYBACK_INFO,_);break;case"streamSwitched":var m=t.detail.bitrate,v={reason:t.detail.reason,oldFrameRate:t.detail.oldFrameRate,newFrameRate:t.detail.newFrameRate};r._eventBus.publish(i.API.BITRATE_CHANGE,m,v);break;case"hlsWaiting":t&&t.detail&&!p.isNullOrUndefined(t.detail.bufferInit)&&r._eventBus.publish(i.Video.WAITING,{value:t.detail.value,ignoreBuffering:t.detail.bufferInit});break;case"segmentFirstByteLoaded":r._eventBus.publish(i.SEGMENT_FIRST_BYTE_LOADED,t.detail);break;case"vttSegmentLoaded":r._eventBus.publish(i.VTT_SEGMENT_LOADED,t.detail);break;case"liveLoadingLate":r._eventBus.publish(i.LIVE_LOADING_LATE);break;case"streamUpdated":r._eventBus.publish(i.MEDIA_PLAYLIST_UPDATED);break;case"cuepointDetected":r._eventBus.publish(i.API.CUEPOINT_DETECTED,t.detail.cuepointDuration,t.detail.timeGapBeforeCUEOUT);break;case"cuepointStarted":r._eventBus.publish(i.API.CUEPOINT_STARTED,t.detail.cuepointDuration,t.detail.cuepointPlayedTime);break;case"subtitleStreamUpdated":r._eventBus.publish(i.SUBTITLE_PLAYLIST_UPDATED);break;case"abrDataUpdated":r._sendAbrAnalytics&&r._eventBus.publish(i.ABR_DATA_UPDATE,t.detail);break;case"preloadProgress":r._profiler.setEndTime(i.Metrics.STREAM_REQUEST_TO_RENDER);break;case"waiting":break;case"segInfoMetricsAvailable":var y=t.detail,f=document.getElementsByClassName("yvp-main"),g=!c.isPlayerInBackground()&&0!==c.getElementViewability(f[0]);y.forEach(function(e){e.vis=g}),r._eventBus.publish(i.SEG_INFO_AVAILABLE,y);break;default:r._eventBus.publish(t)}},n.prototype.setStreams=function(e){var t=this;t.ended=!1,t._numVideoStreams=0;t._hasPlayed=!1;var r=e.streamProfiles;if(r&&r.length||(r=e.streams),!r)return!1;var n=[];r.forEach(function(e){e.format.indexOf("m3u8")>=0&&(e.hls_info=e.hlsInfo,n.push(e))});var o=[];return e.subtitleStreams&&e.subtitleStreams.forEach(function(e){o.push(e)}),t._profiler&&(t._profiler.add(i.Metrics.STREAM_REQUEST_TO_RENDER),t.mode===d.VIDEO&&t._profiler.add(i.Metrics.LOAD_TO_LOADED_DATA)),n.length>0?(t._jsPlayer.setSrc({streams:n,subtitleStreams:o}),!0):!1},n.prototype.setQuality=function(e){var t=this;return t._jsPlayer.setQuality(e),!1},n.prototype.stopMedia=function(){var e=this;e._jsPlayer.unload()},n.prototype.play=function(e){var t=this;t.ended=!1,t.seeking=!1,t._profiler&&t._profiler.add(i.Metrics.STREAM_PLAY_TO_RENDER),t._jsPlayer.play(e)},n.prototype.preload=function(e){var t=this;t._jsPlayer.preload(e)},n.prototype._beforeProgressBeaconSend=function(e){var t,r=this,n=document.getElementsByClassName("yvp-main"),o=!c.isPlayerInBackground()&&0!==c.getElementViewability(n[0]);if(e)if(t=r._jsPlayer.getSegInfo(),"sync"===t.mode)for(e.mode="sync",t=t.segInfo;t&&t.length;){var i=t.shift();i.vis||(i.vis=o),e.val.push(i)}else e.mode="async"}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../error":22,"../event":"YJm+dH","../util":"jJTEqU","./html5-base.js":50,"./modes":53,"./type":54,"js-hls":206}],52:[function(e,t,r){"use strict";function n(e,t,r,n){var o=this;o.type=l.HTML5_RAW,o._eventBus=e,o._model=n,o._capabilities=t,o._profiler=r,o.mode=d.VIDEO,o.seeking=!1,o.ended=!1,o._isSwitching=!1,o._currentSrcFormat="",o._currentStream=null,o._lastUpdatedTime=0,o._retryCount=0,o._retryStreams=[],o._retryState=null,o._waitingEventTimer=null,o._lastTime=0,o._playbackStuck=!1,o._seeked=!1,o._hasPlayed=!1,o._fsEvt=!1}t.exports=n;var o=e("../bitrate-selector"),i=e("../error"),a=e("../event"),s=e("./html5-base.js"),l=e("./type"),d=e("./modes"),c=e("../stream"),p=e("../../../lib/user-agent"),u=e("../util"),_=e("../../../lib"),m=(e("../../../lib/logger"),e("../states")),v=e("../constants"),y=10,f=2,g=[1,5],b=250;
u.inherits(n,s),n.prototype.waitForReady=function(e){e(null)},n.prototype._handleVideoEvent=function(e,t){var r=this;switch("playing"===e&&r._profiler&&(r._profiler.setEndTime(a.Metrics.STREAM_PLAY_TO_RENDER),r._profiler.setEndTime(a.Metrics.STREAM_REQUEST_TO_RENDER)),e){case"timeupdate":case"seeking":case"seeked":if("timeupdate"===e){var n=r.node.currentTime;p.android&&(!r._hasPlayed&&p.chrome<33&&n>1&&2>n&&(r._model.playlist.getCurrentItem().isLive()?(r.node.pause(),r.node.play()):r.seek(0),r._hasPlayed=!0),!r._fsEvt&&p.androidVersion<=4.4&&r.node.addEventListener("webkitfullscreenchange",function(){var e=r.node.currentTime;r._fsEvt=!0,r.node.load();var t=r._eventBus.subscribe(a.Video.LOADEDMETADATA,function(){r.node.play(),r._model.playlist.getCurrentItem().isLive()||(r.node.currentTime=parseInt(e,10)),t.detach()})},!1))}"seeked"===e&&(r._seeked=!0),r._isSwitching?"seeked"===e&&r._playNewStream():r._eventBus.publish(t,r.node.currentTime,r.node.duration,r.node.buffered),r._lastUpdatedTime=r.node.currentTime;break;case"error":var o=r.node.error;if(r.mode===d.VIDEO){var s=r._getCodeForNodeError(o),l=i.E_WARNING,c=a.WARNING,_=r._retryStreams.length<=1&&r._retryCount>=f;_&&(l=i.E_PLAYER,c=a.ERROR);var m=u.createErr("P",r._model.playbackState,l,s,null,r.node.src);if(parseInt(m.subcategory)>=303&&parseInt(m.subcategory)<=308){r._retryCount++,_||r._eventBus.publish(c,m);var v=null;return v=r._model.playlist.getCurrentItem().isLive()?r.retryStreams(0):r.retryStreams(r._lastUpdatedTime),v?void u.getUrlStatus(v.url,function(e){401===e?m.subcategory=i.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_AUTHORIZED:404===e&&(m.subcategory=i.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_FOUND),m.errorType=i.E_PLAYER,r._eventBus.publish(a.ERROR,m)}):void 0}r._eventBus.publish(a.Video.ERROR,o),m.errorType=i.E_PLAYER,r._eventBus.publish(c,m)}else r._eventBus.publish(a.Ad.ERROR,o);break;case"ended":r.ended=!0,r._hasPlayed=!1,r._waitingEventTimer&&clearInterval(r._waitingEventTimer),r._playbackStuck&&r._publishWaitingEvent(!1,!1),r._eventBus.publish(t);break;case"loadeddata":if(r._isSwitching){r._seekToCurrentTime();break}r._profiler&&r._profiler.setEndTime(a.Metrics.LOAD_TO_LOADED_DATA),r._eventBus.publish(t);break;case"pause":if(r.ended||r.node.ended)break;if(r.seeking)break;if(!r.node.paused)break;r._eventBus.publish(t);break;case"play":case"playing":if(r._isSwitching){"playing"===e&&r._finishSwitching();break}r._eventBus.publish(t);break;case"waiting":break;default:r._eventBus.publish(t)}},n.prototype._checkFormat=function(e,t){return e.indexOf(t)>-1},n.prototype._areFormatsCrashy=function(e,t){var r=this;return r._checkFormat(e,"mp4")&&r._checkFormat(t,"m3u8")||r._checkFormat(e,"m3u8")&&r._checkFormat(t,"mp4")},n.prototype.setStreams=function(e){var t=this,r=e.streams,n=!1,i=null;if(t._streams=r,t._retryStreams=r.slice(0),t._handleWaitingEvent(),p.safari>=6&&r.forEach(function(e){e.format.indexOf("m3u8")>-1&&(e.isPrimary||e.is_primary||!i)&&(i=e,n=!0)}),!n){var s=[];r.forEach(function(e){s.push(parseInt(e.bitrate))}),s=s.sort(),t._bitrateSelector=new o(t.node,s);var l=t._model.playback.targetBitrate?t._model.playback.targetBitrate:t._bitrateSelector.getTargetBitrate();i=t._getBestStream(l)}return i?(t._setSrc(i,e.startTime),n||(t._updateStreamBitrateInfo(i),e.abr&&s.length>1&&(t._eventBus.subscribe(a.Video.TIMEUPDATE,t._onPlaybackProgress,t),t._lastABRCheckTime=0)),!0):!1},n.prototype.setQuality=function(e){var t=this;t._switchSrc(e.stream.url),t._updateStreamBitrateInfo(e.stream)},n.prototype.retryStreams=function(e){var t=this,r=t._currentStream;if(t._retryCount<=f)setTimeout(function(){t._retryStream(r,e)},1e3*g[t._retryCount-1]);else{t._retryCount=0;var n=t._retryStreams.indexOf(r);if(t._retryStreams.splice(n,1),0===t._retryStreams.length)return r;var o=c.findStreamByProperty(t._retryStreams,c.BITRATE,t._bitrateSelector.getTargetBitrate(),t._capabilities);t._retryStream(o,e)}return null},n.prototype._getFirstPrimaryStream=function(){var e=this,t=null;if(e._streams)for(var r=0;r<e._streams.length;r++)if(e._streams[r].isPrimary){t=e._streams[r];break}return t},n.prototype._getBestStream=function(e){var t=this,r=t._getFirstPrimaryStream();return r||(r=c.findStreamByProperty(t._streams,"bitrate",e,t._capabilities)),!r&&t._streams&&t._streams.length>0&&(r=t._streams[0]),r},n.prototype._onPlaybackProgress=function(e){var t=this;if(e-t._lastABRCheckTime>y){t._lastABRCheckTime=e;var r=t._getBestStream(t._bitrateSelector.getRecommendedBitrate());r&&(t._switchSrc(r.url),t._updateStreamBitrateInfo(r))}},n.prototype._updateStreamBitrateInfo=function(e){var t=this;t._bitrateSelector.currentBitrate=e.bitrate,t._eventBus.publish(a.PLAYBACK_INFO,{currentStreamBitrate:e.bitrate,qualityLevels:t._streams.length})},n.prototype._setSrc=function(e,t,r){var n=this;if(n.ended=!1,n._hasPlayed=!1,n.node.src!==e.url||r){if(p.iphone&&n.node.hasOwnProperty("webkitDisplayingFullscreen")&&!n.node.webkitDisplayingFullscreen&&n._areFormatsCrashy(e.format,n._currentSrcFormat)){var o=n.node.parentNode;n.destroy(),o.appendChild(n.create())}if(p.android&&e.live&&(p.chrome&&p.chrome<30||!u.isAndroidVersionAbove4())){var s=u.createErr("R",n._model.playbackState,i.E_INFO,i.INFO_CODES.E_PLAYER_ANDROID_CHROME_REQUIRED);return void n._eventBus.publish(a.INFO,s)}if(n._deleteTracks(),p.mobile&&e.drmType&&("adobe"===e.drmType||"apple"===e.drmType)&&(e.url=e.url+"&dv=0"),n._profiler&&n._profiler.add(a.Metrics.STREAM_REQUEST_TO_RENDER),n.node.src=e.url,t)var l=n._eventBus.subscribe(a.Video.LOADEDMETADATA,function(){n.node.currentTime=t,l.detach()});n._firstPlay=!0,n._currentSrcFormat=e.format,n._currentStream=e,n._profiler&&n.mode===d.VIDEO&&n._profiler.add(a.Metrics.LOAD_TO_LOADED_DATA),p.mobile?n._model.playback.autoplaySupported&&n.node.load():(n.node.load(),n._model.playbackState.state===m.VIDEO&&n.play())}},n.prototype._calculateCanvasPosition=function(){var e=this,t=e.node.videoWidth,r=e.node.videoHeight,n=t/r,o=e.node.clientWidth,i=e.node.clientHeight,a=o/i,s=0,l=0;a>n?(l=i.toFixed(2),s=(n*i).toFixed(2)):(s=o.toFixed(2),l=(o/n).toFixed(2));var d=Math.max((o-s)/2,0),c=Math.max((i-l)/2,0);return{width:s,height:l,left:d,top:c}},n.prototype._seekToCurrentTime=function(){var e=this;e.seek(e._currentTime)},n.prototype._playNewStream=function(){var e=this;e.node.play(),e._canvas.parentNode.removeChild(e._canvas)},n.prototype._finishSwitching=function(){var e=this;e._eventBus.publish(a.Video.SWITCHED),e._isSwitching=!1},n.prototype._switchSrc=function(e){var t=this,r=t.node.clientWidth,n=t.node.clientHeight;if(t.node.src===e)return t._eventBus.publish(a.Video.SWITCHING),void t._eventBus.publish(a.Video.SWITCHED);t._isSwitching=!0,t.node.pause(),t._currentTime=t.node.currentTime;var o=document.createElement("canvas");t._canvas=o,o.className="yvp-switching-canvas",o.width=r,o.height=n;var i=t._calculateCanvasPosition();o.style.cssText="width:"+i.width+"px;height:"+i.height+"px;left:"+i.left+"px;top:"+i.top+"px",t.node.parentNode.appendChild(o),o.getContext("2d").drawImage(t.node,0,0,r,n),t._eventBus.publish(a.Video.SWITCHING),t.node.src=e},n.prototype._retryStream=function(e,t){var r=this;r._setSrc(e,t,!0),r._updateStreamBitrateInfo(e)},n.prototype.play=function(e){var t=this;if(t.ended=!1,t._firstPlay){if(!t._model.playback.autoplaySupported){if(p.ios){var r=t.node.src;t.node.src="",t.node.load(),t.node.src=r}p.mobile&&t.node.load()}}else{var n=isNaN(t.node.duration)?t._model.playlist.getCurrentItem().duration:t.node.duration;_.isNumber(e)&&e>0&&n>e&&(t.node.currentTime=e)}t._firstPlay=!1,t.seeking=!1,t._profiler&&t._profiler.add(a.Metrics.STREAM_PLAY_TO_RENDER),t.node.play()},n.prototype._handleWaitingEvent=function(){var e=this;e._waitingEventTimer&&(clearInterval(e._waitingEventTimer),e._waitingEventTimer=null),e._waitingEventTimer=setInterval(function(){if(!e||!e.node)return void clearInterval(e._waitingEventTimer);var t=e.node.currentTime,r=!1;if(p.safari>=6){var n=0;e.node.buffered&&e.node.buffered.length>0&&(n=e.node.buffered.end(e.node.buffered.length-1)),r=e.node.readyState!==v.VIDEO_TAG_READY_STATES.HAVE_ENOUGH_DATA||n>0&&t>n}if(e.node.seeking)t!==e._lastTime&&e._publishWaitingEvent(!0,!0);else if(t!==e._lastTime&&!r||e.node.paused||0===t){if(t>e._lastTime&&!r){var o=e.seeked||!e._playbackStuck;e._publishWaitingEvent(!1,o),e._seeked=!1}}else e._playbackStuck?e._publishWaitingEvent(!0,!0):e._publishWaitingEvent(!0,!1);e._lastTime=t},b)},n.prototype.getCurrentTime=function(){var e=this;return e.node.currentTime},n.prototype.stopMedia=function(){},n.prototype._publishWaitingEvent=function(e,t){var r=this;r._eventBus.publish(a.Video.WAITING,{type:"waiting",value:e,ignoreBuffering:t}),r._playbackStuck=e}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../bitrate-selector":14,"../constants":18,"../error":22,"../event":"YJm+dH","../states":57,"../stream":"Af6MnA","../util":"jJTEqU","./html5-base.js":50,"./modes":53,"./type":54}],53:[function(e,t,r){t.exports={VIDEO:"video",AD:"ad",VPAID:"vpaid"}},{}],54:[function(e,t,r){t.exports={FLASH:"flash",FLASH_SIMPLE:"flash-simple",HTML5_DASH:"html5-dash",HTML5_HLS:"html5-hls",HTML5_RAW:"html5-raw",HTML5_TV:"html5-tv",HTML5_TV_TIZEN:"html5tv-tizen",HTML5_TV_ORSAY:"html5tv-orsay"}},{}],55:[function(e,t,r){"use strict";function n(e,t){var r=this;r._model=e,r._profiler=t}t.exports=n;var o=e("./util"),i=e("./event"),a="//video-api.yql.yahoo.com/v1/video/user/watchhistory/set?wh=";n.prototype._jsonp=function(e,t,r,n){var i=this;r=r||null,n&&i._profiler.add(n);var a={jsonpHandler:function(o,a){o=o||a.error,n&&i._profiler.setEndTime(n),o?t.call(r,o,null,e):t.call(r,null,a)}};o.jsonp(e,a)},n.prototype.saveToWatchHistory=function(e,t,r){var n=this,o={uuid:e},s=a+encodeURIComponent(JSON.stringify(o));n._jsonp(s,t,r,i.Metrics.SET_WATCH_HISTORY)}},{"./event":"YJm+dH","./util":"jJTEqU"}],56:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._model=e,n.guid=e?e.guid:"",n._outstandingRequests=[],n._eventBus=t,n._profiler=r,n._xhrErrorCodes={0:{timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED},1:{timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED},2:{408:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408,timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED},3:{408:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408,timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE},"default":{timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_TIMEOUT,cors:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_CORS_ERROR,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_ERROR}},i.preconnect("preConnector","//"+i.getHostname(_))}t.exports=n;var o=e("../../lib/user-agent"),i=e("./util"),a=e("./error"),s=e("./event"),l=e("../../lib"),d=e("./navigator-info").network,c=(e("../../lib/logger"),e("./media-store")),p=e("./renderers/type"),u=e("./constants"),_="//video-api.yql.yahoo.com/v1/video/sapi",m="//video-api.yql.yahoo.com/v1/video/user/prefs/get",v="//video-api.yql.yahoo.com/v1/video/user/ccprefs/set",y="//video-api.yql.yahoo.com/v1/video/alias/channels",f=2,g=6e4;n.prototype._buildClipParams=function(e,t){var r=this,n=[],a=[],s=r._model.playlist.getCurrentItem();e.rt.forEach(function(e){var r=t[e];n=n.concat(r.acceptedProtocols),a=a.concat(r.preferredFormats)}),n=i.uniquifyArray(n),a=i.uniquifyArray(a);var l=e.rt.indexOf(p.FLASH)>=0||e.rt.indexOf(p.FLASH_SIMPLE)>=0?"flash":"html",d={protocol:n.join(","),format:a.join(","),srid:Math.floor(4294967295*Math.random()),rt:l,devtype:o.tv?"tv-widget":o.mobile?"smartphone":"desktop",offnetwork:i.isOffNetwork(),region:e.region,site:e.site,expb:e.expb,expn:e.expn,lang:e.lang,width:e.width,height:e.height,resize:!0,ps:e.ps,autoplay:e.autoplay,image_sizes:e.showPlaylist?u.PLAYLIST_THUMB_DIMENSION:"",acctid:e.acctid,synd:e.synd,pspid:e.pspid,plidl:e.plidl,topic:e.topic,pver:r._model.version,"try":s&&s.tryCount||1,failover_count:s&&s.failoverCount||0};o.tv&&(d.dv=0,d.devtype="tv-widget",d.man=r._model.CTV.man,d["class"]=r._model.CTV["class"]),r._shouldPrefetchMasterPlaylist(e.rt)&&(d.hlspre="true");var c=r._model.getModelSchema();for(var _ in r._model.CMS)_ in c.CMS||(d[_]=r._model.CMS[_]);return d},n.prototype._shouldPrefetchMasterPlaylist=function(e){if(!e||!l.isArray(e))return!1;var t=e.indexOf(p.HTML5_HLS);if(-1!==t)return!0;var r=e.indexOf(p.HTML5_RAW),n=e.indexOf(p.FLASH);return-1!==r&&-1!==n&&n>r?!1:-1!==n?!0:!1},n.prototype.loadClips=function(e,t,r,n){var l=this,p=l._buildClipParams(e,t);if(o.mobile&&!d.available&&(p.conntype=!0),""===p.format)l._eventBus.publish(s.INFO,i.createErr("P",l._model.playbackState,a.E_INFO,a.INFO_CODES.E_PLAYER_NO_COMPATIBLE_FORMAT));else{var u=l._model.playlist.getCurrentItem(),_=u&&u.recoveryStatus,m=_===c.ItemRecoveryStatus.RECOVERING||l._model.failOver&&l._model.failOver.sapiUrl?0:null;l._makeSapiYqlpRequest(e.uuids,"/streams",p,r,m,n)}},n.prototype.loadRelatedVideosChannel=function(e,t){var r=this,n="wf-channel=related-videos",a=y+"/"+n,s={video_uuid:e.videoUuid,channel_id:e.playlistId,channel_alias:e.playlistAlias,count:e.count,start:e.start,dev_type:o.mobile?"smartphone":"desktop",offnetwork:i.isOffNetwork(),site:e.site,region:e.region,lang:e.lang,expn:e.expn,expb:e.expb,vp:0,image_sizes:u.PLAYLIST_THUMB_DIMENSION,ssl:!0};a+="?"+i.querystring(s),r._makeSAPIRequest(a,t)},n.prototype.loadPlaylist=function(e,t,r){var n=this,o=n._buildClipParams(e,t);n._makeSapiYqlpRequest(e.uuid,"/playlist",o,r)},n.prototype.cancelAll=function(){var e=this;e._outstandingRequests.forEach(function(e){e()}),e._outstandingRequests=[]},n.prototype._makeSapiYqlpRequest=function(e,t,r,n,o,a){var s=this,l=_;switch(l+=t,l+="/"===l[l.length-1]?"":"/",r.env){case"dev":case"corp":case"int":case"int1":case"qa1":case"prev":case"perf":case"stage":l=l.replace(/video-api\.yql/i,"video-yql.rc-staging.media");break;case"beta":l=l.replace(/video-api/i,"video.beta.media")}l+=e+"?"+i.querystring(r),s._makeSAPIRequest(l,n,o,a)},n.prototype._generateConfig=function(e,t,r){var n=this;return{context:n,timeout:2e4,responseTypeJson:!0,withCookie:!0,jsonpHandler:e,successHandler:t,failureHandler:r}},n.prototype._makeSAPIRequest=function(e,t,r,n){var o=this,d=o.getSapiRequestCacheKeyFromUrl(e);l.isNullOrUndefined(r)&&(r=f);var p=e+"&try="+(f-r+1),u=e.indexOf(_+"/streams")>-1;l.isNullOrUndefined(n)&&(n=!1);var y=function(e){var t=i.createErr("S",o._model.playbackState,a.E_WARNING,e.code,e.msg,e.debugMsg,e.prefetch);o._eventBus.publish(s.WARNING,t)},b=function(e){if(o._profiler&&u){var t=o._profiler.getItem(s.Metrics.SAPI_REQUEST);if(t&&!t.endTime){var r=e?t.startTime:null;o._profiler.setEndTime(s.Metrics.SAPI_REQUEST,r)}}},A=function(s,l,d){if(s=s||l.error,o._outstandingRequests.splice(o._outstandingRequests.indexOf(L),1),o._publishApiCallInfo(e,l,d),s)if(o._model.playlist.getCurrentItem().tryCount++,i.replaceStrParam(e,"try",o._model.playlist.getCurrentItem().tryCount),0===r)b(!0),t(s,null,e);else{var c=a.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE;s.message===i.JSONP_TIMED_OUT&&(c=a.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT),y({code:c,msg:null,debugMsg:e+" timeout: "+Date.now(),prefetch:n}),o._makeSAPIRequest(e,t,r-1,n)}else b(!1),t(null,l)},E=function(r,n,a){if(o._outstandingRequests.splice(o._outstandingRequests.indexOf(L),1),b(!1),t(null,r),n!==!0&&(o._publishApiCallInfo(p,r,a),d&&o._model.playlist.getCurrentItem()&&o._model.playlist.getCurrentItem().isLive())){var s={val:JSON.stringify(r),expiration:(new Date).getTime()+g,cachedVs:c.getSapiVsId(e)};0===o._model.playlist.getCurrentItem().failoverCount&&i.localStorage.put(d,s)}},h=function(a,s,d,c,u){var _=s,m=d;o._outstandingRequests.splice(o._outstandingRequests.indexOf(L),1),o._model.playlist.getCurrentItem()&&o._model.playlist.getCurrentItem().tryCount++,s=l.isNullOrUndefined(s)||l.isNullOrUndefined(o._xhrErrorCodes[s])?"default":s,a.message===i.XHR_TIMEOUT?d="timeout":l.isNullOrUndefined(o._xhrErrorCodes[s][d])&&(d="default");var v=o._xhrErrorCodes[s][d];if(o._publishApiCallInfo(p,null,u),0===r){b(!0);var f=i.createErr("S",o._model.playbackState,a,v,null,"state: "+_+"; status: "+m+"; timeDiff: "+c);t(f,null,e)}else y({code:v,msg:null,debugMsg:e+"; state: "+_+"; status: "+m,prefetch:n}),i.replaceStrParam(e,"try",o._model.playlist.getCurrentItem()&&o._model.playlist.getCurrentItem().tryCount),o._makeSAPIRequest(e,t,r-1,n)};if(d){i.localStorage.getAllKeys().forEach(function(e){/sapi\/streams/.test(e)&&i.localStorage.get(e).expiration<(new Date).getTime()&&i.localStorage.remove(e)});var T=i.localStorage.get(d);if(T){var S=JSON.parse(T.val);return o._model.CMS.cachedVs=T.cachedVs,void E(S,!0)}}u&&!n&&o._profiler&&!o._profiler.getItem(s.Metrics.SAPI_REQUEST)&&o._profiler.add(s.Metrics.SAPI_REQUEST);var I=o._generateConfig(A,E,h);u&&(I.collectPerfData=!0);var L,M=e.indexOf(m)>-1||e.indexOf(v)>-1;L=M?i.jsonp(e,I):i.ajax(e,I),o._outstandingRequests.push(L)},n.prototype._publishApiCallInfo=function(e,t,r){var n=this;if(r){if(r.url=e,r.instrument=t&&t.query&&t.query.results&&t.query.results.instrument?JSON.stringify(t.query.results.instrument):"none",r.perfInfo="na",r.perfStack="na",r.source="player",r.resourceTiming){var o={};if(["connectEnd","connectStart","domainLookupEnd","domainLookupStart","duration","fetchStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","startTime"].forEach(function(e){o[e]=r.resourceTiming[e].toFixed(2)}),r.perfInfo=JSON.stringify(o),r.perfStack=[],r.resourceTimingEntries&&r.resourceTiming.requestStart-r.resourceTiming.connectStart>500)for(var i=0;i<r.resourceTimingEntries.length;i++)r.resourceTimingEntries[i].startTime<r.resourceTiming.startTime&&r.perfStack.push({url:r.resourceTimingEntries[i].name,st:r.resourceTimingEntries[i].startTime.toFixed(2),du:(r.resourceTimingEntries[i].responseEnd-r.resourceTimingEntries[i].startTime).toFixed(2)});r.perfStack=0===r.perfStack.length?"na":JSON.stringify(r.perfStack)}n._eventBus.publish(s.API_CALLED,r)}},n.prototype.updateUserPreferences=function(e,t){var r=this;r._makeSAPIRequest(v+"?userccp="+encodeURIComponent(JSON.stringify(t)),e)},n.prototype.getUserPreferences=function(e){var t=this;t._makeSAPIRequest(m,e)},n.prototype.getSapiRequestCacheKeyFromUrl=function(e){var t=this,r=e.split(/\/sapi\/streams\//),n=null;return t._model.CMS.enableCache&&r.length>1&&(n=r[1].replace(/&ps=(.*?)&/g,"&"),n=n.replace(/&try=(.*?)&/g,"&"),n="sapi/streams/"+n.replace(/&srid=(.*?)&/g,"&")),n}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./constants":18,"./error":22,"./event":"YJm+dH","./media-store":29,"./navigator-info":42,"./renderers/type":54,"./util":"jJTEqU"}],57:[function(e,t,r){t.exports={INIT:"init",WAITING:"waiting",VIDEO:"video",END:"end"}},{}],Af6MnA:[function(e,t,r){"use strict";function n(e,t){return t.some(function(t){return e===t})}function o(e,t){var r=!1;return t.forEach(function(t){e.indexOf(t)>-1&&(r=!0)}),r}var i=function(e,t,r){var n=null;return e&&e.forEach(function(e){n?e[r]<=t&&(n=e):n=e}),n};r.findAcceptedStreams=function(e,t){return e.filter(function(e){return n(e.format,t.acceptedFormats)&&o(e._getProtocol(),t.acceptedProtocols)})},r.findStreamByProperty=function(e,t,n,o){return e=r.findAcceptedStreams(e,o).sort(function(e,r){return e[t]-r[t]}),"resolution"===t&&(t="height"),i(e,n,t)},r.isHlsLive=function(e){return e.url.match(/\.m3u8/)&&e.live||!1},r.BITRATE="bitrate",r.RESOLUTION="resolution"},{}],"./nextgen/src/stream.js":[function(e,t,r){t.exports=e("Af6MnA")},{}],"./nextgen/src/strings.js":[function(e,t,r){t.exports=e("XwKsC9")},{}],XwKsC9:[function(e,t,r){"use strict";r.i18n = {"MENU":"Menu","ELAPSED_TIME":"elapsed time","REMAINING_TIME":"remaining time","NUM_SECONDS":"{num-seconds} seconds","NUM_SECOND":"{num-seconds} second","EMBED":"Embed","LIVE":"Live","PLAY_VIDEO":"Play Video","CONTENT_RESTRICTED":"Content restricted","AGE_GATE_DESC":"This content is intended for mature audiences. Viewer discretion advised.","SIGN_IN_TO_VIEW_ACTION":"Sign in to view","CONTINUE_ACTION":"Continue","AGE_GATE_BDAY_DESC":"This content is intended for mature audiences. Please enter your date of birth below to continue.","SUBMIT_ACTION":"Submit","AGE_GATE_NOT_ALLOWED_DESC":"Sorry. This content is intended for mature audiences.","MATURE":"Mature","SETTINGS":"Settings","VIDEO_QUALITY":"Video quality","QUALITY":"QUALITY","AUTO":"Auto","LOW":"Low","MEDIUM":"Medium","HIGH":"High (HD)","LOGIN_MESSAGE":"Please sign in to use this feature.","EMBED_NOT_ALLOWED":"This video cannot be embedded due to provider licence restrictions.","TOP":"Top","BOTTOM":"Bottom","CC_PREVIEW":"Bottom","NO_ITEM_AVAILABLE":"No item available","CC":"Closed captions","LANGUAGE":"Language","POSITION":"Position","ERR_TECH_DIFFICULTIES":"If this error is occurring repeatedly, we may be experiencing technical difficulties. We apologise for the inconvenience. <a class='yvp-browser-refresh' href='javascript:window.location.reload();'>Refresh browser</a>","ERR_TITLE_SOMETHING_WENT_WRONG":"Something went wrong","ERR_TITLE_VIDEO_NOT_AVAILABLE":"Video not available","UP_NEXT":"Up next","BACK":"Back","CC_PREVIEW_MESSAGE":"Captions will look like this","BACKGROUND":"background","EFFECTS":"effects","RAISED":"raised","PAUSE_VIDEO":"Pause video","GO_TO_FULLSCREEN":"Go to full screen","GO_TO_NORMAL_SCREEN":"Go to normal screen","UNMUTE":"Unmute","MUTE":"Mute","SEEK_SLIDER":"Seek slider","FULLSCREEN_SPACE":"Full screen","PRESETS":"Presets","CC_TYPE_SIZE":"Type size","FEEDBACK_SUBMIT_BUTTON":"Submit","CHROMECAST":"Chromecast","DISCONNECT":"Disconnect","CAST_PLAYING_RECEIVER":"Playing on {device-name}","CC_SETTINGS":"Closed caption settings","ADV_SHORT":"Ad:","TEXT":"Text","STYLE_OPTIONS":"Style options","PLAIN":"Plain","SHADOW":"Shadow","LOWERED":"Lowered","OUTLINE":"Outline","CAPTIONS_ON":"Captions on","CAPTIONS_OFF":"Captions off","CAPTIONS_AVAILABLE":"Captions available","CAPTIONS_NOT_AVAILABLE":"Captions not available","EXIT_FULLSCREEN":"Exit full screen","ERR_LIVE_IOS_PLAYBACK":"Unfortunately, an error occurred. To try again, either <a href='javascript:window.location.reload();'>refresh</a> the browser or download the <a class='yvp-browser-refresh' href='https://mobile.yahoo.com/sports'>Yahoo Sports app</a>","FEEDBACK_SUBTITLE_RESPONSE_ID":"Report id: ","ERR_NETWORK_ISSUE":"Videos cannot play due to a network issue. Please check your Internet connection and try again.","ERR_FLASH_LATEST_DOWNLOAD":"The latest version of Adobe Flash Player is required to play this video. <a class='yvp-error-flash-download-wrapper' href='http://get.adobe.com/flashplayer/'>Download the free Flash Player here.</a>","ERR_MISSING_OR_DAMAGED":"Unfortunately, this video is missing or damaged and cannot be played.","ERR_BROWSER_UNSUPPORTED":"This browser is unsupported. To view this video, try another browser.","ERR_GENERAL_ERROR":"Unfortunately, an error occurred. To try again, <a href='javascript:window.location.reload();'>refresh the browser</a>.","ERR_TITLE_CANNOT_PLAY_VIDEO":"Cannot play video","ERR_DEVICE":"Due to licensing restrictions, this video cannot be viewed on this device.","ERR_DRM_BAD_LICENSE_FILE":"The video licence file must be reset to watch this video. See the <a href='http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager08.html'> Flash Settings Manager support</a> page for details.","ERR_DRM_INCOGNITO_MODE":"This video cannot be played in incognito or private browsing mode. Play it in a normal browser tab instead.","ERR_DRM_RESTRICTED":"Please download the Yahoo <a href='https://yho.com/5xx'>Screen app</a> to watch this video.","ERR_EMBED":"Due to licensing restrictions, this video can only be viewed on Yahoo.","ERR_FLASH_IS_BLOCKED":"This video requires Flash. Verify that Flash is not disabled or blocked, then <a href='javascript:window.location.reload();'>reload</a> the page.","ERR_GEO":"Unfortunately, this video is not available in your region.","ERR_UNAUTHORIZED":"You must be a paid subscriber to view this video.","ERR_UNAVAILABLE":"Unfortunately, this video is no longer available.","ERR_DRM_CHROME_SETTING":"You must adjust your Chrome browser settings to watch this secure video. Open chrome://settings/content in the Chrome browser, then tick the 'Allow identifiers for protected content' tick box.","FEEDBACK_BUTTON":"Report issue","FEEDBACK_TITLE":"Report Yahoo Videoplayer issue","FEEDBACK_SUBTITLE_RESPONSE_MESSAGE":"Thank you for your report.","FEEDBACK_DISCLAIMER":"* By submitting this report, you agree to allow Yahoo to collect video playback data from your current session to help us deliver a great experience to all users. Thanks for your help!","ERR_LIVE_PLAYBACK_COMPLETE":"This live event has ended.","NOW_PLAYING":"Now Playing","ERR_COOKIE_DISABLED":"This video cannot be played due to a browser settings issue. Enable third party cookies in your browser, then <a href='javascript:window.location.reload();'>reload</a> the page.","ERR_BLACKOUT":"Due to local blackout restrictions, this live event cannot be viewed in your area.","ERR_ANDROID_LIVE_CHROME_REQUIRED":"This video requires Android 4.0 or above and the latest version of the Google Chrome browser.<br>You can get the latest version of Chrome from the <a href=\"https://play.google.com/store/apps/details?id=com.android.chrome\">Google Play store</a>."}},
{}],dsc79Q:[function(e,t,r){"use strict";function n(e,t,r){var n=this;e=o.isString(e)?document.getElementById(e):e,n.element=e,n.moved=!1,n.mouseDown=!1,o.isFunction(t)?(n.onTap=t,n.shouldPropagate=o.isBoolean(r)?r:!1):(n.onTap=function(){},n.shouldPropagate=o.isBoolean(t)?t:!1),e.addEventListener("tap",n.onTap,!1),i.forEach(function(t){e.addEventListener(t,n,!1)})}t.exports=n;var o=e("../../lib"),i=["touchstart","touchmove","touchend","touchcancel","mousedown","mouseup"];n.isTouchDevice=!1,n.prototype._start=function(e){var t=this,r="touchstart"===e.type;if(r){n.isTouchDevice=!0;var o=e.touches[0]}t.mouseDown=!0,t.startX=r?o.clientX:e.clientX,t.startY=r?o.clientY:e.clientY,t.lastPageX=r?o.pageX:e.pageX,t.lastPageY=r?o.pageY:e.pageY,t.moved=!1},n.prototype._move=function(e){var t=this,r=e.touches[0];t.lastPageX=r.pageX,t.lastPageY=r.pageY,(Math.abs(r.clientX-t.startX)>10||Math.abs(r.clientY-t.startY)>10)&&(t.moved=!0)},n.prototype._end=function(e){var t,r=this;!r.moved&&r.mouseDown&&(r.mouseDown=!1,void 0!==document.CustomEvent?t=new document.CustomEvent("tap",{bubbles:!0,cancelable:!0}):(t=document.createEvent("Event"),t.initEvent("tap",!0,!0)),t.pageX=e.pageX||r.lastPageX,t.pageY=e.pageY||r.lastPageY,t.eventSource=e.srcElement,t.eventTarget=e.target,(!e.handled||r.shouldPropagate)&&r.element.dispatchEvent(t),e.handled=!0)},n.prototype._cancel=function(){var e=this;e.moved=!1},n.prototype.destroy=function(){var e=this,t=e.element;t&&(t.removeEventListener("tap",e.onTap,!1),i.forEach(function(r){t.removeEventListener(r,e,!1)}),e.element=null)},n.prototype.handleEvent=function(e){var t=this;switch(e.type){case"mousedown":if(n.isTouchDevice)return;case"touchstart":t._start(e);break;case"touchmove":t._move(e);break;case"mouseup":if(n.isTouchDevice)return;case"touchend":t._end(e);break;case"touchcancel":t._cancel(e)}}},{"../../lib":"bRhrlU"}],"./nextgen/src/tap.js":[function(e,t,r){t.exports=e("dsc79Q")},{}],"./nextgen/src/util.js":[function(e,t,r){t.exports=e("jJTEqU")},{}],jJTEqU:[function(e,t,r){"use strict";function n(e){return a.isString(e)?e:a.isBoolean(e)?e.toString():a.isNumber(e)&&isFinite(e)?e.toString():""}function o(e){var t,n={"www.yahoo.com":!0,"news.yahoo.com":!0,"sports.yahoo.com":!0,"finance.yahoo.com":!0,"answers.yahoo.com":!0,"www.tumblr.com":!0,"beta.finance.yahoo.com":!0,"au.yahoo.com":!0,"be.yahoo.com":!0,"fr-be.yahoo.com":!0,"br.yahoo.com":!0,"ca.yahoo.com":!0,"de.yahoo.com":!0,"espanol.yahoo.com":!0,"es.yahoo.com":!0,"fr.yahoo.com":!0,"gr.yahoo.com":!0,"hk.yahoo.com":!0,"id.yahoo.com":!0,"ie.yahoo.com":!0,"in.yahoo.com":!0,"it.yahoo.com":!0,"my.yahoo.com":!0,"nz.yahoo.com":!0,"ro.yahoo.com":!0,"se.yahoo.com":!0,"sg.yahoo.com":!0,"tw.yahoo.com":!0,"uk.yahoo.com":!0,"us.yahoo.com":!0,"ve.yahoo.com":!0,"vn.yahoo.com":!0,"maktoob.yahoo.com":!0,"en-maktoob.yahoo.com":!0,"za.yahoo.com":!0,"qc.yahoo.com":!0,"att.yahoo.com":!0,"espanol.att.yahoo.com":!0,"frontier.yahoo.com":!0,"verizon.yahoo.com":!0,"ca.rogers.yahoo.com":!0,"fr-ca.rogers.yahoo.com":!0,"tatadocomo.yahoo.com":!0,"tikona.yahoo.com":!0,"ideanetsetter.yahoo.com":!0,"mtsindia.yahoo.com":!0,"smartfren.yahoo.com":!0,"tournament.fantasysports.yahoo.com":!0,"baseball.fantasysports.yahoo.com":!0,"football.fantasysports.yahoo.com":!0,"hockey.fantasysports.yahoo.com":!0,"basketball.fantasysports.yahoo.com":!0,"uk.news.yahoo.com":!0,"uk.sports.yahoo.com":!0,"fr.news.yahoo.com":!0,"fr.sports.yahoo.com":!0,"de.nachrichten.yahoo.com":!0,"de.sports.yahoo.com":!0,"it.notizie.yahoo.com":!0,"uk.style.yahoo.com":!0,"de.style.yahoo.com":!0,"fr.style.yahoo.com":!0,"es.vida-estilo.yahoo.com":!0,"it.style.yahoo.com":!0,"uk.movies.yahoo.com":!0,"de.kino.yahoo.com":!0,"m6info.yahoo.com":!0},o=/.*mg\d*\.mail\.yahoo\.com$/,a=r.getWindow(),s=a.location.protocol,l=a.location.hostname,d="player.swf",c="https:"===s?r.assetDomainHttps:r.assetDomainHttp,p=c+"/rx/builds/"+e+"/assets/"+d;return i.chrome&&(a.parent!==a&&(t=r.parseDomain(a.document.referrer),t&&(l=t)),n[l]?p=s+"//"+l+"/sy/rx/builds/"+e+"/assets/"+d:o.test(l)&&(p=s+"//"+l+"/lyimg/videoinmail/"+e+"/assets/"+d)),p}var i=e("../../lib/user-agent"),a=e("../../lib"),s=(e("../../lib/logger"),e("xhr")),l=e("./error"),d=e("./renderers/type"),c=!1;r.assetDomainHttp="http://l.yimg.com",r.assetDomainHttps="https://s.yimg.com",r.setSingleton=function(e,t){window.YAHOO=window.YAHOO||{},window.YAHOO.VideoPlatform=window.YAHOO.VideoPlatform||{},window.YAHOO.VideoPlatform[e]=t,window.YUI&&!c&&(c=!0,window.YUI.add("videoplayer",function(e){Object.keys(window.YAHOO.VideoPlatform).forEach(function(t){var r=window.YAHOO.VideoPlatform[t];e.namespace("VideoPlatform")[t]=r})}))},r.getSingleton=function(e){return window.YAHOO&&window.YAHOO.VideoPlatform&&window.YAHOO.VideoPlatform[e]?window.YAHOO.VideoPlatform[e]:null},r.createErr=function(e,t,r,n,o,a,s){return new l.Error(e,r,n,{playbackState:t,msg:o,debugMsg:a,prefetch:s},i)},r.extend=function(e){a.isObject(e)||(e={});var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t)for(var r in t)e[r]=t[r]}),e},r.once=function(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments),t.value)};return t.called=!1,t},r.querystring=function(e,t,r,o){return t=t||"&",r=r||"=",o=o||encodeURIComponent,a.isObject(e)&&(e=[e]),e.map(function(e){return Object.keys(e).map(function(i){var s=o(n(i));return null===e[i]?s:(s+=r,a.isArray(e[i])?e[i].map(function(e){return s+o(n(e))}).join(t):s+o(n(e[i])))}).join(t)}).join(t)},r.getCookie=function(e,t){t=t||{},e+="=";for(var r=document.cookie.split(/;\s*/),n=r.length-1;n>=0;n--)if(!r[n].indexOf(e)){var o=r[n].replace(e,"");return t.raw?o:decodeURIComponent(o)}},r.setCookie=function(e,t,r){r=r||{},r.raw||(t=encodeURIComponent(t));var n=e+"="+t,o=r.expires?r.expires.toGMTString():"Thu, 01-Jan-1970 00:00:01 GMT";r.session||(n+="; expires="+o);var i=r.path;i&&(n+="; path="+i);var a=r.domain;a&&(n+="; domain="+a),document.cookie=n},r.generateGuid=function(){return Math.floor(4294967295*Math.random()).toString()},r.sanitizeAndUnescape=function(e){if(a.isNullOrUndefined(e))return"";var t=e.toString().replace(/<\/?[^>]+>/g,""),r=document.createElement("div");return r.innerHTML=t,r.textContent},r.getHostUrl=function(){var e=document.referrer;try{window.top.location.href&&(e=window.top.location.href)}catch(t){}return e},r.generateLoginUrl=function(e,t,n){var o="https://login.yahoo.com",i={".src":"vp",".intl":e,".lang":t,".done":n||r.getHostUrl()};return r.fillUrl(o,i)},r.fillUrl=function(e,t){return e+"?"+r.querystring(t);
},r.isOffNetwork=function(e){e=e||r.getHostUrl();var t=r.parseDomain(e),n=["yahoo.com","yahoo.co.jp","yahoo.net","yahoo.fr","yimg.com","rivals.com","tumblr.com","txmblr.com","flickr.com","maktoob.com","grindtv.com","thepostgame.com","nfl.com","nfljapan.com","movie.yahoo-leisure.hk","mmovie.yahoo-leisure.hk","localhost"];return e?i.samsung?!1:!t||!n.some(function(e){return-1!==t.indexOf(e,t.length-e.length)}):!1},r.isIFrame=function(){try{return window.top!==window.self}catch(e){return!0}},r.render=function(e,t,r){var n=document.createElement("div");return n.innerHTML=e.render(t,r),n.children[0]},r.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},r.getTextFromNode=function(e){return e?e.textContent.trim():null},r.parseDomain=function(e){var t=/^https?:\/\/([A-Za-z0-9\.\-]*)(?:$|\/|:)/.exec(e);return t?t[1]:null},r.parseRootHost=function(e){var t=r.parseDomain(e),n=null;if(t){var o=t.split(".");n=o.length>=2?o[o.length-2]:t}return n},r.localStorage={get:function(e){var t=null;try{t=JSON.parse(localStorage.getItem(e))}catch(r){t=null}return t},put:function(e,t){if(!e||!t)return!1;try{return t=JSON.stringify(t),localStorage.setItem(e,t),!0}catch(r){return!1}},remove:function(e){try{localStorage.removeItem(e)}catch(t){return}},getAllKeys:function(){try{for(var e=[],t=0,r=localStorage.length;r>t;++t)e.push(localStorage.key(t));return e}catch(n){return e}}},r.sendImageBeacon=function(e){function t(){n.onload=n.onabort=n.onerror=null,n=null}e=r.fixProtocol(e);var n=new Image;n.onload=n.onabort=n.onerror=t,n.src=e},r.sendIframeBeacon=function(e){var t=this;e=r.fixProtocol(e);var n,o=Math.random(),i="vp-beacons",a=document.querySelector("#"+i),s=i+"-"+o;return a||(a=t.createBeaconsIframe(document,i),document.body.appendChild(a)),n=t.createBeaconsIframe(a.contentDocument,s),n.src=e,"complete"===a.contentDocument.readyState?a.contentDocument.body.appendChild(n):a.contentDocument.body.onload=function(){a.contentDocument.body.appendChild(n)},!0},r.sendUnloadBeacon=function(e){navigator&&navigator.sendBeacon?navigator.sendBeacon(e,null):r.sendImageBeacon(e)},r.createBeaconsIframe=function(e,t){var r=e.createElement("iframe");return r.frameBorder=0,r.width=0,r.height=0,r.marginwidth=0,r.marginheight=0,r.hspace=0,r.vspace=0,r.frameborder=0,r.scrolling="no",r.id=t,r.style.display="none",r.title="",r},r.getWindow=function(){return window},r.getAssetUrl=function(e,t,n){var i,a=r.getWindow(),s=a.location.protocol,l="https:"===s?r.assetDomainHttps:r.assetDomainHttp;return i=e?"/assets/"+n:"player.swf"===n?o(t):l+"/rx/builds/"+t+"/assets/"+n},r.getScriptUrl=function(e,t,n){var o,i=window.location.href.match(/videoplayer.*\-debug.js/)||window.location.href.match(/minimal\.html/)?"-debug.js":"-min.js";if(e)o="/"+n+"-debug.js";else{var a="https:"===document.location.protocol?r.assetDomainHttps:r.assetDomainHttp;o=a+"/rx/builds/"+t+"/"+n+i}return o},r.classList=function(e){function t(t){return function(r){var n=e&&a.isString(e.className)?e.className.split(/\s+/):[],o=n.indexOf(r),i=t(n,o,r);return e&&a.isString(e.className)&&(e.className=n.join(" ")),i}}if(e.classList)return e.classList;var r={add:t(function(e,t,r){~t||e.push(r)}),remove:t(function(e,t){~t&&e.splice(t,1)}),toggle:t(function(e,t,r){~t?e.splice(t,1):e.push(r)}),contains:t(function(e,t){return!!~t})};return r},r.forceDOMRedrawOnElement=function(e){e&&e.offsetHeight},r.uniquifyArray=function(e){return e.filter(function(e,t,r){return r.indexOf(e)===t})},r.isInternalUser=function(){var e=r.getSingleton("PlayerHosting");return e&&"s"===e.env},r.strSubstitute=function(e,t){return e.replace(/\{([^\{\}]*)\}/g,function(e,r){var n="function"==typeof t?t(r):t[r];return a.isNullOrUndefined(n)?e:n})},r.showUserAuthPage=function(e){var t="https://login.yahoo.com/?.src=vp&.intl={region}&.lang={language}&.done={referrer}",n=r.strSubstitute(t,{region:e.baseConfig.region,language:e.baseConfig.lang,referrer:encodeURI(r.getHostUrl())});r.redirect(n)},r.lazyLoad=function(e,t,r,n){function o(t){i.loadedScripts[e]&&i.loadedScripts[e].forEach(function(e){e(t)}),i.loadComplete[e]=t,clearTimeout(l)}var i=this,s=document.createElement("script");if(a.isNullOrUndefined(i.loadedScripts)&&(i.loadedScripts={},i.loadComplete={}),a.isNullOrUndefined(i.loadedScripts[e])&&(i.loadedScripts[e]=[],i.loadComplete[e]=!1),i.loadedScripts&&i.loadedScripts.hasOwnProperty(e)){if(i.loadComplete[e]!==!1)return r(i.loadComplete[e]);if(i.loadedScripts[e].push(r),i.loadedScripts[e].length>1)return}s.async=!0,s.src=e;var l=window.setTimeout(function(){i.loadedScripts[e]&&i.loadedScripts[e].forEach(function(e){e("Script load timeout")}),i.loadComplete[e]="Script load timeout"},t);return s.onload=function(){o(null)},s.onerror=function(){o("Failed to load script")},n&&o("Cancelling script execution"),document.body.appendChild(s),function(){o("Cancelling script execution")}},r.XHR_ERROR="XHR error",r.XHR_TIMEOUT="XHR request timed out",r.ajax=function(e,t){e=r.fixProtocol(e);var n=2,o=t.context,l=t.responseTypeJson,d=t.withCookie,c=t.timeout,p=r.once(t.successHandler),u=r.once(t.failureHandler),_=(a.isNullOrUndefined(t.earlyRetries)?n:t.earlyRetries,!1),m=null,v={url:e,cors:i.ie&&i.ie<10||d,withCredentials:d,timeout:c||3e3};if(o&&p&&u){var y=(new Date).getTime(),f=new s(v,function(n,i,s){if(!_)if(t.collectPerfData&&(m={},a.isFunction(f.getResponseHeader)&&(m.resp_len=f.getResponseHeader("Content-Length")||"na"),window.performance&&window.performance.getEntriesByName&&(m.resourceTiming=window.performance.getEntriesByName(location.protocol+e).pop(),m.resourceTimingEntries=window.performance.getEntries()),m.http_code=i.status),n){i.timeDiff=(new Date).getTime()-y;var d=null;a.isFunction(f.getResponseHeader)&&(d=f.getResponseHeader("Access-Control-Allow-Origin"));var v=window.location.protocol+"//"+window.location.host;if(d&&d!==v)u.call(o,new Error(r.XHR_ERROR),"default","cors");else{var g=i.timeDiff>=c?r.XHR_TIMEOUT:r.XHR_ERROR;u.call(o,new Error(g),i.previousState,i.status,i.timeDiff,m)}}else p.call(o,l?JSON.parse(s):s,!1,m)});f.previousState=f.readyState;var g=f.onreadystatechange;f.onreadystatechange=function(){4===f.readyState?g.call(f):f.previousState=f.readyState}}return function(){_=!0}},r.JSONP_ERROR="jsonp error",r.JSONP_TIMED_OUT="jsonp request timed out",r.jsonp=function(e,t){function n(e){}function o(e){s.removeChild(c),e?delete window[a]:window[a]=function(){},clearTimeout(p)}function i(){n("cancelled"),window[a]&&o(!1)}e=r.fixProtocol(e);var a,s=document.getElementsByTagName("head")[0],l=r.once(t.jsonpHandler);do a="_callback"+Math.round(1e7*Math.random());while(void 0!==window[a]);var d=e+(e.indexOf("?")+1?"&":"?");d+="callback="+a;var c=document.createElement("script");c.type="text/javascript",c.src=d;var p=window.setTimeout(function(){n("timeout"),o(!1),l(new Error(r.JSONP_TIMED_OUT),null,r.fetchJsonpPerfData(e,a,t.collectPerfData))},2e4);return c.onerror=function(){o(!0),l(new Error(r.JSONP_ERROR),null,r.fetchJsonpPerfData(e,a,t.collectPerfData))},window[a]=function(n){o(!0),l(null,n,r.fetchJsonpPerfData(e,a,t.collectPerfData,n))},s.appendChild(c),i},r.fetchJsonpPerfData=function(e,t,r,n){var o={};if(r){if(o.resp_len="na",window.performance&&window.performance.getEntriesByName,n){var i=location.protocol+e+"&callback="+t;o.resourceTiming=window.performance.getEntriesByName(i).pop(),o.resourceTimingEntries=window.performance.getEntries()}n&&(o.http_code=n.status||"na",o.resp_len=n.length||"na")}return o},r.isFlashInstalled=function(){if(void 0!==r.isFlashInstalledMem)return r.isFlashInstalledMem;var e=null;if(i.ie)try{var t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash");e=t.GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(",")}catch(n){}else{var o=navigator.mimeTypes["application/x-shockwave-flash"];if(o){var a=o.enabledPlugin;a&&(e=a.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split("."))}}return e?r.isFlashInstalledMem="0"!==e[0]:r.isFlashInstalledMem=!1,r.isFlashInstalledMem},r.getMediaCDNName=function(e,t,n){var o,i,a,s,l="unknown";if(t&&t.length>0){if(i=t[0],i.cdn&&i.cdn.length>0)return i.cdn;i.url?o=i.url:(a=i.host,s=i.path,o=a+s),!e.isLive()&&i.hlsInfo&&(o=i.hlsInfo.ts_url)}else n&&n.length>0&&(o=n);return o&&o.length>0&&(l=o.indexOf("akamai")>-1||0===o.indexOf("rtmp")&&e.isLive()?"akamai":o.indexOf("yahoo.com")>-1||o.indexOf("yimg.com")>-1?"atlas":o.indexOf("llnwd.net")>-1?"limelight":o.indexOf("fastly.com")>-1?"fastly":r.parseRootHost(o)),l},r.redirect=function(e,t){try{t?window.top.location.replace(e):window.top.location.assign(e)}catch(r){typeof r===window.DOMException}},r.showHide=function(e,t){e.style.display=t?"block":"none"},r.formatTime=function(e){var t=Math.floor(e/3600),r=Math.floor((e-3600*t)/60),n=Math.floor(e-3600*t-60*r),o="";return 10>n&&(n="0"+n),t>0?(10>r&&(r="0"+r),t+":"+r+":"+n):a.isNumber(r)?r+":"+n:o},r.getOffsetTopFromEl=function(e,t){for(var n=0;e;)isNaN(e.offsetTop)||(n+=e.offsetTop),e=e.offsetParent,t&&r.classList(e).contains(t)&&(e=null);return n},r.getOffsetTopFromDocument=function(e){var t=document.body,r=document.documentElement,n=0,o=window.pageYOffset||r.scrollTop||t.scrollTop,i=r.clientTop||t.clientTop||0;try{var a=e.getBoundingClientRect();n=a?a.top:0}catch(s){}return Math.round(n+o-i)},r.setupMouseWheelListener=function(e){var t=function(t){var r=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),n=r>0,o=e.scrollHeight>e.offsetHeight,i=n&&e.scrollTop<1,a=!n&&e.scrollTop>=e.scrollHeight-e.offsetHeight;o&&(i||a)&&t.preventDefault()};return e&&(e.addEventListener("mousewheel",t),e.addEventListener("DOMMouseScroll",t)),t},r.destroyMouseWheelListener=function(e,t){e&&a.isFunction(t)&&(e.removeEventListener("mousewheel",t),e.removeEventListener("DOMMouseScroll",t))},r.bucketize=function(){return Math.floor(100*Math.random())},r.cssHexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},r.getElementViewability=function(e){try{var t=e.getBoundingClientRect();if(!t)return 0;var r;return r=t.top>=0?t.bottom>window.innerHeight?window.innerHeight-t.top>0?window.innerHeight-t.top:0:t.height:t.bottom>window.innerHeight?window.innerHeight:t.bottom<0?0:t.bottom,Math.round(r/t.height*100)}catch(n){return 0}},r.noPropagation=function(e){a.isFunction(e.stopPropagation)&&e.stopPropagation()},r.getHostname=function(e){var t=document.createElement("a");return t.href=e,t.hostname},r.getFormat=function(e){var t=["mp4","m3u8","webm","flv","f4m","mp4b","m3u8_playlist","m3u8_master"],r=null;return t.forEach(function(t){-1!==e.indexOf(t)&&(r=t)}),r},r.mapStreamsToQualities=function(e){var t=1,r=2,n=1500,o=2500,i=null,a=null,s=null;if(e.bitrates){for(var l=[],d=0;d<e.bitrates[d];d++)l.push({bitrate:e.bitrates[d],height:e.heights[d]});e=l}for(d=0;d<e.length;d++){var c,p=e[d],u=t*p.bitrate+r*p.height;n>=u?i?(c=i.bitrate+2*i.height,u>c&&(i=p)):i=p:o>=u?a?(c=a.bitrate+2*a.height,u>c&&(a=p)):a=p:s?(c=s.bitrate+2*s.height,u>c&&(s=p)):s=p}return{low:i,medium:a,high:s}},r.getUrlStatus=function(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){4===r.readyState&&t(r.status)},r.send()},r.isPlayerInBackground=function(){return this.hidden||("undefined"!=typeof document.hidden?this.hidden="hidden":"undefined"!=typeof document.mozHidden?this.hidden="mozHidden":"undefined"!=typeof document.msHidden?this.hidden="msHidden":"undefined"!=typeof document.webkitHidden?this.hidden="webkitHidden":this.hidden="unsupported"),"unsupported"===this.hidden?!document.hasFocus():document[this.hidden]},r.shouldEnableQualitySelector=function(e){var t=["html","flash","html5-hls"],r=e.playbackState.rendererType,n=e.playlist.getCurrentItem();if(t.indexOf(r)>-1&&n){if("flash"!==r)return n.streams.length>1||n.streamProfiles.length>1;if("hls"===n.streams[0].getType())return n.isLive()?!0:n.streams.length>1}return!1},r.replaceStrParam=function(e,t,r){return e.replace(new RegExp(t+"=\\w*"),t+"="+r)},r.isAndroidVersionAbove4=function(){if(i.androidVersion){var e=parseInt(i.androidVersion);return e>=4}return!1},r.isHtmlRenderer=function(e){return e===d.HTML5_DASH||e===d.HTML5_HLS||e===d.HTML5_RAW},r.isInlinePlaybackSupported=function(){return i.mobile?i.android&&i.chrome>=50||i.ios&&i.iosVersion>=10&&(i.safari>=10||i.iosWebView):!0},r.isAutoplaySupported=function(){return i.mobile?i.android&&i.chrome>=50||i.iosVersion>=10&&!i.iosWebView&&!r.needsGestureToPlay()||!1:!0},r.bindOneTimeUserGestureEvents=function(e){if("function"==typeof e){var t=function(){window.removeEventListener("keydown",r),window.removeEventListener("mousedown",r),window.removeEventListener("touchstart",r),r=t=null},r=function(){t(),e()};return window.addEventListener("keydown",r),window.addEventListener("mousedown",r),window.addEventListener("touchstart",r),t}},r.needsGestureToPlay=function(){var e=window.document.createElement("video");e.muted=!0,e.setAttribute("playsinline",!0);var t=e.play();t&&t instanceof window.Promise&&t["catch"](function(e){});var r=e.paused;return e=null,r},r.preconnect=function(e,t){if(document&&!document.head.querySelector("#"+e)){var r=document.createElement("link");r.setAttribute("rel","preconnect"),r.setAttribute("id",e),r.setAttribute("href",t);var n=document.getElementsByTagName("head")[0];n&&n.appendChild(r)}},r.fixProtocol=function(e){return i.samsung&&0===e.indexOf("//")?"https:"+e:e},r.resolvePath=function(e,t){return e&&t?t.split(".").reduce(function(e,t){return e?e[t]:void 0},e):void 0}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./error":22,"./renderers/type":54,xhr:230}],66:[function(e,t,r){"use strict";function n(e,t){var r=this;r.config=e,r.mediaStore=t,r.guid=c.generateGuid(),v&&v.start(y.PERF.VP_INIT,r.guid),r._create(e,t),v&&v.end(y.PERF.VP_INIT,r.guid)}function o(e){var t=this;t._controller=e}function i(e){var t=this;t._controller=e}t.exports=n;var a=e("./controller"),s=e("./event"),l=e("../../lib/event-bus"),d=e("./iframe-controller"),c=e("./util"),p=e("../../lib"),u=e("./states"),_=e("./metrics/metrics-constants"),m=e("../../lib/user-agent"),v=e("./perf"),y=e("./constants");v&&v.start(y.PERF.VP_SCRIPT_EXEC),c.inherits(n,l),n.prototype._create=function(e,t){function r(e){var t=p[e];n._eventBus.subscribe(t,function(){var t=Array.prototype.slice.call(arguments,0);setTimeout(function(){n.publish.apply(n,[u[e]].concat(t))})})}var n=this;if(l.call(n,"API"),n.isIframeEnabled(n.config)&&(n._iframeController=new d(e,t,n),!n.config.insideIframeConfig))return n.controls=new o(null),void(n.playlist=new i(null));var c=null;t&&(c=t._privateMediaStore||null),n._controller=new a(e,c,n.guid),n.controls=new o(n._controller),n.playlist=new i(n._controller),n._eventBus=n._controller._eventBus;var p=[s.PLAYBACK_STARTED,s.Video.PAUSE,s.PLAYBACK_RESUMED,s.PLAYBACK_PROGRESS,s.PLAYBACK_ENDED,s.AD_PLAYBACK_STARTED,s.Ad.PAUSE,s.AD_PLAYBACK_RESUMED,s.AD_PLAYBACK_PROGRESS,s.AD_PLAYBACK_ENDED,s.AD_PLAYBACK_ERROR,s.Ad.NO_AD,s.ERROR,s.METADATA_AVAILABLE,s.CC.FETCHED],u=[s.API.PLAYBACK_START,s.API.PLAYBACK_PAUSE,s.API.PLAYBACK_RESUMED,s.API.PLAYBACK_TIME_UPDATE,s.API.PLAYBACK_COMPLETE,s.API.AD_PLAYBACK_START,s.API.AD_PLAYBACK_PAUSE,s.API.AD_PLAYBACK_RESUME,s.API.AD_PLAYBACK_PROGRESS,s.API.AD_PLAYBACK_STOP,s.API.AD_ERROR,s.API.AD_NONE,s.API.PLAYER_ERROR,s.API.METADATA_READY,s.API.CC_AVAILABLE];for(var _ in s.API)if(-1===u.indexOf(_)){var m=s.API[_];p.push(m),u.push(m)}for(var v=0;v<p.length;v++)r(v);return n._eventBus.subscribe(s.FULLSCREEN_CHANGE,function(e){n.publish(s.API.PLAYER_FULLSCREEN_CHANGE,e),n._controller.setContentHeightForNFL()}),n},n.prototype.apiVersion=n.apiVersion=2,n.prototype.render=function(e){var t=this;if(t._validateState(),t.isIframeEnabled(t.config)){if(!t.config.insideIframeConfig)return t._iframeController.constructIframe(e),t._iframeController.routeControlsApiToIframe(),t;t._iframeController.setupIframeToPageCommunication(),t._iframeController.sendClearIframeNameToPage()}return t._controller.render(e),t},n.prototype._validateState=function(){var e=this;if(e.isSuspended()||!e._controller&&!e._iframeController)throw new Error("INVALID_STATE_ERR: An attempt was made to use videoplayer instance that is not, or no longer, usable.");return!0},n.prototype.isIframeEnabled=function(e){return e&&e.iframeRender},n.prototype.getCustomControlsNode=function(){var e=this;return e._validateState(),e._controller.getCustomControlsNode()},n.prototype.getVideoElement=function(){var e=this;return e._validateState(),e._controller.getVideoElement()},n.prototype.getEventBus=function(){var e=this;return e._validateState(),e._eventBus},n.prototype.getOpenSimSim=function(){var e=this;return e._validateState(),e._controller.getOpenSimSim()},n.prototype.suspend=function(){var e=this;m.desktop||e.isSuspended()||(e._validateState(),e._node=e._node||e._controller.getRootElement(),e._suspendedStateData={currentTime:e.controls.getCurrentTime(),playlist:e.playlist.getItems(),position:e.playlist.getPosition(),boundEvents:e._events,mediaStore:e.getMediaStore()},e.destroy())},n.prototype.resume=function(){var e=this;if(e.isSuspended()){var t=e._suspendedStateData;e._suspendedStateData=null,delete e._suspendedStateData,e._create(e.config,t.mediaStore).render(e._node),e.playlist.setItems(t.playlist),e.playlist.setPosition(t.position),e._controller._model.playback.startTime=t.currentTime,e._events=t.boundEvents}},n.prototype.isSuspended=function(){var e=this;return!!e._suspendedStateData},n.prototype.destroy=function(){var e=this;return e._controller&&(e._controller.destroy(),e._controller=null),e._iframeController&&(e._iframeController.destroy(),e._iframeController=null),v&&v.destroy(e.guid),l.prototype.destroy.call(e),e.controls=e.playlist=e._eventBus=null,e},n.prototype.fetchMetaData=function(e){var t=this;if(t._validateState(),!p.isArray(e)||!e.every(p.isString))throw new Error("fetchMetaData called with invalid list of ids");return t._controller.prefetch(e),t},n.prototype.getMediaStore=function(){var e=this;return e._validateState(),{_privateMediaStore:e._controller.getMediaStore()}},n.prototype.isDocked=function(){var e=this;return e._iframeController?!1:(e._validateState(),e._controller&&e._controller.isDocked())},n.prototype.updateDockingConfig=function(e,t,r,n,o,i){var a=this;a._validateState(),a._controller.updateDockingConfig(e,t,r,n,o,i)},n.prototype.dockVideoPlayer=function(){var e=this;e._validateState(),e._controller.dockVideoPlayer()},n.prototype.undockVideoPlayer=function(e){var t=this;t._validateState(),t._controller.undockVideoPlayer(e)},n.prototype.on=n.prototype.subscribe,n.prototype.before=n.prototype.subscribe,n.prototype.after=n.prototype.subscribe,n.prototype.fire=n.prototype.publish,o.prototype.play=function(e){var t=this;t._controller.getPlaybackState()===u.INIT&&p.isNumber(e)&&e>0&&e<t.getDuration()&&(t._controller.getCurrentMediaItem().progress.position=e);var r={type:_.API};t._controller.play(r)},o.prototype.pause=function(){var e=this;e._controller.pause()},o.prototype.preload=function(e){var t=this;t._controller.preload(e)},o.prototype.seek=function(e){var t=this;t._controller.seek(e)},o.prototype.disableControls=function(){var e=this;e._controller.disableControls()},o.prototype.enableControls=function(){var e=this;e._controller.enableControls()},o.prototype.enableCC=function(e){var t=this;t._controller.enableCC(e)},o.prototype.disableCC=function(){var e=this;e._controller.disableCC()},o.prototype.isPlaying=function(){var e=this;return e._controller.isPlaying()},o.prototype.isLoading=function(){var e=this;return e._controller.isLoading()},o.prototype.getDuration=function(){var e=this;return e._controller.getCurrentMediaItem().duration},o.prototype.getCurrentTime=function(){var e=this;return e._controller._view&&e._controller._view.getCurrentTime()||0},o.prototype.getTimeRemaining=function(){var e=this;return e.getDuration()-e.getCurrentTime()},o.prototype.setFullscreen=function(e){var t=this;t._controller.setFullscreen(e)},o.prototype.getFullscreen=function(){var e=this;return e._controller.getFullscreen()},o.prototype.setVolume=function(e){var t=this;e=0>e?0:e,e=e>1?1:e,t._controller.setVolume(e)},o.prototype.getVolume=function(){var e=this;return e._controller.getVolume()},o.prototype.setMute=function(e){var t=this;t._controller.setMute(e)},o.prototype.getMute=function(){var e=this;return e._controller.getMute()},o.prototype.setLoop=function(e){var t=this;return t._controller.setLoop(e)},o.prototype.setContinuousPlay=function(e){var t=this;return t._controller.setContinuousPlay(e)},o.prototype.resumeContinuousPlay=function(){var e=this,t={type:_.API};e._controller.resumeContinuousPlay(t)},o.prototype.getBitrate=function(){throw new Error("getBitrate is unimplemented!")},o.prototype.setResolution=function(){throw new Error("setResolution is unimplemented!")},o.prototype.displayClosedCaptions=function(){throw new Error("displayClosedCaptions is unimplemented!")},o.prototype.endVideo=function(){var e=this;e._controller.endVideo()},i.prototype.getSize=function(){var e=this;return e._controller.getPlaylistItems().length},i.prototype.getPosition=function(){var e=this;return e._controller.getPlaylist().position},i.prototype.sendPrefetchInfo=function(e){var t=this;return t._controller.sendPrefetchInfo(e)},i.prototype.setPosition=function(e){var t=this;if(!(e in t._controller.getPlaylistItems()))throw new Error("setPosition called with invalid position");var r=t._controller.getAutoplay();if(r)var n={type:_.API,action:_.AUTOPLAY};t._controller.setPlaylistPosition(e,r,n)},i.prototype.setPositionById=function(e){var t=this,r=t._controller.getPlaylistItems().indexOf(e);if(-1===r)throw new Error("setPositionById called with id not in playlist");var n=t._controller.getAutoplay();if(n)var o={type:_.API,action:_.AUTOPLAY};t._controller.setPlaylistPosition(r,n,o)},i.prototype.addItem=function(e){var t=this;t.addItems([e])},i.prototype.addItems=function(e,t){var r=this,n=r._controller.getMediaStore(),o=r._controller.getPlaylistItems(),i=e.filter(function(e){return null===n.get(e)});i.length>0&&r._controller.prefetch(i),t?Array.prototype.splice.apply(o,[0,o.length].concat(e)):e.forEach(function(e){o.push(e)})},i.prototype.setItems=function(e){var t=this;t.addItems(e,!0)},i.prototype.getItems=function(){var e=this;return e._controller.getPlaylistItems().slice(0)},i.prototype.getItemId=function(e){var t=this,r=t._controller.getPlaylistItems();if(!(e in r))throw new Error("getItemId called with invalid position");return r[e]},i.prototype.getCurrentItemId=function(){var e=this,t=e._controller.getPlaylist();return-1!==t.position?t.items[t.position]:null},i.prototype.getCurrentItem=function(){var e=this,t=e._controller.getCurrentMediaItem();return t?e.getItemById(t.id):null},i.prototype.getCurrentItemTitle=function(){var e=this,t=e.getCurrentItem();return t?t.title:null},i.prototype.getCurrentItemDescription=function(){var e=this,t=e.getCurrentItem();return t?t.description:null},i.prototype.getCurrentItemProviderName=function(){var e=this,t=e.getCurrentItem();return t&&t.provider?t.provider.name:null},i.prototype.getItem=function(e){var t=this,r=t._controller.getPlaylistItems();if(!(e in r))throw new Error("getItem called with invalid position");return t.getItemById(r[e])},i.prototype.getItemById=function(e){var t=this,r=t._controller.getMediaStore().get(e);return r?{id:r.id,title:r.title,description:r.description,duration:r.duration,publishTime:r.publishTime,provider:r.provider,credits:r.credits,shareUrl:r.shareUrl,setShareUrl:function(e){this.shareUrl=e,r.shareUrl=e},thumbnail:r.images.defaultThumbnail,visualSeek:r.visualSeek,isLive:r.isLive(),closedCaptions:r.closedCaptions,streams:r.streams}:null},i.prototype.getIndexForId=function(e){var t=this;return t._controller.getPlaylistItems().indexOf(e)},i.prototype.removeItem=function(e){var t=this;if(!(e in t._controller.getPlaylistItems()))throw new Error("removeItem called with invalid position");t._controller.removePlaylistItems(e,1)},i.prototype.removeItems=function(e,t){var r=this,n=r._controller.getPlaylistItems();if(!(e in n&&e+t-1 in n))throw new Error("removeItems called with invalid position/count");r._controller.removePlaylistItems(e,t)},i.prototype.removeItemById=function(e){var t=this,r=t._controller.getPlaylistItems().indexOf(e);if(-1===r)throw new Error("removeItemById called with id not in playlist");t._controller.removePlaylistItems(r,1)},i.prototype.removeItemsById=function(e){var t=this;e.forEach(function(e){t.removeItemById(e)})},i.prototype.clear=function(){var e=this;e._controller.removePlaylistItems(0,e._controller.getPlaylistItems().length)},v&&v.end(y.PERF.VP_SCRIPT_EXEC)},{"../../lib":"bRhrlU","../../lib/event-bus":"3ECu9u","../../lib/user-agent":"ty5FFo","./constants":18,"./controller":19,"./event":"YJm+dH","./iframe-controller":27,"./metrics/metrics-constants":36,"./perf":43,"./states":57,"./util":"jJTEqU"}],67:[function(e,t,r){"use strict";function n(e,t,r,n){var o=this;o.rootElem=e,o._model=t,o._eventBus=r,o._profiler=n,o._nflBarDimensions=F,o._nflBranding=null,o._nflBrandingNode=null,o._viewSize=w.NORMAL,o._isFullScreen=!1,o._controlsHideTimeout=U,o._isDocked=!1,o.lastScrollY=0,o._seedMediaItem=o._model.playlist.getCurrentItem();var i=o.rootElem.clientWidth,a=o.rootElem.clientHeight;o._viewSize=o._getViewSize(i,a),o._eventBus.subscribe(c.MEDIA_ITEM_LOADED,function(e){o.toggleSettings(null,!1,!0),e.isLive()?E.classList(o._contentElem).add("yvp-live"):E.classList(o._contentElem).remove("yvp-live"),o.isStreamMode()&&!o.getFullscreen()&&E.classList(o._contentElem).add("yvp-stream"),o.isMiniStreamMode()&&!o.getFullscreen()&&E.classList(o._contentElem).add("yvp-ministream")},o),o._eventBus.subscribe(c.PLAYBACK_STARTED,function(){(o._model.ui.docking.enableOnScrollDown||o._model.ui.docking.enableOnScrollUp)&&o._isDocked&&o._updateDockedElements()}),o._eventBus.subscribe(c.Video.SWITCHING,function(){o._setFlag(P.SWITCHING,!0)}),o._eventBus.subscribe(c.Video.SWITCHED,function(){o._setFlag(P.SWITCHING,!1)}),o._eventBus.publish(c.PLAYER_DIMENSION_CHANGE,{width:i||1,height:o.rootElem.clientHeight||1}),o._eventBus.subscribe(c.API.PLAYER_MUTE_CHANGE,o._onMuteChange,o),o._eventBus.subscribe(c.UP_NEXT_PG_CLICK,o._onUpnextPgClick,o),o._eventBus.subscribe(c.PLAYER_DIMENSION_CHANGE,o._onDimensionChange,o)}t.exports=n;var o=(e("fs"),e("insert-css")),i=e("./views/controls"),a=e("./views/nfl-branding"),s=e("./easter-egg"),l=e("./views/error-screen"),d=e("./views/age-gate-screen"),c=e("./event"),p=e("./views/open-sim-sim"),u=e("./views/ads-info-panel.js"),_=e("./views/feedback-screen"),m=e("./renderers/modes"),v=e("./views/start-screen"),y=e("./views/loading-screen"),f=e("./states"),g=e("./views/tumblr-controls"),b=e("./views/tumblr-loading-screen"),A=e("../../lib/user-agent"),E=e("./util"),h=e("./tap"),T=e("../../lib"),S=(e("../../lib/logger"),e("./views/ads-overlay")),I=e("./renderer-controller"),L=e("./playlist-controller"),M=e("./constants"),C="flash_download_logo.svg",N=e("./views/base.html"),D=e("./views/end-screen-replay.html"),R={END_SCREEN:"end-screen",ERROR:"error",VIDEO:"video",START_SCREEN:"start-screen",BLOCKED:"blocked"},P={LOADING:"loading",SWITCHING:"switching",PLAYING:"playing",PAUSED:"paused",CASTING:"casting"},w={NORMAL:"normal",SMALL:"smallscreen",VERY_SMALL:"verysmallscreen"},O={SMALL_WIDTH:350,SMALL_HEIGHT:210,VERY_SMALL_WIDTH:200,VERY_SMALL_HEIGHT:175},k=["webkitfullscreenchange","mozfullscreenchange","msfullscreenchange","MSFullscreenChange","fullscreenchange"],x="yvp-state-",B="yvp-flag-",j="yvp-browser-",U=5e3,V=75,F={DESKTOP:{HEIGHT:36},MOBILE:{HEIGHT:52}};o('.yvp-content{position:relative;width:100%;height:100%;overflow:visible;font-family:Helvetica Neue Regular,Helvetica Neue,helvetica,arial,sans-serif;font-size:16px;text-align:initial;cursor:default;background-color:#000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.yvp-content .yvp-main,.yvp-content .yvp-playlist-container{outline:none;}.yvp-content .yvp-main [tabindex],.yvp-content .yvp-playlist-container [tabindex]{outline:none}.yvp-content h3,.yvp-content h4,.yvp-content p,.yvp-content label,.yvp-content input,.yvp-content div,.yvp-content button,.yvp-content img,.yvp-content li,.yvp-content ul{margin:0;padding:0;border:0}.yvp-main{position:relative;width:100%;height:100%}.yvp-state-error .yvp-error-screen{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;display:block}.yvp-state-error .yvp-start-screen,.yvp-state-error .yvp-end-screen,.yvp-state-error .yvp-html5-video,.yvp-state-error .yvp-end-screen-fuji{display:none}.yvp-state-end-screen .yvp-end-screen,.yvp-state-end-screen .yvp-end-screen-fuji{display:block}.yvp-state-end-screen .yvp-error-screen,.yvp-state-end-screen .yvp-html5-video{display:none}.yvp-state-video .yvp-html5-video,.yvp-state-blocked .yvp-html5-video,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-html5-video{display:block}.yvp-state-video .yvp-start-screen,.yvp-state-blocked .yvp-start-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-start-screen,.yvp-state-video .yvp-end-screen,.yvp-state-blocked .yvp-end-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-end-screen,.yvp-state-video .yvp-error-screen,.yvp-state-blocked .yvp-error-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-error-screen,.yvp-state-video .yvp-end-screen-fuji,.yvp-state-blocked .yvp-end-screen-fuji,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-end-screen-fuji{display:none}.yvp-flag-casting .yvp-start-screen,.yvp-flag-casting .yvp-end-screen,.yvp-flag-casting .yvp-end-screen-fuji{display:none}.yvp-state-start-screen .yvp-start-screen,.yvp-state-video.yvp-browser-iphone .yvp-start-screen{display:block}.yvp-state-start-screen .yvp-end-screen,.yvp-state-video.yvp-browser-iphone .yvp-end-screen,.yvp-state-start-screen .yvp-error-screen,.yvp-state-video.yvp-browser-iphone .yvp-error-screen,.yvp-state-start-screen .yvp-html5-video:not([playsinline]),.yvp-state-video.yvp-browser-iphone .yvp-html5-video:not([playsinline]),.yvp-state-start-screen .yvp-end-screen-fuji,.yvp-state-video.yvp-browser-iphone .yvp-end-screen-fuji{display:none}.yvp-state-start-screen .yvp-html5-video:not([playsinline]),.yvp-state-video.yvp-browser-iphone .yvp-html5-video:not([playsinline]){top:-2000px}object.yvp-swf-not-ready.yvp-flash-video{opacity:0}.yvp-state-video{z-index:5}.yvp-content{z-index:0}.yvp-html5-video{z-index:5}.yvp-switching-canvas{z-index:15}.yvp-loading-screen .yvp-spinner-outer,.yvp-loading-screen .yvp-spinner-inner{z-index:20}.yvp-flash-video{position:absolute;left:0;visibility:visible}.yvp-html5-video{position:absolute;width:100%;height:100%;top:0;cursor:pointer;visibility:hidden}.yvp-flash-video.yvp-renderer-active,.yvp-html5-video.yvp-renderer-active{visibility:visible}.yvp-switching-canvas{position:absolute}.yvp-start-screen,.yvp-end-screen{position:absolute;height:100%;width:100%;background-color:#000;cursor:pointer;overflow:hidden}.yvp-nfl-branding-container{width:100%;height:36px;position:relative;z-index:22;background:#011832;background:-moz-linear-gradient(left,#011832 0%,#103155 40%,#011832 100%);background-image:-webkit-linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);background-image:-o-linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);background-image:linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);*background:#011832;white-space:nowrap}.yvp-browser-mobile .yvp-nfl-branding-container{height:52px}.yvp-nfl-branding{position:relative;margin:10px auto;vertical-align:middle;display:inline-block;zoom:1;width:30%}.yvp-browser-mobile .yvp-nfl-branding{margin:15px auto}.yvp-nfl-branding-container .yvp-nfl-brand-span{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTkuOTgzIDE5LjM4cy40MTctLjcyLjgyNC0xLjExMmMuNTc0LS41NSAxLjM5LS44OTcgMi40OS0xLjA1NiAxLjM4Mi0uMiAyLjM4NS0uNjcgMi45NzYtMS4zODIuNDc4LS41OC41NS0xLjE2Mi41NS0xLjQ1NlYyLjcyN2gtLjQ1NGMtLjU5LjQyLTEuNzE1Ljk5Ni0zLjE2LjY0QzEwLjcgMi43NSA5Ljk4Mi41ODggOS45ODIuNTg4UzkuMjY4IDIuNzUgNi43NiAzLjM2NWMtMS40NS4zNTctMi41NzQtLjIyLTMuMTYyLS42NGgtLjQ1MnYxMS42NDhjMCAuMjkzLjA3Mi44NzUuNTUgMS40NTYuNTkuNzEzIDEuNTkgMS4xOCAyLjk3NCAxLjM4MiAxLjEwMy4xNTggMS45MTcuNTA1IDIuNDkyIDEuMDU4LjQyMi40MDYuODIgMS4xMS44MiAxLjExIi8+PHBhdGggZmlsbD0iIzAxMzc2OSIgZD0iTTE2LjQxMyAzLjE4MnMtMS4zNzMgMS4wNjYtMy4zMDMuNTgzYy0yLjI1Mi0uNTYyLTMuMTI3LTIuMjUtMy4xMjctMi4yNXMtLjg3NCAxLjY4OC0zLjEyNSAyLjI1Yy0xLjkzLjQ4My0zLjMwMi0uNTgzLTMuMzAyLS41ODN2MTEuMTkyYzAgLjM4LjE2IDEuOTk1IDMuMTcyIDIuNDMyIDEuMTkuMTcyIDIuMDguNTU1IDIuNzIgMS4xNy4yMjguMjE4LjQwMy40NC41MzYuNjUuMTMzLS4yMS4zMDgtLjQzMi41NC0uNjUuNjM2LS42MTUgMS41MjUtLjk5OCAyLjcxNC0xLjE3IDMuMDE1LS40MzYgMy4xNzQtMi4wNSAzLjE3NC0yLjQzMlYzLjE4MnoiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNOS45ODMgMTcuNDg2cy44NzUtMS4wOCAzLjE0Ni0xLjQzMmMyLjYwMy0uNCAyLjUyNi0xLjYyMiAyLjUyNi0xLjY4M1Y4LjUxTDQuMzEgOC41MXY1Ljg2YzAgLjA2My0uMDc1IDEuMjg1IDIuNTI3IDEuNjg1IDIuMjcyLjM1IDMuMTQ2IDEuNDMgMy4xNDYgMS40MyIvPjxwYXRoIGZpbGw9IiNENTBBMEEiIGQ9Ik03LjMzOCAxMi43OTN2LTIuNzg2bC0uMzUtLjE5N3YtLjcyNWgxLjU5NHYuNzI1bC0uMzMzLjE5N3Y1LjY4NmwtLjg1My0uMjU1LTEuMjMtMy42MzN2Mi4zOTNsLjM5LjN2Ljc0bC0xLjcxLS40MzZ2LS42MjdsLjM5LS4xNTZ2LTQuMDFsLS40LS4ydi0uNzI1aDEuMjk1TTEwLjI3MyAxNS4zNDRsLjM0LjQwN3YuNzI1bC0xLjY5My0uNjMzdi0uNjEzbC4zNzUtLjE1NnYtNS4wNjdsLS4zNzItLjE5di0uNzMyaDIuOTR2MS40NzNoLS42NDdsLS4xOTUtLjYwNGgtLjc0N3YxLjdoLjU2bC4yMi0uMzJoLjQ1MnYxLjUxaC0uNDVsLS4yMTQtLjMwNmgtLjU2N00xMi4xNDMgMTUuNTk4di0uNzIzbC40Mi0uMzQ1di00LjUyM2wtLjM2LS4xOXYtLjczMmgxLjY5M3YuNzMzbC0uMzMuMTl2NC4yNDJsLjcyOC0uMTk2LjEzNy0xLjExMmguN3YxLjg2Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTQuNjA1IDcuMzA4bC0uNTEyLS4zODVoLjYyOGwuMjA3LS41OTMuMjA4LjU5M2guNjI2bC0uNTEuMzg1LjE4Ny42MDUtLjUxLS4zNTgtLjUxLjM1OE02LjgzMyA3LjMwOGwtLjUxNS0uMzg1aC42MjhsLjIwNy0uNTkzLjIwOC41OTNoLjYyN2wtLjUxMy4zODUuMTkuNjA1LS41MS0uMzU4LS41MS4zNThNNC42MDUgNS4zbC0uNTEyLS4zODRoLjYyOGwuMjA3LS41OTQuMjA4LjU5NGguNjI2bC0uNTEuMzg1LjE4Ny42MDQtLjUxLS4zNi0uNTEuMzZNNi44MzMgNS4zbC0uNTE1LS4zODRoLjYyOGwuMjA3LS41OTQuMjA4LjU5NGguNjI3bC0uNTEzLjM4NS4xOS42MDQtLjUxLS4zNi0uNTEuMzZNMTUuNTUgNy45MTNsLS41MS0uMzU4LS41MS4zNTguMTktLjYwNS0uNTEyLS4zODVoLjYyNmwuMjA2LS41OTMuMjEuNTkzaC42MjZsLS41MTUuMzg1TTEzLjMyNiA3LjkxM2wtLjUxLS4zNTgtLjUxLjM1OC4xODctLjYwNS0uNTE0LS4zODVoLjYyNmwuMjEtLjU5My4yMDYuNTkzaC42MjdsLS41MTUuMzg1TTE1LjU1IDUuOTA0bC0uNTEtLjM2LS41MS4zNi4xOS0uNjAzLS41MTItLjM4NGguNjI2bC4yMDYtLjU5NC4yMS41OTRoLjYyNmwtLjUxNS4zODVNMTMuMzI2IDUuOTA0bC0uNTEtLjM2LS41MS4zNi4xODctLjYwMy0uNTE0LS4zODRoLjYyNmwuMjEtLjU5NC4yMDYuNTk0aC42MjdsLS41MTUuMzg1TTEwLjQ3MiA0Ljg2M2MtLjIyOC0uMTg3LS40ODUtLjMxLS43NTctLjM2OC4wNjUtLjA2My4xMzQtLjExNS4xOTItLjE2NC4zNC4wOC41Ny4yMzQuNzI1LjM2NS0uMDU1LjA1NS0uMTEuMTEyLS4xNi4xNjhtLS4zMy40Yy0uMjE3LS4xODctLjQ4LS4zMi0uNzgzLS4zOC4wNDUtLjA2LjEtLjEyNC4xNS0uMTguMjMuMDQuNTIyLjE2Ljc4LjM3LS4wNTMuMDY0LS4xMDIuMTI2LS4xNDguMTltLS4yOTYuNDE1Yy0uMjM1LS4xOTctLjUwOC0uMzE3LS43NzgtLjM3IDAgMCAuMDgyLS4xMzMuMTI4LS4yMDIuMzMuMDY1LjU5Ny4yMTguNzgyLjM3Ny0uMDQ3LjA2Ny0uMDkyLjEzMi0uMTMyLjE5NW0xLjU1Mi0xLjk5cy0uMjY3LjE0LS42MzcuNTAyYy4wODQuMDUuMTc4LjExNS4yMzIuMTYtLjA1Ny4wNS0uMTEzLjEwNC0uMTY3LjE1NC0uMjQtLjE5OC0uNDkyLS4zLS42ODUtLjM0OC4wNjQtLjA0NS4xMzMtLjA5Mi4yLS4xMzMuMTA0LjAyNC4yMDcuMDY3LjIwNy4wNjcuNDE4LS4zMi43OC0uNDU3Ljc4LS40NTdzLS4wNDItLjAyLS4xNTMtLjAyYy0xLjY0OC4wMjItMy4xNjUgMS4yNS0yLjg4IDMuMzU2LjAzNC4yMi4xMi42MjguMjMuODA1LjAzOC0uMzUuMTctMS4xMjQuNTYtMS45NTYtLjEzNy0uMDUtLjI1LS4wNy0uMjUtLjA3LjA0LS4wODMuMDk2LS4xOS4wOTYtLjE5LjI4OC4wNTUuNTQyLjE3Ny43NjQuMzUtLjA1Mi4wODYtLjA4OC4xNC0uMTE0LjE4OC0uMDgtLjA2My0uMTU3LS4xMTQtLjI0Mi0uMTYzLS40NC43NjctLjY0NCAxLjQ5My0uNzI4IDEuODcyLjAwNi4wMjIuMDUzLjAzNi4wOTMuMDMgMS44MDQtLjIzNSAyLjY1LTEuMTU0IDIuOTA1LTIuMTUyLjE3LS42NTQuMTE0LTEuMzM3LS4xMTItMS44OTYtLjAxNi0uMDQtLjA0Ni0uMTA1LS4wOTgtLjEiLz48L3N2Zz4=");background-repeat:no-repeat;position:absolute;width:20px;height:20px;margin:-2px 0 0 10px}.yvp-browser-mobile .yvp-nfl-branding-container .yvp-nfl-brand-span{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTE1IDI5LjA5MnMuNjI0LTEuMDggMS4yMzQtMS42NjhjLjg2Mi0uODI3IDIuMDg0LTEuMzQ2IDMuNzM2LTEuNTg0IDIuMDczLS4zIDMuNTc2LTEgNC40NjMtMi4wNzIuNzE1LS44NzIuODIzLTEuNzQuODI1LTIuMTg0VjQuMTE0aC0uNjgzYy0uODguNjMtMi41NjggMS40OTMtNC43MzguOTU4QzE2LjA3NSA0LjE0OCAxNSAuOTA2IDE1IC45MDZzLTEuMDc2IDMuMjQtNC44MzcgNC4xNjZjLTIuMTczLjUzNS0zLjg2LS4zMy00Ljc0Mi0uOTZoLS42Nzh2MTcuNDcyYzAgLjQ0LjEwOCAxLjMxMi44MjUgMi4xODQuODg1IDEuMDcyIDIuMzg2IDEuNzcgNC40NiAyLjA3MiAxLjY1NS4yMzggMi44NzYuNzU3IDMuNzM4IDEuNTg4LjYzMy42MDggMS4yMzQgMS42NjQgMS4yMzQgMS42NjQiLz48cGF0aCBmaWxsPSIjMDEzNzY5IiBkPSJNMjQuNjQgNC43OTZzLTIuMDU2IDEuNi00Ljk1Ljg3NUMxNi4zMSA0LjgzIDE1IDIuMjk4IDE1IDIuMjk4cy0xLjMxMiAyLjUzLTQuNjkgMy4zNzRjLTIuODk3LjcyNS00Ljk1My0uODc0LTQuOTUzLS44NzR2MTYuNzg4YzAgLjU3LjI0IDIuOTkzIDQuNzU4IDMuNjQ2IDEuNzg2LjI2IDMuMTIuODMyIDQuMDc4IDEuNzU0LjM0NC4zMy42MDYuNjY2LjgwNS45NzguMi0uMzEyLjQ2LS42NDguODA4LS45NzguOTU2LS45MjIgMi4yOS0xLjQ5NCA0LjA3NC0xLjc1NCA0LjUyLS42NTIgNC43Ni0zLjA3NiA0Ljc2LTMuNjQ2VjQuNzk2eiIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNSAyNi4yNTNzMS4zMS0xLjYyMiA0LjcyLTIuMTQ3YzMuOTAzLS42IDMuNzg4LTIuNDMzIDMuNzg4LTIuNTI1di04Ljc5NGwtMTcuMDIuMDAydjguNzkyYzAgLjA5My0uMTEyIDEuOTI1IDMuNzkgMi41MjUgMy40MS41MjYgNC43MiAyLjE0OCA0LjcyIDIuMTQ4Ii8+PHBhdGggZmlsbD0iI0Q1MEEwQSIgZD0iTTExLjAzIDE5LjIxM3YtNC4xOGwtLjUyMy0uMjk1VjEzLjY1aDIuMzl2MS4wODhsLS41LjI5NXY4LjUzbC0xLjI3OC0uMzg0LTEuODQ3LTUuNDV2My41OWwuNTg2LjQ1MnYxLjExbC0yLjU2NS0uNjU3di0uOTRsLjU4Ni0uMjMydi02LjAxNWwtLjYtLjNWMTMuNjVoMS45NE0xNS40MzIgMjMuMDM4bC41MS42MXYxLjA4NmwtMi41MzgtLjk0OHYtLjkybC41Ni0uMjN2LTcuNjAzbC0uNTU2LS4yODN2LTEuMWg0LjQwOHYyLjIxaC0uOTY4bC0uMjk1LS45MDdoLTEuMTJ2Mi41NTJoLjg0bC4zMy0uNDg0aC42Nzd2Mi4yN2gtLjY3NmwtLjMyLS40NmgtLjg1Mk0xOC4yMzYgMjMuNDJ2LTEuMDg1bC42My0uNTE3di02Ljc4NWwtLjU0LS4yODN2LTEuMWgyLjU0MnYxLjFsLS40OTcuMjgzdjYuMzY0bDEuMDkzLS4yOTMuMjA3LTEuNjdoMS4wNXYyLjc5Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTYuOTMyIDEwLjk4NmwtLjc3LS41OGguOTQybC4zMS0uODg4LjMxMi44OWguOTRsLS43Ny41NzguMjgzLjkwNy0uNzY3LS41MzctLjc2NC41MzdNMTAuMjcyIDEwLjk4NmwtLjc3LS41OGguOTRsLjMxLS44ODguMzEyLjg5aC45NGwtLjc3LjU3OC4yODUuOTA3LS43NjctLjUzNy0uNzY0LjUzN002LjkzMiA3Ljk3NWwtLjc3LS41NzhoLjk0MmwuMzEtLjg5LjMxMi44OWguOTRsLS43Ny41NzguMjgzLjkwNS0uNzY3LS41NC0uNzY0LjU0TTEwLjI3MiA3Ljk3NWwtLjc3LS41NzhoLjk0bC4zMS0uODkuMzEyLjg5aC45NGwtLjc3LjU3OC4yODUuOTA1LS43NjctLjU0LS43NjQuNTRNMjMuMzQ4IDExLjg5M2wtLjc2NC0uNTM4LS43NjYuNTM4LjI4NC0uOTA3LS43Ny0uNTc4aC45NGwuMzEyLS44OS4zMS44OWguOTQybC0uNzcuNTc4TTIwLjAxIDExLjg5M2wtLjc2NC0uNTM4LS43NjcuNTM4LjI4NC0uOTA3LS43NzItLjU3OGguOTRsLjMxNC0uODkuMzEuODloLjk0bC0uNzcuNTc4TTIzLjM0OCA4Ljg4bC0uNzY0LS41NC0uNzY2LjU0LjI4NC0uOTA1LS43Ny0uNTc4aC45NGwuMzEyLS44OS4zMS44OWguOTQybC0uNzcuNTc4TTIwLjAxIDguODhsLS43NjQtLjU0LS43NjcuNTQuMjg0LS45MDUtLjc3Mi0uNTc4aC45NGwuMzE0LS44OS4zMS44OWguOTRsLS43Ny41NzhNMTUuNzMgNy4zMThjLS4zNDItLjI4LS43MjctLjQ2NC0xLjEzNS0uNTUyLjEtLjA5NC4yMDItLjE3Mi4yODgtLjI0Ny41MS4xMi44NTQuMzUgMS4wODguNTQ1LS4wOC4wODQtLjE2My4xNy0uMjQuMjUzbS0uNDkzLjU5OGMtLjMyNy0uMjgtLjcyNC0uNDgtMS4xNzUtLjU3LjA3LS4wODguMTUtLjE4NS4yMjgtLjI3LjM0My4wNi43ODIuMjQgMS4xNjcuNTU3LS4wOC4wOTYtLjE1Mi4xOS0uMjIuMjgzbS0uNDQ1LjYyNGMtLjM1My0uMjk1LS43NjMtLjQ3NS0xLjE2Ni0uNTUzIDAgMCAuMTIyLS4yMDIuMTkzLS4zMDQuNDkuMDk2Ljg5My4zMjcgMS4xNy41NjQtLjA3LjEtLjEzOC4yLS4xOTguMjkzbTIuMzI4LTIuOTgzcy0uNC4yMDgtLjk1Ni43NTNjLjEyNi4wNzQuMjY4LjE3LjM0OC4yNC0uMDg1LjA3Mi0uMTcuMTU0LS4yNS4yMy0uMzYtLjMtLjczOC0uNDUtMS4wMy0uNTIzLjA5Ny0uMDY3LjItLjEzOC4zMDItLjIuMTU2LjAzNy4zMS4xLjMxLjEuNjI3LS40NzggMS4xNy0uNjg2IDEuMTctLjY4NnMtLjA2Mi0uMDMtLjIzLS4wMjhjLTIuNDcuMDMzLTQuNzQ2IDEuODc2LTQuMzE4IDUuMDM0LjA0OC4zMzQuMTc2Ljk0NC4zNDMgMS4yMS4wNTQtLjUyNi4yNTItMS42ODcuODM4LTIuOTM0LS4yMDUtLjA3My0uMzc1LS4xMDMtLjM3NS0uMTAzLjA2Mi0uMTI3LjE0NS0uMjg2LjE0NS0uMjg2LjQzMy4wODIuODE0LjI2NSAxLjE0Ni41MjUtLjA3OC4xMjctLjEzMy4yMS0uMTcuMjgtLjExOC0uMDk0LS4yMzYtLjE3LS4zNjQtLjI0NC0uNjYgMS4xNS0uOTY1IDIuMjQtMS4wOSAyLjgwOC4wMDguMDM0LjA3OC4wNTMuMTM4LjA0NSAyLjcwNi0uMzUzIDMuOTczLTEuNzMgNC4zNTgtMy4yMy4yNTMtLjk4LjE3Mi0yLjAwNS0uMTY4LTIuODQ0LS4wMjQtLjA1Ny0uMDctLjE1Ni0uMTQ4LS4xNSIvPjwvc3ZnPg==");background-repeat:no-repeat;width:30px;height:30px}.yvp-nfl-branding-container .yvp-nfl-brand-logo{background-image:url("data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIiBbCgk8IUVOVElUWSBuc19leHRlbmQgImh0dHA6Ly9ucy5hZG9iZS5jb20vRXh0ZW5zaWJpbGl0eS8xLjAvIj4KCTwhRU5USVRZIG5zX2FpICJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlSWxsdXN0cmF0b3IvMTAuMC8iPgoJPCFFTlRJVFkgbnNfZ3JhcGhzICJodHRwOi8vbnMuYWRvYmUuY29tL0dyYXBocy8xLjAvIj4KCTwhRU5USVRZIG5zX3ZhcnMgImh0dHA6Ly9ucy5hZG9iZS5jb20vVmFyaWFibGVzLzEuMC8iPgoJPCFFTlRJVFkgbnNfaW1yZXAgImh0dHA6Ly9ucy5hZG9iZS5jb20vSW1hZ2VSZXBsYWNlbWVudC8xLjAvIj4KCTwhRU5USVRZIG5zX3NmdyAiaHR0cDovL25zLmFkb2JlLmNvbS9TYXZlRm9yV2ViLzEuMC8iPgoJPCFFTlRJVFkgbnNfY3VzdG9tICJodHRwOi8vbnMuYWRvYmUuY29tL0dlbmVyaWNDdXN0b21OYW1lc3BhY2UvMS4wLyI+Cgk8IUVOVElUWSBuc19hZG9iZV94cGF0aCAiaHR0cDovL25zLmFkb2JlLmNvbS9YUGF0aC8xLjAvIj4KXT48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwOS44OTYiIGhlaWdodD0iMTMuOTc4Ij48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHJlcXVpcmVkRXh0ZW5zaW9ucz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZUlsbHVzdHJhdG9yLzEwLjAvIiB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNmZmYiIGQ9Ik0xMDkuODk2IDEuMDI1bC0zLjY3OCAxMi45NWgtNS41OThsMS41NC01LjQ0Ny0zLjgyMyA0Ljc0MmgtMS44MjJsLTIuMTgtOC4zNWgtNC4zNmwuODktMy44OTZoOC4zMmwuODggNS4xMzggNC4yMzQtNS4xMzV2LS4wMDNoNS41OTV6TTg3LjEzIDEwLjIyYy0uNTY2IDEuODItMi41NTMgMy43NTUtNC40MTQgMy43NTVINzQuNDFjLTEuODYgMC0yLjkyLTEuOTM0LTIuMzU0LTMuNzU1bDEuMzI3LTQuMjc3aDUuODk0TDc3Ljk3IDkuODM3aDMuMjNsMS42Ni00Ljg4NmgtOS4xMmMuNjctMS42OSAyLjYyOC0zLjkyNSA0LjM5NC0zLjkyNWg4LjMwNmMxLjg2IDAgMi44NCAyLjI3IDIuMjc0IDQuMDlMODcuMTMgMTAuMjJ6TTcxLjM1MiA2LjY0Nkg2Ni4yNGwuNTY1LTEuNjc0aC0yLjczbC0xLjY1MyA0Ljg1aDIuNzNsLjQxMi0uOTI0aDUuMDg0bC0uNzYgMi40MjZjLS41NjYgMS44Mi0yLjIxNSAyLjY1LTQuMDc2IDIuNjVoLTYuNDdjLTEuODYgMC0yLjkyLTEuOTMzLTIuMzU0LTMuNzU0bDEuNTg0LTUuMTA1Yy41NjYtMS44MiAyLjA0LTQuMDkgNC43MTctNC4wOWg2LjA1NWMyLjAyNyAwIDMuMDQ1IDIuNDYgMi40OTYgNC4xODhsLS40OSAxLjQzM3ptLTIxLjY2IDcuMzNsMS4xNTUtNC45OThoNC41MUw1NC4yIDEzLjk3NmgtNC41MDh6bS01LjE3NS00Ljk5OGg0LjUwOGwtMS4xNTYgNC45OThoLS4zNDd2LjAwMmgtOC40OXYtLjAwNEgzNS4wM0wzOC4zNzYgMi42NWgtMS4zNGwuODEtMi42M2gxLjM0Vi4wMTZoNi40N0w0Mi4yNzYgMTFoMS43M2wuNTEyLTIuMDIyem0tOS4zNC00LjMxN2gtNC41OWwuNDIzLTEuNjYzaC0xMEwyMS42NDUuMDJoMTQuNjZsLS4wMS4wNDJoLjA0M2wtMS4xNiA0LjZ6TTEyLjI1IDEzLjk3Nkg3LjUwNEw2LjIxNiAyLjY1aC00LjE5bC44MS0yLjYzaDMuMDdWLjAxNmg2LjE0TDEzLjI2IDEwLjI2IDE2LjQwOC4wMTVoMy44MzhsLTQuMTU4IDEzLjk2SDEyLjI1ek01LjI5MyAzLjY3TDUuNiA2LjgzNGwtMi4xMjYgNy4xNEguMDJMMy4xMzUgMy42NjhoMi4xNTh6bTIyLjQ4LjMyNmwtLjY0MiAyLjQ2aDUuMThMMzEuNyA4Ljk5aC01LjM2bC0xLjUzMiA0Ljk4NWgtNi4wNDNsMy4wMS05Ljk4aDUuOTk4em02NS40OCAxLjg3N2wxLjAyIDQuMzg1LTEuMDAyIDMuNzE4aC00LjczNWwyLjM1Mi04LjEwM2gyLjM2NXoiLz48L3N3aXRjaD48L3N2Zz4=");background-repeat:no-repeat;width:110px;height:14px;display:block;position:absolute;margin-left:40px;margin-top:2px}.yvp-browser-mobile .yvp-nfl-branding-container .yvp-nfl-brand-logo{background-image:url("data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIiBbCgk8IUVOVElUWSBuc19leHRlbmQgImh0dHA6Ly9ucy5hZG9iZS5jb20vRXh0ZW5zaWJpbGl0eS8xLjAvIj4KCTwhRU5USVRZIG5zX2FpICJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlSWxsdXN0cmF0b3IvMTAuMC8iPgoJPCFFTlRJVFkgbnNfZ3JhcGhzICJodHRwOi8vbnMuYWRvYmUuY29tL0dyYXBocy8xLjAvIj4KCTwhRU5USVRZIG5zX3ZhcnMgImh0dHA6Ly9ucy5hZG9iZS5jb20vVmFyaWFibGVzLzEuMC8iPgoJPCFFTlRJVFkgbnNfaW1yZXAgImh0dHA6Ly9ucy5hZG9iZS5jb20vSW1hZ2VSZXBsYWNlbWVudC8xLjAvIj4KCTwhRU5USVRZIG5zX3NmdyAiaHR0cDovL25zLmFkb2JlLmNvbS9TYXZlRm9yV2ViLzEuMC8iPgoJPCFFTlRJVFkgbnNfY3VzdG9tICJodHRwOi8vbnMuYWRvYmUuY29tL0dlbmVyaWNDdXN0b21OYW1lc3BhY2UvMS4wLyI+Cgk8IUVOVElUWSBuc19hZG9iZV94cGF0aCAiaHR0cDovL25zLmFkb2JlLmNvbS9YUGF0aC8xLjAvIj4KXT48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE1Ny4wNDIiIGhlaWdodD0iMjAuMDE1Ij48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHJlcXVpcmVkRXh0ZW5zaW9ucz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZUlsbHVzdHJhdG9yLzEwLjAvIiB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNmZmYiIGQ9Ik0xNTYuOTYgMS44NzdsLTUuMjU1IDE4LjEyNmgtNy45OTJsMi4xOTgtNy4zODQtNS40NiA2LjM0aC0yLjZsLTMuMTE0LTExLjgzaC02LjIyN2wxLjI3LTUuMjUyaDExLjg4bDEuMjU3IDcuMjUgNi4wNDctNy4yNDZ2LS4wMDVoNy45OTV6bS0zMi41MTMgMTMuMjRjLS44MDggMi42ODgtMy42NDUgNC44ODctNi4zMDIgNC44ODdoLTExLjg2Yy0yLjY2IDAtNC4xNzItMi4yLTMuMzY0LTQuODg3bDEuODk4LTYuMzEyaDguNDE2bC0xLjg2NiA1Ljc0N2g0LjYxbDIuMzc1LTcuMzc2aC0xMy4wMjZjLjk1OC0yLjUgMy43NTItNS4yOTggNi4yNzUtNS4yOThoMTEuODZjMi42NTcgMCA0LjA1NiAzLjAxOCAzLjI0NyA1LjcwNWwtMi4yNjQgNy41MzR6bS0yMi41My01LjI3NmgtNy4zMDJsLjgwOC0yLjYzMmgtMy45bC0yLjM2IDcuMzIyaDMuOWwuNTg3LTEuMzY1aDcuMjZsLTEuMDg0IDMuNThjLS44MSAyLjY4OC0zLjE2MyAzLjI1OC01LjgyIDMuMjU4aC05LjI0Yy0yLjY1NiAwLTQuMTctMi4yLTMuMzYyLTQuODg3bDIuMjY0LTcuNTMzYy44MDgtMi42ODggMi45MS01LjcwNSA2LjczNS01LjcwNWg4LjY1YzIuODkzIDAgNC4zNDggMy4zIDMuNTYyIDUuODVsLS42OTggMi4xMTN6TTcwLjk4NSAyMC4wMDdsMS42NS02LjcyMmg2LjQ0bC0xLjY1MiA2LjcyMmgtNi40Mzh6bS03LjM5LTYuNzJoNi40MzhsLTEuNjUgNi43MmgtLjQ5NXYuMDAzSDU1Ljc2NnYtLjAwN2gtNS43Mmw0Ljc4LTE2LjA1OGgtMS45MTJMNTQuMDcuMDY1aDEuOTFsLjAwNC0uMDFoOS4yMzhMNjAuMzk2IDE2LjI3aDIuNDY3bC43MzItMi45ODR6TTUwLjI1OCA2LjkxMkg0My43bC43MjQtMi45N2gtMTQuNjVMMzAuOTMuMDY3aDIwLjkzNmwtLjAxNC4wNmguMDZMNTAuMjYgNi45MTR6TTE3LjUxOCAyMGgtNi43ODJMOC45IDMuOTQ1SDIuOTE1TDQuMDcuMDY1aDQuMzg2di0uMDFoOC43N2wxLjcyOCAxNS4xMiA0LjUtMTUuMTJoNS40OGwtNS45NCAxOS45NDZoLTUuNDc3ek03LjU3OCA1LjQ1bC40NCA0LjY3My0zLjAzNyA5Ljg4SC4wNTNMNC40OTYgNS40NUg3LjU4em0zMi4zNDYtLjI3OGwtMS4yMTcgNC4wMzJoNy4zOTdsLS44NzMgMy43NGgtNy42NUwzNS40NSAyMGgtOC42M2w0LjQ3Ni0xNC44MjhoOC42M3ptOTMuMjY0IDMuNTNsMS40NTcgNi40Ny0xLjQzIDQuODMyaC02Ljc2NEwxMjkuODEgOC43aDMuMzh6Ii8+PC9zd2l0Y2g+PC9zdmc+");background-repeat:no-repeat;margin-left:50px;margin-top:2px;width:157px;height:20px}div.yvp-agegate-container{width:100%;height:100%;color:#fff;font-family:\'Helvetica Neue Regular\',\'Helvetica Neue\',helvetica,arial,sans-serif;position:absolute;background-color:#000;z-index:25}.yvp-agegate-container .yvp-agegate-info-wrapper{padding:17% 25% 0 25%;text-align:center;position:absolute;top:0;}.yvp-stream .yvp-agegate-container .yvp-agegate-info-wrapper{padding:14% 15% 0 15%}.yvp-agegate-container .yvp-agegate-title{font-size:20px;line-height:24px;font-weight:normal;margin-bottom:2%}.yvp-agegate-container .yvp-agegate-desc{font-size:12px;line-height:20px;color:rgba(255,255,255,0.6)}.yvp-stream .yvp-agegate-container.yvp-agegate-birthday .yvp-agegate-info-wrapper{padding:8% 10% 0 10%}.yvp-stream .yvp-agegate-container.yvp-agegate-birthday .yvp-agegate-desc{line-height:14px}.yvp-stream .yvp-agegate-container.yvp-agegate-birthday .yvp-agegate-action-wrapper{margin-top:5.2%}.yvp-stream .yvp-agegate-container.yvp-agegate-birthday .yvp-agegate-btn{display:block;margin:5% auto 0 auto}.yvp-agegate-container .yvp-agegate-action-wrapper{margin-top:9.2%}.yvp-agegate-container .yvp-agegate-date-input,p.yvp-agegate-input{display:inline}.yvp-agegate-container .yvp-agegate-date-input /*input*/{width:56px;height:33px;margin:0 5px 0 0;border:none;border-radius:2px;color:#fff;text-align:center;background-color:rgba(255,255,255,0.15)}input.yvp-agegate-date-input.validate-error{border:1px solid #cc4a4a}.yvp-agegate-container .yvp-agegate-btn{padding:10px 22px 9px 22px;background-color:#188fff;border:none;outline:none;border-radius:2px;color:#fff;font-family:\'Helvetica Neue Regular\',\'Helvetica Neue\',helvetica,arial,sans-serif;font-size:12px;line-height:13px;cursor:pointer}.yvp-agegate-container .yvp-agegate-btn.disable{display:none}.yvp-agegate-container .yvp-agegate-icon{position:absolute;right:20px;bottom:20px;background-size:100%;display:none;zoom:1}.yvp-agegate-back-image{opacity:.3;display:block;width:100%;height:auto}.yvp-start-screen{z-index:21;}.yvp-start-screen .yvp-start-screen-image{display:block;width:100%;height:auto}.yvp-start-screen .yvp-start-screen-provider{font-size:91%;font-weight:normal;margin-bottom:5px}.yvp-start-screen .yvp-start-screen-title{font-weight:bold;font-size:100%;margin-bottom:3px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.yvp-start-screen .yvp-start-screen-description{-webkit-font-smoothing:antialiased;font-weight:200;font-size:85%;letter-spacing:.07em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.yvp-start-screen .yvp-start-screen-bar-wrapper{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.yvp-start-screen:hover .yvp-start-screen-bar-wrapper{background-color:rgba(0,0,0,0.4)}.yvp-start-screen .yvp-start-screen-bar{position:absolute;width:96%;min-height:30px;max-height:70px;bottom:0;color:#fff;overflow:hidden;padding:10px 2%;text-shadow:#000 0 1px 3px;background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.7));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.7));background-image:linear-gradient(top, transparent, rgba(0,0,0,0.7))}.yvp-start-screen .yvp-start-screen-button{position:absolute;left:50%;top:50%;width:90px;height:90px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgeDE9IjIuMDY2JSIgeTE9Ijk2Ljc1MSUiIHgyPSI5NS42NTklIiB5Mj0iMi45NjklIiBpZD0iYSI+PHN0b3Agc3RvcC1jb2xvcj0iIzZEMDBGNiIgb2Zmc2V0PSIwJSIvPjxzdG9wIHN0b3AtY29sb3I9IiMwMDNBQkMiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTEyLjY3NiA3Ny4zNzZjMy45ODMgMy42MDggOC42NjcgNi4yOCAxNC4wMjcgOC4wMTdDMzIuMDc4IDg3LjEyNSAzNy44OSA4OCA0NC4xNjMgODhjNi4xNjQgMCAxMS45MzQtLjg3NSAxNy4yOTYtMi42MDcgMi4xNTQtLjY5NCA0LjE4Ni0xLjU0NyA2LjExNi0yLjU0MyAyLjg4NC0xLjQ5IDUuNTMtMy4zMTIgNy45MTYtNS40NzQgMy45OS0zLjYwNyA3LjA5Ny04LjE4MyA5LjMzLTEzLjcwN0M4Ny4wNSA1OC4xMzYgODguMTY4IDUxLjU4IDg4LjE2OCA0NGMwLTcuNTg2LTEuMTE4LTE0LjE0LTMuMzQ2LTE5LjY3LTIuMjMzLTUuNTMtNS4zNC0xMC4xLTkuMzMtMTMuNzA1LTMuOTg1LTMuNjE3LTguNjYtNi4yODUtMTQuMDMzLTguMDJDNTYuMDk2Ljg3IDUwLjMyNiAwIDQ0LjE2MiAwYy02LjI3MyAwLTEyLjA4NS44NjgtMTcuNDYgMi42MDYtMS43NDMuNTYtMy40MTIgMS4yMzYtNS4wMSAyLjAwNS0zLjMyIDEuNTgzLTYuMzMgMy41NzgtOS4wMTcgNi4wMTVDOC42ODggMTQuMjMgNS41NzggMTguOCAzLjM0NiAyNC4zMyAxLjExNiAyOS44NiAwIDM2LjQxNCAwIDQ0YzAgNy41ODIgMS4xMTcgMTQuMTM3IDMuMzQ2IDE5LjY3IDIuMjMyIDUuNTIzIDUuMzQyIDEwLjEgOS4zMyAxMy43MDZ6IiBmaWxsLW9wYWNpdHk9Ii42NSIgZmlsbD0idXJsKCNhKSIvPjxwYXRoIGQ9Ik0zNi43MyA1OWgtLjA2NmMtLjkyIDAtMS42NjQtLjc0Mi0xLjY2NC0xLjY1NlYzMC42NTZjMC0uOTE1Ljc0LTEuNjU2IDEuNjY0LTEuNjU2LjAzIDAgLjA2IDAgLjA5LjAwMi4zOC0uMDczLjc4OC0uMDE0IDEuMTUyLjE5NmwyMi42MjIgMTMuMDZjLjc5OC40NiAxLjA3NSAxLjQ3NC42MTMgMi4yNzYtLjAyMy4wNC0uMDQ4LjA4LS4wNzUuMTE4LS4xMzcuMjctLjM1LjUwMy0uNjMuNjdsLTIyLjQ0IDEzLjQ4NGMtLjM5NS4yNC0uODUuMjk1LTEuMjY1LjE5M3oiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");background-color:transparent;background-position:50% 50%;background-repeat:no-repeat;background-size:100%;border-radius:0;margin:-45px 0 0 -45px}div.yvp-feedback-btn{position:absolute;background:#7f6af6;color:#fff;font-size:11px;font-weight:100;padding:3px;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:.8;}div.yvp-feedback-btn:hover{opacity:1}.yvp-browser-mobile div.yvp-feedback-btn{font-size:10px}.yvp-end-screen{position:absolute;font-family:HelveticaNeue,Helvetica,Arial,sans-serif;color:#fff;text-align:center;box-sizing:border-box;}.yvp-end-screen.yvp-replay-only .yvp-metadata{display:none}.yvp-error-screen{position:absolute;width:100%;height:100%;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-weight:normal;}.yvp-error-screen .yvp-error-screen-image{position:absolute;display:block;width:100%;height:100%}.yvp-error-screen .yvp-error-screen-background{position:absolute;height:100%;width:100%;background-image:-webkit-linear-gradient(210deg, rgba(0,0,0,0.4), #000);background-image:-o-linear-gradient(210deg, rgba(0,0,0,0.4), #000);background-image:linear-gradient(210deg, rgba(0,0,0,0.4), #000)}.yvp-error-screen .yvp-error-title{position:relative;display:block;top:35%;width:100%;margin:0 auto;font-size:20px;line-height:24px;text-align:center;color:#fff;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.yvp-stream .yvp-error-screen .yvp-error-title{top:22%}.yvp-ministream .yvp-error-screen .yvp-error-title{top:30%;font-size:16px;line-height:18px}.yvp-error-screen .yvp-error-desc{position:relative;width:288px;top:37%;margin:0 auto;font-size:16px;line-height:20px;letter-spacing:0;text-align:center;color:rgba(255,255,255,0.6);}.yvp-error-screen .yvp-error-desc a:link{color:rgba(255,255,255,0.6)}.yvp-error-screen .yvp-error-desc a:visited{color:rgba(255,255,255,0.6)}.yvp-error-screen .yvp-error-desc a:active{color:rgba(115,0,255,0.8)}.yvp-stream .yvp-error-screen .yvp-error-desc{top:25%;width:85%}.yvp-ministream .yvp-error-screen .yvp-error-desc{display:none;top:25%;width:85%}.yvp-error-screen .yvp-error-desc .yvp-browser-refresh{display:block;padding-top:10px}.yvp-error-screen .yvp-error-desc .yvp-error-flash-download-wrapper{display:block;padding-top:10px;background-color:transparent;cursor:pointer}.yvp-error-screen .yvp-error-desc .yvp-error-flash-download-icon{display:block;width:30%;height:25%;margin-top:10px;background-repeat:no-repeat;}.yvp-browser-mobile .yvp-error-screen .yvp-error-desc .yvp-error-flash-download-icon{visibility:hidden}.yvp-error-screen .yvp-error-code{position:relative;top:40%;width:100%;display:block;color:rgba(255,255,255,0.3);margin:0 auto;font-size:12px;line-height:16px;font-weight:normal;text-align:center;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.yvp-stream .yvp-error-screen .yvp-error-code{top:30%}.yvp-ministream .yvp-error-screen .yvp-error-code{font-size:12px;line-height:16px}.yvp-browser-mobile .yvp-error-screen .yvp-error-code{font-size:10px}.yvp-error-screen .yvp-error-feedback-btn{bottom:12%;right:5%;}.yvp-ministream .yvp-error-screen .yvp-error-feedback-btn{display:none}.yvp-opensimsim{display:none;position:absolute;z-index:100;background-color:rgba(0,0,0,0.6);width:100%;height:100%;color:rgba(255,255,255,0.8);overflow-x:scroll;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}.yvp-opensimsim .yvp-close-btn{display:block;position:absolute;top:10px;right:10px;width:27px;height:27px;background:url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKICAgIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAgMTAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjEwLDEuNTAyIDguNDk4LDAgNSwzLjQ5OSAxLjUwMiwwLjAwMSAwLDEuNTAzIDMuNDk4LDUgMCw4LjQ5OCAxLjUwMiwxMCA1LDYuNTAyIDguNDk4LDEwIDEwLDguNDk4IAogICAgNi41MDIsNSAiLz4KPC9zdmc+Cg==") no-repeat center center;cursor:pointer;z-index:10;opacity:.8;}.yvp-opensimsim .yvp-close-btn:hover{opacity:1}.yvp-opensimsim .yvp-opensimsim-feedback-btn{top:12px;right:6%;z-index:1;font-weight:bold;padding:5px;text-align:center;cursor:pointer}.yvp-opensimsim .yvp-opensimsim-info{font-size:10px;margin-left:20px;margin-right:20px;position:relative;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-title{color:#714fff;padding-top:20px;padding-bottom:10px}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs{width:100%;height:80px;margin-bottom:25px;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs .yvp-opensimsim-graph{float:left;width:150px;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs .yvp-opensimsim-graph div{margin-bottom:5px}.yvp-opensimsim .yvp-opensimsim-info .yvp-profile-btn{padding-top:20px;color:#fff;margin-bottom:20px;font-size:14px;cursor:pointer;}.yvp-opensimsim .yvp-opensimsim-info .yvp-profile-btn:hover{text-decoration:underline}.yvp-opensimsim-info .yvp-midrollcache-data{display:inline-block;line-height:7px;}.yvp-opensimsim-info .yvp-midrollcache-data::after{display:table;content:\'\';clear:both}.yvp-opensimsim-info .floated-item{float:left;padding:0 8px;border-right:2px solid #ddd}.yvp-opensimsim-info .yvp-table{display:table;color:#000;text-align:center;width:100%;margin-bottom:25px;}.yvp-opensimsim-info .yvp-table > div:first-child{display:table-caption;background-color:#95b5c0;text-align:left;padding:0 15px;line-height:15px}.yvp-opensimsim-info .yvp-table header.yvp-tablerow{font-weight:bold;background-color:#ccc !important}.yvp-opensimsim-info .yvp-tablerow{display:table-row;background-color:#fff;}.yvp-opensimsim-info .yvp-tablerow.yvp-altrow{background-color:#e5e5e5}.yvp-opensimsim-info .yvp-tablerow.currad{background-color:#feb}.yvp-opensimsim-info .yvp-tablerow.emptyrow{background-color:#b7b7b7}.yvp-opensimsim-info .yvp-tablecell{display:table-cell;padding:2px;border-style:solid;border-color:#000;border-width:1px 1px 0 0}.yvp-opensimsim-info .linkbtn{background:none !important;border:none;padding:0 !important;border-bottom:1px solid #444;cursor:pointer}.yvp-tablecell.st-error{color:#f00}.yvp-tablecell.st-playing{color:#0f0}.yvp-tablecell.st-unplayed{color:#786f78}.yvp-tablecell.st-cancelled{color:#f9cc9d}.emptyrow .yvp-tablecell{border-width:1px 0 0 0;}.emptyrow .yvp-tablecell *{visibility:hidden}.yvp-browser-tv .yvp-opensimsim-config{position:absolute;top:0;right:0}.yvp-feedback-screen{display:none;position:absolute;z-index:150;background-color:#000;width:100%;height:100%;color:#ccc;overflow-x:scroll;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}.yvp-feedback-screen .yvp-feedback-screen-close-btn{display:block;position:absolute;top:10px;right:10px;width:27px;height:27px;background:url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKICAgIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAgMTAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjEwLDEuNTAyIDguNDk4LDAgNSwzLjQ5OSAxLjUwMiwwLjAwMSAwLDEuNTAzIDMuNDk4LDUgMCw4LjQ5OCAxLjUwMiwxMCA1LDYuNTAyIDguNDk4LDEwIDEwLDguNDk4IAogICAgNi41MDIsNSAiLz4KPC9zdmc+Cg==") no-repeat center center;cursor:pointer;z-index:10;opacity:.8;}.yvp-feedback-screen .yvp-feedback-screen-close-btn:hover{opacity:1}.yvp-feedback-screen .yvp-feedback-screen-info{font-size:10px;margin-top:0;margin-right:20px;margin-left:20px;height:100%;}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-title{font-size:18px;color:#ccc;display:inline-block;padding-top:10px;padding-bottom:7px}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-response{color:#ccc;padding-top:20px;padding-bottom:5px;font-size:14px;margin-left:0}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-refid{color:#ccc;padding-top:0;padding-bottom:0;margin-left:0;font-size:10px}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-text{box-sizing:border-box;margin-top:10px;margin-bottom:10px;overflow:auto;resize:none;width:100%;height:105px;border:1px solid #ccc;opacity:.8;padding:5px;color:#000}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-button-container{text-align:right}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-btn{display:inline-block;background-color:#7f6af6;color:#ccc;cursor:pointer;font-size:12px;text-align:center;padding:5px;opacity:.8;}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-btn:hover{opacity:1}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-disclaimer{position:absolute;bottom:10px;padding-right:10px}.yvp-ads-overlay{position:absolute;height:100%;width:100%;display:none;-webkit-transition:height .2s ease-in-out 2s;-moz-transition:height .2s ease-in-out 2s;-o-transition:height .2s ease-in-out 2s;transition:height .2s ease-in-out 2s}.yvp-docked-fadein{-webkit-animation-name:fade_in;animation-name:fade_in;-webkit-animation-duration:.247s;-moz-animation-duration:.247s;animation-duration:.247s;animation-timing-function:ease-in-out}.yvp-docked-animated{-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.yvp-docked{position:fixed !important;z-index:9999;box-shadow:0 0 10px rgba(0,0,0,0.2)}.yvp-content.yvp-browser-desktop .yvp-docked-meta{position:relative;opacity:0;visibility:hidden;display:none;height:68px;font-size:16px;color:#121717;background:#fff;line-height:20px;padding-top:16px;left:0;right:0;Box-shadow:0 2px 8px 0 rgba(0,0,0,0.5);}.yvp-content.yvp-browser-desktop .yvp-docked-meta .yvp-docked-title{position:relative;margin:0 16px 5px 16px;max-height:40px;overflow:hidden;-webkit-line-clamp:2;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.yvp-content.yvp-browser-desktop .yvp-docked-meta .yvp-docked-provider{position:relative;margin:0 16px 16px 16px;opacity:.8;line-height:16px;font-size:11px}.yvp-content.yvp-browser-desktop.yvp-docked-show-meta .yvp-docked-meta{visibility:visible;opacity:1;display:block}.yvp-content.yvp-browser-desktop.yvp-docked-show-meta.yvp-state-fullscreen .yvp-docked-meta{visibility:hidden;opacity:0;display:none}.yvp-docked-bg{position:absolute;top:0;left:0;right:0;bottom:0;z-index:10;}.yvp-docked-bg .yvp-docked-img{position:relative}.yvp-docked-bg .yvp-docked-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.75);}.yvp-docked-bg .yvp-docked-overlay .yvp-docked-overlay-text{position:absolute;width:100%;text-align:center;bottom:34px;color:#fff;font-size:13px;line-height:16px}@-moz-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-webkit-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-o-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-ms-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-moz-keyframes fade_in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fade_in{0%{opacity:0}100%{opacity:1}}@-o-keyframes fade_in{0%{opacity:0}100%{opacity:1}}@-ms-keyframes fade_in{0%{opacity:0}100%{opacity:1}}@keyframes fade_in{0%{opacity:0}100%{opacity:1}}'),
n.prototype.prepareNextRenderer=function(e,t){var r=this;r._rendererController.prepareNextRenderer(e,t)},n.prototype.preloadNextRenderer=function(e){var t=this;return t._rendererController.preloadNextRenderer(e)},n.prototype.preloadNextAdRenderer=function(e){var t=this;return t._rendererController.preloadNextAdRenderer(e)},n.prototype.getEventBus=function(){var e=this;return e._eventBus},n.prototype.getModel=function(){var e=this;return e._model},n.prototype.getProfiler=function(){var e=this;return e._profiler},n.prototype.setBlockedFlashState=function(){var e=this;e._setViewState(R.BLOCKED)},n.prototype.switchAndPlayNextRenderer=function(e){var t=this;t._rendererController.switchAndPlayNextRenderer(e)},n.prototype.switchToNextRenderer=function(){var e=this;e._rendererController.switchToNextRenderer()},n.prototype.didRendererTimeOut=function(){var e=this;return e._rendererController.didRendererTimeOut()},n.prototype.render=function(){var e=this;if(e._contentElem=E.render(N,{enableDocking:e._model.ui.docking.enableOnScrollDown||e._model.ui.docking.enableOnScrollUp}),e._mainElem=e._contentElem.querySelector(".yvp-main"),e.rootElem.appendChild(e._contentElem),E.classList(e._contentElem).add(e._viewSize),Object.keys(A).filter(function(e){return A[e]}).forEach(function(t){"os"===t&&(t=A.os),"ie"===t&&E.classList(e._contentElem).add("yvp-"+t.toLowerCase()+A[t]),E.classList(e._contentElem).add(j+t.toLowerCase())}),A.mobile&&e._model.playback.canPlayInline&&E.classList(e._contentElem).add(j+"playsinline"),T.isFunction(g)?e._loadingScreen=new b:e._model.ui.chromeless||T.isFunction(y)&&(e._loadingScreen=new y(e._eventBus)),e._loadingScreen&&e._mainElem.appendChild(e._loadingScreen.create()),e._model.ui.showControls&&!A.iphone&&!A.android){e.controls=new i(e._eventBus,e,e._model);var t=e.controls.create();t.forEach(function(t){e._mainElem.appendChild(t)})}var r=function(t){e._mouseMoveHandler()},n=function(t){e._mouseOutHandler(t)};e.bindMouseEvents=function(){e._lastMouseMoveCoordinates={},e._contentElem.addEventListener("mousemove",function(t){e._lastMouseMoveCoordinates.x!==t.clientX&&e._lastMouseMoveCoordinates.y!==t.clientY&&(r(t),e._lastMouseMoveCoordinates.x=t.clientX,e._lastMouseMoveCoordinates.y=t.clientY)}),e._contentElem.addEventListener("mouseover",r),e._contentElem.addEventListener("mouseout",n)},A.tv||A.mobile||e.bindMouseEvents(),e.unbindMouseEvents=function(){e._contentElem.removeEventListener("mousemove",r),e._contentElem.removeEventListener("mouseover",r),e._contentElem.removeEventListener("mouseout",n)},T.isFunction(e._handleFullscreenChange.bind)&&(e._fullscreenChangeEventHandler=e._handleFullscreenChange.bind(e),k.forEach(function(t){document.addEventListener(t,e._fullscreenChangeEventHandler)})),A.mobile||e._model.ui.chromeless||(e.adsOverlay=new S(e._eventBus,e),e._mainElem.appendChild(e.adsOverlay.create())),e._feedbackScreen=new _(e._model,e._eventBus,e),e._settingsNode=e.getSettingsNode(),e._playlistController=new L(e),e._bindDockingScrollListener(),e._rendererController=new I(e),e._easterEgg=new s("NORMAL",function(){e._openSimSim||(e._openSimSim=new p(e._model,e._eventBus,e._profiler,e._rendererController),e._mainElem.appendChild(e._openSimSim.create())),e._openSimSim.render()}),e.createAdsInfoPanel=function(t){e._adsEasterEgg||(e._adsEasterEgg=new s("AD",function(){e._adsInfoPanel||(e._adsInfoPanel=new u(e._model,e._eventBus,e._profiler,t),e._mainElem.appendChild(e._adsInfoPanel.create())),e._adsInfoPanel.show()}))},A.desktop&&e._mainElem.addEventListener("contextmenu",function(e){return e.preventDefault(),!1})},n.prototype.isDocked=function(){var e=this;return e._isDocked},n.prototype._bindDockingScrollListener=function(){var e=this;e._detectViewportChangeHandler&&e._removeDockingScrollListener();var t=A.ie>0&&A.ie<10,r=!A.mobile&&!t;r&&(e._model.ui.docking.enableOnScrollDown||e._model.ui.docking.enableOnScrollUp)&&(e._detectViewportChangeHandler=e._detectViewportChange.bind(e),window.addEventListener("scroll",e._detectViewportChangeHandler))},n.prototype._removeDockingScrollListener=function(){var e=this;e._detectViewportChangeHandler&&(window.removeEventListener("scroll",e._detectViewportChangeHandler),e._detectViewportChangeHandler=null)},n.prototype._detectViewportChange=function(){var e=this,t=window.pageYOffset;if(t!==e.lastScrollY&&!e.isFullscreen){e.lastScrollY=t;var r=E.getElementViewability(e.rootElem),n=r>=e._model.ui.docking.threshold;n||e._isDocked||e._model.playbackState.state!==f.VIDEO||e._model.playbackState.paused?n&&e._isDocked&&e.undockVideoPlayer():e.dockVideoPlayer()}},n.prototype._setContentElementFixed=function(){var e=this,t=e.rootElem.getBoundingClientRect(),r=document.querySelector("body").clientWidth;e._model.ui.docking.positionTop>-1&&(e._contentElem.style.top=t.top+"px"),e._model.ui.docking.positionBottom>-1&&(e._contentElem.style.bottom=t.bottom+"px"),e._model.ui.docking.positionRight>-1&&(e._contentElem.style.right=r-t.right+"px"),e._model.ui.docking.positionLeft>-1&&(e._contentElem.style.left=t.left+"px"),e._contentElem.style.width=e._preDockedWidth+"px",e._contentElem.style.height=e._preDockedHeight+"px",e._contentElem.style.position="fixed"},n.prototype._updateDockedElements=function(){var e=this;if(e._model.ui.docking.enableOnScrollDown||e._model.ui.docking.enableOnScrollUp){e._dockedMetaTitleElem&&e._dockedBg||(e._dockedMetaTitleElem=e._contentElem.querySelector(".yvp-docked-title"),e._dockedMetaProviderElem=e._contentElem.querySelector(".yvp-docked-provider"),e._dockedBg=document.createElement("div"),e._dockedBg.setAttribute("class","yvp-docked-bg"),e._dockedBgImg=document.createElement("img"),e._dockedBgImg.setAttribute("class","yvp-docked-img"),e._dockedBgOverlay=document.createElement("div"),e._dockedBgOverlay.setAttribute("class","yvp-docked-overlay"),e._dockedBgOverlayText=document.createElement("div"),e._dockedBgOverlayText.setAttribute("class","yvp-docked-overlay-text"),e._dockedBgOverlayText.innerHTML="Scroll back up to restore default view.",e._dockedBgOverlay.appendChild(e._dockedBgOverlayText),e._dockedBg.appendChild(e._dockedBgImg),e._dockedBg.appendChild(e._dockedBgOverlay),e.rootElem.appendChild(e._dockedBg)),e._dockedCloseButton||(e._dockedCloseButton=e._contentElem.querySelector(".yvp-docked-close-button"));var t=e._model.playlist.getCurrentItem();e._dockedBgImg.setAttribute("src",t._thumbnail),e._dockedMetaTitleElem.innerHTML=t.title,e._dockedMetaProviderElem.innerHTML=t.provider&&t.provider.name}},n.prototype.dockVideoPlayer=function(){var e=this,t=!0,r=window.scrollY,n=e._model.ui.docking.width,o=e._model.ui.docking.height;if(e.lastScrollY>r&&(t=!1),e._model.ui.docking.enableOnScrollDown===t&&e._model.ui.docking.enableOnScrollUp!==t&&!e._fsDocked&&(e._model.ui.docking.enableOnMuted||!e._model.playbackState.mute)){if(e.toggleSettings(null,!1,!0),e._preDockedWidth=e._contentElem.clientWidth,e._preDockedHeight=e._contentElem.clientHeight,e._isDocked=!0,e._eventBus.publish(c.API.PLAYER_DOCKED_CHANGE,!0),e._updateDockedElements(),e._playlistController.togglePlaylistUI(!0),E.classList(e._contentElem).add("yvp-docked"),e._model.ui.docking.showInfoCard&&E.classList(e._contentElem).add("yvp-docked-show-meta"),e._model.ui.docking.fadeInAnimation){if(E.classList(e._contentElem).add("yvp-docked-fadein"),E.classList(e.rootElem).add("yvp-docked-mode"),e._model.ui.docking.positionTop>-1&&(e._contentElem.style.top=e._model.ui.docking.positionTop+"px"),e._model.ui.docking.positionBottom>-1&&e._model.ui.docking.positionTop<0){var i=0;e._model.ui.docking.showInfoCard&&(i=V),e._contentElem.style.bottom=i+e._model.ui.docking.positionBottom+"px"}e._model.ui.docking.positionRight>-1&&e._model.ui.docking.positionLeft<0&&(e._contentElem.style.right=e._model.ui.docking.positionRight+"px"),e._model.ui.docking.positionLeft>-1&&(e._contentElem.style.left=e._model.ui.docking.positionLeft+"px")}else{e._setContentElementFixed();var a=e._contentElem.getBoundingClientRect(),s=document.querySelector("body").clientWidth,l=window.innerHeight,d=0,p=0;if(e._model.ui.docking.positionTop>-1&&(p=e._model.ui.docking.positionTop,e._contentElem.style.top="0px"),e._model.ui.docking.positionBottom>-1){var u=0;e._model.ui.docking.showInfoCard&&(u=V),p=l-o-u-e._model.ui.docking.positionBottom,e._contentElem.style.bottom=""}e._model.ui.docking.positionRight>-1&&(d=s-a.left-n-e._model.ui.docking.positionRight,e._contentElem.style.right=""),e._model.ui.docking.positionLeft>-1&&(d=e._model.ui.docking.positionLeft,e._contentElem.style.left="0px"),e._contentElem.style.transform="translate3d("+d+"px, "+p+"px, 0)",E.classList(e._contentElem).add("yvp-docked-animated"),E.classList(e.rootElem).add("yvp-docked-mode")}if(e._dockedCloseButton)if(e._nflBranding){var _=A.mobile?e._nflBarDimensions.MOBILE.HEIGHT:e._nflBarDimensions.DESKTOP.HEIGHT;e._dockedCloseButton.style.bottom=o-22-_+"px"}else e._dockedCloseButton.style.bottom=o-22+"px";e._contentElem.style.width=n+"px",e._contentElem.style.height=o+"px",e._eventBus.publish(c.API.PLAYER_VIEWPORT_CHANGE,!1),e._eventBus.publish(c.PLAYER_DIMENSION_CHANGE,{width:n,height:o}),e._setContentHeight(),e._model.uiState.isDocked=!0}},n.prototype.undockVideoPlayer=function(e){var t=this;E.classList(t._contentElem).remove("yvp-docked"),E.classList(t._contentElem).remove("yvp-docked-show-meta"),t._model.ui.docking.fadeInAnimation?(E.classList(t._contentElem).remove("yvp-docked-fadein"),t._contentElem.style.top="",t._contentElem.style.right="",t._contentElem.style.bottom="",t._contentElem.style.left="",t._contentElem.style.width="",t._contentElem.style.height=""):(t._contentElem.style.transform="translate3d(0, 0, 0)",t._setContentElementFixed()),t._isDocked=!1,t._eventBus.publish(c.API.PLAYER_DOCKED_CHANGE,!1),t._playlistController.togglePlaylistUI(!1),e&&t._eventBus.publish(c.TOGGLE_PLAY_PAUSE),setTimeout(function(){t._isDocked||(t._model.uiState.isDocked=!1,t._model.ui.docking.fadeInAnimation||(t._contentElem.style.width="",t._contentElem.style.height="",E.classList(t._contentElem).remove("yvp-docked-animated"),t._contentElem.style.position="",t._contentElem.style.transform="",t._contentElem.style.top="",t._contentElem.style.right="",t._contentElem.style.bottom="",t._contentElem.style.left=""),t._dockedBg&&(t.rootElem.removeChild(t._dockedBg),t._dockedBg=null),E.classList(t.rootElem).remove("yvp-docked-mode"),t._setContentHeight(),t._eventBus.publish(c.API.PLAYER_VIEWPORT_CHANGE,!0),t._eventBus.publish(c.PLAYER_DIMENSION_CHANGE,{width:t._preDockedWidth,height:t._preDockedHeight}))},250)},n.prototype.updateDockingConfig=function(e,t,r,n,o,i){var a=this;"boolean"==typeof e&&(a._model.ui.docking.enableOnScrollDown=e),"boolean"==typeof t&&(a._model.ui.docking.enableOnScrollUp=t),isNaN(r)||(a._model.ui.docking.positionTop=r),isNaN(n)||(a._model.ui.docking.positionRight=n),isNaN(o)||(a._model.ui.docking.positionLeft=o),isNaN(i)||(a._model.ui.docking.positionBottom=i),e||t?(a._bindDockingScrollListener(),a._isDocked&&a.dockVideoPlayer()):(a._removeDockingScrollListener(),a._isDocked&&a.undockVideoPlayer())},n.prototype.getContentNode=function(){var e=this;return e._contentElem},n.prototype.getOpenSimSim=function(){var e=this;return e._openSimSim},n.prototype.getMainElement=function(){var e=this;return e._mainElem},n.prototype.getRootElement=function(){var e=this;return e.rootElem},n.prototype.getRootElement=function(){var e=this;return e.rootElem},n.prototype.getVideoElement=function(){var e=this;return e.rootElem.getElementsByTagName("video")[0]},n.prototype.getCustomControlsNode=function(){var e=this;return e.rootElem.querySelector(".yvp-custom-controls")},n.prototype.getSettingsNode=function(){var e=this;return e.rootElem.querySelector(".yvp-settings-container")},n.prototype._setContentHeightForNFL=function(){var e=this;setTimeout(function(){e._setContentHeight()},700)},n.prototype._setContentHeight=function(){var e=this;if(e._nflBranding&&e._contentElem&&e._mainElem){var t=A.mobile?e._nflBarDimensions.MOBILE.HEIGHT:e._nflBarDimensions.DESKTOP.HEIGHT,r=e._contentElem.offsetHeight-t+"px";e._mainElem.style.height=r}},n.prototype._loadNFLBranding=function(){var e=this;if(!e._nflBranding){e._nflBranding=new a(e._eventBus,e,e._model),e._setContentHeight();var t=e._playlistController.getPlaylistRootElement(),r=e._playlistController.isPlaylistShown(),n=e._playlistController.getPlaylistUIPosition();e._nflBrandingNode=e._nflBranding.create(),r&&n===M.PLAYLIST_POS_BOTTOM&&t?t.parentNode.insertBefore(e._nflBrandingNode,t):e._contentElem.appendChild(e._nflBrandingNode)}},n.prototype._removeNFLBranding=function(){var e=this;e._mainElem&&(e._mainElem.style.height="100%"),e._nflBranding&&(e._contentElem.removeChild(e._nflBranding.node),e._nflBranding.destroy(),e._nflBranding=null,e._nflBrandingNode=null)},n.prototype.getNFLBrandingNode=function(){var e=this;return e._nflBrandingNode},n.prototype.setKeyboardFocus=function(){var e=this;e._contentElem.focus()},n.prototype.updateViewOnEscPress=function(){var e=this;e._openSimSim&&e._openSimSim.isOpen()?e._openSimSim.close():e._adsInfoPanel&&e._adsInfoPanel.isOpen()?e._adsInfoPanel.close():e._feedbackScreen&&e._feedbackScreen.isOpen()?e._feedbackScreen.close():E.classList(e._contentElem).contains("yvp-show-settings")?e.toggleSettings(null,!1):e.getFullscreen()&&e.setFullscreen(!1)},n.prototype.toggleSettings=function(e,t,r){var n=this;if(e&&(n._settingBtn=e),n._settingBtn||(n._settingBtn=n._contentElem.querySelector(".yvp-setting-btn")),n._settingBtn){var o="",i=n._settingBtn.querySelector(".yvp-setting-pointer");E.classList(n._settingBtn).contains("selected")&&t!==!0||t===!1?(E.classList(n._settingsNode).remove("open"),E.classList(n._settingBtn).remove("selected"),E.classList(i).remove("open"),E.classList(n._contentElem).remove("yvp-settings-on"),o="OFF"):E.classList(n._settingBtn).contains("selected")&&t!==!0||(E.classList(n._settingsNode).add("open"),E.classList(n._settingBtn).add("selected"),E.classList(i).add("open"),E.classList(n._contentElem).add("yvp-settings-on"),o="ON"),r||n._eventBus.publish(c.CTRL_SETTINGS)}},n.prototype.disableControls=function(){var e=this;E.classList(e._contentElem).add("yvp-disable-controls")},n.prototype.enableControls=function(){var e=this;E.classList(e._contentElem).remove("yvp-disable-controls")},n.prototype.hideContentRenderer=function(e){var t=this;e?E.classList(t._contentElem).add("yvp-hide-content-on"):E.classList(t._contentElem).remove("yvp-hide-content-on")},n.prototype.resetState=function(){var e=this;e._destroyStartScreen(),e._destroyEndScreen(),e._removeNFLBranding()},n.prototype.checkForNFLBranding=function(){var e=this,t=e._model.playlist.getCurrentItem(),r=t?t.provider:null;r&&"video.nflhighlights.com"===r.providerId&&e._loadNFLBranding()},n.prototype.syncViewState=function(){var e,t=this,r=t._model,n=r.playbackState,o=r.castState,i=o&&o.connected,a=t._model.playlist&&t._model.playlist.getCurrentItem();t._setFlag(P.CASTING,i),i&&(o.mediaLoaded&&!o.paused?E.classList(t._contentElem).add("yvp-cast-playing"):E.classList(t._contentElem).remove("yvp-cast-playing"));var s=E.classList(t._contentElem).contains(B+P.LOADING);switch(t._setFlag(P.LOADING,n.loading),!s&&n.loading?t._eventBus.publish(c.API.LOADING_BEGIN):s&&!n.loading&&t._eventBus.publish(c.API.LOADING_END),n.state){case f.INIT:case f.WAITING:e=R.START_SCREEN,t._nflBranding||t.checkForNFLBranding();var l=r.playback.continuousPlay&&0!==r.playlist.position,d="always"===r.skipOnError||"timebased"===r.skipOnError,p=!r.playback.autoplay||r.playbackState.waitingForUserTap,u=a&&(a.hasThumbnail()&&!A.mobile||a.fetchFinished());!p||!u||l&&d||t._renderStartScreen();break;case f.VIDEO:var _,v=n.isVpaidAdPlaying();t._nflBranding||t.checkForNFLBranding(),_=v?m.VPAID:n.isAdPlaying()?m.AD:m.VIDEO,t._rendererController.setRendererMode(_),e=R.VIDEO;var y=!n.paused;y?(t._setFlag(P.PLAYING,!0),t._setFlag(P.PAUSED,!1)):(t._setFlag(P.PLAYING,!1),t._setFlag(P.PAUSED,!0)),t._rendererController.syncPlaybackState();break;case f.END:if(t.endVideo(),t._removeNFLBranding(),n.criticalError)t._model.ui.chromeless?t._eventBus.publish(c.API.PLAYER_ERROR,n.criticalError):t._renderErrorScreen(n.criticalError,a,t._model.guid),e=R.ERROR,t.stopMedia();else{var g=a&&a.isLive();t._rendererController.rewindAfterEnd(g);var b=function(r){if(r)return e=R.END_SCREEN,void t.syncViewState();t._model.playback.continuousPlay=!0;var n=t._model.playlist.position,o=n+1,i=t._model.playlist.getMediaItemAt(o),a=i.id;t._eventBus.publish(c.RELATED_ITEM_CLICK,a,o,!1,!0)};t.maybeFetchMoreVideos(b)||t._renderEndScreen(n.previousItem),e=R.END_SCREEN}}t._currentViewState=e,t._setViewState(e),t._synchAriaState()},n.prototype.getCurrentViewState=function(){return this._currentViewState},n.prototype._setViewState=function(e){var t=this,r=x+e,n=E.classList(t._contentElem);Object.keys(R).forEach(function(e){var t=x+R[e];n.contains(t)&&t!==r&&n.remove(t)}),n.contains(r)||n.add(r)},n.prototype.setSelectedStreams=function(e){},n.prototype.play=function(e){var t=this;t._rendererController.play(e)},n.prototype.pause=function(){var e=this;e._rendererController.pause()},n.prototype.preload=function(e){var t=this;t._rendererController.preload(e)},n.prototype._setFlag=function(e,t){var r=this,n=E.classList(r._contentElem),o=B+e,i=n.contains(o);t?i||n.add(o):i&&n.remove(o)},n.prototype.renderAgeGateScreen=function(e,t){if(e){var r=this;r._ageGateScreen=new d(r._eventBus,t),r._mainElem.appendChild(r._ageGateScreen.create(e))}},n.prototype.destroyAgeGateScreen=function(){var e=this;e._ageGateScreen&&(e._mainElem.removeChild(e._ageGateScreen.node),e._ageGateScreen.destroy(),e._ageGateScreen=null)},n.prototype._renderStartScreen=function(){var e=this,t=null,r=null,n=e._model.YVAP;if(!e._startScreen){var o=function(){r&&(r(),clearTimeout(t),r=t=null),e._renderStartScreenImpl(e._model.playlist.getCurrentItem(),e._model)};A.mobile&&n&&n.accountId&&!n.adsReady?(r=e._eventBus.subscribe(c.ADS_READY,o,e),t=setTimeout(o,1e3)):o()}},n.prototype._renderStartScreenImpl=function(e,t){var r=this;r._startScreen||(t.ui.showStartScreen&&(r._startScreen=new v(r._eventBus),r._mainElem.appendChild(r._startScreen.create(e,t))),r._eventBus.publish(c.START_SCREEN_RENDERED))},n.prototype._destroyStartScreen=function(){var e=this,t=e._startScreen&&e._startScreen.node;t&&(e._mainElem.removeChild(t),e._startScreen.destroy(),e._startScreen=null)},n.prototype.maybeFetchMoreVideos=function(e){var t=this,r=t._model.ui.showEndScreen,n=t._model.ui.showReplayOnlyEndScreen,o=t._seedMediaItem&&t._seedMediaItem.isCCM,i=t._playlistController.isPlaylistShown();return!o||t._endScreen||!r||n||i?!1:(t._playlistController.fetchMore(M.PLAYLIST_ENDSCREEN_COUNT_PER_PAGE,e),!0)},n.prototype._renderEndScreen=function(e){var t=this,r=t._model.ui.showReplayOnlyEndScreen,n=t._contentElem.querySelector(".yvp-end-replay");if(r&&!n){var o=E.render(D,{});t._onEndScreenTap=function(){t._eventBus.publish(c.RELATED_ITEM_CLICK,e.id,-1,!1,!1)},t._endScreenTap=new h(o),o.addEventListener("tap",function(){t._onEndScreenTap(!1)}),t._mainElem.appendChild(o),t._endScreenNode=o}!t._startScreen&&r&&t._renderStartScreen(),t._eventBus.publish(c.END_SCREEN_RENDERED),t._eventBus.publish(c.API.UI_INTERACT,{srcElement:"es-view"})},n.prototype._destroyEndScreen=function(){var e=this;e._endScreenNode&&(e._endScreenNode.removeEventListener("tap",e._onEndScreenTap),e._endScreenTap.destroy(),e._mainElem.removeChild(e._endScreenNode))},n.prototype._renderErrorScreen=function(e,t,r){var n=this;if(!n._errorScreen){n._errorScreen=new l(n._eventBus);var o=t?t.images.defaultThumbnail:"",i=E.getAssetUrl(n._model.isLocal(),n._model.version,C);if(n._model.isLocal())i="assets/flash_download_logo.svg";else{var a="https:"===document.location.protocol?"https://s.yimg.com":"http://l.yimg.com";i=a+"/rx/builds/"+n._model.version+"/assets/flash_download_logo.svg"}t=t?t:n._model.playlist.getCurrentItem()||{},n._mainElem.appendChild(n._errorScreen.create(e,r,t.videoSession||"",o,i)),n._eventBus.publish(c.API.UI_INTERACT,{srcElement:"err-view-"+e.category+"-"+e.subcategory})}},n.prototype._synchAriaState=function(){var e=this;e.controls&&e.controls.syncAriaState()},n.prototype.endVideo=function(){var e=this;e._rendererController.endVideo()},n.prototype.seek=function(e){var t=this;t._rendererController.seek(e)},n.prototype.getCurrentTime=function(){var e=this;return e._rendererController.getCurrentTime()},n.prototype.getDuration=function(){var e=this;return e._rendererController.getDuration()},n.prototype.setQuality=function(e){var t=this;t._rendererController.setQuality(e)},n.prototype.setFullscreen=function(e){var t=this,r=t._contentElem,n=r.requestFullscreen||r.webkitRequestFullscreen||r.mozRequestFullScreen||r.msRequestFullscreen,o=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;e?(A.ios?t._rendererController.enterFS():A.android&&!t.controls?t._rendererController.enterFS():n?n.call(r):t._enterLightbox(),t._eventBus.publish(c.CTRL_FULLSCREEN,"ON")):(A.ios?t._rendererController.exitFS():o?o.call(document):t._exitLightbox(),t._eventBus.publish(c.CTRL_FULLSCREEN,"OFF")),t._isFullScreen===e||n||o||(t._handleFullscreenChange(),t._eventBus.publish(c.FULLSCREEN_CHANGE,e),t._isFullScreen=e),t._synchAriaState()},n.prototype._enterLightbox=function(){var e=this,t=document.querySelector("body");if(!E.classList(t).contains("yvp-lightbox")){for(var r=e._contentElem.parentNode;"BODY"!==r.nodeName;)E.classList(r).add("yvp-lightbox-ancestor"),r=r.parentNode;E.classList(t).add("yvp-lightbox")}},n.prototype._exitLightbox=function(){var e=this,t=document.querySelector("body");if(E.classList(t).contains("yvp-lightbox")){E.classList(t).remove("yvp-lightbox");for(var r=e._contentElem.parentNode;"BODY"!==r.nodeName;)E.classList(r).remove("yvp-lightbox-ancestor"),r=r.parentNode}},n.prototype.getFullscreen=function(){var e=this,t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,r=A.mobile&&(document.isFullScreen||document.webkitIsFullScreen);return t===e._contentElem||E.classList(document.querySelector("body")).contains("yvp-lightbox")||r},n.prototype.toggleFullscreen=function(){var e=this;e.setFullscreen(!e.getFullscreen())},n.prototype.setVolume=function(e){var t=this;t._rendererController.setVolume(e),t._eventBus.publish(c.API.PLAYER_VOLUME_CHANGE,e)},n.prototype._onMuteChange=function(e){var t=this;e?E.classList(t._contentElem).add("yvp-muted"):E.classList(t._contentElem).remove("yvp-muted")},n.prototype.setMute=function(e){var t=this;t._rendererController.setMute(e),t._eventBus.publish(c.API.PLAYER_MUTE_CHANGE,e)},n.prototype._mouseMoveHandler=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout),E.classList(e._contentElem).remove("yvp-hide-controls"),e._objectOverlay&&E.classList(e._objectOverlay).remove("yvp-overlay-hide-cursor"),e._model.playbackState.seeking||e._model.playbackState.paused||(e._autoHideControlsTimeout=setTimeout(e._onAutoHideControls.bind(e),e._controlsHideTimeout)),e._eventBus.publish(c.CONTROLS_BAR_CHANGE,!0,!0);var t=e.getFullscreen();t||e._eventBus.publish(c.CC.POSITION_FLOAT,!0)},n.prototype._mouseOutHandler=function(e){var t=this;if("mouseout"===e.type){t._autoHideControlsTimeout&&clearTimeout(t._autoHideControlsTimeout),E.classList(t._contentElem).add("yvp-hide-controls"),t._eventBus.publish(c.CONTROLS_BAR_CHANGE,!1,!1);var r=t.getFullscreen();r||t._eventBus.publish(c.CC.POSITION_FLOAT,!1)}},n.prototype._onAutoHideControls=function(){var e=this;e._objectOverlay=e._contentElem&&e._contentElem.querySelector(".yvp-object-overlay"),clearTimeout(e._autoHideControlsTimeout),e._autoHideControlsTimeout=null,E.classList(e._contentElem).add("yvp-hide-controls"),e._eventBus.publish(c.CONTROLS_BAR_CHANGE,!1,!0)},n.prototype._onUpnextPgClick=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout),e._model.playbackState.seeking||(e._autoHideControlsTimeout=setTimeout(e._onAutoHideControls.bind(e),e._controlsHideTimeout))},n.prototype._handleFullscreenChange=function(){var e=this,t=e.getFullscreen();t?(E.classList(e._contentElem).add("yvp-state-fullscreen"),e._isDocked&&(e._fsDocked=!0,e.undockVideoPlayer())):(E.classList(e._contentElem).remove("yvp-state-fullscreen"),(e._isDocked||e._fsDocked)&&(e._fsDocked=!1,e.dockVideoPlayer())),e._isFullScreen!==t&&(e._model.uiState.isFullscreen=t,e._eventBus.publish(c.FULLSCREEN_CHANGE,t),e._isFullScreen=t)},n.prototype._onDimensionChange=function(e){var t=this,r=e.width||1,n=e.height||1,o=t._getViewSize(r,n);(t.isStreamMode()||t.isMiniStreamMode())&&o===w.NORMAL&&t._removeStreamMode(),o===w.VERY_SMALL?E.classList(t._contentElem).add("yvp-ministream"):o===w.SMALL&&E.classList(t._contentElem).add("yvp-stream")},n.prototype._removeStreamMode=function(){var e=this,t=e.getContentNode();E.classList(t).remove("yvp-ministream"),E.classList(t).remove("yvp-stream")},n.prototype._getViewSize=function(e,t){var r=w.NORMAL;return(e<=O.VERY_SMALL_WIDTH||t<=O.VERY_SMALL_HEIGHT)&&(r=w.VERY_SMALL),(e<=O.SMALL_WIDTH&&e>O.VERY_SMALL_WIDTH||t<=O.SMALL_HEIGHT&&t>O.VERY_SMALL_HEIGHT)&&(r=w.SMALL),r},n.prototype.clearAutoHideTimeout=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout)},n.prototype.setOverlayActive=function(e){var t=this;e?E.classList(t._contentElem).add("yvp-overlay-active"):E.classList(t._contentElem).remove("yvp-overlay-active")},n.prototype.destroyFullscreenChangeListeners=function(){var e=this;e._fullscreenChangeEventHandler&&k.forEach(function(t){document.removeEventListener(t,e._fullscreenChangeEventHandler)})},n.prototype.getClientVideoDimension=function(){var e=this;return{width:e._contentElem.clientWidth,height:e._contentElem.clientHeight}},n.prototype.getControls=function(){var e=this;return e.controls},n.prototype.getPlaylistController=function(){var e=this;return e._playlistController},n.prototype.isStreamMode=function(){var e=this;return e._viewSize===w.SMALL||E.classList(e._contentElem).contains("yvp-stream")},n.prototype.isMiniStreamMode=function(){var e=this;return e._viewSize===w.VERY_SMALL||E.classList(e._contentElem).contains("yvp-ministream")},n.prototype.stopMedia=function(){var e=this;return e._rendererController.stopMedia()},n.prototype.destroy=function(){var e=this;e.controls&&e.controls.destroy(),e._easterEgg&&e._easterEgg.destroy(),e._adsEasterEgg&&e._adsEasterEgg.destroy(),e._endScreen&&e._endScreen.destroy(),e._errorScreen&&e._errorScreen.destroy(),e._loadingScreen&&e._loadingScreen.destroy(),e._playlistController&&e._playlistController.destroy(),e._rendererController&&e._rendererController.destroy(),e._startScreen&&e._startScreen.destroy(),e.destroyAgeGateScreen(),e.destroyFullscreenChangeListeners(),A.tv||A.mobile||e.unbindMouseEvents(),e._ageGateController&&e._ageGateController.destroy(),e._openSimSim&&e._openSimSim.destroy(),e._adsInfoPanel&&e._adsInfoPanel.destroy(),e._feedbackScreen&&e._feedbackScreen.destroy(),e.rootElem.innerHTML="",e._removeDockingScrollListener()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./constants":18,"./easter-egg":21,"./event":"YJm+dH","./playlist-controller":44,"./renderer-controller":47,"./renderers/modes":53,"./states":57,"./tap":"dsc79Q","./util":"jJTEqU","./views/ads-info-panel.js":70,"./views/ads-overlay":72,"./views/age-gate-screen":74,"./views/base.html":75,"./views/controls":80,"./views/end-screen-replay.html":81,"./views/error-screen":83,"./views/feedback-screen":85,"./views/loading-screen":87,"./views/nfl-branding":89,"./views/open-sim-sim":91,"./views/start-screen":99,"./views/tumblr-controls":164,"./views/tumblr-loading-screen":164,fs:164,"insert-css":166}],68:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div>"),n.b("\n"+r),n.b("    <table border='1'>"),n.b("\n"+r),n.b("        <tr>"),n.b("\n"+r),n.b("            <th>Clip</th>"),n.b("\n"+r),n.b("            <th>Position</th>"),n.b("\n"+r),n.b("        </tr>"),n.b("\n"+r),n.b("        "),n.b("\n"+r),n.s(n.f("clipStats",e,t,1),e,t,0,143,1206,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("            <tr>"),n.b("\n"+r),n.b("                <td>"),n.b(n.v(n.f("clipId",e,t,0))),n.b("</td>"),n.b("\n"+r),n.b("                <td>"),n.b("\n"+r),n.b("                	<table border='1'>"),n.b("\n"+r),n.b("                	<tr>"),n.b("\n"+r),n.s(n.f("data",e,t,1),e,t,0,303,362,"{{ }}")&&(n.rs(e,t,function(e,t,r){r.b("                		<th>"),r.b(r.v(r.f("position",e,t,0))),r.b("</th>"),r.b("\n")}),e.pop()),n.b("                	</tr>"),n.b("\n"+r),n.b("                	<tr>"),n.b("\n"+r),n.s(n.f("data",e,t,1),e,t,0,443,1111,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("                		<td>"),n.b("\n"+r),n.s(n.f("data",e,t,1),e,t,0,495,1060,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("	                		<ul>"),n.b("\n"+r),n.b("	                			<li>Ad Opportunity: "),n.b(n.v(n.f("taken",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b("	                			<li>Communicator: "),n.b(n.v(n.f("communicator",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b("	                			<li>Response Code: "),n.b(n.v(n.f("responseCode",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b("	                			<li>Response Type: "),n.b(n.v(n.f("responseType",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b("	                			<li>First Redirect: "),n.b(n.v(n.f("firstRedirect",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b("	                			<li>Redirect count: "),n.b(n.v(n.f("redirectCount",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b("	                			<li>Ad Delivery error: "),n.b(n.v(n.f("error",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b("	                			<li>Ad Media Start latency: "),n.b(n.v(n.f("mediaStartLatency",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b("	                		</ul>"),n.b("\n")}),e.pop()),n.b("                		</td>"),n.b("\n")}),e.pop()),n.b("                	</tr>"),n.b("\n"+r),n.b("                	</table>"),n.b("\n"+r),n.b("				</td>"),n.b("\n"+r),n.b("            </tr>"),n.b("\n")}),e.pop()),n.b("    </table>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],69:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-adspanel yvp-opensimsim' style='display: none'>"),n.b("\n"+r),n.b("    <button class='yvp-opensimsim-close-btn yvp-close-btn'></button>"),n.b("\n"+r),n.b("\n"+r),n.b("    <div class='yvp-opensimsim-info'>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-title'>Yahoo Video Ads</div>"),n.b("\n"+r),n.b("        <div>Version : "),n.b(n.v(n.f("version",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div>Page SpaceID : "),n.b(n.v(n.f("spaceId",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div class='yvp-sessionId'></div>"),n.b("\n"+r),n.b("        <div>YVAP Acct. ID : "),n.b(n.v(n.f("yvap_accountId",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div>YVAP Play Context : "),n.b(n.v(n.f("yvap_playContext",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div class='yvp-videoSpaceId'></div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-uuid'></div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-renderertype'></div>"),n.b("\n"+r),n.b("        <div>Midroll Cache Stats: <div class='yvp-midrollcache-data'></div></div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-title'>Ads Info</div>"),n.b("\n"+r),n.b("        <br>"),n.b("\n"+r),n.b("        <div class='yvp-adsinfopanel-adsinfo'><div style='text-align: center;'>YVAP disabled!!</div></div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("\n"+r),n.b("    <section class='ad-info-table yvp-table'>"),n.b("\n"+r),n.b("        <div>"),n.b("</div>"),n.b("\n"+r),n.b("        <header class='yvp-tablerow'>"),n.b("\n"+r),n.b("            <div class='yvp-tablecell'>position</div>"),
n.b("\n"+r),n.b("            <div class='yvp-tablecell'>dur</div>"),n.b("\n"+r),n.b("            <div class='yvp-tablecell'>adPbId</div>"),n.b("\n"+r),n.b("            <div class='yvp-tablecell'>crId</div>"),n.b("\n"+r),n.b("            <div class='yvp-tablecell'>vCrId</div>"),n.b("\n"+r),n.b("            <div class='yvp-tablecell'>bId</div>"),n.b("\n"+r),n.b("            <div class='yvp-tablecell'>State</div>"),n.b("\n"+r),n.b("            <div class='yvp-tablecell'>log</div>"),n.b("\n"+r),n.b("        </header>"),n.b("\n"+r),n.b("        <div class='yvp-tablerow'>"),n.b("\n"+r),n.b("            <div class='adposition yvp-tablecell'></div>"),n.b("\n"+r),n.b("            <div class='addur yvp-tablecell'></div>"),n.b("\n"+r),n.b("            <div class='adPbId yvp-tablecell'></div>"),n.b("\n"+r),n.b("            <div class='crId yvp-tablecell'></div>"),n.b("\n"+r),n.b("            <div class='vCrId yvp-tablecell'></div>"),n.b("\n"+r),n.b("            <div class='bId yvp-tablecell'></div>"),n.b("\n"+r),n.b("            <div class='pbstate yvp-tablecell'></div>"),n.b("\n"+r),n.b("            <div class='yvp-tablecell'><button class='linkbtn'>log</button></div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("    </section>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],70:[function(e,t,r){"use strict";function n(e,t,r,n){var i=this;i._model=e,i._eventBus=t,i._profiler=r,i._diagnostics=n,i._yvapEnabled=null!==n,i._eventBus.subscribe(o.YVAP_MIDROLL_CACHE_UPDATE,i._updateMidrollCacheStats,i)}t.exports=n;var o=e("../event"),i=e("../util"),a=(e("../../../lib"),e("../tap")),s=e("./ads-info-panel.html"),l=e("../strings");n.prototype.create=function(){var e=this;e._node=i.render(s,{version:e._model.version,spaceId:e._model.baseConfig.pageSpaceId,yvap_accountId:e._model.YVAP.accountId,yvap_playContext:e._model.YVAP.playContext,strings:l.i18n}),e._midrollCacheStats=e._node.querySelector(".yvp-midrollcache-data"),e._adsInfoArea=e._node.querySelector(".yvp-adsinfopanel-adsinfo");var t=e._adInfoTableTemplate=e._node.removeChild(e._node.querySelector(".ad-info-table"));return e._adInfoRowTemplate=t.removeChild(t.querySelector("div.yvp-tablerow")),e._closeTap=new a(e._node.querySelector(".yvp-opensimsim-close-btn"),function(t){t.stopPropagation(),e.close()}),e._tableTap=new a(e._adsInfoArea,function(t){if("linkbtn"===t.eventSource.className)try{e._logAdDiagnosticsById(t.eventSource.parentNode.parentNode.customData.playbackId)}catch(r){}}),e._node},n.prototype.show=function(){var e=this;e._node.style.display="block",e._yvapEnabled&&(e._updateBasicMediaItemInfo(),e._drawAdInfoTables(),e._registerAdDataUpdateCallbacks())},n.prototype.isOpen=function(){var e=this;return"none"!==e._node.style.display},n.prototype.close=function(){var e=this;e._node.style.display="none",e._yvapEnabled&&e._unregisterAdDataUpdateCallbacks()},n.prototype._registerAdDataUpdateCallbacks=function(){var e=this;e._diagnostics.registerAdStateChangeListener(e._onAdStateChange.bind(e)),e._diagnostics.registerAdDataAvailableListener(e._onAdDataAvailable.bind(e))},n.prototype._unregisterAdDataUpdateCallbacks=function(){var e=this;e._diagnostics.registerAdStateChangeListener(null),e._diagnostics.registerAdDataAvailableListener(null)},n.prototype._onAdStateChange=function(e,t,r){var n=this,o=n._adsInfoArea.querySelector("[apbid="+e+"]");n._updateAdStateInRow(o,t,r)},n.prototype._onAdDataAvailable=function(e){var t=this,r=t._adsInfoArea.querySelector("[relvideo="+e.clipId+"]");t._insertRow(r,e)},n.prototype._updateMidrollCacheStats=function(e){function t(e,t){return"<div class='floated-item'>"+e+":<span> "+t+"</span></div>"}var r=this,n="",o={retryCount:"retries",targetAdsDuration:"target",totalUniqueAds:"num_uniq",totalDuplicatedAds:"num_dup",totalNoAds:"num_noad",uniqueAdsDuration:"uniq_dur"};Object.keys(e).forEach(function(r){var i=o[r]||r;n+=t(i,e[r])}),r._midrollCacheStats.innerHTML=n},n.prototype._updateBasicMediaItemInfo=function(){var e=this,t=e._model.playlist.getCurrentItem(),r=e._node.querySelector(".yvp-opensimsim-uuid");r.innerHTML="UUID : "+(t?t.id:""),r=e._node.querySelector(".yvp-opensimsim-renderertype"),r.innerHTML="Renderer Type : "+(t?t.rendererType:""),r=e._node.querySelector(".yvp-videoSpaceId"),r.innerHTML="Video SpaceID : "+(t?t.metrics.pageSpaceId:""),r=e._node.querySelector(".yvp-sessionId"),r.innerHTML="SessionId : "+(t?t.videoSession:"none")},n.prototype._updateAdStateInRow=function(e,t){var r=e,n=i.classList(r);"playing"===t?n.add("currad"):n.contains("currad")&&n.remove("currad"),r=e.querySelector(".pbstate"),n=i.classList(r),n.remove("st-"+e.customData.adstate),e.customData.adstate=t,n.add("st-"+t),r.innerHTML=t},n.prototype._drawAdInfoTables=function(){var e=this;e._adsInfoArea.innerHTML="";var t=e._diagnostics.getAllAdDiagnostics();Object.keys(t).forEach(function(r){e._drawAdDiagnosticsTable(t[r],r)})},n.prototype._drawAdDiagnosticsTable=function(e,t){var r=this,n=r._adInfoTableTemplate.cloneNode(!0);n.children[0].innerHTML="<strong>uuid: </strong>"+t,Object.keys(e).forEach(function(t){var o=e[t];r._insertRow(n,o)}),n.setAttribute("relvideo",t),r._adsInfoArea.appendChild(n)},n.prototype._insertRow=function(e,t){var r=this;if(e&&t){var n=r._adInfoRowTemplate.cloneNode(!0);if(t){var o=t.playbackId,a=t.clipId;n.setAttribute("apbid",o),n.customData={playbackId:o,uuid:a,adstate:t.adstate},n.querySelector(".adPbId").innerHTML=o,n.querySelector(".addur").innerHTML=t.duration,n.querySelector(".adposition").innerHTML=t.position,n.querySelector(".crId").innerHTML=t.creativeId,n.querySelector(".vCrId").innerHTML=t.vastCreativeId,n.querySelector(".bId").innerHTML=t.bookingId,r._updateAdStateInRow(n,t.adstate,t.adstateData),e.rowCount=void 0===e.rowCount?0:e.rowCount+1,e.rowCount%2!==0&&i.classList(n).add("yvp-altrow")}else i.classList(n).add("emptyrow");e.appendChild(n)}},n.prototype._logAdDiagnosticsById=function(e){var t=this,r=t._diagnostics.getAdDiagnosticsById(e),n=console;n.log.apply(n,["[ad diagnostics]",r])},n.prototype.destroy=function(){var e=this;e._closeTap&&e._closeTap.destroy(),e._tableTap&&e._tableTap.destroy()}},{"../../../lib":"bRhrlU","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./ads-info-panel.html":69}],71:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-ads-overlay'></div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],72:[function(e,t,r){"use strict";function n(e,t){var r=this;r._eventBus=e,r._view=t,r._controlsBottomBar=r._view.rootElem.querySelector(".yvp-bottom-bar"),r._controlsSlider=r._view.rootElem.querySelector(".yvp-slider"),r._eventBus.subscribe(i.CONTROLS_BAR_CHANGE,r._adjustOverlayHeight,r)}t.exports=n;var o=e("../util"),i=e("../event"),a=e("./ads-overlay.html");n.prototype.create=function(){var e=this;return e.node=o.render(a),e.node},n.prototype._adjustOverlayHeight=function(e){var t,r=this,n=r._controlsBottomBar.offsetHeight,o=r._view.rootElem.offsetHeight;t=e?o-n:o,r.node.style.height=t+"px"},n.prototype.destroy=function(){var e=this;e.node=null}},{"../event":"YJm+dH","../util":"jJTEqU","./ads-overlay.html":71}],73:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-agegate-container "),n.s(n.f("isBirthday",e,t,1),e,t,0,49,69,"{{ }}")&&(n.rs(e,t,function(e,t,r){r.b("yvp-agegate-birthday")}),e.pop()),n.b("'>"),n.b("\n"+r),n.b("    <img class='yvp-agegate-back-image' src='"),n.b(n.v(n.f("imageSrc",e,t,0))),n.b("' width='"),n.b(n.v(n.f("width",e,t,0))),n.b("' height='"),n.b(n.v(n.f("height",e,t,0))),n.b("'>"),n.b("\n"+r),n.b("    <div class='yvp-agegate-info-wrapper'>"),n.b("\n"+r),n.b("        <h3 class='yvp-agegate-title'>"),n.b(n.v(n.f("title",e,t,0))),n.b("</h3>"),n.b("\n"+r),n.b("        <p class='yvp-agegate-desc'>"),n.b(n.v(n.f("desc",e,t,0))),n.b("</p>"),n.b("\n"+r),n.b("        <div class='yvp-agegate-action-wrapper'>"),n.b("\n"+r),n.s(n.f("isBirthday",e,t,1),e,t,0,406,830,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("                <p class='yvp-agegate-input'>"),n.b("\n"+r),n.b("                    <input type='text' name='month' class='yvp-agegate-date-input' maxlength='2' placeholder='MM'>"),n.b("\n"+r),n.b("                    <input type='text' name='day' class='yvp-agegate-date-input' maxlength='2' placeholder='DD'>"),n.b("\n"+r),n.b("                    <input type='text' name='year' class='yvp-agegate-date-input' maxlength='4' placeholder='YYYY'>"),n.b("\n"+r),n.b("                </p>"),n.b("\n")}),e.pop()),n.s(n.f("isBlock",e,t,1),e,t,1,0,0,"")||(n.b("                <button class='yvp-agegate-btn'>"),n.b(n.v(n.f("button",e,t,0))),n.b("</button>"),n.b("\n")),n.b("        </div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],74:[function(e,t,r){"use strict";function n(e,t){var r=this;r._eventBus=e,r._controller=t}t.exports=n;var o=e("../util"),i=e("../tap"),a=e("./age-gate-screen.html");n.prototype.create=function(e){var t=this;if(t.node=o.render(a,e),t._ageGateObj=e,t._actionButton=t.node.querySelector(".yvp-agegate-btn"),t._ageGateObj.isBirthday){var r=t.node.querySelectorAll(".yvp-agegate-date-input");t._inputMonth="month"===r[0].name?r[0]:null,t._inputDay="day"===r[1].name?r[1]:null,t._inputYear="year"===r[2].name?r[2]:null}return t._bindUI(),t.node},n.prototype._bindUI=function(){var e=this;e._ageGateObj.isBlock||(e._actionButtonTap=new i(e._actionButton),e._onButtonTap=function(t){t.stopPropagation();var r=e._ageGateObj.isBirthday&&{inputMonth:e._inputMonth,inputDay:e._inputDay,inputYear:e._inputYear};e._controller.handleClickEvent(t,r)},e._actionButton.addEventListener("tap",e._onButtonTap)),e._ageGateObj.isBirthday&&(e._onKeyDown=function(t){e._controller.filterNonDigitInput(t)},e._inputMonth.addEventListener("keydown",e._onKeyDown),e._inputDay.addEventListener("keydown",e._onKeyDown),e._inputYear.addEventListener("keydown",e._onKeyDown))},n.prototype._unBindUI=function(){var e=this;e._ageGateObj.isBlock||(e._actionButtonTap.destroy(),e._actionButton.removeEventListener("tap",e._onButtonTap)),e._ageGateObj.isBirthday&&(e._inputMonth.removeEventListener("keydown",e._onKeyDown),e._inputDay.removeEventListener("keydown",e._onKeyDown),e._inputYear.removeEventListener("keydown",e._onKeyDown))},n.prototype.getNode=function(){var e=this;return e.node},n.prototype.destroy=function(){var e=this;e._unBindUI(),e.node=null}},{"../tap":"dsc79Q","../util":"jJTEqU","./age-gate-screen.html":73}],75:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div tabindex='0' class='yvp-content yvp-hide-controls' aria-label='Yahoo Video Player'>"),n.b("\n"+r),n.b("    <div class='yvp-main' tabindex='0'></div>"),n.b("\n"+r),n.b("    <div class='yvp-docked-meta'>"),n.b("\n"+r),n.b('        <div class="yvp-docked-title"></div>'),n.b("\n"+r),n.b('        <div class="yvp-docked-provider"></div>'),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],76:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-cc-options-more close'>"),n.b("\n"+r),n.b("    <div class='yvp-cc-back'>"),n.b("\n"+r),n.b("         <div class='yvp-settings-caret-icon left'></div>"),n.b("\n"+r),n.b("         <div class='yvp-cc-back-header'>"),n.b(n.v(n.d("strings.BACK",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b('    <div class="yvp-tab-container">'),n.b("\n"+r),n.b('        <ul class="yvp-tabs-nav">'),n.b("\n"+r),n.b('            <li class="yvp-tab tab-selected">'),n.b(n.v(n.d("strings.PRESETS",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b('            <li class="yvp-tab">'),n.b(n.v(n.d("strings.TEXT",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b('            <li class="yvp-tab">'),n.b(n.v(n.d("strings.BACKGROUND",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b('            <li class="yvp-tab">'),n.b(n.v(n.d("strings.EFFECTS",e,t,0))),n.b("</li>"),n.b("\n"+r),n.b("        </ul>"),n.b("\n"+r),n.b('        <div class="yvp-tabs-content">'),n.b("\n"+r),n.b('            <div class="yvp-tabcontent preset-container tab-show">'),n.b("\n"+r),n.b('                <div class="yvp-cc-preset">Aa</div>'),n.b("\n"+r),n.b('                <div class="yvp-cc-preset">Aa</div>'),n.b("\n"+r),n.b('                <div class="yvp-cc-preset">Aa</div>'),n.b("\n"+r),n.b('                <div class="yvp-cc-preset">Aa</div>'),n.b("\n"+r),n.b('                <div class="yvp-cc-preset">Aa</div>'),n.b("\n"+r),n.b('                <div class="yvp-cc-preset">Aa</div>'),n.b("\n"+r),n.b('                <div class="yvp-cc-preset">Aa</div>'),n.b("\n"+r),n.b('                <div class="yvp-cc-preset">Aa</div>'),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b('            <div class="yvp-tabcontent font-list">'),n.b("\n"+r),n.b('                <div class="yvp-colorpicker fontcolorpicker"></div>'),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b('            <div class="yvp-tabcontent bg-opacity-list">'),n.b("\n"+r),n.b('                <div class="yvp-colorpicker bgcolorpicker"></div>'),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b('            <div class="yvp-tabcontent effects">'),n.b("\n"+r),n.b('                <div class="yvp-effect none">'),n.b("\n"+r),n.b("                    <p>Aa</p>"),n.b("\n"+r),n.b("                    <div class='yvp-cc-effect-header'>"),n.b(n.v(n.d("strings.PLAIN",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b('                <div class="yvp-effect dropshadow">'),n.b("\n"+r),n.b("                    <p>Aa</p>"),n.b("\n"+r),n.b("                    <div class='yvp-cc-effect-header'>"),n.b(n.v(n.d("strings.SHADOW",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b('                <div class="yvp-effect raised">'),n.b("\n"+r),n.b("                    <p>Aa</p>"),n.b("\n"+r),n.b("                    <div class='yvp-cc-effect-header'>"),n.b(n.v(n.d("strings.RAISED",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b('                <div class="yvp-effect depressed">'),n.b("\n"+r),n.b("                    <p>Aa</p>"),n.b("\n"+r),n.b("                    <div class='yvp-cc-effect-header'>"),n.b(n.v(n.d("strings.LOWERED",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b('                <div class="yvp-effect uniform">'),n.b("\n"+r),n.b("                    <p>Aa</p>"),n.b("\n"+r),n.b("                    <div class='yvp-cc-effect-header'>"),n.b(n.v(n.d("strings.OUTLINE",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b('    <div class="yvp-cc-style-preview">'),n.b("\n"+r),n.b('        <div class="yvp-cc-options-message">'),n.b(n.v(n.d("strings.CC_PREVIEW_MESSAGE",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],77:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-cc-options-main close'>"),n.b("\n"+r),n.b("    <div class='yvp-cc-back-to-settings'>"),n.b("\n"+r),n.b("        <div class='yvp-settings-caret-icon left'></div>"),n.b("\n"+r),n.b("        <div class='yvp-back-to-settings'>"),n.b(n.v(n.d("strings.BACK",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("\n"+r),n.b("    <div class='yvp-cc-box'>"),n.b("\n"+r),n.b("        <div class='yvp-cc-header yvp-cc-item'>"),n.b(n.v(n.d("strings.CC",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div class='yvp-cc-toggle'>"),n.b("\n"+r),n.b("            <div data-cc-state='on' class='yvp-settings-item yvp-cc-on'>"),n.b(n.v(n.d("strings.ON",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            <div data-cc-state='off' class='yvp-settings-item yvp-cc-off'>"),n.b(n.v(n.d("strings.OFF",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("        <div class='yvp-cc-header yvp-cc-item'>"),n.b(n.v(n.d("strings.LANGUAGE",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div class='yvp-cc-language yvp-cc-item'></div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("\n"+r),n.b("    <div class='yvp-cc-divider'></div>"),n.b("\n"+r),n.b("    <div class='yvp-cc-box'>"),n.b("\n"+r),n.b("        <div class='yvp-cc-position yvp-cc-item'>"),n.b("\n"+r),n.b("            <div class='yvp-cc-header yvp-cc-item'>"),n.b(n.v(n.d("strings.POSITION",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            <div class='yvp-cc-pos-wrapper'>"),n.b("\n"+r),n.b("                <ul class='yvp-cc-pos-selection'></ul>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("        <div class='yvp-cc-size yvp-cc-item'>"),n.b("\n"+r),n.b("            <div class='yvp-cc-header yvp-cc-item'>"),n.b(n.v(n.d("strings.CC_TYPE_SIZE",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            <div class='yvp-cc-size-selector'>"),n.b("\n"+r),n.b("                <div class='yvp-cc-size-indicators'>"),n.b("\n"+r),n.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-0' data-size-value='0'>A</div>"),n.b("\n"+r),n.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-25' data-size-value='25'>A</div>"),n.b("\n"+r),n.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-50' data-size-value='50'>A</div>"),n.b("\n"+r),n.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-75' data-size-value='75'>A</div>"),n.b("\n"+r),n.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-100' data-size-value='100'>A</div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("\n"+r),n.b("    <div class='yvp-cc-divider'></div>"),n.b("\n"+r),n.b("    <div class='yvp-cc-box'>"),n.b("\n"+r),n.b("        <div class='yvp-cc-style yvp-cc-item'>"),n.b("\n"+r),n.b("            <div class='yvp-cc-style-preview'>Aa</div>"),n.b("\n"+r),n.b("            <div class='yvp-cc-style-more'>"),n.b("\n"+r),n.b("                <div class='yvp-cc-item'>"),n.b(n.v(n.d("strings.STYLE_OPTIONS",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("                <div class='yvp-settings-caret-icon right'></div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("        "),n.b("\n"+r),n.b("        <div class='yvp-cc-feedback-link yvp-cc-item'>"),n.b("\n"+r),n.b("            <a href='http://info.yahoo.com/legal/us/yahoo/cc/en-us/' target='_blank'>"),n.b("\n"+r),n.b("                <div class='yvp-cc-item'>"),n.b(n.v(n.d("strings.SUBMIT_FEEDBACK",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            </a>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("        <div class='yvp-cc-preview'>"),n.b("\n"+r),n.b("            <div class='yvp-cc-preview-message'>"),n.b(n.v(n.d("strings.CC_PREVIEW_MESSAGE",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],78:[function(e,t,r){"use strict";function n(e,t){var r=this;r._eventBus=e,r._model=t,r._eventBus.subscribe(p.CC.FONT_SIZE_CHANGE,r._onSizeChange,r),r._eventBus.subscribe(p.CC.FETCHED,r._populateUI,r),r._eventBus.subscribe(p.CC.LANGUAGE_CHANGE,r._syncLanguageMenu,r),r._eventBus.subscribe(p.CC.TOGGLE,r._syncToggleSelection,r),r._eventBus.subscribe(p.CC.USER_STYLE_PREFERENCES_CHANGE,r._syncCCPreferences,r),r._eventBus.subscribe(p.CC.FONT_FACE_CHANGE,r._applyFontFaceChange,r),r._eventBus.subscribe(p.CC.BG_OPACITY_CHANGE,r._applyBgOpacityChange,r),r._eventBus.subscribe(p.PLAYBACK_STARTED,r._syncCCPreferences,r)}t.exports=n;var o=(e("fs"),e("insert-css")),i=e("../states"),a=e("../strings"),s=e("../util"),l=e("../../../lib"),d=e("../tap"),c=e("../cc"),p=e("../event"),u=(e("../views/uiwidgets/tooltip"),e("../views/uiwidgets/drop-down-menu")),_=e("../views/uiwidgets/slider"),m=e("./cc-options.html"),v=e("./cc-more-options.html"),y="data-cc-state",f=["on","off"],g=["bottom","top"],b={0:16,25:20,50:24,75:28,100:32},A="yvp-settings-activated",E="yvp-cc-preview-activated",h="yvp-cc-preview-",T="top",S="on",I={Font:"font",Background:"bg"};o('.cc-element{position:absolute;bottom:16%;width:95%;left:2.5%;text-align:center;z-index:6;-webkit-transition-property:bottom;-webkit-transition-duration:.5s;-webkit-transition-delay:0s;transition-property:bottom;transition-duration:.5s;transition-delay:0s;}.cc-element.bottom.float{bottom:10%}.cc-element.top.float{top:10%;bottom:initial}.cc-element.top{top:5%;bottom:initial}.cc-element.bottom{bottom:16%}.cc-element.yvp-show{display:block}.cc-element.yvp-hide{display:none}.cc-element.yvp-live-cc{text-align:left;width:90%;left:5%}.yvp-cc-options-main,.yvp-cc-options-more{min-width:496px;max-height:212px;color:#fff;}.yvp-cc-options-main.open,.yvp-cc-options-more.open{display:block}.yvp-cc-options-main.close,.yvp-cc-options-more.close{display:none}.yvp-cc-options-main .yvp-ddm-wrapper,.yvp-cc-options-more .yvp-ddm-wrapper{margin-left:0;padding:0;width:150px;color:#fff;display:inline-block;position:relative;z-index:1;vertical-align:middle}.yvp-cc-options-main .yvp-ddm-availability,.yvp-cc-options-more .yvp-ddm-availability{display:none;background-color:#3db224;width:6px;height:6px;border-radius:8px;position:relative;top:-9px;left:3px;}.yvp-cc-options-main .yvp-ddm-availability.not-available,.yvp-cc-options-more .yvp-ddm-availability.not-available{background-color:#ccc}.yvp-cc-options-main .yvp-ddm-selected,.yvp-cc-options-more .yvp-ddm-selected{text-align:left;padding-left:5px;overflow:hidden;text-overflow:ellipsis;height:20px;line-height:20px}.yvp-cc-options-main .yvp-ddm-selected-wrapper,.yvp-cc-options-more .yvp-ddm-selected-wrapper{width:100%;border:1px solid #5f5f5f;border-radius:3px;}.yvp-cc-options-main .yvp-ddm-selected-wrapper:hover,.yvp-cc-options-more .yvp-ddm-selected-wrapper:hover{cursor:pointer;}.yvp-cc-options-main .yvp-ddm-selected-wrapper:hover .yvp-ddm-chevron,.yvp-cc-options-more .yvp-ddm-selected-wrapper:hover .yvp-ddm-chevron{opacity:.9}.yvp-cc-options-main .yvp-ddm-chevron,.yvp-cc-options-more .yvp-ddm-chevron{background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJjY19jYXJyb3QtIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTEyLjcyNSw3LjQyMTgzNzc3IEw5LDExLjk5ODgzNzggTDEyLjcyNSwxNi41NzQ4Mzc4IEMxMi45NSwxNi44NTI4Mzc4IDEzLjI4NywxNi45OTc4Mzc4IDEzLjYyNiwxNi45OTc4Mzc4IEMxMy44NzMsMTYuOTk3ODM3OCAxNC4xMjIsMTYuOTIwODM3OCAxNC4zMzEsMTYuNzYxODM3OCBDMTQuODI4LDE2LjM4NjgzNzggMTQuOTE2LDE1LjY5MjgzNzggMTQuNTI1LDE1LjIxMzgzNzggTDExLjkwOSwxMS45OTg4Mzc4IEwxNC41MjUsOC43ODM4Mzc3NyBDMTQuOTE2LDguMzA0ODM3NzcgMTQuODI4LDcuNjEwODM3NzcgMTQuMzMxLDcuMjM0ODM3NzcgQzEzLjgzNSw2Ljg1ODgzNzc3IDEzLjExNSw2Ljk0MzgzNzc3IDEyLjcyNSw3LjQyMTgzNzc3IFoiIGlkPSJGaWxsLTMiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyLjAwMDAwMCwgMTIuMDAwMDAwKSByb3RhdGUoLTkwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMi4wMDAwMDAsIC0xMi4wMDAwMDApICI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg==");position:absolute;padding-left:11px;padding-right:7px;top:0;height:19px;width:5px;right:1.5%;opacity:.7;}.yvp-cc-options-main .yvp-ddm-list,.yvp-cc-options-more .yvp-ddm-list{position:absolute;background-color:rgba(0,0,0,0.8);max-height:120px;display:none;padding:0;min-width:100%;overflow-x:hidden;overflow-y:auto;border:1px solid rgba(255,255,255,0.2);border-top:none;box-sizing:border-box;width:101%;}.yvp-cc-options-main .yvp-ddm-list.open,.yvp-cc-options-more .yvp-ddm-list.open{cursor:pointer;display:block}.yvp-cc-options-main .yvp-ddm-item,.yvp-cc-options-more .yvp-ddm-item{text-align:left;padding:7px 5px;overflow:hidden;text-overflow:ellipsis;border-bottom:1px solid rgba(255,255,255,0.1);background:rgba(0,0,0,0);}.yvp-cc-options-main .yvp-ddm-item:first-child,.yvp-cc-options-more .yvp-ddm-item:first-child{padding-top:9px}.yvp-cc-options-main .yvp-ddm-item:last-child,.yvp-cc-options-more .yvp-ddm-item:last-child{border-bottom:none}.yvp-cc-options-main .yvp-ddm-item:hover,.yvp-cc-options-more .yvp-ddm-item:hover{cursor:pointer;background:rgba(0,0,0,0.4)}.yvp-cc-options-main .yvp-cc-header,.yvp-cc-options-more .yvp-cc-header{color:rgba(255,255,255,0.6);font-weight:normal}.yvp-cc-options-more .yvp-tab-container{padding:0;width:100%;border:0;position:relative;margin-top:16px;max-height:100px;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav{width:100%;padding-bottom:0;margin-bottom:0;height:32px;display:block;background-color:transparent;text-align:center;overflow:hidden;box-sizing:border-box;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab{display:block;float:left;width:25%;color:rgba(255,255,255,0.6);margin:0;padding:0;border-bottom:1px solid rgba(255,255,255,0.2);background-color:transparent;box-sizing:border-box;text-transform:capitalize;cursor:pointer;height:32px;line-height:24px;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab:hover{color:rgba(255,255,255,0.8);border-bottom:3px solid rgba(255,255,255,0.3)}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab:last-child{border-right:none}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab.tab-selected{border-bottom:3px solid #0087ff;color:#fff}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-tabcontent{display:none;background-color:transparent;padding:16px 0;height:40px;position:relative;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-tabcontent.tab-show{display:block}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-wrapper{display:inline-block;width:150px;margin:0 0 43px 75px;border-radius:3px}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-availability{display:none}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-list{width:auto;max-height:108px}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-selected-wrapper{width:auto;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-selected-wrapper.hide{display:none}.yvp-cc-options-more .yvp-colorpicker{margin-left:auto;margin-right:auto;padding:0;width:100%;margin-left:-4px;margin-top:1px;display:inline-block;white-space:normal;}.yvp-cc-options-more .yvp-colorpicker .color-option{border:1px solid rgba(255,255,255,0.2);border-radius:2px;width:16px;height:16px;display:inline-block;margin:3px;cursor:pointer;}.yvp-cc-options-more .yvp-colorpicker .color-option:hover{border:1px solid rgba(255,255,255,0.6)}.yvp-cc-options-more .yvp-colorpicker .color-option.nocolor::before{content:" ";position:absolute;border-bottom:1px solid #f00;width:26px;transform:rotate(135deg) translate(9px,-3px);-ms-transform:rotate(135deg) translate(9px,-3px);}.yvp-cc-options-more .yvp-colorpicker .color-option.color-selected{border:1px solid #fff}.yvp-cc-options-more .fontcolorpicker{display:inline-block;width:100px;margin-left:65px}.yvp-cc-options-more .bgcolorpicker{display:inline-block;width:144px;margin-left:65px}.yvp-cc-options-more .effects{margin-left:75px}.yvp-cc-options-more .yvp-effect{display:inline-block;position:relative;width:54px;height:32px;font-size:18px;line-height:30px;background-color:rgba(102,102,102,0.5);border:1px solid rgba(255,255,255,0.2);border-radius:4px;margin-left:2%;box-sizing:border-box;background-repeat:no-repeat;background-position:center;text-align:center;cursor:pointer;}.yvp-cc-options-more .yvp-effect:hover{border:1px solid rgba(255,255,255,0.6)}.yvp-cc-options-more .yvp-effect.none{margin-left:5px}.yvp-cc-options-more .yvp-effect.dropshadow{text-shadow:2px 1px 1px #000}.yvp-cc-options-more .yvp-effect.raised{text-shadow:3px 3px 4px rgba(0,0,0,0.75)}.yvp-cc-options-more .yvp-effect.depressed{text-shadow:0 -4px 4px rgba(0,0,0,0.54)}.yvp-cc-options-more .yvp-effect.uniform{text-shadow:-2px -2px 0 #000,-2px 2px 0 #000,-2px 0 0 #000,2px -2px 0 #000,2px 2px 0 #000,2px 0 0 #000,0 -2px 0 #000,0 2px 0 #000}.yvp-cc-options-more .yvp-effect.effect-selected{border:1px solid #fff;}.yvp-cc-options-more .yvp-effect.effect-selected .yvp-cc-effect-header{color:#fff}.yvp-cc-options-more .yvp-effect .yvp-cc-effect-header{font-size:11px;text-transform:capitalize;color:rgba(255,255,255,0.6);text-shadow:none}.yvp-cc-options-more .preset-container{width:100%;height:100px;position:relative;max-height:100px;display:inline-block}.yvp-cc-options-more .yvp-cc-preset{display:inline-block;width:53px;height:32px;line-height:30px;border:1px solid rgba(255,255,255,0.2);border-radius:3px;font-size:1.3em;box-sizing:border-box;text-align:center;margin:3px;cursor:pointer;}.yvp-cc-options-more .yvp-cc-preset:hover{border:1px solid rgba(255,255,255,0.6);margin:3px}.yvp-cc-options-more .preset-separator{clear:both;width:100%;height:9%}.yvp-cc-options-more .yvp-cc-back{max-width:65px;background-color:transparent;color:inherit;font-size:11px;position:relative;outline:none;cursor:pointer}.yvp-cc-options-more .yvp-cc-back-header{display:inline-block;margin-left:3px;color:rgba(255,255,255,0.6);}.yvp-cc-options-more .yvp-cc-back-header:hover{color:#fff}.yvp-cc-options-more .yvp-cc-style-preview{margin:40px 0 20px 85px;display:block;position:relative;font-size:20px;line-height:20px;max-width:260px;}.yvp-cc-options-more .yvp-cc-style-preview .yvp-cc-options-message{margin-left:18px}.yvp-cc-options-main .yvp-cc-back-to-settings{max-width:65px}.yvp-cc-options-main .yvp-back-to-settings{display:inline-block;cursor:pointer;margin-left:3px;color:rgba(255,255,255,0.6);}.yvp-cc-options-main .yvp-back-to-settings:hover{color:#fff}.yvp-cc-options-main .yvp-cc-box{display:block;margin-top:16px;clear:both}.yvp-cc-options-main .yvp-cc-item{display:inline-block}.yvp-cc-options-main .yvp-cc-divider{display:block;height:1px;margin:16px 0 16px 0;background:rgba(255,255,255,0.2)}.yvp-cc-options-main .yvp-cc-toggle{display:inline-block;margin:0 20px}.yvp-cc-options-main .yvp-cc-language{margin-left:20px}.yvp-cc-options-main .yvp-cc-position{max-width:175px}.yvp-cc-options-main .yvp-cc-size{margin-left:20px}.yvp-cc-options-main .yvp-cc-toggle-selection,.yvp-cc-options-main .yvp-cc-pos-selection,.yvp-cc-options-main .yvp-cc-style-preview,.yvp-cc-options-main .yvp-cc-size-selector{display:inline-block;margin-left:56px;padding-bottom:18px}.yvp-cc-options-main .yvp-cc-style{padding-bottom:5px}.yvp-cc-options-main .yvp-cc-toggle-selection,.yvp-cc-options-main .yvp-cc-pos-selection{margin-left:0;}.yvp-cc-options-main .yvp-cc-toggle-selection .yvp-cc-position-top,.yvp-cc-options-main .yvp-cc-pos-selection .yvp-cc-position-top{margin-bottom:6px}.yvp-cc-options-main .yvp-cc-pos-selection{padding-bottom:0;vertical-align:middle}.yvp-cc-options-main .yvp-cc-size-selector{margin:0;padding:0}.yvp-cc-options-main .yvp-cc-indicator{display:inline-block;margin-left:19px;padding:0 4px;cursor:pointer;border:1px solid transparent;border-radius:3px;vertical-align:middle;color:#fff;}.yvp-cc-options-main .yvp-cc-indicator:hover{background-color:rgba(255,255,255,0.2)}.yvp-cc-options-main .yvp-cc-indicator.size-active{background-color:rgba(255,255,255,0.4);}.yvp-cc-options-main .yvp-cc-indicator.size-active:hover{background-color:rgba(255,255,255,0.4)}.yvp-cc-options-main .yvp-cc-indicator-0{font-size:15px}.yvp-cc-options-main .yvp-cc-indicator-25{font-size:18px}.yvp-cc-options-main .yvp-cc-indicator-50{font-size:24px}.yvp-cc-options-main .yvp-cc-indicator-75{font-size:28px}.yvp-cc-options-main .yvp-cc-indicator-100{font-size:32px}.yvp-cc-options-main .yvp-slider-wrapper{margin-top:1px;width:213px;color:#ccc;border-top:1px solid #646464;display:none}.yvp-cc-options-main .yvp-slider-track{display:block;width:100%;position:relative;margin-top:-3px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.yvp-cc-options-main .yvp-slider-track:active{cursor:pointer}.yvp-cc-options-main .yvp-slider-track .yvp-slider-handle{position:absolute;display:inline-block;border-radius:50%;height:5px;width:5px;margin:0;background-color:#fff;border:1px solid #fff;}.yvp-cc-options-main .yvp-slider-track .yvp-slider-handle:hover{background-color:#fff;border-width:1px solid #fff;border-radius:50%;width:10px;height:10px;margin-left:-2px;margin-top:-2px;cursor:pointer;}.yvp-cc-options-main .yvp-slider-track .yvp-slider-anchor{position:absolute;margin-right:0;display:inline-block;border-radius:50%;background-color:rgba(255,255,255,0.6);height:5px;width:5px;top:0;}.yvp-cc-options-main .yvp-slider-track .yvp-slider-anchor:hover{background-color:#fff;height:10px;width:10px;margin-right:5px;top:-1px;margin-left:-2px;cursor:pointer}.yvp-cc-options-main .yvp-cc-feedback-link{font-size:11px;float:right;}.yvp-cc-options-main .yvp-cc-feedback-link a:link{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a:visited{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a:hover{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a:active{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a{text-decoration:none}.yvp-cc-options-main .yvp-cc-style-more{display:inline-block;font-size:11px;background-color:transparent;color:inherit;outline:none;overflow:visible;cursor:pointer}.yvp-cc-options-main .yvp-cc-style-preview{display:none;border:1px solid rgba(255,255,255,0.2);border-radius:3px;color:#fff;min-width:54px;max-width:80px;font-size:1.5em;height:32px;line-height:32px;text-align:center;padding:1px 2px;margin:0 0 0 20px;}.yvp-cc-options-main .yvp-cc-style-preview .yvp-cc-style-preview-label{font-size:11px;position:absolute;top:-35px;left:-10px;color:#ccc;text-shadow:0 1px 1px rgba(0,0,0,0.4);font-family:Helvetica Neue Regular,Helvetica Neue,helvetica,arial,sans-serif}.yvp-cc-options-main .yvp-cc-pos-wrapper{position:relative;display:inline-block;vertical-align:middle;margin:5px 20px 0 20px}.yvp-cc-options-main .yvp-cc-position-top,.yvp-cc-options-main .yvp-cc-position-bottom{display:inline;margin-right:20px;cursor:pointer;color:rgba(255,255,255,0.5);}.yvp-cc-options-main .yvp-cc-position-top:hover,.yvp-cc-options-main .yvp-cc-position-bottom:hover{color:#fff}.yvp-cc-preview{position:absolute;z-index:4;text-align:center;left:65px;bottom:auto;top:auto;font-size:20px;font-weight:bold;opacity:0;pointer-events:none;}.yvp-cc-preview.yvp-cc-preview-activated{opacity:1}.yvp-cc-preview.yvp-cc-preview-top{top:4px;bottom:auto}.yvp-cc-preview.yvp-cc-preview-bottom{bottom:4px;top:auto}.yvp-cc-preview-message{display:inline-block;padding:5px 15px;margin:0 auto}.yvp-content.yvp-state-fullscreen .yvp-cc-preview-message,.yvp-content.yvp-state-fullscreen .yvp-cc-options-message{display:none}'),
n.prototype.render=function(){var e=this;return e.node=s.render(m,{strings:a.i18n}),e.ccMoreOptionsNode=s.render(v,{strings:a.i18n}),e._applyUIControls(),e._renderAdvancedCCOptions(),e._bindUI(),e._nodes=[e.node,e.ccMoreOptionsNode],e._currentScreenIndex=0,e._nodes},n.prototype._syncLanguageMenu=function(e,t){var r=this;if(e&&t&&!(t.length<0)){var n=c.prototype.getLanguageForCode.call(null,e||r._model.userPreferences.closedCaptions.lang);r._DDMenu&&r._DDMenu.syncData({selected:n,items:t?t.map(function(e){return c.prototype.getLanguageForCode.call(null,e)}):null,itemsData:t})}},n.prototype._syncCCPreferences=function(){function e(e,t,n,o){var i=e.querySelectorAll(t);Array.prototype.forEach.call(i,function(e){r._model.userPreferences.closedCaptions[o]===e.val?s.classList(e).add(n):s.classList(e).remove(n)})}var t,r=this;for(var n in b)if(b.hasOwnProperty(n)&&b[parseInt(n)]===r._model.userPreferences.closedCaptions.fontSize){t=n;break}var o=r._letterOptionsBtns.querySelector(".yvp-cc-indicator-"+t);o&&s.classList(o).add("size-active"),e(r._fontColorPicker,".color-option","color-selected","fontColor"),e(r._bgColorPicker,".color-option","color-selected","bgColor"),e(r._effectPicker,".yvp-effect","effect-selected","fontEffect"),e(r._ccPositionSelection,".yvp-settings-item",A,"ccPos"),r._lastPosSelected=r._ccPositionSelection.querySelector("."+A),r._fontDDM.syncData({items:[],itemsData:[],selected:r._getFontPropertyByFontName(r._model.userPreferences.closedCaptions.fontName).name}),r._bgOpactiyDDM.syncData({items:[],itemsData:[],selected:r._stringifyBgOpacity(100*r._model.userPreferences.closedCaptions.bgOpacity)}),r._sizeSlider.setValue(t,!0),r._updateCCStylePreviewBoxes()},n.prototype._applyUIControls=function(){var e=this;e._applyCCToggling(),e._applyCCLanguageMenu(),e._applySize(),e._applyAdvancedOptions(),e._applyCCPosition()},n.prototype._applyCCToggling=function(){var e=this,t=e._model.userPreferences.closedCaptions.show;e._ccToggleSelectionNodes=e.node.querySelector(".yvp-cc-toggle"),e._toggleSelections=[],f.forEach(function(r){var n=e._ccToggleSelectionNodes.querySelector(".yvp-cc-"+r),o=r===S;(t&&o||!t&&!o)&&(s.classList(n).add(A),e._lastToggleSelected=n),e._toggleSelections.push(n)})},n.prototype._applyCCLanguageMenu=function(){var e=this;if(e._ccLanguageMenu=e.node.querySelector(".yvp-cc-language"),e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.lang){var t={selected:c.prototype.getLanguageForCode.call(null,e._model.userPreferences.closedCaptions.lang),items:null,noItemsText:a.i18n.NO_ITEM_AVAILABLE};e._DDMenu=new u(w,t,e._eventBus),e._ccLanguageMenu.appendChild(e._DDMenu.create()),e._eventBus.publish(p.CC.REQUEST_UI_DATA_FOR_MEDIA_ITEM,e._model.playlist.getCurrentItem())}},n.prototype._populateUI=function(e){var t=this,r="top"===t._model.userPreferences.closedCaptions.ccPos;t._syncLanguageMenu(e.selectedLang,e.langList),t._syncToggleSelection(t._model.userPreferences.closedCaptions.show),t._eventBus.publish(p.CC.POSITION_CHANGE,r)},n.prototype._applySize=function(){var e,t,r=this,n=r.node.querySelector(".yvp-cc-size-selector"),o={wrapper:"yvp-slider-wrapper",track:"yvp-slider-track",handle:"yvp-slider-handle",anchor:"yvp-slider-anchor"},i={anchors:5,minValue:0,maxValue:100,initialValue:r._model.userPreferences.closedCaptions.fontSize},a=[];r._sizeSlider=new _(o,i,r._eventBus),n.appendChild(r._sizeSlider.create()),r._sliderValues=r.node.querySelectorAll(".yvp-slider-anchor");var l=r._sliderValues.length;for(e=0;l>e;e++){var c=r._sliderValues[e].style.left.trim();a.push(parseFloat(c))}r._ccSizeLetterIndicator=function(e){var t=e.target,n=t.getAttribute("data-size-value")||"";switch(n){case"0":r._sizeSlider.setValue(a[0]);break;case"25":r._sizeSlider.setValue(a[1]);break;case"50":r._sizeSlider.setValue(a[2]);break;case"75":r._sizeSlider.setValue(a[3]);break;case"100":r._sizeSlider.setValue(a[4])}Array.prototype.forEach.call(r._letterOptionsBtns.children,function(e){s.classList(e).remove("size-active")}),s.classList(t).add("size-active")},r._letterOptionsBtns=r.node.querySelector(".yvp-cc-size-indicators"),r._letterOptionsTaps=[];var p=r._letterOptionsBtns.children.length;for(t=0;p>t;t++)r._letterOptionsTaps[t]=new d(r._letterOptionsBtns.children[t]),r._letterOptionsBtns.children[t].addEventListener("tap",r._ccSizeLetterIndicator)},n.prototype._updateCCStylePreviewBoxes=function(){var e=this,t=s.cssHexToRgb(e._model.userPreferences.closedCaptions.bgColor)||{r:0,g:0,b:0};Array.prototype.forEach.call(e._ccStylePreviewBoxes,function(r){r.style.fontSize=e._model.userPreferences.closedCaptions.fontSize,r.style.fontFamily=e._model.userPreferences.closedCaptions.fontName,r.style.color=e._model.userPreferences.closedCaptions.fontColor,r.style.textShadow=D[e._model.userPreferences.closedCaptions.fontEffect],r.style.backgroundColor="rgba("+t.r+","+t.g+","+t.b+","+e._model.userPreferences.closedCaptions.bgOpacity+")"}),e._model.playbackState.state!==i.INIT&&e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})},n.prototype._applyFontFaceChange=function(e){for(var t=this,r=0;r<R.length;r++)if(R[r].name===e){t._model.userPreferences.closedCaptions.fontName=e,t._eventBus.publish(p.CC.UPDATE_STYLE,"font: "+e),t._updateCCStylePreviewBoxes();break}},n.prototype._applyBgOpacityChange=function(e){var t=this;t._model.userPreferences.closedCaptions.bgOpacity=e/100,t._eventBus.publish(p.CC.UPDATE_STYLE,"opacity: "+e),t._updateCCStylePreviewBoxes()},n.prototype._getFontPropertyByFontName=function(e){for(var t=0;t<R.length;t++)if(R[t].name===e)return R[t];return R[3]},n.prototype._applyFontList=function(){var e=this,t=e.ccMoreOptionsNode.querySelector(".font-list"),r=R.map(function(e){return e.name}),n=e._getFontPropertyByFontName(e._model.userPreferences.closedCaptions.fontName),o={selected:n.name,items:r,noItemsText:a.i18n.NO_ITEM_AVAILABLE};e._fontDDM=new u(w,o,e._eventBus),t.insertBefore(e._fontDDM.create(),t.querySelector(".fontcolorpicker")),e._fontDDM.registerEvent(p.CC.FONT_FACE_CHANGE)},n.prototype._stringifyBgOpacity=function(e){return 100===e?e+"% (opaque)":e+"% (transparency)"},n.prototype._applyBgOpacityList=function(){var e=this,t=e.ccMoreOptionsNode.querySelector(".bg-opacity-list"),r=100*e._model.userPreferences.closedCaptions.bgOpacity,n={selected:100===r?r+"% (opaque)":r+"% (transparency)",items:P.map(e._stringifyBgOpacity),itemsData:P,noItemsText:a.i18n.NO_ITEM_AVAILABLE};e._bgOpactiyDDM=new u(w,n,e._eventBus),t.insertBefore(e._bgOpactiyDDM.create(),t.querySelector(".bgcolorpicker")),e._bgOpactiyDDM.registerEvent(p.CC.BG_OPACITY_CHANGE)},n.prototype._renderAdvancedCCOptions=function(){var e=this;e._fontColorPicker=e.ccMoreOptionsNode.querySelector(".fontcolorpicker"),e._bgColorPicker=e.ccMoreOptionsNode.querySelector(".bgcolorpicker"),e._effectPicker=e.ccMoreOptionsNode.querySelector(".yvp-tabcontent:nth-child(4)"),e._applyCCPresetStyles(),e._applyColorPickerPresetStyles(),e._applyFontList(),e._applyBgOpacityList(),e._renderEffectPickerPresets()},n.prototype._applyCCPresetStyles=function(){for(var e=this,t=e.ccMoreOptionsNode.querySelectorAll(".yvp-cc-preset"),r=0;r<t.length;r++){var n=t[r];n.presetIndex=r,n.style.color=C[r].fontColor,n.style.backgroundColor=C[r].bgColor}},n.prototype._applyColorPickerPresetStyles=function(){function e(e,t,r){for(var n,o=0;o<e.length;o++)n=document.createElement("div"),s.classList(n).add("color-option"),n.style.backgroundColor=e[o].color,n.val=e[o].color,"transparent"===e[o].color&&s.classList(n).add("nocolor"),n.colorpickerType=r,t.appendChild(n)}var t=this;e(L,t._fontColorPicker,I.Font),e(M,t._bgColorPicker,I.Background)},n.prototype._renderEffectPickerPresets=function(){for(var e=this,t=e._effectPicker.querySelectorAll(".yvp-effect"),r=0;r<t.length;r++){var n=t[r];n.val=N[r].name}},n.prototype._applyAdvancedOptions=function(){var e=this;e._ccStylePreviewBoxes=[e.node,e.ccMoreOptionsNode].map(function(e){return e.querySelector(".yvp-cc-style-preview")}),this._updateCCStylePreviewBoxes()},n.prototype._applyCCPosition=function(){var e=this;e._ccPositionSelection=e.node.querySelector(".yvp-cc-pos-selection"),e._ccPositionOptionNodes=[];var t="top"===e._model.userPreferences.closedCaptions.ccPos,r=document.createDocumentFragment();g.forEach(function(n){var o=document.createElement("li");s.classList(o).add("yvp-settings-item"),s.classList(o).add("yvp-cc-position-"+n),o.setAttribute("cc-pos-data",n),o.val=n;var i;i=document.createTextNode(a.i18n[n.toUpperCase()]),(t&&n===T||!t&&n!==T)&&(s.classList(o).add(A),e._lastPosSelected=o),e._ccPositionOptionNodes.push(o),o.appendChild(i),r.appendChild(o)}),e._ccPositionSelection.appendChild(r)},n.prototype._bindUI=function(){var e=this;e._bindCCToggle(),e._bindLanguageMenu(),e._bindSizeSelector(),e._bindAdvancedOptions(),e._bindCCPosition(),e._bindFeedback()},n.prototype._unBindUI=function(){var e=this;e._unBindToggle(),e._unBindLanguageMenu(),e._unBindSizeSelector(),e._unBindAdvancedOptions(),e._unBindCCPosition(),e._unBindCCPreview(),e._unBindFeedback()},n.prototype._syncToggleSelection=function(e){var t=this,r=t._ccToggleSelectionNodes.querySelector(".yvp-cc-"+(e?"on":"off"));s.classList(r).contains(A)||(s.classList(t._lastToggleSelected).remove(A),s.classList(r).add(A),t._lastToggleSelected=r)},n.prototype._bindCCToggle=function(){var e=this;e._toggleTaps=[],e._toggleCC=function(t){var r=t.target.getAttribute(y)===S;e._eventBus.publish(p.CC.UI_TOGGLE,r)},e._toggleSelections.forEach(function(t){var r=new d(t);e._toggleTaps.push(r),t.addEventListener("tap",e._toggleCC)})},n.prototype._unBindToggle=function(){var e=this;e._toggleTaps.forEach(function(e){e.destroy()}),e._toggleSelections.forEach(function(t){t.removeEventListener("tap",e._toggleCC)})},n.prototype._bindLanguageMenu=function(){var e=this;e._DDMenu&&e._DDMenu.registerEvent(p.CC.LANGUAGE_CHANGE)},n.prototype._unBindLanguageMenu=function(){var e=this;e._DDMenu.destroy()},n.prototype._bindSizeSelector=function(){var e=this;e._sizeSlider.registerEvent(p.CC.FONT_SIZE_CHANGE)},n.prototype._onSizeChange=function(e){var t=this,r=b[e];t._model.userPreferences.closedCaptions.fontSize=r,t._model.playbackState.state!==i.INIT&&(t._eventBus.publish(p.CC.UPDATE_STYLE,"size: "+e),t._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:t._model.userPreferences.closedCaptions})),t._showCCPreview()},n.prototype._unBindSizeSelector=function(){for(var e=this,t=0;t<e._letterOptionsBtns.children.length;t++)e._letterOptionsBtns.children[t].removeEventListener("tap",e._ccSizeLetterIndicator);e._sizeSlider.destroy()},n.prototype._bindFeedback=function(){var e=this;e._feedbackLink=e.node.querySelector(".yvp-cc-feedback-link"),e._feedbackLinkTap=new d(e._feedbackLink),e._onSubmitFeedback=function(t){var r=e._model.playbackState;r.paused||e._eventBus.publish(p.TOGGLE_PLAY_PAUSE)},e._feedbackLink.addEventListener("tap",e._onSubmitFeedback)},n.prototype._unBindFeedback=function(){var e=this;e._feedbackLinkTap.destroy()},n.prototype._bindAdvancedOptions=function(){var e=this;e._moreOptionShowComponent=function(t){e._currentScreenIndex=1,s.classList(e._nodes[0]).remove("open"),s.classList(e._nodes[0]).add("close"),s.classList(e._nodes[1]).remove("close"),s.classList(e._nodes[1]).add("open"),e._syncCCPreferences()},e._advancedMenuBackButtonTapListener=function(t){e._currentScreenIndex=0,s.classList(e._nodes[1]).remove("open"),s.classList(e._nodes[1]).add("close"),s.classList(e._nodes[0]).remove("close"),s.classList(e._nodes[0]).add("open")},e._moreOptionsBtn=e.node.querySelector(".yvp-cc-style-more"),e._moreOptionsBtnTap=new d(e._moreOptionsBtn),e._moreOptionsBtn.addEventListener("tap",e._moreOptionShowComponent),e._advancedMenuBackButton=e.ccMoreOptionsNode.querySelector(".yvp-cc-back"),e._advancedMenuBackButtonTap=new d(e._advancedMenuBackButton),e._advancedMenuBackButton.addEventListener("tap",e._advancedMenuBackButtonTapListener),e._bindStylePresetsUI(),e._bindTabUI(),e._bindColorPickerUI(),e._bindEffectPickerUI()},n.prototype._unBindAdvancedOptions=function(){var e=this;e._moreOptionsBtn&&e._moreOptionsBtnTap&&(e._moreOptionsBtnTap.destroy(),e._moreOptionsBtn.removeEventListener("tap",e._moreOptionShowComponent)),e._advancedMenuBackButton&&e._advancedMenuBackButtonTap&&(e._advancedMenuBackButtonTap.destroy(),e._advancedMenuBackButton.removeEventListener("tap",e._advancedMenuBackButtonTapListener)),e._ccOptionPresets&&e._ccOptionPresetsTap&&(e._ccOptionPresetsTap.destroy(),e._ccOptionPresets.removeEventListener("tap",e._ccOptionPresetsTapListener)),e._unbindTabUI&&e._unbindTabUI(),e._unbindColorPickerUI&&e._unbindColorPickerUI(),e._unbindEffectPickerUI&&e._unbindEffectPickerUI(),e._fontDDM.destroy(),e._bgOpactiyDDM.destroy()},n.prototype._togglePosition=function(e){var t=this,r=e.getAttribute("cc-pos-data")===T;s.classList(t._lastPosSelected).remove(A),s.classList(e).add(A),t._lastPosSelected=e,t._eventBus.publish(p.CC.POSITION_CHANGE,r),t._model.userPreferences.closedCaptions.ccPos=r?"top":"bottom",t._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:t._model.userPreferences.closedCaptions})},n.prototype._bindCCPosition=function(){var e=this;e._positionTaps=[],e._togglePositionByButton=function(t){var r=t.target;e._togglePosition(r)},e._ccPositionOptionNodes.forEach(function(t){var r=new d(t);e._positionTaps.push(r),t.addEventListener("tap",e._togglePositionByButton)})},n.prototype._unBindCCPosition=function(){var e=this;e._positionTaps.forEach(function(e){e.destroy()}),e._ccPositionOptionNodes.forEach(function(t){t.removeEventListener("tap",e._togglePosition)})},n.prototype._showCCPreview=function(e){var t=this,r=t.node.querySelector(".yvp-cc-preview"),n=t._model.userPreferences.closedCaptions,o=h+e,i=600;e&&(s.classList(r).remove(t._previousAlignmentClassname),s.classList(r).add(o),t._previousAlignmentClassname=o),r.style.fontSize=n.fontSize+"px",r.style.color=n.fontColor,r.style.backgroundColor=n.bgColor,r.style.fontFamily=n.fontName,s.classList(r).add(E),t._ccPreviewTimeout&&clearTimeout(t._ccPreviewTimeout),t._ccPreviewTimeout=setTimeout(function(){s.classList(r).remove(E),t._ccPreviewTimeout=null},i)},n.prototype._bindStylePresetsUI=function(){var e=this;e._ccOptionPresetsTapListener=function(t){var r=t.eventTarget||t.eventSource;if(t.currentTarget!==r&&!s.classList(r).contains("preset-separator")){var n=r.presetIndex;if(l.isNumber(n)){var o=C[n];e._model.userPreferences.closedCaptions.fontColor=o.fontColor,e._setBgColor(o.bgColor),e._showCCPreview(),e._eventBus.publish(p.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})}}},e._ccOptionPresets=e.ccMoreOptionsNode.querySelector(".preset-container"),e._ccOptionPresetsTap=new d(e._ccOptionPresets),e._ccOptionPresets.addEventListener("tap",e._ccOptionPresetsTapListener)},n.prototype._bindTabUI=function(){var e=this,t=function(e){var t=e.eventTarget||e.eventSource;e.currentTarget!==t&&(Array.prototype.forEach.call(o,function(e,n){t===e?(s.classList(e).add("tab-selected"),s.classList(r[n]).add("tab-show")):(s.classList(e).remove("tab-selected"),s.classList(r[n]).remove("tab-show"))}),e.stopPropagation())},r=e.ccMoreOptionsNode.querySelectorAll(".yvp-tabcontent"),n=e.ccMoreOptionsNode.querySelector(".yvp-tabs-nav"),o=n.querySelectorAll(".yvp-tab"),i=new d(n);n.addEventListener("tap",t),e._unbindTabUI=function(){i.destroy(),n.removeEventListener("tap",t)}},n.prototype._bindColorPickerUI=function(){var e=this,t=function(t){var r=t.eventTarget||t.eventSource;r.colorpickerType===I.Font?e._model.userPreferences.closedCaptions.fontColor=r.val:r.colorpickerType===I.Background&&e._setBgColor(r.val),e._showCCPreview(),e._eventBus.publish(p.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})},r=new d(e._fontColorPicker);e._fontColorPicker.addEventListener("tap",t);var n=new d(e._bgColorPicker);e._bgColorPicker.addEventListener("tap",t),e._unbindColorPickerUI=function(){r.destroy(),e._fontColorPicker.removeEventListener("tap",t),n.destroy(),e._bgColorPicker.removeEventListener("tap",t)}},n.prototype._setBgColor=function(e){var t=this,r=t._model.userPreferences.closedCaptions;r.bgColor=e,"transparent"===e?r.bgOpacity=0:0===r.bgOpacity&&(r.bgOpacity=.75),t._toggleBgOpacityDDM(e)},n.prototype._toggleBgOpacityDDM=function(e){var t=this,r=t.ccMoreOptionsNode.querySelector(".bg-opacity-list"),n=r.querySelector(".yvp-ddm-selected-wrapper");"transparent"===e?s.classList(n).add("hide"):s.classList(n).remove("hide")},n.prototype._bindEffectPickerUI=function(){var e=this,t=function(t){var r=t.eventTarget||t.eventSource,n=r.parentNode.val;n&&(e._model.userPreferences.closedCaptions.fontEffect=n,e._showCCPreview(),e._eventBus.publish(p.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions}))},r=new d(e._effectPicker);e._effectPicker.addEventListener("tap",t),e._unbindEffectPickerUI=function(){r.destroy(),e._effectPicker.removeEventListener("tap",t)}},n.prototype._unBindCCPreview=function(){var e=this;e._ccPreviewTimeout&&(clearTimeout(e._ccPreviewTimeout),e._ccPreviewTimeout=null)},n.prototype.showHideCurrentNode=function(e){var t=this;s.showHide(t._nodes[t._currentScreenIndex],e)},n.prototype.destroy=function(){var e=this;e._unBindUI(),e.node=null,e.ccMoreOptionsNode=null};var L=[{color:"#E7E7E7",name:"grey"},{color:"#000000",name:"black"},{color:"#FC2525",name:"red"},{color:"#29FD2F",name:"green"},{color:"#2CFEFE",name:"turquoise"},{color:"#EC369C",name:"pink"},{color:"#FEF149",name:"yellow"},{color:"#2524FB",name:"blue"}],M=[{color:"transparent",name:"none"},{color:"#eaeaea",name:"grey1"},{color:"#c7c7c7",name:"grey2"},{color:"#919191",name:"grey3"},{color:"#5b5b5b",name:"grey4"},{color:"#000000",name:"black"},{color:"#29FD2F",name:"green"},{color:"#2424FB",name:"blue"},{color:"#2CFDFD",name:"turquoise"},{color:"#EC359B",name:"pink"},{color:"#FDF048",name:"yellow"},{color:"#FC2424",name:"red"}],C=[{fontColor:"#cdcdcd",bgColor:"#060606"},{fontColor:"#282828",bgColor:"#c8c8c8"},{fontColor:"#fef149",bgColor:"#0a0908"},{fontColor:"#cdcdcd",bgColor:"transparent"},{fontColor:"#29fd2f",bgColor:"#0a0908"},{fontColor:"#ec369c",bgColor:"#0a0a09"},{fontColor:"#2cfefe",bgColor:"#0a0a09"},{fontColor:"#29fd2f",bgColor:"transparent"}],N=[{name:"none"},{name:"dropshadow"},{name:"raised"},{name:"depressed"},{name:"uniform"}],D={none:"",dropshadow:"2px 1px 1px rgba(0, 0, 0, 1)",raised:"3px 3px 4px rgba(0, 0, 0, 0.75)",depressed:"0px -4px 4px rgba(0, 0, 0, 0.54)",uniform:"-2px -2px 0 #000, -2px 2px 0 #000, -2px 0 0 #000, 2px -2px 0 #000, 2px 2px 0 #000, 2px 0 0 #000, 0 -2px 0 #000, 0 2px 0 #000"},R=[{name:"Georgia",fontFamily:"Georgia, serif"},{name:"Palatino Linotype",fontFamily:'"Palatino Linotype", "Book Antiqua", Palatino, serif'},{name:"Times New Roman",fontFamily:'"Times New Roman", Times, serif'},{name:"Arial",fontFamily:"Arial, Helvetica, sans-serif"},{name:"Arial Black",fontFamily:'"Arial Black", Gadget, sans-serif'},{name:"Comic Sans MS",fontFamily:'"Comic Sans MS", cursive, sans-serif'},{name:"Impact",fontFamily:"Impact, Charcoal, sans-serif"},{name:"Lucida Sans Unicode",fontFamily:'"Lucida Sans Unicode", "Lucida Grande", sans-serif'},{name:"Tahoma",fontFamily:"Tahoma, Geneva, sans-serif"},{name:"Trebuchet MS",fontFamily:'"Trebuchet MS", Helvetica, sans-serif'},{name:"Verdana",fontFamily:"Verdana, Geneva, sans-serif"},{name:"Courier New",fontFamily:'"Courier New", Courier, monospace'},{name:"Lucida Console",fontFamily:'"Lucida Console", Monaco, monospace'}],P=[100,75,50,25],w={wrapper:"yvp-ddm-wrapper",selectedWrapper:"yvp-ddm-selected-wrapper",selected:"yvp-ddm-selected",availability:"yvp-ddm-availability",notAvailable:"not-available",dropDownIcon:"yvp-ddm-chevron",list:"yvp-ddm-list",listItem:"yvp-ddm-item"}},{"../../../lib":"bRhrlU","../cc":"zKzgQw","../event":"YJm+dH","../states":57,"../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../views/uiwidgets/drop-down-menu":101,"../views/uiwidgets/slider":102,"../views/uiwidgets/tooltip":104,"./cc-more-options.html":76,"./cc-options.html":77,fs:164,"insert-css":166}],79:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div>"),n.b("\n"+r),n.b("    <div class='yvp-top-bar'>"),n.b("\n"+r),n.b("        <div class='yvp-ad' aria-label='"),n.b(n.v(n.d("strings.ADV_SHORT",e,t,0))),n.b("'>"),n.b(n.v(n.d("strings.ADV_SHORT",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div class='yvp-content-type hide'></div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("    <div class='yvp-playing-item-title'></div>"),n.b("\n"+r),n.b("    <div class='yvp-bottom-bar'>"),n.b("\n"+r),n.b("        <div class='yvp-bottom-container'>"),n.b("\n"+r),n.b("            <div class='yvp-slider' role='slider' tabindex='0'>"),n.b("\n"+r),n.b("                <div class='yvp-slider-extension' aria-hidden='true'></div>"),n.b("\n"+r),n.b("                <div class='yvp-handle'></div>"),n.b("\n"+r),n.b("                <div class='yvp-buffer-bar'></div>"),n.b("\n"+r),n.b("                <div class='yvp-playback-bar'></div>"),n.b("\n"+r),n.b("                <div class='yvp-visual-seek'>"),n.b("\n"+r),n.b("                    <div class='yvp-vs-thumbnail'></div>"),n.b("\n"+r),n.b("                    <div class='yvp-vs-time'></div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("            <div class='yvp-play-controls'>"),n.b("\n"+r),n.b("                <div class='yvp-play-btn' role='button' tabindex='0'></div>"),n.b("\n"+r),n.b("                <div class='yvp-upnext-container hide'>"),n.b("\n"+r),n.b("                    <div class='yvp-upnext-btn' role='button'>"),n.b("\n"+r),n.b("                    </div>"),n.b("\n"+r),n.b("                    <div class='yvp-upnext-playlist' role='dialog'>"),n.b("\n"+r),n.b("                        <div class='yvp-hover-elem'></div>"),n.b("\n"+r),n.b("                    </div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("                <div class='yvp-time-container' tabindex='-1' aria-hidden='true'>"),n.b("\n"+r),n.b("                    <div class='yvp-current-time'></div>"),n.b("\n"+r),n.b("                    <div class='yvp-total-time'></div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("            <div class='yvp-menu-controls'>"),n.b("\n"+r),n.b("                <div class='yvp-cc-btn button hide' role='button' tabindex='0' aria-label='"),n.b(n.v(n.d("strings.CC",e,t,0))),n.b("'></div>"),n.b("\n"+r),n.b("                <div class='yvp-fullscreen-btn button' role='button' tabindex='0'></div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("    <div class='yvp-object-overlay'></div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],80:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._eventBus=e,n._view=t,n._model=r,n._adBreaks=[],n._playlistRendered=!1,n._playlistFirstPageRendered=!1,n._eventBus.subscribe(i.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),n._eventBus.subscribe(i.PLAYBACK_PROGRESS,n._onPlaybackProgress,n),n._eventBus.subscribe(i.AD_PLAYBACK_PROGRESS,n._onPlaybackProgress,n),n._eventBus.subscribe(i.CAST.PLAYBACK_PROGRESS,n._onPlaybackProgress,n),n._eventBus.subscribe(i.Ad.PLAYING,n._onAdPlaying,n),n._eventBus.subscribe(i.Ad.ENDED,n._onAdEnded,n),n._eventBus.subscribe(i.Ad.CANCELED,n._onAdEnded,n),n._eventBus.subscribe(i.PLAYBACK_STARTED,n._onPlaybackStarted,n),n._eventBus.subscribe(i.AD_PLAYBACK_STARTED,n._onAdPlaybackStarted,n),n._eventBus.subscribe(i.RELATED_ITEM_CLICK,n._onRelatedItemClick,n),n._eventBus.subscribe(i.CONTROLS_BAR_CHANGE,n._onControlsBarChange,n),n._eventBus.subscribe(i.FULLSCREEN_CHANGE,function(){n._updateFullscreen(n._view.getFullscreen())}),n._eventBus.subscribe(i.CONTROLS_SET_VOLUME,function(e){n._updateVolumeUI(e)}),n._eventBus.subscribe(i.CAST.VOLUME_CHANGED,function(e){n._updateVolumeUI(e)}),n._eventBus.subscribe(i.CONTROLS_SET_MUTE,function(e){n._updateVolumeUI(n._model.playbackState.volume,e)}),n._eventBus.subscribe(i.CAST.MUTE_CHANGED,function(e){n._updateVolumeUI(n._model.playbackState.volume,e)})}t.exports=n;var o=(e("fs"),e("insert-css")),i=e("../event"),a=e("../tap"),s=e("../util"),l=e("../../../lib"),d=e("../../../lib/user-agent"),c=e("../strings"),p=e("./yahoo-controls"),u=e("./controls.html"),_="end-screen",m=3e3;o('.yvp-flag-casting .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0LW9uPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yIi8+PHBhdGggZD0iTTExLjY5IDEwSDE4VjRINnYuNzNjMi4zMjcgMS4yMyA0LjI5IDMuMDU0IDUuNjkgNS4yN3pNNi40MSAxNmMtLjM5NSAwLS43NjgtLjIzMy0uOTI3LS42Mi0uODUtMi4wNzMtMi42MTYtMy42My00LjcyNi00LjE2Ni0uNTM1LS4xMzctLjg2LS42OC0uNzIzLTEuMjE2LjEzNS0uNTM1LjY4LS44NTUgMS4yMTUtLjcyNCAyLjcyLjY5MiA0Ljk5NSAyLjY5IDYuMDg0IDUuMzQ3LjIxLjUxMi0uMDM2IDEuMDk2LS41NDYgMS4zMDYtLjEyNS4wNS0uMjUzLjA3NC0uMzguMDc0Ii8+PHBhdGggZD0iTTEwLjYxNyAxNmMtLjQ0NSAwLS44NS0uMjk4LS45NjctLjc0OC0xLjEtNC4yMi00LjU1Ny03LjQwMi04LjgxLTguMTA1LS41NDUtLjA5LS45MTQtLjYwNS0uODI0LTEuMTUuMDktLjU0NS42MDQtLjkyNCAxLjE1LS44MjMgNS4wMzIuODMgOS4xMiA0LjU5IDEwLjQyIDkuNTc0LjEzOC41MzQtLjE4MiAxLjA4LS43MTcgMS4yMi0uMDg1LjAyLS4xNy4wMzItLjI1My4wMzJNMi40NDYgMTQuNDljLjAwNC4wMDQuMDA3LjAxLjAxLjAxNS4wOTcuMTcyLjE0LjM2LjEzLjU0NC0uMDEuMTgtLjA2Ny4zNi0uMTc1LjUxNy0uMDgyLjEyLS4xOTIuMjI1LS4zMjguMzAyLS4xNTguMDktLjMyNy4xMTQtLjQ5Ni4xMTRILjAydi0xLjQ2NmMtLjAwMi0uMTcuMDI1LS4zMzguMTE0LS40OTYuMjc0LS40OC44ODQtLjY0NiAxLjM2NC0uMzc0LjI1LjE0My40NC4zMi41OTMuNDZsLjE0LjEyN2MuMDg4LjA3NC4xNi4xNi4yMTYuMjU0eiIvPjwvZz48L3N2Zz4=")}.yvp-drag .yvp-handle,.yvp-drag .yvp-playback-bar{-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important}.yvp-mode-ad .yvp-top-bar .yvp-ad,.yvp-mode-vpaid .yvp-top-bar .yvp-ad{display:block}.yvp-mode-ad .yvp-bottom-bar,.yvp-mode-vpaid .yvp-bottom-bar{height:44px;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);}.yvp-mode-ad .yvp-bottom-bar .yvp-bottom-container,.yvp-mode-vpaid .yvp-bottom-bar .yvp-bottom-container{top:0}.yvp-mode-ad .yvp-playing-item-title.yvp-title-standard,.yvp-mode-vpaid .yvp-playing-item-title.yvp-title-standard{opacity:0;z-index:0}.yvp-playing-item-title{display:block;position:absolute;opacity:0;}.yvp-playing-item-title.yvp-title-standard{left:0;top:0;box-sizing:border-box;width:100%;padding:10px 0 0 16px;color:#fff;background-image:-webkit-linear-gradient(-180deg, rgba(18,23,23,0.8) 0%, rgba(18,23,23,0.2) 50%, rgba(255,255,255,0) 100%);background-image:-o-linear-gradient(-180deg, rgba(18,23,23,0.8) 0%, rgba(18,23,23,0.2) 50%, rgba(255,255,255,0) 100%);background-image:linear-gradient(-180deg, rgba(18,23,23,0.8) 0%, rgba(18,23,23,0.2) 50%, rgba(255,255,255,0) 100%);font-weight:500;font-size:22px;text-shadow:1px 1px 1px rgba(0,0,0,0.5);line-height:24px;z-index:30;opacity:1;-webkit-transition:opacity .6s ease-out .1s;-moz-transition:opacity .6s ease-out .1s;-o-transition:opacity .6s ease-out .1s;transition:opacity .6s ease-out .1s;}.yvp-playing-item-title.yvp-title-standard.yvp-live{padding:48px 0 0 16px}.yvp-playing-item-title.yvp-title-standard.yvp-hide{opacity:0;z-index:0;-webkit-transition:all .3s ease-out .1s;-moz-transition:all .3s ease-out .1s;-o-transition:all .3s ease-out .1s;transition:all .3s ease-out .1s}.yvp-top-bar{position:absolute;z-index:31;width:100%;top:0;height:0;}.yvp-top-bar .yvp-ad{display:none;position:absolute;top:14px;left:24px;color:#fff;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-size:14px}.yvp-top-bar .yvp-content-type{display:block;opacity:1;height:auto;left:16px;top:16px;position:absolute;padding:5px 10px 5px 10px;border-radius:2px;background-color:#7300ff;background-image:-webkit-linear-gradient(45deg, #ff3541 0%, #ff6230 100%);background-image:-o-linear-gradient(45deg, #ff3541 0%, #ff6230 100%);background-image:linear-gradient(45deg, #ff3541 0%, #ff6230 100%);font-family:\'HelveticaNeue-Bold\',Helvetica,Arial,sans-serif;color:#fff;text-shadow:none;text-transform:uppercase;letter-spacing:.6px;font-weight:normal;font-size:10px;}.yvp-top-bar .yvp-content-type.hide{display:none}.yvp-bottom-bar{position:absolute;background-color:transparent;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);left:0;right:0;bottom:0;width:100%;height:100px;z-index:30;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container{display:block;position:relative;top:56px;height:44px;margin:0 10px 0 10px;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{display:inline-block;margin-top:10px;position:absolute;right:0;top:0;float:right;opacity:1;-webkit-transition:opacity .4s linear;-moz-transition:opacity .4s linear;-o-transition:opacity .4s linear;transition:opacity .4s linear;direction:ltr;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{height:24px;width:24px;bottom:0;background-position:center;background-repeat:no-repeat;float:none;display:inline-block;position:relative;margin-left:4px;cursor:pointer}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+ZnVsbHNjcmVlbjwvdGl0bGU+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNzAuNzg1IDUwLjYyMmMtLjExLTEuOTYtMS43MzYtMy40NjYtMy44NC0zLjQzaC0uMDAzYy0yIC4xMTQtMy41NDIgMS44NC0zLjQzMyAzLjgxNGwuMjEyIDYuNDEtMTEuMTA3LTEwLjcyNy01LjA2IDUuMjQ0IDExLjEwMyAxMC43MjItNi41My4wMTNjLTEuOTU3LjAzMy0zLjUzIDEuNTk4LTMuNTc4IDMuNTcyLS4wMiAxLjAwNC4zOSAxLjk5IDEuMTIyIDIuNjk2LjY2LjYzIDEuNTI0Ljk5NiAyLjQ2IDEuMDE3bDE5LjUxMi4xNzQtLjg2LTE5LjUwOE00Mi4yMjQgMzYuNzQ1bC0xMS4xMS0xMC43MyA2LjUzMi0uMDFjMS45NTgtLjAzMyAzLjUyNy0xLjU5NyAzLjU4LTMuNTY4LjAxOC0xLjAxLS4zOS0xLjk5My0xLjExNS0yLjY5Ni0uNjYzLS42MzctMS41My0xLTIuNDY4LTEuMDJsLTE5LjUxLS4xNzQuODU4IDE5LjUxYy4xMSAxLjk1OCAxLjczNiAzLjQ2MyAzLjgzNiAzLjQyNmguMDAzYy45NzItLjA1NCAxLjg2Ny0uNDg0IDIuNTE1LTEuMjEuNjUtLjczLjk3OC0xLjY2Ny45Mi0yLjZsLS4yMTItNi40MTJMMzcuMTYgNDEuOTg2bDUuMDY0LTUuMjQiLz48L2c+PC9zdmc+");background-size:100%;left:0;opacity:.8;cursor:pointer;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn.fullscreen{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+ZXhpdC1mdWxsc2NyZWVuPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik00Ny4xOTMgNjUuNzUyYy4wNzMgMS45MTcgMS42MzYgMy40MTQgMy42OSAzLjQxNGguMDA0YzEuOTU3LS4wNzYgMy40OS0xLjczNCAzLjQxOC0zLjY2NWwtLjEtNi4yNjIgMTAuNjY2IDEwLjY2NCA1LjAzMi01LjAzNS0xMC42Ni0xMC42NiA2LjM3NS4wOThjMS45MTMgMCAzLjQ3Ni0xLjUgMy41NTYtMy40My4wMzctLjk4LS4zNDYtMS45NDgtMS4wNS0yLjY1LS42MzMtLjYyOC0xLjQ3LTEtMi4zODUtMS4wMzZsLTE5LjA1Mi0uNTA0LjUwNyAxOS4wNjZNMTcuNTQgMjIuNTdsMTAuNjY3IDEwLjY3LTYuMzgtLjEwM2MtMS45MTIgMC0zLjQ3MiAxLjUtMy41NTUgMy40MjQtLjAzNy45OS4zNDYgMS45NTQgMS4wNDIgMi42NTQuNjM3LjYzNCAxLjQ4IDEuMDAyIDIuMzkzIDEuMDM4bDE5LjA1Mi41MDMtLjUwOC0xOS4wN2MtLjA3My0xLjkxMi0xLjYzNi0zLjQxLTMuNjg3LTMuNDFoLS4wMDRjLS45NS4wMzctMS44My40NC0yLjQ3NiAxLjE0LS42NS43LS45ODQgMS42MS0uOTQ0IDIuNTIybC4xIDYuMjY2TDIyLjU3MyAxNy41NGwtNS4wMzUgNS4wMyIvPjwvZz48L3N2Zz4=");background-size:100%}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn:hover{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0PC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yTTYuNDEgMTZjLS4zOTUgMC0uNzY4LS4yMzMtLjkyNy0uNjItLjg1LTIuMDczLTIuNjE2LTMuNjMtNC43MjYtNC4xNjYtLjUzNS0uMTM3LS44Ni0uNjgtLjcyMy0xLjIxNi4xMzUtLjUzNS42OC0uODU1IDEuMjE1LS43MjQgMi43Mi42OTIgNC45OTUgMi42OSA2LjA4NCA1LjM0Ny4yMS41MTItLjAzNiAxLjA5Ni0uNTQ2IDEuMzA2LS4xMjUuMDUtLjI1My4wNzQtLjM4LjA3NCIvPjxwYXRoIGQ9Ik0xMC42MTcgMTZjLS40NDUgMC0uODUtLjI5OC0uOTY3LS43NDgtMS4xLTQuMjItNC41NTctNy40MDItOC44MS04LjEwNS0uNTQ1LS4wOS0uOTE0LS42MDUtLjgyNC0xLjE1LjA5LS41NDUuNjA0LS45MjQgMS4xNS0uODIzIDUuMDMyLjgzIDkuMTIgNC41OSAxMC40MiA5LjU3NC4xMzguNTM0LS4xODIgMS4wOC0uNzE3IDEuMjItLjA4NS4wMi0uMTcuMDMyLS4yNTMuMDMyTTIuNDQ2IDE0LjQ5Yy4wMDQuMDA0LjAwNy4wMS4wMS4wMTUuMDk3LjE3Mi4xNC4zNi4xMy41NDQtLjAxLjE4LS4wNjcuMzYtLjE3NS41MTctLjA4Mi4xMi0uMTkyLjIyNS0uMzI4LjMwMi0uMTU4LjA5LS4zMjcuMTE0LS40OTYuMTE0SC4wMnYtMS40NjZjLS4wMDItLjE3LjAyNS0uMzM4LjExNC0uNDk2LjI3NC0uNDguODg0LS42NDYgMS4zNjQtLjM3NC4yNS4xNDMuNDQuMzIuNTkzLjQ2bC4xNC4xMjdjLjA4OC4wNzQuMTYuMTYuMjE2LjI1NHoiLz48L2c+PC9zdmc+");background-size:100%;opacity:.8;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn:hover{opacity:1}.yvp-bottom-bar .yvp-play-controls{display:block;top:0;left:0;padding-top:10px;opacity:1;-webkit-transition:opacity .4s linear;-moz-transition:opacity .4s linear;-o-transition:opacity .4s linear;transition:opacity .4s linear;direction:ltr}.yvp-bottom-bar .yvp-play-btn{position:relative;display:inline-block;background-position:50% 50%;background-size:100%;bottom:0;left:0;margin-top:0;margin-left:-4px;width:24px;height:24px;cursor:pointer}.yvp-bottom-bar .yvp-upnext-container{bottom:0;left:0;margin-left:4px;width:24px;height:24px;display:inline-block;}.yvp-bottom-bar .yvp-upnext-container.hide{display:none}.yvp-bottom-bar .yvp-upnext-container.disabled{opacity:.25;pointer-events:none}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{position:relative;background-position:50% 50%;background-size:100%;top:0;left:0;width:24px;height:24px;z-index:2;}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn:hover{cursor:pointer}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-playlist{z-index:1;}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-playlist.hide{display:none}.yvp-bottom-bar .yvp-time-container{display:inline-block;position:relative;left:0;top:-8px;font-size:11px;margin-left:4px;}.yvp-bottom-bar .yvp-time-container.yvp-hide{display:none}.yvp-bottom-bar .yvp-current-time,.yvp-bottom-bar .yvp-vs-time,.yvp-bottom-bar .yvp-total-time{font-size:11px;display:inline-block;}.yvp-bottom-bar .yvp-current-time.yvp-hide,.yvp-bottom-bar .yvp-vs-time.yvp-hide,.yvp-bottom-bar .yvp-total-time.yvp-hide{display:none}.yvp-bottom-bar .yvp-current-time,.yvp-bottom-bar .yvp-total-time{position:relative;top:0;left:0 !important;margin-left:0;padding:0;width:auto;background-color:transparent;text-shadow:0 1px 1px rgba(0,0,0,0.3)}.yvp-bottom-bar .yvp-current-time,.yvp-bottom-bar .yvp-total-time{color:rgba(255,255,255,0.8);}.yvp-bottom-bar .yvp-current-time:hover,.yvp-bottom-bar .yvp-total-time:hover{color:rgba(255,255,255,0.8)}.yvp-bottom-bar .yvp-vs-time{position:absolute;bottom:3px;left:34px;width:44px;background-color:rgba(0,0,0,0.3);color:#fff;text-shadow:1px 1px 2px #000;border-radius:2px;padding:3px 0;font-size:11px;text-align:center}.yvp-bottom-bar .yvp-slider.yvp-disable{display:none;pointer-events:none}.yvp-bottom-bar .yvp-slider,.yvp-bottom-bar .yvp-handle,.yvp-bottom-bar .yvp-buffer-bar,.yvp-bottom-bar .yvp-playback-bar{position:absolute;height:4px;bottom:44px;border:0;border-radius:3px;opacity:1;direction:ltr;max-width:100%}.yvp-bottom-bar .yvp-slider.yvp-thick-slider{height:6px;bottom:43px;}.yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-buffer-bar,.yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-playback-bar{height:6px;bottom:43px}.yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-handle{margin-top:-3px}.yvp-bottom-bar .yvp-playback-bar{top:0;background-color:#7300ff;background-image:-webkit-linear-gradient(to right, #7300ff 0%, #188fff 100%);background-image:-o-linear-gradient(to right, #7300ff 0%, #188fff 100%);background-image:linear-gradient(to right, #7300ff 0%, #188fff 100%);opacity:.8}.yvp-bottom-bar .yvp-slider{width:100%;position:absolute;background:rgba(255,255,255,0.2);border-radius:3px;border-color:transparent;cursor:pointer;}.yvp-bottom-bar .yvp-slider .yvp-slider-extension{position:absolute;width:100%;height:16px;top:-6px}.yvp-bottom-bar .yvp-buffer-bar{top:0;background:rgba(255,255,255,0.2)}.yvp-bottom-bar .yvp-visual-seek{display:none;position:absolute;top:-71px;width:112px;height:63px;margin-left:-57px;background-color:#000;border:0;z-index:2;pointer-events:none;text-align:center}.yvp-bottom-bar .yvp-handle{position:absolute;top:0;width:12px;height:12px;border:0;border-radius:50%;background-color:#fff;margin-top:-4px;margin-left:-6px;background-image:none;display:none;z-index:3;}.yvp-bottom-bar .yvp-handle.active{display:block}.yvp-bottom-bar .yvp-ad-break{background-color:rgba(204,204,204,0.5);position:absolute;top:0;width:3px;height:100%;}.yvp-bottom-bar .yvp-ad-break:hover{background-color:rgba(255,255,255,0.5)}.yvp-bottom-bar .yvp-ad-break.occurred{background-color:rgba(0,0,0,0.25)}.yvp-bottom-bar .yvp-fullscreen-btn-replacement{width:9px;height:30px;position:relative;float:right}.yvp-bottom-bar.yvp-bottom-upnext{height:100%;opacity:.55;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;background:rgba(18,23,23,0.55);}.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-slider{opacity:0;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;display:none;pointer-events:none}.yvp-bottom-bar.yvp-bottom-upnext .yvp-playlist-item{-webkit-transform:translateX(0) scale(1,1);-moz-transform:translateX(0) scale(1,1);-ms-transform:translateX(0) scale(1,1);-o-transform:translateX(0) scale(1,1);transform:translateX(0) scale(1,1);-webkit-transition:transform 420ms cubic-bezier(0,.4,.1,1);-moz-transition:transform 420ms cubic-bezier(0,.4,.1,1);-o-transition:transform 420ms cubic-bezier(0,.4,.1,1);transition:transform 420ms cubic-bezier(0,.4,.1,1)}.yvp-bottom-bar.yvp-drag .yvp-play-controls,.yvp-bottom-bar.yvp-drag .yvp-menu-controls{opacity:0;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear}.yvp-ie9 .yvp-playback-bar{filter:progid:DXImageTransform.Microsoft.gradient(gradientType:1, startColorStr=#AA7300FF, endColorStr=#FF0087FF)}.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .button,.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn,.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn,.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{opacity:.2;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;pointer-events:none}.yvp-state-video .yvp-bottom-bar .yvp-play-btn,.yvp-flag-casting .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNi43ODYgMTguOTkzSDYuNzRjLS40MTQgMC0uNzUtLjM0NC0uNzUtLjc1VjUuNzczYzAtLjQxNS4zMzMtLjc1Ljc1LS43NS4xNjYgMCAuMzIuMDU0LjQ0My4xNDZsMTAuNTEgNi4wNjdjLjM2LjIxLjQ5LjY2Ny4yOCAxLjAyOC0uMDU0LjA5My0uMTI0LjE3LS4yMDYuMjMtLjAzNi4wMzItLjA3Ni4wNjItLjEyLjA4OGwtMTAuNDg1IDYuM2MtLjExOC4wNy0uMjQ3LjEwNy0uMzc2LjExeiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+");opacity:.8;}.yvp-state-video .yvp-bottom-bar .yvp-play-btn:hover,.yvp-flag-casting .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-state-video.yvp-flag-playing .yvp-bottom-bar .yvp-play-btn,.yvp-flag-casting.yvp-cast-playing .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMyAoMjk4MDIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPnBhdXNlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9ImRlc2t0b3AiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJwYXVzZSIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTMxLSstUmVjdGFuZ2xlLTEzMS1Db3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2LjAwMDAwMCwgNS4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTMxLUNvcHkiIHg9IjguNSIgeT0iMCIgd2lkdGg9IjMiIGhlaWdodD0iMTQiIHJ4PSIxLjUiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjUsMS40OTgyNDUyNCBDMC41LDAuNjcwNzg3MjQyIDEuMTY1Nzk3MjMsMCAyLDAgTDIsMCBDMi44Mjg0MjcxMiwwIDMuNSwwLjY3NTI0OTEgMy41LDEuNDk4MjQ1MjQgTDMuNSwxMi41MDE3NTQ4IEMzLjUsMTMuMzI5MjEyOCAyLjgzNDIwMjc3LDE0IDIsMTQgTDIsMTQgQzEuMTcxNTcyODgsMTQgMC41LDEzLjMyNDc1MDkgMC41LDEyLjUwMTc1NDggTDAuNSwxLjQ5ODI0NTI0IFoiIGlkPSJSZWN0YW5nbGUtMTMxLUNvcHkiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+");opacity:.8;}.yvp-state-video.yvp-flag-playing .yvp-bottom-bar .yvp-play-btn:hover,.yvp-flag-casting.yvp-cast-playing .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-state-end-screen .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNi44NyAxNS41NDVjLS4xMS0uMTk3LS4yNzQtLjM0NS0uNDctLjQyNS0uMjA0LS4wOS0uNDUtLjA5LS42MS0uMDQtLjEwNy4wMjUtLjIwNS4wNjgtLjMyNy4xNDctLjA3Mi4wNS0uMTcyLjE1LS4yMTYuMjA0LS43NzYgMS4wMTgtMS45OTcgMS42MjctMy4yNjYgMS42MjctMi4yNDQgMC00LjA3LTEuODItNC4wNy00LjA1MyAwLTIuMTMzIDEuNzg3LTMuOTQ3IDMuOTgtNC4wNDNsLjUyLS4wMTNWN2wtLjU1Mi4wMTNDOC41NzMgNy4xMyA2IDkuNzYgNiAxMy4wMDNjMCAzLjMxMiAyLjY5MyA2LjAwNCA2LjAwNSA2LjAwNCAxLjg2NCAwIDMuNTktLjg0NSA0LjctMi4yOGwuMDctLjA5Yy4wMy0uMDQyLjA1My0uMDgyLjA3LS4xMDguMTA0LS4xNjguMTU1LS4zMzQuMTU1LS41MSAwLS4xNi0uMDQzLS4zMi0uMTMtLjQ3NSIvPjxwYXRoIGQ9Ik0xMi4zMTIgMTEuMDA4Yy0uMTcyIDAtLjMxMi0uMTUtLjMxMi0uMzIzVjUuMzIzYzAtLjE4LjEzOC0uMzIzLjMxMi0uMzIzLjA2OCAwIC4xMzIuMDI0LjE4NC4wNjNsNC4zNjUgMi42MWMuMTUyLjA5LjIwNC4yODYuMTE4LjQ0LS4wMjIuMDQtLjA1Mi4wNzUtLjA4Ni4xLS4wMTUuMDE0LS4wMzIuMDI3LS4wNS4wMzhsLTQuMzU1IDIuNzFjLS4wNS4wMy0uMTAzLjA0Ni0uMTU2LjA0OGgtLjAxOHoiLz48L2c+PC9zdmc+");opacity:.8;background-size:95%;}.yvp-state-end-screen .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-state-video .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dXBuZXh0PC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMi4wOTIgNjYuMDIzbC0uMTMuMDAyYy0yLjAyNCAwLTMuNjY1LTEuNjQ1LTMuNjY1LTMuNjc2VjI1LjdjMC0xLjU1NS45NjYtMi44ODQgMi4zMjYtMy40MiAxLjA1OC0uNDY2IDIuMzE0LS40NCAzLjM4Ny4xOGwzMS42MDggMTguMjVjLjQ2LjI2NS44NDIuNjEzIDEuMTM4IDEuMDE1LjEuMTMyLjE5NS4yNzIuMjguNDIgMS4wNjMgMS44NC40MzQgNC4xOTUtMS40MTcgNS4yNjRMMjQuMjYgNjUuNTFjLS42ODMuMzk1LTEuNDM4LjU1Ny0yLjE3LjUxek02Mi4zMzMgMjIuMDA0YzAtMi4wMjcgMS42NDYtMy42NyAzLjY2Ny0zLjY3IDIuMDI1IDAgMy42NjcgMS42NSAzLjY2NyAzLjY3djQzLjk5MmMwIDIuMDI3LTEuNjQ2IDMuNjctMy42NjcgMy42Ny0yLjAyNSAwLTMuNjY3LTEuNjUtMy42NjctMy42N1YyMi4wMDR6Ii8+PC9nPjwvc3ZnPg==");opacity:.8;display:inline-block;}.yvp-state-video .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn:hover{opacity:1}.yvp-state-start-screen .yvp-top-bar .yvp-content-type{display:none}.yvp-state-end-screen .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-state-end-screen .yvp-bottom-bar .yvp-slider{pointer-events:none}.yvp-state-end-screen .yvp-playing-item-title.yvp-title-standard{opacity:0;z-index:0}.yvp-browser-mobile .yvp-bottom-bar .yvp-play-controls{padding-top:7px}.yvp-browser-mobile .yvp-bottom-bar .yvp-play-btn{opacity:1;width:30px;height:30px}.yvp-browser-mobile .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{opacity:1}.yvp-browser-mobile .yvp-bottom-bar .yvp-time-container{top:-10px}.yvp-browser-mobile .yvp-bottom-bar .yvp-current-time,.yvp-browser-mobile .yvp-bottom-bar .yvp-vs-time,.yvp-browser-mobile .yvp-bottom-bar .yvp-total-time{font-size:14px}.yvp-browser-mobile .yvp-bottom-bar .yvp-handle{width:14px;height:14px;margin-top:-5px;display:block}.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:7px;}.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{width:30px;height:30px}.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{opacity:1;margin-bottom:0;margin-right:0}.yvp-state-video .yvp-bottom-bar{display:block}.yvp-state-start-screen .yvp-bottom-bar,.yvp-state-error .yvp-bottom-bar,.yvp-state-end-screen .yvp-bottom-bar,.yvp-state-loading .yvp-bottom-bar{display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-slider,.yvp-mode-vpaid .yvp-bottom-bar .yvp-slider,.yvp-mode-ad .yvp-bottom-bar .yvp-handle,.yvp-mode-vpaid .yvp-bottom-bar .yvp-handle,.yvp-mode-ad .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-ad .yvp-bottom-bar .yvp-playback-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-playback-bar{pointer-events:none;height:4px !important;bottom:0 !important;display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-handle,.yvp-mode-vpaid .yvp-bottom-bar .yvp-handle,.yvp-mode-ad .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-buffer-bar{display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-content-type,.yvp-mode-vpaid .yvp-bottom-bar .yvp-content-type{display:block}.yvp-mode-ad .yvp-bottom-bar .yvp-ad-break,.yvp-mode-vpaid .yvp-bottom-bar .yvp-ad-break{display:none}.yvp-cast-overlay{position:absolute;top:0;right:0;bottom:0;left:0;background-color:#000;z-index:50;display:none;color:#fff;background-repeat:no-repeat;background-size:cover;}.yvp-cast-overlay:after{content:\'\';background-color:rgba(0,0,0,0.85);display:block;width:100%;height:100%;position:absolute;top:0;z-index:-1}.yvp-cast-overlay > div{position:relative;height:calc(100% - 70px);}.yvp-cast-overlay > div .cast-overlay-header{height:25%;display:flex;flex-direction:column;justify-content:center;border-bottom:1px solid #777}.yvp-cast-overlay > div .cast-device-info{margin-left:50px;}.yvp-cast-overlay > div .cast-device-info:before{content:\'\';float:left;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0LW9uPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yIi8+PHBhdGggZD0iTTExLjY5IDEwSDE4VjRINnYuNzNjMi4zMjcgMS4yMyA0LjI5IDMuMDU0IDUuNjkgNS4yN3pNNi40MSAxNmMtLjM5NSAwLS43NjgtLjIzMy0uOTI3LS42Mi0uODUtMi4wNzMtMi42MTYtMy42My00LjcyNi00LjE2Ni0uNTM1LS4xMzctLjg2LS42OC0uNzIzLTEuMjE2LjEzNS0uNTM1LjY4LS44NTUgMS4yMTUtLjcyNCAyLjcyLjY5MiA0Ljk5NSAyLjY5IDYuMDg0IDUuMzQ3LjIxLjUxMi0uMDM2IDEuMDk2LS41NDYgMS4zMDYtLjEyNS4wNS0uMjUzLjA3NC0uMzguMDc0Ii8+PHBhdGggZD0iTTEwLjYxNyAxNmMtLjQ0NSAwLS44NS0uMjk4LS45NjctLjc0OC0xLjEtNC4yMi00LjU1Ny03LjQwMi04LjgxLTguMTA1LS41NDUtLjA5LS45MTQtLjYwNS0uODI0LTEuMTUuMDktLjU0NS42MDQtLjkyNCAxLjE1LS44MjMgNS4wMzIuODMgOS4xMiA0LjU5IDEwLjQyIDkuNTc0LjEzOC41MzQtLjE4MiAxLjA4LS43MTcgMS4yMi0uMDg1LjAyLS4xNy4wMzItLjI1My4wMzJNMi40NDYgMTQuNDljLjAwNC4wMDQuMDA3LjAxLjAxLjAxNS4wOTcuMTcyLjE0LjM2LjEzLjU0NC0uMDEuMTgtLjA2Ny4zNi0uMTc1LjUxNy0uMDgyLjEyLS4xOTIuMjI1LS4zMjguMzAyLS4xNTguMDktLjMyNy4xMTQtLjQ5Ni4xMTRILjAydi0xLjQ2NmMtLjAwMi0uMTcuMDI1LS4zMzguMTE0LS40OTYuMjc0LS40OC44ODQtLjY0NiAxLjM2NC0uMzc0LjI1LjE0My40NC4zMi41OTMuNDZsLjE0LjEyN2MuMDg4LjA3NC4xNi4xNi4yMTYuMjU0eiIvPjwvZz48L3N2Zz4=");background-repeat:no-repeat;background-size:90%;background-position:50%;margin-right:10px;width:36px;height:36px}.yvp-cast-overlay > div .cast-device-name{font-size:.9em;position:relative;top:3px}.yvp-cast-overlay > div .cast-device-type{font-size:.7em;color:#999}.yvp-cast-overlay > div .cast-overlay-content{position:relative;height:50%;left:0;right:0;cursor:pointer;opacity:.6;display:flex;justify-content:center;align-items:center;}.yvp-cast-overlay > div .cast-overlay-content:hover{opacity:1}.yvp-cast-overlay > div .cast-overlay-content:after{content:\'\';display:block;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNi43ODYgMTguOTkzSDYuNzRjLS40MTQgMC0uNzUtLjM0NC0uNzUtLjc1VjUuNzczYzAtLjQxNS4zMzMtLjc1Ljc1LS43NS4xNjYgMCAuMzIuMDU0LjQ0My4xNDZsMTAuNTEgNi4wNjdjLjM2LjIxLjQ5LjY2Ny4yOCAxLjAyOC0uMDU0LjA5My0uMTI0LjE3LS4yMDYuMjMtLjAzNi4wMzItLjA3Ni4wNjItLjEyLjA4OGwtMTAuNDg1IDYuM2MtLjExOC4wNy0uMjQ3LjEwNy0uMzc2LjExeiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+");background-repeat:no-repeat;background-size:80%;background-position:50%;width:10%;height:0;padding-bottom:10%;}.yvp-cast-playing .yvp-cast-overlay > div .cast-overlay-content:after{background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMyAoMjk4MDIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPnBhdXNlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9ImRlc2t0b3AiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJwYXVzZSIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTMxLSstUmVjdGFuZ2xlLTEzMS1Db3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2LjAwMDAwMCwgNS4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTMxLUNvcHkiIHg9IjguNSIgeT0iMCIgd2lkdGg9IjMiIGhlaWdodD0iMTQiIHJ4PSIxLjUiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjUsMS40OTgyNDUyNCBDMC41LDAuNjcwNzg3MjQyIDEuMTY1Nzk3MjMsMCAyLDAgTDIsMCBDMi44Mjg0MjcxMiwwIDMuNSwwLjY3NTI0OTEgMy41LDEuNDk4MjQ1MjQgTDMuNSwxMi41MDE3NTQ4IEMzLjUsMTMuMzI5MjEyOCAyLjgzNDIwMjc3LDE0IDIsMTQgTDIsMTQgQzEuMTcxNTcyODgsMTQgMC41LDEzLjMyNDc1MDkgMC41LDEyLjUwMTc1NDggTDAuNSwxLjQ5ODI0NTI0IFoiIGlkPSJSZWN0YW5nbGUtMTMxLUNvcHkiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")}.yvp-cast-overlay > div .cast-overlay-footer{height:25%;text-align:center;border-top:1px solid #777}.yvp-cast-overlay > div .cast-disconnect-btn{position:relative;top:8px;cursor:pointer;padding:2px 5px;color:#999;}.yvp-cast-overlay > div .cast-disconnect-btn:hover{color:#fff}.yvp-flag-casting .yvp-cast-overlay{display:block}.yvp-flag-casting .yvp-bottom-bar{z-index:75;opacity:1 !important;-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important;display:block !important}body.yvp-lightbox{overflow:hidden !important;}body.yvp-lightbox .yvp-lightbox-ancestor{z-index:2147483647 !important;}body.yvp-lightbox .yvp-lightbox-ancestor .yvp-content.yvp-browser-desktop{position:fixed;top:0;left:0;width:100% !important;height:100% !important;z-index:2147483647}.yvp-stream .yvp-bottom-bar{height:60px;}.yvp-stream .yvp-bottom-bar .yvp-volume-bar-container{z-index:30}.yvp-stream .yvp-bottom-bar .yvp-bottom-container{top:26px;margin:0 8px;}.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:0;}.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn,.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{display:none}.yvp-stream .yvp-bottom-bar .yvp-play-controls{padding-top:0}.yvp-stream .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-stream .yvp-bottom-bar .yvp-slider{display:none;pointer-events:none}.yvp-stream .yvp-bottom-bar .yvp-upnext-container,.yvp-stream .yvp-bottom-bar .yvp-time-container{display:none}.yvp-content.yvp-stream .yvp-playing-item-title.yvp-title-standard{padding:8px 10px 8px 10px;font-weight:500;font-size:16px;line-height:20px;z-index:29}.yvp-ministream .yvp-bottom-bar{height:25px;}.yvp-ministream .yvp-bottom-bar .yvp-volume-bar-container{bottom:85px;padding:6px 0;width:20px;left:2px;}.yvp-ministream .yvp-bottom-bar .yvp-volume-bar-container:after{left:5px}.yvp-ministream .yvp-bottom-bar .yvp-volume-level{margin-left:7px}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container{top:0;margin:0 4px;}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:0;}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{margin-left:0}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn,.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{display:none}.yvp-ministream .yvp-bottom-bar .yvp-play-controls{padding-top:0}.yvp-ministream .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-ministream .yvp-bottom-bar .yvp-slider{display:none;pointer-events:none}.yvp-ministream .yvp-bottom-bar .yvp-upnext-container,.yvp-ministream .yvp-bottom-bar .yvp-time-container{display:none}.yvp-content.yvp-ministream .yvp-playing-item-title.yvp-title-standard{opacity:0;z-index:0}.yvp-ministream .yvp-start-screen .yvp-start-screen-button,.yvp-stream .yvp-start-screen .yvp-start-screen-button{width:50px;height:50px;margin:-25px 0 0 -25px}.yvp-ministream.yvp-state-end-screen .yvp-bottom-bar{height:30px;}.yvp-ministream.yvp-state-end-screen .yvp-bottom-bar .yvp-bottom-container{top:5px}.yvp-state-end-screen .yvp-bottom-bar{display:block}'),
n.prototype.create=function(){var e,t=this;l.isFunction(p)?(t._desktopControls=new p(t._eventBus,t._view,t._model),e=t._desktopControls.create()):e=[s.render(u).querySelector(".yvp-bottom-bar"),s.render(u,{strings:c.i18n}).querySelector(".yvp-top-bar"),s.render(u).querySelector(".yvp-playing-item-title")],t._bottomBar=e[0],t._slider=t._bottomBar.querySelector(".yvp-slider"),t._bufferBar=t._bottomBar.querySelector(".yvp-buffer-bar"),t._timeDisplay=t._bottomBar.querySelector(".yvp-time-container"),t._currentTimeLabel=t._bottomBar.querySelector(".yvp-current-time"),t._totalTimeLabel=t._bottomBar.querySelector(".yvp-total-time"),t._handle=t._bottomBar.querySelector(".yvp-handle"),t._playbackBar=t._bottomBar.querySelector(".yvp-playback-bar"),t._playBtn=t._bottomBar.querySelector(".yvp-play-btn"),t._seekBar=t._bottomBar.querySelector(".yvp-seek"),t._visualSeekContainer=t._bottomBar.querySelector(".yvp-visual-seek"),t._fullscreenBtn=t._bottomBar.querySelector(".yvp-fullscreen-btn"),t._volumeBtn=t._bottomBar.querySelector(".yvp-volume-btn"),t._volumeBarContainer=t._bottomBar.querySelector(".yvp-volume-bar-container"),t._volumeIndicator=t._bottomBar.querySelector(".yvp-volume-level"),t._volumeBar=t._bottomBar.querySelector(".yvp-volume-bar"),t._volumeValue=t._bottomBar.querySelector(".yvp-volume-value"),t._volumeHandle=t._bottomBar.querySelector(".yvp-volume-handle"),t._titleBar=e[2],t._topBar=e[1],t._contentType=t._topBar&&t._topBar.querySelector(".yvp-content-type"),t._showTitleOnHover=t._model.ui.showTitleOnHover;var r=t._fullscreenBtn&&d.ie&&d.ie<=10&&s.isIFrame();if(r=r||!t._model.ui.showFullscreen){var n=document.createElement("div");s.classList(n).add("yvp-fullscreen-btn-replacement"),t._fullscreenBtn.parentNode.insertBefore(n,t._fullscreenBtn),t._fullscreenBtn.parentNode.removeChild(t._fullscreenBtn),t._fullscreenBtn=null}return t._initAriaProperties(),t._bindEvents(),e},n.prototype._onAdPlaying=function(){var e=this;e._hideVisualSeek(),e._sliderRemoveEventListener()},n.prototype._onAdPlaybackStarted=function(){var e=this;e._syncVolumeUI(),s.classList(e._contentType).add("hide")},n.prototype._onAdEnded=function(){var e=this;e._sliderAddEventListener()},n.prototype._onPlaybackStarted=function(){var e=this;e._isLive?e._setLiveMode():e._setVodMode(),e._syncVolumeUI(),e._renderTitle()},n.prototype._renderTitle=function(){var e=this;e._updateCurrentTitle(),s.classList(e._titleBar).remove("yvp-title-standard"),s.classList(e._titleBar).remove("yvp-hide");var t=e._model.ui.showTitleOnStart||"";switch(t){case"standard":!e._model.playback.autoplay||e._view.isDocked()&&e._model.ui.docking.showInfoCard||(s.classList(e._titleBar).add("yvp-title-standard"),setTimeout(function(){s.classList(e._titleBar).add("yvp-hide")},m))}},n.prototype._updateCurrentTitle=function(){var e=this,t=e._model.playlist.getCurrentItem();e._titleBar.innerHTML=t&&t.title},n.prototype._onControlsBarChange=function(e){var t=this;!t._showTitleOnHover||t._view.isDocked()&&t._model.ui.docking.showInfoCard||(e?t._showTitle():t._hideTitle())},n.prototype._showTitle=function(){var e=this;s.classList(e._titleBar).add("yvp-title-standard"),s.classList(e._titleBar).remove("yvp-hide")},n.prototype._hideTitle=function(){var e=this;s.classList(e._titleBar).add("yvp-title-standard"),s.classList(e._titleBar).add("yvp-hide")},n.prototype._setLiveMode=function(){var e=this;s.classList(e._slider).add("yvp-disable"),s.classList(e._timeDisplay).add("yvp-hide");var t=e._model.ui.contentTypeLabel;l.isString(t)&&""!==t?(e._contentType.innerHTML=t,e._contentType.setAttribute("aria-label",t),s.classList(e._contentType).remove("hide"),s.classList(e._titleBar).add("yvp-live")):e._liveState&&"live"===e._liveState&&(e._contentType.innerHTML=c.i18n.LIVE,e._contentType.setAttribute("aria-label",c.i18n.LIVE),s.classList(e._contentType).remove("hide"),s.classList(e._titleBar).add("yvp-live"))},n.prototype._setVodMode=function(){var e=this;s.classList(e._slider).remove("yvp-disable"),s.classList(e._timeDisplay).remove("yvp-hide"),s.classList(e._titleBar).remove("yvp-live")},n.prototype._bindEvents=function(){var e=this;e._playTap=new a(e._playBtn),e._onPlayTap=function(t){t.stopPropagation();var r=e._view.getCurrentViewState(),n=e._model.playlist.getCurrentItem().id,o=e._model.playbackState.paused?"ctrl-play-btn":"ctrl-pause-btn";r===_?(e._eventBus.publish(i.RELATED_ITEM_CLICK,n,-1,!1,!1),e._resetTimeLabels()):(e._eventBus.publish(i.API.UI_INTERACT,{srcElement:o}),e._eventBus.publish(i.TOGGLE_PLAY_PAUSE))},e._playBtn.addEventListener("tap",e._onPlayTap),e._fullscreenBtn&&(e._fullscreenTap=new a(e._fullscreenBtn),e._onFullscreenTap=function(t){t.stopPropagation(),e._view.toggleFullscreen()},e._fullscreenBtn.addEventListener("tap",e._onFullscreenTap)),e._bottomBarClick=new a(e._bottomBar),e._onBottomBarClick=function(e){e.stopPropagation()},e._bottomBar.addEventListener("tap",e._onBottomBarClick),e._sliderAddEventListener(),e._bindVolume()},n.prototype._onRelatedItemClick=function(){var e=this;e._resetTimeLabels(),e._updateCurrentTitle()},n.prototype._resetTimeLabels=function(){var e=this;e._currentTimeLabel.innerHTML="0:00",e._totalTimeLabel.innerHTML="/ 0:00"},n.prototype._updateFullscreen=function(e){var t=this;t._fullscreenBtn&&(e?(s.classList(t._fullscreenBtn).add("fullscreen"),t._updateFullscreenTooltip(c.i18n.EXIT_FULLSCREEN)):(s.classList(t._fullscreenBtn).remove("fullscreen"),t._updateFullscreenTooltip(c.i18n.FULLSCREEN_SPACE))),t._fullScreenStreamModeUpdate(e),t.syncAriaState()},n.prototype._updateFullscreenTooltip=function(e){var t=this;if(t._fullscreenBtn){var r=t._fullscreenBtn.querySelector(".yvp-tooltip-content");r&&(r.innerHTML=e)}},n.prototype._sliderAddEventListener=function(){var e=this;e._seekBar&&(e._seekTap=new a(e._seekBar),e._onSeekTap=function(t){t.stopPropagation();var r=(t.clientX||t.pageX)-e._seekBar.getBoundingClientRect().left,n=r/e._seekBar.clientWidth,o=Math.min(n*e._duration,Math.max(e._duration-1,0));e._view.seek(o)},e._seekBar.addEventListener("tap",e._onSeekTap)),e._onSliderMove=function(t){e._eventBus.publish(i.SEEK_BAR_MOUSEOVER,t),s.classList(e._handle).add("active"),s.classList(e._slider).add("yvp-thick-slider"),e._updateVisualSeek(t),e._preventTouchDefault(t)},e._onSliderLeave=function(t){e._eventBus.publish(i.SEEK_BAR_MOUSEOUT,t),s.classList(e._handle).remove("active"),s.classList(e._slider).remove("yvp-thick-slider"),e._hideVisualSeek(t),e._preventTouchDefault(t)},e._bindScrollOverEvents(e._slider,e._onSliderMove,e._onSliderLeave),e._onSeekDown=function(t){s.classList(e._handle).add("active"),e._preventTouchDefault(t),e._seeking=!0,e._eventBus.publish(i.CONTROLS_SEEK_START);var r=e._getSeekFraction(t),n=Math.min(r*e._duration,Math.max(e._duration-1,0));e._eventBus.publish(i.CTRL_SEEK,Math.round(n)),e._onSeekMove(t)},e._onSeekMove=function(t){if(e._seeking){e._preventTouchDefault(t),s.classList(e._bottomBar).add("yvp-drag"),s.classList(e._handle).add("active"),s.classList(e._slider).add("yvp-thick-slider"),e._updateVisualSeek(t);var r=e._getSeekFraction(t),n=Math.min(r*e._duration,Math.max(e._duration-1,0));n=n>1?n:1,e._playbackBar.setAttribute("style","width: "+100*r+"%;"),e._bufferBar.setAttribute("style","width: 0%;"),e._handle.setAttribute("style","left: "+100*r+"%;"),e._eventBus.publish(i.CONTROLS_SEEKING,n)}},e._onSeekUp=function(t){e._seeking&&(s.classList(e._bottomBar).remove("yvp-drag"),s.classList(e._handle).remove("active"),s.classList(e._slider).remove("yvp-thick-slider"),e._hideVisualSeek(t),e._preventTouchDefault(t),e._seeking=!1,e._eventBus.publish(i.CONTROLS_SEEK_END))},e._bindDragEvents(e._slider,e._onSeekDown,e._onSeekMove,e._onSeekUp)},n.prototype._sliderRemoveEventListener=function(){var e=this;e._unbindScrollOverEvents(e._slider,e._onSliderMove,e._onSliderLeave),e._unbindDragEvents(e._slider,e._onSeekDown,e._onSeekMove,e._onSeekUp)},n.prototype._preventTouchDefault=function(e){-1!==e.type.indexOf("touch")&&e.preventDefault()},n.prototype._onMediaItemLoaded=function(e){var t=this;t._isLive=e.isLive(),t._liveState=e.liveState,t._contentType.innerHTML="",t._contentType.setAttribute("aria-label",""),s.classList(t._contentType).add("hide"),t._isLive?t._setLiveMode():t._setVodMode()},n.prototype._onPlaybackProgress=function(e,t,r,n){var o=this;void 0!==r&&o._duration!==r&&(o._duration=r),n&&o._updateBuffer(n),void 0!==t&&(o._updateProgress(t),o._currentTime=t)},n.prototype._updateProgress=function(e){var t=this,r=t._duration,n=e/t._duration*100;t._currentTimeLabel&&l.isNumber(e)&&l.isNumber(t._duration)&&(r-=e,t._currentTimeLabel.innerHTML=s.formatTime(e)),t._totalTimeLabel&&l.isNumber(t._duration)&&(t._totalTimeLabel.innerHTML="/ "+s.formatTime(t._duration)),l.isNumber(e)&&l.isNumber(t._duration)&&(t._playbackBar.setAttribute("style","width: "+n+"%;"),t._seeking||t._handle.setAttribute("style","left: "+n+"%;"),t._slider.setAttribute("aria-valuemax",t._duration),t._slider.setAttribute("aria-valuenow",e),t._slider.setAttribute("aria-valuetext",s.formatTime(e)+" of "+s.formatTime(t._duration)))},n.prototype._updateBuffer=function(e){var t=this,r=0;e.length>0&&(r=e.end(0)/t._duration*100),t._bufferBar.setAttribute("style","width: "+r+"%;")},n.prototype._updateVisualSeek=function(e){var t=this,r=t._model.playlist.getCurrentItem().visualSeek;if(0!==Object.keys(r).length){var n,o=t._getSeekFraction(e);n=.09>o?.09:o>.91?.91:o,t._visualSeekContainer.style.display="block",t._visualSeekContainer.style.left=100*n+"%";var i=o*t._duration;t._visualSeekContainer.querySelector(".yvp-vs-time").innerHTML=s.formatTime(i);var a=10,l=10,d=a*l,c=Math.ceil(Math.floor(i)/r.frequency),p=r.images[Math.floor(c/d)];if(p){var u=c%d,_=u%l,m=Math.floor(u/l),v=_*r.width,y=m*r.height,f=t._visualSeekContainer.querySelector(".yvp-vs-thumbnail");f.style.width=r.width+"px",f.style.height=r.height+"px",f.style.background="url('"+p.url+"')",f.style.backgroundPosition="-"+v+"px -"+y+"px"}}},n.prototype._bindDragEvents=function(e,t,r,n){["mousedown","touchstart"].forEach(function(r){e.addEventListener(r,t)}),["mousemove","touchmove"].forEach(function(e){document.addEventListener(e,r)}),["mouseup","touchend"].forEach(function(e){document.addEventListener(e,n)})},n.prototype._unbindDragEvents=function(e,t,r,n){["mousedown","touchstart"].forEach(function(r){e.removeEventListener(r,t)}),["mousemove","touchmove"].forEach(function(e){document.removeEventListener(e,r)}),["mouseup","touchend"].forEach(function(e){document.removeEventListener(e,n)})},n.prototype._bindScrollOverEvents=function(e,t,r){["mouseenter","touchstart"].forEach(function(r){e.addEventListener(r,t)}),["mousemove","touchmove"].forEach(function(r){e.addEventListener(r,t)}),["mouseleave","touchend"].forEach(function(t){e.addEventListener(t,r)})},n.prototype._unbindScrollOverEvents=function(e,t,r){["mouseenter","touchstart"].forEach(function(r){e.removeEventListener(r,t)}),["mousemove","touchmove"].forEach(function(r){e.removeEventListener(r,t)}),["mouseleave","touchend"].forEach(function(t){e.removeEventListener(t,r)})},n.prototype._syncVolumeUI=function(){var e=this;e._volumeBtn&&e._updateVolumeUI(e._model.playbackState.volume,e._model.playbackState.mute)},n.prototype._bindMute=function(){var e=this;e._volumeTap=new a(e._volumeBtn),e._onVolumeTap=function(t){e._isVolumeInChange||(t.stopPropagation(),e._showVolumeHandle(),e._view.clearAutoHideTimeout(),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout),e._eventBus.publish(i.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-"+(e._model.playbackState.mute?"off":"on")}),e._eventBus.publish(i.CONTROLS_SET_MUTE,!e._model.playbackState.mute))},e._volumeBtn.addEventListener("tap",e._onVolumeTap)},n.prototype._bindVolumeBar=function(){var e=this;e._getVolumeFromEvt=function(t){var r,n=e._view.getFullscreen()&&(d.chrome||d.safari);return r=n?t.pageY-s.getOffsetTopFromEl(e._volumeIndicator,"yvp-main"):t.pageY-s.getOffsetTopFromDocument(e._volumeIndicator),e._volumeIndicator.getBoundingClientRect().top?1-Math.max(0,Math.min(1,r/e._volumeIndicator.clientHeight)):1},e._volumeBarTap=new a(e._volumeBarContainer),e._onVolumeBarTap=function(t){t.stopPropagation(),e._showVolumeHandle(),e._initiateVolumeEvents(t)},e._syncMute=function(t){e._model.playbackState.mute!==t&&(e._eventBus.publish(i.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-"+(t?"on":"off")}),e._eventBus.publish(i.CONTROLS_SET_MUTE,t))},e._initiateVolumeEvents=function(t){var r=e._getVolumeFromEvt(t);e._syncMute(0===r),e._eventBus.publish(i.CONTROLS_SET_VOLUME,r)},e._volumeBarContainer.addEventListener("tap",e._onVolumeBarTap),e._onVolumeBarDown=function(t){e._preventTouchDefault(t),e._isVolumeInChange=!0,e._showVolumeHandle(),e._onVolumeBarMove(t)},e._onVolumeBarMove=function(t){e._isVolumeInChange&&(e._preventTouchDefault(t),e._showVolumeHandle(),e._initiateVolumeEvents(t),e._onVolumeBtnHover(t))},e._onVolumeBarUp=function(t){e._isVolumeInChange&&(e._preventTouchDefault(t),e._isVolumeInChange=!1)},e._bindDragEvents(e._volumeBarContainer,e._onVolumeBarDown,e._onVolumeBarMove,e._onVolumeBarUp)},n.prototype._showVolumeHandle=function(){var e=this;e._volumeHandleTimeout&&clearTimeout(e._volumeHandleTimeout),s.classList(e._volumeHandle).add("show")},n.prototype._bindVolumeBtnHover=function(){var e=this;e._mouseOutVolumeBtnTimeout=null,e._hasVolumeBarUpdatedOnInit=!1,e._onVolumeBtnHover=function(t){e._preventTouchDefault(t),s.classList(e._volumeBarContainer).add("open"),e._hasVolumeBarUpdatedOnInit||(e._syncVolumeUI(),e._hasVolumeBarUpdatedOnInit=!0),e._showVolumeHandle(),e._eventBus.publish(i.VOLUME_HOVER)},e._onVolumeBtnLeave=function(t){e._preventTouchDefault(t),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout),e._mouseOutVolumeBtnTimeout=setTimeout(function(){s.classList(e._volumeBarContainer).remove("open")},500)},e._onVolumeBarContainerHover=function(t){e._preventTouchDefault(t),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout)},e._bindScrollOverEvents(e._volumeBtn,e._onVolumeBtnHover,e._onVolumeBtnLeave),e._bindScrollOverEvents(e._volumeBarContainer,e._onVolumeBarContainerHover,e._onVolumeBtnLeave)},n.prototype._bindVolume=function(){var e=this;e._volumeBtn&&e._bindMute(),e._volumeBarContainer&&e._volumeBtn&&(e._bindVolumeBar(),e._bindVolumeBtnHover())},n.prototype._unbindVolume=function(){var e=this;e._volumeBtn&&(e._volumeTap.destroy(),e._volumeBtn.removeEventListener("tap",e._onVolumeTap)),e._volumeBarContainer&&(e._volumeBarTap.destroy(),e._volumeBarContainer.removeEventListener("tap",e._onVolumeBarTap),e._unbindDragEvents(e._volumeBarContainer,e._onVolumeBarDown,e._onVolumeBarMove,e._onVolumeBarUp),e._unbindScrollOverEvents(e._volumeBtn,e._onVolumeBtnHover,e._onVolumeBtnLeave),e._unbindScrollOverEvents(e._volumeBarContainer,e._onVolumeBarContainerHover,e._onVolumeBtnLeave))},n.prototype._updateMuteBtn=function(e){var t=this,r=t._view.getContentNode();t._volumeBtn&&(e?(s.classList(t._volumeBtn).add("muted"),s.classList(r).add("yvp-muted")):(s.classList(t._volumeBtn).remove("muted"),s.classList(r).remove("yvp-muted"))),t.syncAriaState()},n.prototype._updateVolumeBar=function(e){var t=this;if(t._volumeBar){var r=Math.ceil(100*(1-e)),n=100-r;t._volumeBar.setAttribute("style","height:"+r+"%"),t._volumeValue.setAttribute("style","height:"+n+"%")}if(t._volumeHandle){var o=Math.ceil((1-(1===e?.99:e))*(t._volumeIndicator.clientHeight-t._volumeHandle.offsetHeight));o>0&&(o=3>=o?0:o,t._volumeHandle.setAttribute("style","top:"+o+"px"))}},n.prototype._updateVolumeUI=function(e,t){var r=this;l.isNullOrUndefined(t)?r._updateMuteBtn(!e):(r._updateMuteBtn(t),e=t?0:e),r._updateVolumeBar(e)},n.prototype._getSeekFraction=function(e){var t=this,r=(e.clientX||e.pageX)-t._slider.getBoundingClientRect().left,n=r/t._slider.clientWidth;return Math.max(0,Math.min(1,n))},n.prototype._hideVisualSeek=function(){var e=this;e._visualSeekContainer.style.display="none"},n.prototype._fullScreenStreamModeUpdate=function(e){var t=this,r=t._view.getContentNode(),n=t._view.isStreamMode()||t._view.isMiniStreamMode(),o=t._view.isMiniStreamMode()?"yvp-ministream":"yvp-stream";n&&(e?s.classList(r).remove(o):(s.classList(r).add(o),t._desktopControls&&t._desktopControls.resetSettings()))},n.prototype._initAriaProperties=function(){var e=this;e._playBtn.setAttribute("aria-label",c.i18n.PLAY_VIDEO),e._slider.setAttribute("aria-label",c.i18n.SEEK_SLIDER),e._slider.setAttribute("aria-valuemin",0),e._fullscreenBtn&&e._fullscreenBtn.setAttribute("aria-label",c.i18n.GO_TO_FULLSCREEN),e._volumeBtn&&(s.classList(e._volumeBtn).contains("muted")?e._volumeBtn.setAttribute("aria-label",c.i18n.UNMUTE):e._volumeBtn.setAttribute("aria-label",c.i18n.MUTE))},n.prototype.syncAriaState=function(){var e=this,t=e._model.playbackState;t.paused?e._playBtn.setAttribute("aria-label",c.i18n.PLAY_VIDEO):e._playBtn.setAttribute("aria-label",c.i18n.PAUSE_VIDEO),e._fullscreenBtn&&(e._view.getFullscreen()?e._fullscreenBtn.setAttribute("aria-label",c.i18n.GO_TO_NORMAL_SCREEN):e._fullscreenBtn.setAttribute("aria-label",c.i18n.GO_TO_FULLSCREEN)),e._volumeBtn&&(s.classList(e._volumeBtn).contains("muted")?e._volumeBtn.setAttribute("aria-label",c.i18n.UNMUTE):e._volumeBtn.setAttribute("aria-label",c.i18n.MUTE)),e._desktopControls&&e._desktopControls.syncAriaState()},n.prototype.getBottomBar=function(){var e=this;return e._bottomBar},n.prototype.destroy=function(){var e=this;e._desktopControls&&e._desktopControls.destroy(),e._playTap&&e._playBtn&&(e._playTap.destroy(),e._playBtn.removeEventListener("tap",e._onPlayTap),e._fullscreenBtn&&e._fullscreenTap&&(e._fullscreenTap.destroy(),e._fullscreenBtn.removeEventListener("tap",e._onFullscreenTap)),e._seekTap&&e._seekBar&&(e._seekTap.destroy(),e._seekBar.removeEventListener("tap",e._onSeekTap)),e._sliderRemoveEventListener(),e._unbindVolume()),e._upNextBtnTap&&(e._upNextBtn.removeEventListener("tap",e._onUpNextBtnTap),e._upNextBtnTap.destroy())}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./controls.html":79,"./yahoo-controls":106,fs:164,"insert-css":166}],81:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-end-screen yvp-end-replay'>"),n.b("\n"+r),n.b('    <div class="yvp-end-rep-icon"></div>'),n.b("\n"+r),n.b("</div>"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],82:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-error-screen'>"),n.b("\n"+r),n.b("    <img class='yvp-error-screen-image' src='"),n.b(n.v(n.f("imageSrc",e,t,0))),n.b("'>"),n.b("\n"+r),n.b("    <div class='yvp-error-screen-background'></div>"),n.b("\n"+r),n.b("    <div class='yvp-error-title'>"),n.b(n.v(n.d("error.title",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("    <div class='yvp-error-desc' id='yvp-error-message'>"),n.b(n.v(n.d("error.message",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("    <div class='yvp-error-code'>"),n.b(n.v(n.d("error.rep",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("    <div class='yvp-feedback-btn yvp-error-feedback-btn'>"),n.b("\n"+r),n.b("        <p>"),n.b(n.v(n.d("strings.FEEDBACK_BUTTON",e,t,0))),n.b("</p>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],83:[function(e,t,r){"use strict";function n(e){var t=this;t._eventBus=e}t.exports=n;var o=e("../util"),i=e("../tap"),a=e("../strings"),s=e("../event"),l=e("./error-screen.html");n.prototype.create=function(e,t,r,n,d){var c=this;return c.node=o.render(l,{error:e,guid:t,sessionId:r,imageSrc:n,strings:a.i18n}),c.errorMsg=c.node.querySelector("#yvp-error-message"),c.errorMsg.innerHTML=e.message,c.flashIcon=c.node.querySelector(".yvp-error-flash-download-icon"),c.flashIcon&&d&&(c.flashIcon.src=d),c._feedbackLink=c.node.querySelector(".yvp-error-feedback-btn"),o.isInternalUser()?(c._feedbackLinkTap=new i(c._feedbackLink),c._onFeedbackLinkTap=function(e){c._eventBus.publish(s.OPEN_FEEDBACK,{srcView:"error-screen"})},c._feedbackLink.addEventListener("tap",c._onFeedbackLinkTap)):c._feedbackLink&&(c._feedbackLink.parentNode.removeChild(c._feedbackLink),c._feedbackLink=null),c.node},n.prototype.destroy=function(){var e=this;e._feedbackLinkTap&&(e._feedbackLinkTap.destroy(),e._feedbackLink.removeEventListener("tap",e._onFeedbackLinkTap)),e.node=null}},{"../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./error-screen.html":82}],84:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-feedback-screen'>"),n.b("\n"+r),n.b("    <button class='yvp-feedback-screen-close-btn'></button>"),n.b("\n"+r),n.b("    <div class='yvp-feedback-screen-info'>"),n.b("\n"+r),n.b("        <div class='yvp-feedback-screen-title'>"),n.b(n.v(n.d("strings.FEEDBACK_TITLE",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div class='yvp-feedback-screen-response'></div>"),n.b("\n"+r),n.b("        <div class='yvp-feedback-screen-refid'></div>"),n.b("\n"+r),n.b('        <textarea class=\'yvp-feedback-screen-text\' maxlength="2000" id="feedback_input" placeholder="Enter your comments here."></textarea>'),n.b("\n"+r),n.b("        <div class='yvp-feedback-screen-button-container'>"),n.b("\n"+r),n.b("             <div class='yvp-feedback-screen-btn'>"),n.b(n.v(n.d("strings.FEEDBACK_SUBMIT_BUTTON",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("        <div class='yvp-feedback-screen-disclaimer'>"),n.b(n.v(n.d("strings.FEEDBACK_DISCLAIMER",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],85:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._model=e,n._view=r,n._viewMainElem=r.getMainElement(),n._eventBus=t,n._isSwfReady=!1,n._playbackInfo={},n._source="unknown",n._playerEvents=[],[o.API.PLAYER_READY,o.API.VIDEO_STARTED,o.API.PLAYBACK_SEEK_COMPLETE,o.API.PLAYER_MUTE_CHANGE,o.API.PLAYER_ERROR,o.API.PLAYBACK_COMPLETE,o.API.PLAYBACK_PAUSE,o.API.PLAYBACK_START,o.API.AD_PLAYBACK_STOP,o.API.AD_PLAYBACK_START,o.API.PLAYER_READY].forEach(function(e){n._eventBus.subscribe(e,function(t){n._playerEvents.push(e),n._playerEvents.length>30&&n._playerEvents.shift()})}),n._eventBus.subscribe(o.OPEN_FEEDBACK,function(e){var t;switch(e.srcView){case"loading-screen":t="loading-screen";break;case"error-screen":t="error-screen";break;case"settings-controller":t="advance-menu";break;case"opensimsim-screen":t="opss"}n._source=t,n.render()})}t.exports=n;var o=e("../event"),i=e("../../../lib/user-agent"),a=e("../util"),s=e("../tap"),l=e("./feedback-screen.html"),d=e("../strings");e("./open-sim-sim");n.prototype.create=function(){var e=this;e._node=a.render(l,{strings:d.i18n});var t=e._node.querySelector(".yvp-feedback-screen-close-btn");e._closeTap=new s(t),e._onCloseTap=function(t){t.stopPropagation(),e.close(),e._view.setKeyboardFocus()},t.addEventListener("tap",e._onCloseTap),e._feedbackTextForm=e._node.querySelector(".yvp-feedback-screen-text"),e._onFeedbackTextKeyDown=function(e){e.stopPropagation()},e._feedbackTextForm.addEventListener("keydown",e._onFeedbackTextKeyDown);var r=e._node.querySelector(".yvp-feedback-screen-btn");return e._feedbackTap=new s(r),e._onFeedbackTap=function(t){var r={},n=JSON.parse(JSON.stringify(e._model)),a=e._view.getOpenSimSim();n.playbackState=n.mediaStore=n.playlist={},r.model=n,r.eventLog=JSON.stringify(e._playerEvents),r.source=e._source,r.feedbackText=e._feedbackTextForm.value,r.opssInfo=a&&a.fetchInfo(),i.desktop&&i.safari&&e._view.getFullscreen()&&(r.feedbackText+="\n--safari fullscreen--\n"+window.prompt("Enter your comments here")),e._eventBus.publish(o.FEEDBACK_INFO,r),e._feedbackRefId=e._node.querySelector(".yvp-feedback-screen-refid"),e._feedbackRefId.textContent=d.i18n.FEEDBACK_SUBTITLE_RESPONSE_ID+e._model.guid,e._feedbackResponse=e._node.querySelector(".yvp-feedback-screen-response"),e._feedbackResponse.textContent=d.i18n.FEEDBACK_SUBTITLE_RESPONSE_MESSAGE,e._node.querySelector(".yvp-feedback-screen-text").remove(),e._node.querySelector(".yvp-feedback-screen-button-container").remove(),e._node.querySelector(".yvp-feedback-screen-disclaimer").remove()},r.addEventListener("tap",e._onFeedbackTap),e._node},n.prototype.render=function(){var e=this;e._viewMainElem.appendChild(e.create()),a.showHide(e._node,!0)},n.prototype.isOpen=function(){var e=this;return e._node&&"none"!==e._node.style.display},n.prototype.close=function(){var e=this;e._node.style.display="none",e._viewMainElem.querySelector(".yvp-feedback-screen").remove()},n.prototype.destroy=function(){var e=this;e._closeTap&&e._closeTap.destroy(),e._feedbackTextForm&&e._feedbackTextForm.removeEventListener("keydown",e._onFeedbackTextKeyDown),e._feedbackTap&&(e._viewMainElem.querySelector(".yvp-feedback-screen").remove(),e._feedbackTap.destroy())}},{"../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./feedback-screen.html":84,"./open-sim-sim":91}],86:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-loading-screen'>"),n.b("\n"+r),n.b("    <div class='yvp-loading-spinner yvp-spinner-icon'></div>"),n.b("\n"+r),n.b("    <div class='yvp-feedback-btn yvp-error-feedback'>"),n.b("\n"+r),n.b("        <p>"),n.b(n.v(n.d("strings.FEEDBACK_BUTTON",e,t,0))),n.b("</p>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],87:[function(e,t,r){"use strict";function n(e){var t=this;t._eb=e,t._resizeScheduled=!1,t._eb.subscribe(a.FULLSCREEN_CHANGE,t._scheduleResize,t),t._scheduleResize()}t.exports=n;var o=(e("fs"),e("insert-css")),i=e("../util"),a=e("../event"),s=e("../tap"),l=e("../strings"),d=e("./loading-screen.html");o('.yvp-spinner-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSItMjUgLTI1IDEwMCAxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0iTTI1IDBhMjUgMjUgMCAwIDAgMCA1MCIgc3Ryb2tlLWRhc2hhcnJheT0iNzkiIHN0cm9rZT0iI2FhYSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiPjxhbmltYXRlIGlkPSJhMSIgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2UtZGFzaG9mZnNldCIgZnJvbT0iOSIgdG89Ijc2IiBkdXI9Ijc1MG1zIiBiZWdpbj0iMHM7IGEyLmVuZCIgZmlsbD0iZnJlZXplIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZSBpZD0iYTIiIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGZyb209Ijc2IiB0bz0iOSIgZHVyPSI3NTBtcyIgYmVnaW49ImExLmVuZCIgZmlsbD0iZnJlZXplIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZSBpZD0iYTMiIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLXdpZHRoIiBmcm9tPSI0IiB0bz0iOCIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhNC5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgaWQ9ImE0IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InN0cm9rZS13aWR0aCIgZnJvbT0iOCIgdG89IjQiIGR1cj0iNzUwbXMiIGJlZ2luPSJhMy5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE1IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMCAyNSAyNSIgZHVyPSI3NTBtcyIgYmVnaW49IjA7IGE4LmVuZCIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE2IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMTgwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTUuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBpZD0iYTciIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjE4MCAyNSAyNSIgdG89IjE4MCAyNSAyNSIgZHVyPSI3NTBtcyIgYmVnaW49ImE2LmVuZCIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE4IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIxODAgMjUgMjUiIHRvPSIzNjAgMjUgMjUiIGR1cj0iNzUwbXMiIGJlZ2luPSJhNy5lbmQiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjwvcGF0aD48cGF0aCBkPSJNMjUgNTBhMjUgMjUgMCAxIDAgMC01MCIgc3Ryb2tlLWRhc2hhcnJheT0iNzkiIHN0cm9rZT0iI2FhYSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiPjxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGZyb209IjkiIHRvPSI3NiIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhMi5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2UtZGFzaG9mZnNldCIgZnJvbT0iNzYiIHRvPSI5IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTEuZW5kIiBmaWxsPSJmcmVlemUiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLXdpZHRoIiBmcm9tPSI0IiB0bz0iOCIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhNC5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2Utd2lkdGgiIGZyb209IjgiIHRvPSI0IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTMuZW5kIiBmaWxsPSJmcmVlemUiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjAgMjUgMjUiIHRvPSIwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iMDsgYTguZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMTgwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTUuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIxODAgMjUgMjUiIHRvPSIxODAgMjUgMjUiIGR1cj0iNzUwbXMiIGJlZ2luPSJhNi5lbmQiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlVHJhbnNmb3JtIGlkPSJhOCIgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMTgwIDI1IDI1IiB0bz0iMzYwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTcuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48L3BhdGg+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMCAyNSAyNSIgdG89IjM2MCAyNSAyNSIgZHVyPSI2NzUwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9nPjwvc3ZnPg==")}.yvp-loading-screen{display:none;}.yvp-loading-screen .yvp-loading-spinner{position:absolute;top:50%;left:50%;background-size:100% 100%;max-width:60px;max-height:60px;width:60px;height:60px;margin-top:-30px;margin-left:-30px;visibility:hidden;transition:visibility 0s linear 500ms;z-index:20}.yvp-loading-screen.yvp-show-spinner .yvp-loading-spinner{visibility:visible}.yvp-flag-loading .yvp-loading-screen,.yvp-flag-switching .yvp-loading-screen{display:block}.yvp-state-blocked .yvp-loading-screen{display:none}');
var c=60,p=3e4;n.prototype.create=function(){var e=this;return e.node=i.render(d,{strings:l.i18n}),e._feedbackLink=e.node.querySelector(".yvp-error-feedback"),e._eb.subscribe(a.API.LOADING_BEGIN,e._onLoadingScreenVisible,e),e._eb.subscribe(a.API.LOADING_END,e.hide,e),e._feedbackLinkTap=new s(e._feedbackLink),e._onFeedbackLinkTap=function(t){e._eb.publish(a.OPEN_FEEDBACK,{srcView:"loading-screen"})},e._feedbackLink.addEventListener("tap",e._onFeedbackLinkTap),e.node},n.prototype._resize=function(){var e=this,t=Math.min(2*e.node.clientWidth/640,1),r=e.node.querySelector(".yvp-loading-spinner");r.style.width=t*c+"px",r.style.height=t*c+"px",r.style.marginLeft=-1*(t*c/2)+"px",r.style.marginTop=-1*(t*c/2)+"px"},n.prototype._scheduleResize=function(){var e=this;if(!e._resizeScheduled){var t=e._eb.subscribe(a.API.LOADING_BEGIN,function(){e._resizeScheduled=!1,e._resize(),t()},e);e._resizeScheduled=!0}},n.prototype._onLoadingScreenVisible=function(){var e=this;i.forceDOMRedrawOnElement(e.node),i.classList(e.node).add("yvp-show-spinner"),i.showHide(e._feedbackLink,!1),i.isInternalUser()&&(e.feedbackLinkRenderTimeOut=setTimeout(e._showFeedbackButton.bind(e),p))},n.prototype._showFeedbackButton=function(){var e=this;i.showHide(e._feedbackLink,!0)},n.prototype.hide=function(){var e=this;i.classList(e.node).remove("yvp-show-spinner"),clearTimeout(e.feedbackLinkRenderTimeOut),e.feedbackLinkRenderTimeOut=null},n.prototype.destroy=function(){var e=this;e.node=null,e._feedbackLinkTap&&(e._feedbackLinkTap.destroy(),e._feedbackLink.removeEventListener("tap",e._onFeedbackLinkTap))}},{"../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./loading-screen.html":86,fs:164,"insert-css":166}],88:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-nfl-branding-container'>"),n.b("\n"+r),n.b("    <div class='yvp-nfl-branding'>"),n.b("\n"+r),n.b("      <a href='http://www.nfl.com/' target='nfl_site'>"),n.b("\n"+r),n.b("          <span class='yvp-nfl-brand-span'></span>"),n.b("\n"+r),n.b("          <span class='yvp-nfl-brand-logo'></span>"),n.b("\n"+r),n.b("      </a>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],89:[function(e,t,r){"use strict";function n(){}t.exports=n;var o=e("../util"),i=e("./nfl-branding.html");n.prototype.create=function(){var e=this;return e.node=o.render(i),e.node},n.prototype.destroy=function(){var e=this;e.node=null}},{"../util":"jJTEqU","./nfl-branding.html":88}],90:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-opensimsim' style='display: none'>"),n.b("\n"+r),n.b("    <button class='yvp-opensimsim-close-btn yvp-close-btn'></button>"),n.b("\n"+r),n.b("    <div class='yvp-feedback-btn yvp-opensimsim-feedback-btn'>"),n.b("\n"+r),n.b("        <p>"),n.b(n.v(n.d("strings.FEEDBACK_BUTTON",e,t,0))),n.b("</p>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("    <div class='yvp-opensimsim-info'>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-title'>Yahoo Fireball Video Player</div>"),n.b("\n"+r),n.b("        <div>Version : "),n.b(n.v(n.f("version",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div>Page SpaceID : "),n.b(n.v(n.f("spaceId",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div class='yvp-sessionId'></div>"),n.b("\n"+r),n.b("        <div>YVAP Acct. ID : "),n.b(n.v(n.f("yvap_accountId",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div>YVAP Play Context : "),n.b(n.v(n.f("yvap_playContext",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        <div class='yvp-videoSpaceId'></div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-title'>Current Media</div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-uuid'></div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-lmsid'></div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-renderertype'></div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-tv'></div>"),n.b("\n"+r),n.b("        <br>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-graphs'></div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-detail'></div>"),n.b("\n"+r),n.b("        <div class='yvp-swf-ready'></div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-title'>Platform</div>"),n.b("\n"+r),n.b("        <div class='yvp-opensimsim-platform'></div>"),n.b("\n"+r),n.b("        <div class='yvp-profile-btn'>Profile</div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],91:[function(e,t,r){"use strict";function n(e,t,r,n){var i=this;i._model=e,i._eventBus=t,i._profiler=r,i._rendererController=n,i._isSwfReady=!1,i._playbackInfo={},i._timestamps=[],i._history={bitrate:{title:"Bit Rate History",data:[]},speed:{title:"Download Speed History",data:[]},bufferLength:{title:"Buffer Length History",data:[]},frameRate:{title:"Frame Rate History",data:[]}},i._eventBus.subscribe(o.PLAYBACK_INFO,function(e){i._playbackInfo=e,i._timestamps.push(Date.now()/1e3),i._history.bitrate.data.push(parseFloat(e.currentStreamBitrate)),i._history.speed.data.push(parseFloat(e.currentKbps)),i._history.bufferLength.data.push(parseFloat(e.bufferLength)),i._history.frameRate.data.push(parseFloat(e.frameRate?e.frameRate:0)),i._updateInfo()}),i._eventBus.subscribe(o.SWF_READY,function(){i._isSwfReady=!0}),i._eventBus.subscribe(o.YVAP_INFO_UPDATE,function(e){i._yvapDom=e}),i._eventBus.subscribe(o.API.PLAYLIST_POSITION_CHANGE,function(){i._updateBasicMediaItemInfo()}),i._eventBus.subscribe(o.RENDERER_SWITCHED,i._onRendererSwitched,i)}t.exports=n;var o=e("../event"),i=e("../../../lib/user-agent"),a=e("../util"),s=e("../../../lib"),l=e("../tap"),d=e("../vtt-fetcher"),c=e("./open-sim-sim.html"),p=e("../strings"),u=e("../renderers/type"),_=e("../navigator-info").network,m=45,v=40;n.prototype.create=function(){var e=this;e._node=a.render(c,{version:e._model.version,spaceId:e._model.baseConfig.pageSpaceId,yvap_accountId:e._model.YVAP.accountId,yvap_playContext:e._model.YVAP.playContext,strings:p.i18n});var t=e._node.querySelector(".yvp-opensimsim-close-btn");e._closeTap=new l(t),e._onCloseTap=function(t){t.stopPropagation(),e.close()},t.addEventListener("tap",e._onCloseTap),e._feedbackLink=e._node.querySelector(".yvp-opensimsim-feedback-btn"),e._feedbackLinkTap=new l(e._feedbackLink),e._onFeedbackLinkTap=function(){e._eventBus.publish(o.OPEN_FEEDBACK,{srcView:"opensimsim-screen"})},e._feedbackLink.addEventListener("tap",e._onFeedbackLinkTap);var r=e._node.querySelector(".yvp-profile-btn");return e._profileTap=new l(r),e._onProfileTap=function(t){t.stopPropagation(),e._profiler.render(e._yvapDom)},r.addEventListener("tap",e._onProfileTap),e._updatePlatformInfo(),e._node},n.prototype.fetchInfo=function(){var e=this;return{history:e._history,playbackInfo:e._playbackInfo,profile:e._profiler}},n.prototype.render=function(){var e=this;e._handleHTML5Info(),e._updateBasicMediaItemInfo(),e._updateInfo(),e._node.style.display="block"},n.prototype._handleHTML5Info=function(e){var t=this;return t._isHTML5()?(e=e||t._rendererController&&t._rendererController.getActiveRenderer(),void(e&&(t._videoNode=e.node,t._toggleHTML5Info(!0)))):void t._toggleHTML5Info(!1)},n.prototype.isOpen=function(){var e=this;return"none"!==e._node.style.display},n.prototype.close=function(){var e=this;e._node.style.display="none",e._toggleHTML5Info(!1)},n.prototype._onRendererSwitched=function(e){var t=this;t._handleHTML5Info(e.active),t._updateBasicMediaItemInfo(),t._updateInfo()},n.prototype._isHTML5=function(){var e=this;return i.tv||i.safari&&a.isHtmlRenderer(e._model.playbackState.rendererType)},n.prototype._renderGraph=function(e,t,r,n,o){for(var i=t.length-1,a=0,s=e[i],l=t[i],d=t[i],c=i-1;c>=0;c--)if(l=Math.min(l,t[c]),d=Math.max(d,t[c]),c>0&&s-e[c-1]>m){a=c;break}var p=e[a];l>0&&(l=0),l===d&&(d=l+1),r.save(),r.translate(v,o),r.scale((n-v)/m,-1*o/(d-l)),r.beginPath(),r.moveTo(0,t[a]-l);for(var u=a+1;u<t.length;u++)r.lineTo(e[u]-p,t[u]-l);r.restore(),r.lineWidth=1,r.lineCap="round",r.lineJoin="round",r.strokeStyle="white",r.stroke(),r.font="8pt Monospace",r.fillStyle="white",r.fillText(d.toFixed(1),0,10),r.fillText(l.toFixed(1),0,60)},n.prototype._generateHtmlFromKeyValues=function(e){var t="",r=Object.keys(e);return r.forEach(function(r){var n=e[r];t+="<div>"+r+" : "+n+"</div>"}),t},n.prototype._generateConfigHTML=function(e,t){var r=this,n="",o=Object.keys(e);return o.forEach(function(o){var i=e[o];i&&"object"==typeof i?isNaN(o)?(n+="<div>"+o+" :</div>",n+='<div style="padding-left: 10px">'+r._generateConfigHTML(i)+"</div>"):n+="<div>"+r._generateConfigHTML(i,o)+"</div>":n+="<div>"+(t?t+" : ":"")+o+" : "+i+"</div>"}),n},n.prototype._generateHtmlTitle=function(e){return'<div class="yvp-opensimsim-title">'+e+"</div>"},n.prototype._updatePlatformInfo=function(){var e=this,t={OS:i.os,Mobile:i.mobile,"User Agent":i.ua};i.mobile&&(t["Can Play Inline"]=e._model.playback.canPlayInline,t["Autoplay Supported"]=e._model.playback.autoplaySupported,t["Is Mobile Network"]="boolean"==typeof _.mobile?_.mobile:"unknown");var r=e._node.querySelector(".yvp-opensimsim-platform");r.innerHTML=e._generateHtmlFromKeyValues(t)},n.prototype._updateBasicMediaItemInfo=function(){var e=this,t=e._model.playlist.getCurrentItem(),r=e._node.querySelector(".yvp-opensimsim-uuid");r.innerHTML="UUID : "+(t?t.id:""),r=e._node.querySelector(".yvp-opensimsim-lmsid"),r.innerHTML="License Id (LMS ID) : "+(t?t.license.licenseId:""),r=e._node.querySelector(".yvp-videoSpaceId"),r.innerHTML="Video SpaceID : "+(t?t.metrics.pageSpaceId:""),r=e._node.querySelector(".yvp-sessionId"),r.innerHTML="SessionId : "+(t?t.videoSession:"none"),e._isHTML5()&&!i.samsung&&(r=e._node.querySelector(".yvp-opensimsim-url"),t.isLive()?r.innerHTML="Master Playlist URL : "+e._videoNode.currentSrc:i.tv&&(r.innerHTML="Current Source URL : "+e._videoNode.currentSrc),r=e._node.querySelector(".yvp-opensimsim-config"),r&&(r.innerHTML=e._generateHtmlTitle("Config")+e._generateConfigHTML(e._model.getConfig())))},n.prototype._updateInfo=function(){var e=this,t=e._model.playlist.getCurrentItem(),r=e._playbackInfo,n=r.deliveryProtocol;t&&(n+=" / "+t.getType());var o=e._node.querySelector(".yvp-opensimsim-graphs");o.innerHTML="";var i=Object.keys(e._history);i.forEach(function(t){var r=e._history[t].data;if(r.some(function(e){return s.isNumber(e)})){var n=150,i=60,l=document.createElement("div");a.classList(l).add("yvp-opensimsim-graph");var d=document.createElement("div");d.innerHTML=e._history[t].title,l.appendChild(d);var c=document.createElement("canvas");c.width=n,c.height=i,l.appendChild(c),o.appendChild(l);var p=c.getContext("2d");e._renderGraph(e._timestamps,r,p,n,i)}});var l={"Total Quality Levels":r.qualityLevels,"Current Bitrate":r.currentStreamBitrate+" kbps",Protocol:n,cdn:t?t.getCDN():"","Recovery count":t?t.failoverCount:0,"Buffer Length / Time":r.bufferLength+" secs / "+r.bufferTime+" secs","Frame Rate":r.frameRate,"Download Speed":r.currentKbps+" kbps","Dropped Frames":r.droppedFrames,"Hardware Acceleration Used":r.hwAccelUsed?"Yes":"No","Hardware Acceleration Enabled":r.hwAccelEnabled?"Yes":"No","Memory Used":r.totalMemory+" MB","Media Size":r.mediaWidth+" x "+r.mediaHeight,"Stream Playback Rate":r.playbackBytesPerSecond+" kbps"};t&&t.rendererType===u.HTML5_HLS&&(l["Buffering Count"]=r.bufferingCount,l["Total buffering time"]=r.totalBufferingTime+" ms");var d=e._node.querySelector(".yvp-opensimsim-detail");d.innerHTML=e._generateHtmlFromKeyValues(l),d=e._node.querySelector(".yvp-opensimsim-renderertype"),d.innerHTML="Renderer Type : "+(e._model.playbackState.rendererType||"(no renderer yet)"),d=e._node.querySelector(".yvp-swf-ready"),d.innerHTML="Is SWF ready? "+e._isSwfReady},n.prototype._toggleHTML5Info=function(e){var t=this,r=t._node.querySelector(".yvp-opensimsim-tv");if(t._unsubscribeToHTML5Events(),t._clearHTML5Timers(),r.innerHTML="",e){r.innerHTML+='<div class="yvp-opensimsim-url"></div>',r.innerHTML+=t._generateHtmlTitle("HTML5 Video States");var n={"Current Time":'<span class="yvp-opensimsim-time"></span>',"Playback State":'<span class="yvp-opensimsim-playback"></span>',"Player State":'<span class="yvp-opensimsim-state"></span>',"Buffering State":'<span class="yvp-opensimsim-buffering"></span>',"Network State":'<span class="yvp-opensimsim-network"></span>',"Ready State":'<span class="yvp-opensimsim-ready"></span>',"Error State":'<span class="yvp-opensimsim-error">none</span>'};if(r.innerHTML+=t._generateHtmlFromKeyValues(n),i.tv&&s.isFunction(d)){r.innerHTML+=t._generateHtmlTitle("VTT Info");var o={"VTT Index":'<span class="yvp-opensimsim-vttindex"></span>',"VTT URL":'<span class="yvp-opensimsim-vtturl"></span>',"STREAM BITRATES":'<span class="yvp-opensimsim-bitrate-list"></span>'};r.innerHTML+=t._generateHtmlFromKeyValues(o)}r.innerHTML+='<div class="yvp-opensimsim-config"></div>',t._setupHTML5Timers(),t._subscribeToHTML5Events()}},n.prototype._unsubscribeToHTML5Events=function(){var e=this;e._html5eventsDetachArray&&e._html5eventsDetachArray.forEach(function(e){e()}),e._html5eventsDetachArray=[]},n.prototype._subscribeToHTML5Events=function(){var e=this;e._html5eventsDetachArray.push(e._eventBus.subscribe(o.Video.TIMEUPDATE,function(t){e._node.querySelector(".yvp-opensimsim-time").innerHTML=t}));var t=["PLAYING","PAUSE","SEEKING","SEEKED"];t.forEach(function(t){e._html5eventsDetachArray.push(e._eventBus.subscribe(o.Video[t],function(){e._node.querySelector(".yvp-opensimsim-playback").innerHTML=t}))}),e._html5eventsDetachArray.push(e._eventBus.subscribe(o.Video.WAITING,function(t){e._node.querySelector(".yvp-opensimsim-buffering").innerHTML=t.value}));var r=[null,"aborted","network","decode","source not supported"];e._html5eventsDetachArray.push(e._eventBus.subscribe(o.Video.ERROR,function(t){e._node.querySelector(".yvp-opensimsim-error").innerHTML=r[t.code]})),i.tv&&s.isFunction(d)&&(e._html5eventsDetachArray.push(e._eventBus.subscribe(o.VTT_SEGMENT_LOADED,function(t,r,n,o){e._node.querySelector(".yvp-opensimsim-vttindex").innerHTML=n,e._node.querySelector(".yvp-opensimsim-vtturl").innerHTML=o})),e._html5eventsDetachArray.push(e._eventBus.subscribe(o.CTV.GET_BITRATE_FOR_OPSS,function(t){var r=e._node.querySelector(".yvp-opensimsim-bitrate-list");r.innerHTML="Bitrates : "+JSON.stringify(t)})))},n.prototype._setupHTML5Timers=function(){var e=this;e._playerStateTimer=setInterval(function(){e._node.querySelector(".yvp-opensimsim-state").innerHTML=e._model.playbackState.state},1e3);var t=["network empty","network idle","network loading","network no source"];if(!i.samsung){e._networkStateTimer=setInterval(function(){var r=t[e._videoNode.networkState];e._node.querySelector(".yvp-opensimsim-network").innerHTML=r},1e3);var r=["have nothing","have metadata","have current data","have future data","have enough data"];e._readyStateTimer=setInterval(function(){e._node.querySelector(".yvp-opensimsim-ready").innerHTML=r[e._videoNode.readyState]},1e3)}},n.prototype._clearHTML5Timers=function(){var e=this;e._playerStateTimer&&clearInterval(e._playerStateTimer),e._networkStateTimer&&clearInterval(e._networkStateTimer),e._readyStateTimer&&clearInterval(e._readyStateTimer)},n.prototype.destroy=function(){var e=this;e._toggleHTML5Info(!1),e._closeTap&&e._closeTap.destroy(),e._profileTap&&e._profileTap.destroy(),e._feedbackLinkTap&&e._feedbackLinkTap.destroy()}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../navigator-info":42,"../renderers/type":54,"../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../vtt-fetcher":107,"./open-sim-sim.html":90}],92:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b('<div class="yvp-playlist-item-container">'),n.b("\n"+r),n.s(n.f("items",e,t,1),e,t,0,56,754,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('        <li class="yvp-playlist-item" data-id=\''),n.b(n.v(n.f("id",e,t,0))),n.b("' data-idx="),n.b(n.v(n.f("idx",e,t,0))),n.b(">"),n.b("\n"+r),n.b('            <img class="yvp-playlist-item-image" src=\''),n.b(n.v(n.f("thumbnail",e,t,0))),n.b("'/>"),n.b("\n"+r),n.b('            <div class="yvp-playlist-border"></div>'),n.b("\n"+r),n.b('            <div class="yvp-playlist-item-gradient">'),n.b("\n"+r),n.b('                <div class="yvp-pl-meta">'),n.b("\n"+r),n.b("                    <span class='yvp-pl-title'>"),n.b(n.v(n.f("title",e,t,0))),n.b("</span>"),n.b("\n"+r),n.b("                    <span class='yvp-now-playing'>"),n.b(n.v(n.d("strings.NOW_PLAYING",e,t,0))),n.b("</span>"),n.b("\n"+r),n.s(n.f("isWideMode",e,t,1),e,t,0,528,623,"{{ }}")&&(n.rs(e,t,function(e,t,r){r.b("                        <span class='yvp-pl-provider'>"),r.b(r.v(r.f("provider",e,t,0))),r.b("</span>"),r.b("\n")}),e.pop()),n.b("                </div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("            <div class='yvp-pl-dur'>"),n.b(n.v(n.f("duration",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("        </li>"),n.b("\n")}),e.pop()),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],93:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div tabindex='0' class='yvp-playlist-container "),n.b(n.v(n.f("modeClass",e,t,0))),n.b(" yvp-pl-loading yvp-playlist-theme-"),n.b(n.v(n.f("theme",e,t,0))),n.b(" "),n.b(n.v(n.f("streamModeClass",e,t,0))),n.b("'>"),n.b("\n"+r),n.s(n.f("isHiddenMode",e,t,1),e,t,0,145,206,"{{ }}")&&(n.rs(e,t,function(e,t,r){r.b('    <div class="yvp-upnext-title">'),r.b(r.v(r.d("strings.UP_NEXT",e,t,0))),r.b("</div>"),r.b("\n")}),e.pop()),n.b('    <div class="yvp-playlist-pg-btn yvp-playlist-pg-btn-prev disabled"></div>'),n.b("\n"+r),n.b('    <div class="yvp-playlist-pg-btn yvp-playlist-pg-btn-next"></div>'),n.b("\n"+r),n.b('    <div class="yvp-playlist-strip">'),n.b("\n"+r),n.b('        <ul class="yvp-playlist-strip-list strip-animate">'),n.b("\n"+r),n.b("\n"+r),n.b("        </ul>"),n.b("\n"+r),n.b('        <div class="yvp-pl-loader-bg"></div>'),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b('    <div class="yvp-pl-loader yvp-spinner-icon"></div>'),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],94:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._eventBus=e,n._eventBus.subscribe(i.PLAYER_DIMENSION_CHANGE,n._onDimensionChange,n),n._eventBus.subscribe(i.FULLSCREEN_CHANGE,n._onFullscreenChange,n),n._eventBus.subscribe(i.AD_PLAYBACK_STARTED,n._onAdPlaybackStarted,n),n._eventBus.subscribe(i.PLAYBACK_STARTED,n._onPlaybackStarted,n),n._model=r,n._view=t,n._playlistController=n._view.getPlaylistController()}t.exports=n;var o=(e("fs"),e("insert-css")),i=e("../event"),a=e("../tap"),s=e("../strings"),l=e("../util"),d=e("../constants"),c=e("../../../lib"),p=e("../../../lib/user-agent"),u=e("./playlist.html"),_=e("./playlist-items.html"),m=5,v=14;o('.strip-animate{-webkit-transition:left 420ms cubic-bezier(0,.2,.1,1);-moz-transition:left 420ms cubic-bezier(0,.2,.1,1);-o-transition:left 420ms cubic-bezier(0,.2,.1,1);transition:left 420ms cubic-bezier(0,.2,.1,1)}.yvp-pl-loader{display:none;position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;width:32px;height:32px;background-size:100%}.yvp-pl-loader-bg{background-color:rgba(0,0,0,0.3);position:absolute;left:0;bottom:0;top:0;width:100%;display:none}.yvp-pl-loading .yvp-pl-loader,.yvp-pl-loading .yvp-pl-loader-bg{display:block}.yvp-playlist-pg-btn{width:24px;height:24px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1iYWNrPC90aXRsZT48cGF0aCBkPSJNMzkuNDY1IDQzLjk1NmwxOS4xNS0xOS41MmMxLjQ0LTEuNDcgMS40NC0zLjg2IDAtNS4zMzItLjctLjcxMi0xLjYyOC0xLjEwNC0yLjYxNi0xLjEwNC0uOTkgMC0xLjkyLjM5Mi0yLjYxOCAxLjEwNGwtMjQuMzEgMjQuNzgtLjA3Mi4wNzIgMjQuMzggMjQuODVjLjcuNzEyIDEuNjMgMS4xMDQgMi42MTcgMS4xMDQuOTg1IDAgMS45MTUtLjM5MiAyLjYxNi0xLjEwNCAxLjQ0LTEuNDcgMS40NC0zLjg2MyAwLTUuMzMzTDM5LjQ2NSA0My45NTYiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==");background-position:center;background-repeat:no-repeat;background-size:100%;position:absolute;top:55px;cursor:pointer;z-index:10;opacity:.8;left:21px;}.yvp-playlist-pg-btn:hover{opacity:1}.yvp-playlist-pg-btn.disabled{opacity:.4;cursor:default}.yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1uZXh0PC90aXRsZT48cGF0aCBkPSJNNDkuMDE4IDQ0LjExOGwtMTkuMTUgMTkuNTE4Yy0xLjQ0IDEuNDctMS40NCAzLjg2MyAwIDUuMzMzLjcuNzEgMS42MjggMS4xMDMgMi42MTYgMS4xMDMuOTkgMCAxLjkxOC0uMzkyIDIuNjE3LTEuMTA0bDI0LjMxLTI0Ljc4LjA3My0uMDcyLTI0LjM4LTI0Ljg1Yy0uNy0uNzEzLTEuNjMtMS4xMDUtMi42MTctMS4xMDUtLjk4NSAwLTEuOTE1LjM5Mi0yLjYxNiAxLjEwNS0xLjQ0IDEuNDctMS40NCAzLjg2MyAwIDUuMzMybDE5LjE0OCAxOS41MTgiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==");right:21px;left:auto}.yvp-playlist-strip{position:absolute;left:38px;right:24px;overflow:hidden}.yvp-playlist-strip-list{list-style-type:none;position:relative;left:0;white-space:nowrap}.yvp-pl-meta{opacity:0;position:absolute;left:8px;right:8px;color:#fff;bottom:6px;overflow:hidden}.yvp-pl-title{overflow:hidden;line-height:16px;-webkit-line-clamp:2;text-overflow:ellipsis;max-height:32px;display:-webkit-box;-webkit-box-orient:vertical;font-size:13px;vertical-align:bottom;white-space:normal}.yvp-pl-provider{display:none}.yvp-playlist-mode-hidden{position:absolute;left:-16px;right:-16px;height:auto;bottom:3000px;opacity:0;z-index:-20;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;}.yvp-playlist-mode-hidden .yvp-upnext-title{position:absolute;left:34px;font-family:Helvetica,helvetica,arial,sans-serif;font-size:10px;letter-spacing:.3px;line-height:15px;text-transform:uppercase;color:#fff}.yvp-playlist-mode-hidden .yvp-playlist-strip{top:20px;left:34px;right:34px}.yvp-playlist-mode-hidden .yvp-playlist-pg-btn{top:43px;left:10px;}.yvp-playlist-mode-hidden .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{right:10px;left:auto}.yvp-playlist-mode-hidden .yvp-pl-loader{top:36px;left:50%}.yvp-playlist-mode-hidden .yvp-playlist-item{width:126px;height:70px;display:inline-block;margin-right:14px;position:relative;cursor:pointer;overflow:hidden;-webkit-transform:translateX(24px) scale(.9,.9);-moz-transform:translateX(24px) scale(.9,.9);-ms-transform:translateX(24px) scale(.9,.9);-o-transform:translateX(24px) scale(.9,.9);transform:translateX(24px) scale(.9,.9);-webkit-transition:transform 420ms cubic-bezier(0,.4,.1,1);-moz-transition:transform 420ms cubic-bezier(0,.4,.1,1);-o-transition:transform 420ms cubic-bezier(0,.4,.1,1);transition:transform 420ms cubic-bezier(0,.4,.1,1);}.yvp-playlist-mode-hidden .yvp-playlist-item.yvp-hide{display:none}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-playlist-item-gradient{height:100%;top:0;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 80%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 80%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 80%, rgba(18,23,23,0.8) 100%)}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-pl-meta{top:0}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-playlist-item-image{width:126px;height:70px;overflow:hidden}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-pl-title,.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-now-playing{display:none;font-size:12px;color:#fff;letter-spacing:0;max-height:48px;line-height:16px;margin-left:8px;margin-right:8px;margin-top:10px;opacity:0;}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-pl-title.yvp-show,.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-now-playing.yvp-show{opacity:1;display:block}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-playlist-border{display:none;height:70px;position:absolute;top:0;left:0;width:5px;background-color:#188fff}.yvp-playlist-mode-hidden .yvp-playlist-item.yvp-currently-playing .yvp-playlist-border{display:block}.yvp-playlist-mode-hidden .yvp-playlist-item-gradient{position:absolute;height:22px;width:100%;bottom:0;opacity:1;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%)}.yvp-playlist-mode-hidden .yvp-pl-meta{position:absolute;left:0;right:0;bottom:0;opacity:1;color:#fff;overflow:hidden}.yvp-playlist-mode-hidden .yvp-pl-dur{display:block;position:absolute;right:0;bottom:0;padding:4px 7px;background:rgba(18,23,23,0.5);color:#fff;text-shadow:0 0 2px rgba(0,0,0,0);font-size:12px;font-weight:400;line-height:14px}.yvp-playlist-mode-hidden .yvp-playlist-item-gradient-duration{height:50px}.yvp-playlist-mode-hidden.yvp-hide-playlist{visibility:hidden}.yvp-playlist-mode-bottom{position:relative;height:83px;border:1px solid rgba(255,255,255,0.2);-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;}.yvp-playlist-mode-bottom .yvp-playlist-strip{position:relative;height:83px;top:0;bottom:0;left:0;right:0;margin:0 24px 5px 24px}.yvp-playlist-mode-bottom .yvp-playlist-pg-btn{top:30px;left:0;}.yvp-playlist-mode-bottom .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{right:0;left:auto}.yvp-playlist-mode-bottom .yvp-pl-loader{top:30px;left:50%}.yvp-playlist-mode-bottom .yvp-playlist-strip-list{margin-top:5px}.yvp-playlist-mode-bottom .yvp-playlist-item{width:130px;height:73px;display:inline-block;margin-right:14px;position:relative;cursor:pointer;overflow:hidden;border-bottom:5px solid transparent;}.yvp-playlist-mode-bottom .yvp-playlist-item.yvp-currently-playing{border-bottom:5px solid #188fff}.yvp-playlist-mode-bottom .yvp-playlist-item .yvp-playlist-item-image{width:130px;height:73px}.yvp-playlist-mode-bottom .yvp-playlist-item-gradient{position:absolute;height:22px;width:100%;bottom:0;opacity:1;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%)}.yvp-playlist-mode-bottom .yvp-pl-meta{position:absolute;left:0;right:0;bottom:0;opacity:1;color:#fff;overflow:hidden}.yvp-playlist-mode-bottom .yvp-pl-title,.yvp-playlist-mode-bottom .yvp-now-playing{display:none;max-height:32px;font-size:13px;margin-left:6px;margin-right:5px;margin-bottom:5px;overflow:hidden;line-height:16px;vertical-align:bottom;white-space:normal;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical;opacity:0;}.yvp-playlist-mode-bottom .yvp-pl-title.yvp-show,.yvp-playlist-mode-bottom .yvp-now-playing.yvp-show{opacity:1;display:block}.yvp-playlist-mode-bottom .yvp-pl-dur{display:block;position:absolute;right:0;bottom:0;padding:4px 7px;background:rgba(18,23,23,0.5);color:#fff;text-shadow:0 0 2px rgba(0,0,0,0);font-size:12px;font-weight:400;line-height:14px}.yvp-playlist-mode-bottom .yvp-playlist-item-gradient-duration{height:50px}.yvp-playlist-mode-bottom.yvp-hide-playlist{visibility:hidden}.yvp-playlist-mode-right{display:block;height:100%;width:318px;position:absolute;top:0;right:0;border:1px solid rgba(255,255,255,0.2);-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;}.yvp-playlist-mode-right ::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 3px rgba(0,0,0,0.3);border-radius:5px;background-color:transparent}.yvp-playlist-mode-right ::-webkit-scrollbar{background-color:transparent;width:5px}.yvp-playlist-mode-right ::-webkit-scrollbar-thumb{border-radius:5px;-webkit-box-shadow:inset 0 0 3px rgba(0,0,0,0.3)}.yvp-playlist-mode-right .yvp-playlist-strip{position:relative;height:100%;top:0;bottom:0;left:0;right:0}.yvp-playlist-mode-right .yvp-playlist-pg-btn{display:none}.yvp-playlist-mode-right .yvp-pl-loader{top:49%;left:49%}.yvp-playlist-mode-right .yvp-playlist-strip-list{height:100%;margin-left:18px;overflow-y:scroll}.yvp-playlist-mode-right .yvp-playlist-item:first-child{border-top:0 solid transparent}.yvp-playlist-mode-right .yvp-playlist-item:last-child{border-bottom:0 solid transparent}.yvp-playlist-mode-right .yvp-playlist-item{height:70px;display:block;margin-bottom:18px;position:relative;cursor:pointer;overflow-x:visible;border-bottom:0 solid transparent;}.yvp-playlist-mode-right .yvp-playlist-item.yvp-currently-playing .yvp-pl-meta{color:#fff;background-color:rgba(255,255,255,0.06)}.yvp-playlist-mode-right .yvp-playlist-item.yvp-currently-playing .yvp-playlist-border{display:block}.yvp-playlist-mode-right .yvp-playlist-item:hover .yvp-pl-meta{color:#fff;background-color:rgba(255,255,255,0.06)}.yvp-playlist-mode-right .yvp-playlist-item-image{display:block;width:126px;height:70px}.yvp-playlist-mode-right .yvp-playlist-border{display:none;height:70px;position:absolute;top:0;left:0;width:5px;background-color:#188fff}.yvp-playlist-mode-right .yvp-pl-meta{color:#fff;position:absolute;top:0;right:0;bottom:0;left:126px;padding:4px 12px 0 12px;font-size:12px;line-height:16px;overflow:hidden;opacity:1}.yvp-playlist-mode-right .yvp-pl-title{display:block;display:-webkit-box;color:#fff;margin-left:6px;margin-right:5px;margin-bottom:5px;margin-top:0;line-height:16px;overflow:hidden;max-height:32px;opacity:1;font-size:13px;font-weight:500;-webkit-line-clamp:3;-webkit-box-orient:vertical;vertical-align:bottom;white-space:normal;text-overflow:ellipsis;}.yvp-playlist-mode-right .yvp-pl-title.yvp-show{opacity:1;display:block}.yvp-playlist-mode-right .yvp-now-playing{display:none}.yvp-playlist-mode-right .yvp-pl-provider{display:block;color:#9ea2af;font-size:11px;margin:0;text-overflow:ellipsis;overflow:hidden}.yvp-playlist-mode-right .yvp-playlist-item-gradient{position:absolute;height:22px;width:100%;bottom:0;opacity:1;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%)}.yvp-playlist-mode-right .yvp-pl-dur{display:block;position:absolute;right:169px;bottom:0;padding:4px 7px;background:rgba(18,23,23,0.5);color:#fff;text-shadow:0 0 2px rgba(0,0,0,0);font-size:12px;font-weight:400;line-height:14px}.yvp-playlist-mode-right .yvp-playlist-item-gradient-duration{height:50px}.yvp-playlist-mode-right.yvp-hide-playlist{visibility:hidden}.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-pl-meta{color:#000}.yvp-playlist-mode-right.yvp-playlist-theme-light ::-webkit-scrollbar-thumb{background-color:#ccc}.yvp-playlist-mode-right.yvp-playlist-theme-dark ::-webkit-scrollbar-thumb{background-color:#464e56}.yvp-playlist-in-stream.yvp-playlist-theme-light ::-webkit-scrollbar-thumb,.yvp-playlist-in-stream.yvp-playlist-theme-dark ::-webkit-scrollbar-thumb{background-color:#ccc}.yvp-playlist-mode-bottom.yvp-playlist-theme-light,.yvp-playlist-mode-right.yvp-playlist-theme-light{background-color:#fff;}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-playlist-pg-btn,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-playlist-pg-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1iYWNrLWJsYWNrPC90aXRsZT48cGF0aCBkPSJNMTUuNzE3IDYuNzM2Yy4zNzctLjM5Ny4zNzctMS4wNDIgMC0xLjQzOC0uMTgyLS4xOTItLjQyNS0uMjk4LS42ODMtLjI5OC0uMjU4IDAtLjUuMTA2LS42ODMuMjk4TDggMTEuOThsNi4zNSA2LjcyMmMuMTgzLjE5Mi40MjYuMjk4LjY4NC4yOTguMjU3IDAgLjUtLjEwNi42ODMtLjI5OC4zNzctLjM5Ny4zNzctMS4wNDIgMC0xLjQzOEwxMC43MTUgMTJsNS4wMDItNS4yNjR6IiBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=");}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1uZXh0PC90aXRsZT48cGF0aCBkPSJNOC4yODMgMTcuMjY0Yy0uMzc3LjM5Ny0uMzc3IDEuMDQyIDAgMS40MzguMTgyLjE5Mi40MjUuMjk4LjY4My4yOTguMjU4IDAgLjUtLjEwNi42ODMtLjI5OEwxNiAxMi4wMiA5LjY1IDUuMjk3QzkuNDY3IDUuMTA2IDkuMjI0IDUgOC45NjYgNWMtLjI1NyAwLS41LjEwNi0uNjgzLjI5OC0uMzc3LjM5Ny0uMzc3IDEuMDQyIDAgMS40MzhMMTMuMjg1IDEybC01LjAwMiA1LjI2NHoiIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-pl-loader-bg,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-pl-loader-bg{background-color:rgba(0,0,0,0.7)}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-pl-meta,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-pl-meta{color:#fff}.yvp-playlist-mode-bottom.yvp-playlist-theme-dark,.yvp-playlist-mode-right.yvp-playlist-theme-dark{background-color:#121717}.yvp-browser-desktop .yvp-hover-elem{display:none;opacity:.1;position:absolute;bottom:28px;width:100%;height:100px;left:0}.yvp-browser-desktop .yvp-upnext-container:hover .yvp-hover-elem{display:block;background-color:rgba(0,0,0,0)}.yvp-browser-desktop .yvp-upnext-container:hover .yvp-playlist-mode-hidden{opacity:1;z-index:10;bottom:140px}.yvp-browser-desktop .yvp-playlist-item .yvp-playlist-item-gradient{opacity:0}.yvp-browser-desktop .yvp-playlist-item:hover .yvp-playlist-item-gradient{opacity:1}.yvp-browser-desktop .yvp-playlist-item:hover .yvp-pl-meta{opacity:1}.yvp-browser-desktop .yvp-overlay-fuji{opacity:0;}.yvp-browser-desktop .yvp-overlay-fuji:hover{opacity:1;}.yvp-browser-desktop .yvp-overlay-fuji:hover .yvp-pl-meta{opacity:1}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item .yvp-playlist-item-gradient,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item .yvp-playlist-item-gradient{opacity:1}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item.yvp-currently-playing .yvp-pl-dur,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item.yvp-currently-playing .yvp-pl-dur{opacity:0}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-playlist-item-gradient,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-playlist-item-gradient{height:100%;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%)}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-playlist-item-image,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-playlist-item-image{-webkit-transform:scale(1.2,1.2);-moz-transform:scale(1.2,1.2);-ms-transform:scale(1.2,1.2);-o-transform:scale(1.2,1.2);transform:scale(1.2,1.2);-webkit-transition:transform 2.5s cubic-bezier(.1,.2,.6,1);-moz-transition:transform 2.5s cubic-bezier(.1,.2,.6,1);-o-transition:transform 2.5s cubic-bezier(.1,.2,.6,1);transition:transform 2.5s cubic-bezier(.1,.2,.6,1)}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-pl-title,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-pl-title{display:block;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;opacity:1;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-pl-dur,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-pl-dur{opacity:0}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item.yvp-currently-playing .yvp-pl-title,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item.yvp-currently-playing .yvp-pl-title{display:none}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item.yvp-currently-playing .yvp-playlist-item-gradient{width:calc(100% - 5px);width:-moz-calc(100% - 5px);width:-webkit-calc(100% - 5px);width:-o-calc(100% - 5px);left:5px;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%)}.yvp-browser-desktop .yvp-playlist-mode-right .yvp-playlist-item .yvp-playlist-item-gradient{position:static;opacity:1;width:0}.yvp-browser-desktop.yvp-ie9 .yvp-upnext-container:hover .yvp-playlist-mode-hidden{opacity:1;z-index:10;bottom:140px;background-color:rgba(0,0,0,0)}.yvp-browser-desktop.yvp-ie9 .yvp-upnext-container:hover .yvp-playlist-item-gradient{filter:progid:DXImageTransform.Microsoft.gradient(startColorStr=#00000000, endColorStr=#FF000000)}.yvp-browser-mobile .yvp-hover-elem{display:none}.yvp-browser-mobile .yvp-upnext-playlist.open .yvp-hover-elem{display:none}.yvp-browser-mobile .yvp-upnext-playlist.open .yvp-playlist-mode-hidden{opacity:1;z-index:10;bottom:45px}.yvp-browser-mobile .yvp-playlist-item-gradient{opacity:1}.yvp-browser-mobile .yvp-pl-meta{opacity:1}.yvp-browser-mobile .yvp-playlist-strip{overyflow-y:hidden;overflow-x:scroll;-webkit-overflow-scrolling:touch}.yvp-browser-mobile .yvp-playlist-pg-btn{display:none}.yvp-state-end-screen .yvp-start-screen{display:block}.yvp-state-end-screen .yvp-start-screen-bar-wrapper{display:none}.yvp-state-end-screen .yvp-start-screen-button{display:none}.yvp-state-end-screen .yvp-end-screen{z-index:22;background-color:rgba(0,0,0,0.85);}.yvp-state-end-screen .yvp-end-screen.yvp-end-replay{background-color:rgba(18,23,23,0.6)}.yvp-state-end-screen .yvp-end-rep-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNi44NyAxNS41NDVjLS4xMS0uMTk3LS4yNzQtLjM0NS0uNDctLjQyNS0uMjA0LS4wOS0uNDUtLjA5LS42MS0uMDQtLjEwNy4wMjUtLjIwNS4wNjgtLjMyNy4xNDctLjA3Mi4wNS0uMTcyLjE1LS4yMTYuMjA0LS43NzYgMS4wMTgtMS45OTcgMS42MjctMy4yNjYgMS42MjctMi4yNDQgMC00LjA3LTEuODItNC4wNy00LjA1MyAwLTIuMTMzIDEuNzg3LTMuOTQ3IDMuOTgtNC4wNDNsLjUyLS4wMTNWN2wtLjU1Mi4wMTNDOC41NzMgNy4xMyA2IDkuNzYgNiAxMy4wMDNjMCAzLjMxMiAyLjY5MyA2LjAwNCA2LjAwNSA2LjAwNCAxLjg2NCAwIDMuNTktLjg0NSA0LjctMi4yOGwuMDctLjA5Yy4wMy0uMDQyLjA1My0uMDgyLjA3LS4xMDguMTA0LS4xNjguMTU1LS4zMzQuMTU1LS41MSAwLS4xNi0uMDQzLS4zMi0uMTMtLjQ3NSIvPjxwYXRoIGQ9Ik0xMi4zMTIgMTEuMDA4Yy0uMTcyIDAtLjMxMi0uMTUtLjMxMi0uMzIzVjUuMzIzYzAtLjE4LjEzOC0uMzIzLjMxMi0uMzIzLjA2OCAwIC4xMzIuMDI0LjE4NC4wNjNsNC4zNjUgMi42MWMuMTUyLjA5LjIwNC4yODYuMTE4LjQ0LS4wMjIuMDQtLjA1Mi4wNzUtLjA4Ni4xLS4wMTUuMDE0LS4wMzIuMDI3LS4wNS4wMzhsLTQuMzU1IDIuNzFjLS4wNS4wMy0uMTAzLjA0Ni0uMTU2LjA0OGgtLjAxOHoiLz48L2c+PC9zdmc+");background-size:100%;opacity:.6;width:80px;height:98px;position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;cursor:pointer}.yvp-state-end-screen.yvp-stream .yvp-end-rep-icon,.yvp-state-end-screen.yvp-ministream .yvp-end-rep-icon{display:none}.yvp-state-end-screen .yvp-playlist-mode-endscreen{position:absolute;margin:auto;left:0;right:0;height:184px;width:512px;top:0;bottom:50px;z-index:10;opacity:1;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-pg-btn{top:74px;left:-19px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{right:0;left:auto;right:-15px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-strip{position:absolute;left:18px;right:14px;height:100%;bottom:0}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-strip-list{height:100%;margin-right:0;width:500px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-item{width:100%;display:inline-block;position:relative;height:100%}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-pl-loader{top:35px;left:50%}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-grid{width:100%;height:100%;list-style-type:none;white-space:normal;text-align:left;overflow:hidden}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-tile{position:relative;width:150px;height:84px;cursor:pointer;float:left;margin-right:10px;overflow:hidden;margin-bottom:10px;padding:0}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-tile-image{width:151px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-overlay-fuji{position:absolute;top:0;left:0;width:100%;height:100%;color:#fff;font-size:13px;line-height:14px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-overlay-fuji.yvp-overlay-fuji-up-next{background-color:rgba(0,0,0,0.6);opacity:1}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-metadata-fuji{position:absolute;top:30px;left:0;right:0;bottom:0;background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0.8))}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-box{position:absolute;top:8px;left:8px;font-size:13px;line-height:14px;text-align:left;width:80px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-time{position:relative;margin-top:6px;display:inline-block;left:8px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-text{position:relative;margin-top:5px;display:inline-block;left:19px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-close{position:relative;left:57px;font-weight:500;font-size:19px;opacity:.6;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-close:hover{opacity:1}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col{height:84px;width:347px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col .yvp-playlist-pg-btn{top:35px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col .yvp-playlist-strip-list{width:332px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col{height:84px;width:178px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col .yvp-playlist-pg-btn{top:35px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col .yvp-playlist-strip-list{width:158px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col{height:284px;width:678px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col .yvp-playlist-pg-btn{top:135px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col .yvp-playlist-strip-list{width:666px}.yvp-browser-mobile.yvp-browser-playsinline .yvp-end-rep-icon{display:block}.yvp-content div.yvp-end-screen-up-next-circle{width:20px;height:20px;-moz-border-radius:20px;-webkit-border-radius:20px;border-radius:20px;border:2px solid rgba(255,255,255,0.9);display:block;position:absolute;top:0;left:0}.yvp-content div.yvp-end-screen-arc{position:absolute;top:0;left:0;width:100px;height:100px;border-radius:100%;border:1px solid;display:none}.yvp-playlist-in-stream.yvp-playlist-mode-right.yvp-playlist-theme-dark,.yvp-playlist-in-stream.yvp-playlist-mode-right.yvp-playlist-theme-light{background-color:#fff}.yvp-playlist-in-stream.yvp-playlist-mode-right{width:276px;}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-strip-list{margin-left:16px}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item{height:72px;margin-bottom:20px;}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-playlist-item-image{width:130px;height:73px}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-meta{left:130px}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-title{color:#000667}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-playlist-border{height:72px}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-dur{right:125px;padding:2px 6px;color:#fff}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-provider{display:none}'),
n.prototype.create=function(e){var t=this,r=[d.PLAYLIST_POS_BOTTOM,d.PLAYLIST_POS_RIGHT,d.PLAYLIST_POS_HIDDEN];if(-1===r.indexOf(e))return null;var n="yvp-playlist-mode-"+e;t._count=e===d.PLAYLIST_POS_HIDDEN?d.PLAYLIST_HIDDEN_COUNT_PER_PAGE:d.PLAYLIST_COUNT_PER_PAGE,t._playlisItemIdx=0,t._posL=0,t._scrL=0,t._taps=[],t._theme=t._getTheme(e),t._mode=e,t._onPlaylistItemTap=function(){l.classList(t._node).remove("open"),t._eventBus.publish(i.RELATED_ITEM_CLICK,this.getAttribute("data-id"),this.itemIndex,!1),t._eventBus.publish(i.API.UI_INTERACT,{srcElement:"ui_pl_thmb_clk"})};var o=t._playlistController.isPlaylistInStream()?"yvp-playlist-in-stream":"",a=l.render(u,{strings:s.i18n,modeClass:n,isHiddenMode:e===d.PLAYLIST_POS_HIDDEN||!1,theme:t._theme,streamModeClass:o});return t._updatePlaylistNodes(a),t.renderPlaylist(t._model.playlist.getItems()),t._bindEvents(!0),a},n.prototype._bindEvents=function(e){var t=this;if(t._pgPrevTap=new a(t._pgPrev),t._pgPrev.addEventListener("tap",function(){t._onPageBtnTap(!1)}),t._pgNextTap=new a(t._pgNext),t._pgNext.addEventListener("tap",function(){t._onPageBtnTap(!0)}),p.mobile&&t._plStrip.addEventListener("scroll",function(){e&&t._relItems&&t._relItems.length<100&&t._plStrip.scrollLeft+t._plStrip.offsetWidth>=t._plStrip.scrollWidth&&!t._eoL&&t._fetchMoreRelatedItems()}),t._mode===d.PLAYLIST_POS_RIGHT&&(t._plList.addEventListener("scroll",function(){e&&t._relItems&&t._relItems.length<100&&t._plList.scrollTop+t._plList.offsetHeight>=t._plList.scrollHeight&&!t._eoL&&(t._fetchMoreRelatedItems(),t._eventBus.publish(i.API.UI_INTERACT,{srcElement:"ui_pl_scrl"}))}),!p.mobile)){var r=function(e){var r=t._plList.scrollTop,n=t._plList.scrollHeight,o=t._plList.offsetHeight,i="DOMMouseScroll"===e.type?-40*e.detail:e.wheelDelta,a=i>0,s=function(){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1};return!a&&-i>n-o-r?(t._plList.scrollTop=n,s()):a&&i>r?(t._plList.scrollTop=0,s()):void 0};t._plStrip.addEventListener("mousewheel",r),t._plStrip.addEventListener("DOMMouseScroll",r)}},n.prototype.upNextBtnTapHandler=function(){var e=this,t=e._model.playlist.position,r=t+1,n=e._model.playlist.getMediaItemAt(r),o=n.id;e._eventBus.publish(i.API.UI_INTERACT,{srcElement:"ctrl-next-click"}),e._eventBus.publish(i.API.UI_INTERACT,{srcElement:"ui_pl_nxt_clk"}),e._eventBus.publish(i.RELATED_ITEM_CLICK,o,r,!1)},n.prototype.renderFirstBatch=function(){var e=this;e._hasPlaylistFirstBatchRendered||e._model.playlist.videoRecommendations===!1||(e._playlistController.fetchMore(e._count,function(t,r){e._playlistController.initDrawPlaylist(t,r)}),e._hasPlaylistFirstBatchRendered=!0)},n.prototype.renderPlaylist=function(e){var t=this;t._relItems=[],t._posL=0,t._scrL=0,t._taps=[],t._eoL=!1,t._plList.parentElement.scrollLeft=0,l.classList(t._pgPrev).add("disabled"),l.classList(t._pgNext).remove("disabled"),e&&t._renderPlaylistItems(e)},n.prototype._renderPlaylistItems=function(e){var t=this,r=_,n=[],o=p.chrome>43,i=!1;if(e){for(var a=0;a<e.length;a++){var u=e[a],v="",y="";u.duration&&c.isNumber(u.duration)&&(v=l.formatTime(u.duration)),t._mode===d.PLAYLIST_POS_RIGHT&&u.provider&&u.provider.name&&(y=u.provider.name);var f=u.title;f&&f.length>40&&!o&&(f=f.substring(0,40)+"...");var g=t._createPlaylistItem({mediaItem:u,title:f,showUpNext:0===a||i,upNextTime:m,duration:v,provider:y,idx:t._playlisItemIdx++}),b='.yvp-playlist-item[data-id="'+g.id+'"]',A=t._plList.querySelector(b)||null;g.thumbnail&&!A?(n.push(g),i=!1):g.showUpNext&&(i=!0)}t._appendItemsToPlaylist({template:r,items:n,strings:s.i18n}),t._relItems=t._relItems.concat(e),t._setPlaylistViewSize(),l.classList(t._plCont).remove("yvp-pl-loading");var E=t._view.getFullscreen();E||t._setCurrentVideoItemUI(t._mode,!1)}},n.prototype._createPlaylistItem=function(e){return{id:e.mediaItem.id,title:e.title,showUpNext:e.showUpNext,upNextTime:e.upNextTime,thumbnail:e.mediaItem.images.small||e.mediaItem.images.thumbnail,duration:e.duration,provider:e.provider,idx:e.idx}},n.prototype._appendItemsToPlaylist=function(e){for(var t=this,r=l.render(e.template,{items:e.items,strings:e.strings,isWideMode:e.isWideMode}),n=Array.prototype.slice.call(r.querySelectorAll(".yvp-playlist-item"),0),o=0;o<n.length;o++){var i=n[o];i.itemIndex=o+t._relItems.length,t._taps.push(new a(i)),i.addEventListener("tap",t._onPlaylistItemTap),t._plList.appendChild(i)}},n.prototype._setPlaylistViewSize=function(){var e=this;e._listW=e._plStrip.offsetWidth||e._plStrip._offsetWidth,e._itemW=134,e._numPgItems=parseInt(e._listW/e._itemW)},n.prototype._onPageBtnTap=function(e){var t=this,r=t._view.getFullscreen();if(t._mode!==d.PLAYLIST_POS_RIGHT||r){t._eventBus.publish(i.UP_NEXT_PG_CLICK);var n="next-";n=e?n+"right":n+"left",t._eventBus.publish(i.API.UI_INTERACT,{srcElement:n}),t._listW=t._plList.offsetWidth||t._plList._offsetWidth;var o=(t._plList.children.length-t._numPgItems)*t._itemW;t._scrL=t._transTimer?t._scrL:t._plList.parentElement.scrollLeft;var a=t._scrL%t._listW,s=l.classList(t._pgPrev).contains("disabled");if(!s||e){!e&&a&&(a=-1*(t._listW-a));var c=parseInt((o-t._scrL)/t._itemW)>=t._numPgItems,p=t._scrL>=o;if((p||!c)&&e)return void(t._eoL||(l.classList(t._pgNext).add("disabled"),t._relItems&&t._relItems.length<100?t._fetchMoreRelatedItems():t._eoL=!0));t._posL=e?t._posL-t._listW:t._posL+t._listW,t._scrL=e?t._scrL+t._listW:t._scrL-t._listW,t._posL+=a,t._scrL-=a,t._scrL<=o&&l.classList(t._pgNext).remove("disabled"),t._scrL>0?l.classList(t._pgPrev).remove("disabled"):l.classList(t._pgPrev).add("disabled"),l.classList(t._plList).add("strip-animate"),t._plList.style.left=t._posL+"px",t._transTimer&&(clearTimeout(t._transTimer),t._transTimer=null),t._transTimer=setTimeout(function(){l.classList(t._plList).remove("strip-animate"),t._plList.style.left="0px",t._posL=0,t._transTimer=null,t._node.querySelector(".yvp-playlist-strip").scrollLeft=t._scrL,t._plStrip.scrollLeft=t._scrL},1e3)}}},n.prototype._setCurrentVideoItemUI=function(e,t){var r=this,n=r._model.playlist.getCurrentItem(),o=n&&n.id,i=r._plList.querySelector(".yvp-currently-playing"),a='.yvp-playlist-item[data-id="'+o+'"]',s=r._plList.querySelector(a);if(i&&(l.classList(i).remove("yvp-currently-playing"),e!==d.PLAYLIST_POS_RIGHT)){var c=i.querySelector(".yvp-pl-title"),p=i.querySelector(".yvp-pl-dur"),u=i.querySelector(".yvp-playlist-item-gradient"),_=i.querySelector(".yvp-now-playing");l.classList(c).remove("yvp-show"),l.classList(p).remove("yvp-hide"),l.classList(u).remove("yvp-playlist-item-gradient-duration"),l.classList(_).remove("yvp-show")}if(s){var m=s.offsetLeft,y=s.offsetWidth,f=Number(s.getAttribute("data-idx"))||0;if(l.classList(s).add("yvp-currently-playing"),e!==d.PLAYLIST_POS_RIGHT){var g=s.querySelector(".yvp-pl-dur"),b=s.querySelector(".yvp-playlist-item-gradient"),A=s.querySelector(".yvp-now-playing");l.classList(g).add("yvp-hide"),l.classList(b).add("yvp-playlist-item-gradient-duration"),l.classList(A).add("yvp-show");var E=y+v;m="hidden"===e?m+E:m,r._plList.parentElement.scrollLeft=m}else if(e===d.PLAYLIST_POS_RIGHT&&t){var h=s.offsetTop;r._plList.scrollTop=h-5}r._plList.children.length-f<r._numPgItems&&r._relItems.length<100&&r._fetchMoreRelatedItems(!0),r._plList.parentElement.scrollLeft>0?l.classList(r._pgPrev).remove("disabled"):l.classList(r._pgPrev).add("disabled")}},n.prototype._fetchMoreRelatedItems=function(e){var t=this;return t._model.playlist.videoRecommendations===!1?!1:(l.classList(t._plCont).add("yvp-pl-loading"),void t._playlistController.fetchMore(t._count,function(r,n){n&&n.length>0?(t._renderPlaylistItems(n),p.mobile||e||t._onPageBtnTap(!0)):(l.classList(t._plCont).remove("yvp-pl-loading"),t._eoL=!0)}))},n.prototype._getTheme=function(e){var t,r=this,n=r._model.ui.playlistUI&&r._model.ui.playlistUI.theme||"light",o="dark";switch(e){case d.PLAYLIST_POS_BOTTOM:t=n;break;case d.PLAYLIST_POS_HIDDEN:case d.PLAYLIST_POS_RIGHT:t=o;break;default:t=o}return t},n.prototype._updatePlaylistNodes=function(e){var t=this;t._node=e,t._plList=e.querySelector(".yvp-playlist-strip-list"),t._plStrip=e.querySelector(".yvp-playlist-strip"),t._plCont=e,t._pgPrev=e.querySelector(".yvp-playlist-pg-btn-prev"),t._pgNext=e.querySelector(".yvp-playlist-pg-btn-next"),t._plLoader=e.querySelector(".yvp-pl-loader-bg")},n.prototype._onFullscreenChange=function(){var e,t,r,n,o,i,s=this,c=s._view.getFullscreen(),p=s._view.getContentNode(),u=[];if(s._playlistController.isPlaylistShown()&&s._setPlaylistViewSize(),s._mode===d.PLAYLIST_POS_BOTTOM||s._mode===d.PLAYLIST_POS_RIGHT){if(o=p.querySelector(".yvp-upnext-playlist"),e=p.querySelector(".yvp-playlist-mode-hidden"),t=p.querySelector(".yvp-playlist-mode-"+s._mode),r=e.querySelector(".yvp-playlist-strip-list"),n=t.querySelector(".yvp-playlist-strip-list"),c)r.innerHTML=n.innerHTML,n.innerHTML="",l.classList(o).remove("hide"),l.classList(e).remove("yvp-pl-loading"),s._updatePlaylistNodes(e),s._playlistController&&s._playlistController.attachUpNextMouseEvents(),setTimeout(function(){s._setCurrentVideoItemUI("hidden",!0)},500);else{n.innerHTML=r.innerHTML,r.innerHTML="",i=s._mode===d.PLAYLIST_POS_RIGHT?!0:!1,l.classList(o).add("hide"),s._updatePlaylistNodes(t),s._playlistController&&s._playlistController.detachUpNextMouseEvents();var _=s._plList.querySelector(".yvp-currently-playing");_&&l.classList(_).remove("yvp-hide"),setTimeout(function(){s._setCurrentVideoItemUI(s._mode,i)},500)}s._destroyPageTaps(),s._taps&&s._taps.forEach(function(e){e.destroy()}),s._taps=[],s._bindEvents(!1),u=Array.prototype.slice.call(s._plList.querySelectorAll(".yvp-playlist-item"),0),u.forEach(function(e){s._taps.push(new a(e)),e.addEventListener("tap",s._onPlaylistItemTap)})}},n.prototype._onDimensionChange=function(){var e=this;e._playlistController.isPlaylistShown()&&(e._scrL=0,e._posL=0,setTimeout(function(){e._setPlaylistViewSize()},1e3))},n.prototype._onPlaybackStarted=function(){var e,t,r=this;t=r._view.getFullscreen(),e=t?"hidden":r._mode,r._setCurrentVideoItemUI(e,!0),r.renderFirstBatch()},n.prototype._onAdPlaybackStarted=function(){var e=this;e.renderFirstBatch()},n.prototype._removeItems=function(){var e=this;e._taps&&e._taps.forEach(function(e){e.destroy()}),e._taps=[];var t=Array.prototype.slice.call(e._plList.querySelectorAll(".yvp-playlist-item"),0);t.forEach(function(t){t.removeEventListener("tap",e._onPlaylistItemTap)}),e._plList.innerHTML=""},n.prototype._destroyPageTaps=function(){var e=this;e._pgNextTap&&e._pgNextTap&&(e._pgNextTap.destroy(),e._pgNextTap.destroy(),e._pgPrev.removeEventListener("tap",e._onPageBtnTap),e._pgNext.removeEventListener("tap",e._onPageBtnTap))},n.prototype.destroy=function(){var e=this;if(e._destroyPageTaps(),e._taps&&e._taps.forEach(function(e){e.destroy()}),e._taps=[],e._plList){var t=Array.prototype.slice.call(e._plList.querySelectorAll(".yvp-playlist-item"),0);t.forEach(function(t){t.removeEventListener("tap",e._onPlaylistItemTap)})}}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../constants":18,"../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./playlist-items.html":92,"./playlist.html":93,fs:164,"insert-css":166}],95:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div>"),n.b("\n"+r),n.b("    <pre>"),n.b("\n"+r),n.b(n.v(n.f("config",e,t,0))),n.b("\n"+r),n.b("    </pre>"),n.b("\n"+r),n.b("    <table border='1'>"),n.b("\n"+r),n.b("        <style>"),n.b("\n"+r),n.b("            .bars {"),n.b("\n"+r),n.b("                white-space: nowrap;"),n.b("\n"+r),n.b("            }"),n.b("\n"+r),n.b("            .bars div {"),n.b("\n"+r),n.b("                display: inline-block;"),n.b("\n"+r),n.b("                height: 25px;"),n.b("\n"+r),n.b("            }"),n.b("\n"+r),n.b("            .bar {"),n.b("\n"+r),n.b("                background-color: #714fff;"),n.b("\n"+r),n.b("                border: 1px solid #000;"),n.b("\n"+r),n.b("            }"),n.b("\n"+r),n.b("        </style>"),n.b("\n"+r),n.b("        <tr>"),n.b("\n"+r),n.b("            <th>Type</th>"),n.b("\n"+r),n.b("            <th>Description</th>"),n.b("\n"+r),n.b("            <th>Start</th>"),n.b("\n"+r),n.b("            <th>End</th>"),n.b("\n"+r),n.b("            <th>Diff</th>"),n.b("\n"+r),n.b("            <th>Bar</th>"),n.b("\n"+r),n.b("        </tr>"),n.b("\n"+r),n.s(n.f("profileItems",e,t,1),e,t,0,602,1024,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("            <tr>"),n.b("\n"+r),n.b("                <td>"),n.b(n.v(n.f("type",e,t,0))),n.b("</td>"),n.b("\n"+r),n.b("                <td>"),n.b(n.v(n.f("desc",e,t,0))),n.b("</td>"),n.b("\n"+r),n.b("                <td>"),n.b(n.v(n.f("startTime",e,t,0))),n.b("</td>"),n.b("\n"+r),n.b("                <td>"),n.b(n.v(n.f("endTime",e,t,0))),n.b("</td>"),n.b("\n"+r),n.b("                <td>"),n.b(n.v(n.f("timeDiff",e,t,0))),n.b("</td>"),n.b("\n"+r),n.b("                <td class='bars'>"),n.b("\n"+r),n.b("                    <div style='width: "),n.b(n.v(n.f("startWidth",e,t,0))),n.b("px;'></div>"),n.b("\n"+r),n.b("                    <div class='bar' style='width: "),n.b(n.v(n.f("barWidth",e,t,0))),n.b("px;'></div>"),n.b("\n"+r),n.b("                </td>"),n.b("\n"+r),n.b("            </tr>"),n.b("\n")}),e.pop()),n.b("    </table>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],96:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-settings-container' tabindex='0'>"),n.b("\n"+r),n.b("    <div class='yvp-main-settings open'>"),n.b("\n"+r),n.b("        <div class='yvp-settings-embed'>"),n.b("\n"+r),n.b("            <div class='yvp-settings-header' tabindex='0' aria-label='"),n.b(n.v(n.d("strings.EMBED",e,t,0))),n.b("'>"),n.b(n.v(n.d("strings.EMBED",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            <div class='yvp-input-container yvp-embed-input-container'>"),n.b("\n"+r),n.b("                <input type='text' class='yvp-embed-input' value='' data-link-type='emb' readonly />"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("            <div class='yvp-settings-divider'></div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("        <div class='yvp-settings-quality'>"),n.b("\n"+r),n.b("            <div class='yvp-settings-header' tabindex='0' aria-label='"),n.b(n.v(n.d("strings.VIDEO_QUALITY",e,t,0))),n.b("'>"),n.b(n.v(n.d("strings.VIDEO_QUALITY",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            <div class='yvp-settings-item "),n.b(n.v(n.d("qualityMap.auto.btnClass",e,t,0))),n.b(" yvp-settings-activated' tabindex='1'>"),n.b(n.v(n.d("strings.AUTO",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            <div class='yvp-settings-item "),n.b(n.v(n.d("qualityMap.high.btnClass",e,t,0))),n.b(" yvp-disabled' tabindex='2'>"),n.b(n.v(n.d("strings.HIGH",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            <div class='yvp-settings-item "),n.b(n.v(n.d("qualityMap.medium.btnClass",e,t,0))),n.b(" yvp-disabled' tabindex='3'>"),n.b(n.v(n.d("strings.MEDIUM",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            <div class='yvp-settings-item last-item "),n.b(n.v(n.d("qualityMap.low.btnClass",e,t,0))),n.b(" yvp-disabled' tabindex='4'>"),n.b(n.v(n.d("strings.LOW",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            <div class='yvp-settings-divider'></div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("        <div class='yvp-settings-cc'>"),n.b("\n"+r),n.b("            <div class='yvp-settings-header last-item' tabindex='0' aria-label='"),n.b(n.v(n.d("strings.CC_SETTINGS",e,t,0))),n.b("'>"),n.b(n.v(n.d("strings.CC_SETTINGS",e,t,0))),n.b("</div>"),n.b("\n"+r),n.b("            <div class='yvp-settings-caret-icon right'></div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],97:[function(e,t,r){"use strict";function n(e,t){var r=this;r._eventBus=e,r._model=t,r._ccOptions=new c(r._eventBus,r._model),r._qualityMap={auto:{btnClass:"yvp-quality-auto",bitrate:0},low:{btnClass:"yvp-quality-low",bitrate:0},medium:{btnClass:"yvp-quality-medium",bitrate:0},high:{btnClass:"yvp-quality-high",bitrate:0}},r._streamMap=null,r._availableStreamCount=0,r._eventBus.subscribe(i.PLAYBACK_STARTED,r._onPlaybackStarted,r),r._eventBus.subscribe(i.MEDIA_ITEM_LOADED,r._bindEmbedCode,r)}t.exports=n;var o=(e("fs"),e("insert-css")),i=e("../event"),a=e("../tap"),s=e("../strings"),l=e("../util"),d=(e("../../../lib/logger"),e("../../../lib"),e("../../src/stream")),c=e("./cc-options"),p=e("./settings.html");o('.yvp-bottom-bar .yvp-settings-container{position:absolute;z-index:4;width:auto;background:rgba(18,23,23,0.8);padding:16px;display:none;bottom:40px;border-radius:4px;right:0;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-size:11px;-webkit-font-smoothing:subpixel-antialiased;color:#fff;cursor:default;pointer-events:auto;-webkit-animation-name:fadeIn;animation-name:fadeIn;-webkit-animation-duration:.4s;-moz-animation-duration:.4s;animation-duration:.4s;}.yvp-bottom-bar .yvp-settings-container.open{display:block}.yvp-bottom-bar .yvp-settings-container.hide{display:none}.yvp-bottom-bar .yvp-settings-container .yvp-settings-header{color:rgba(255,255,255,0.6);margin-bottom:12px;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-header.last-item{margin-bottom:0;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-header.last-item:hover{color:#fff}.yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon{position:relative;display:inline-block;width:6px;height:10px;margin:0;background-size:100%;background-repeat:no-repeat;cursor:pointer;opacity:1;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon.right{top:2px;left:2px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDYgMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMuNzU1IDQuNjk3bC0zLjU2IDMuNTZjLS4yNi4yNi0uMjYuNjgyIDAgLjk0Mi4yNi4yNi42ODMuMjYuOTQzIDBMNS42NCA0LjY5NiAxLjEzOC4xOTVDMS4wMDguMDY1LjgzOCAwIC42NjggMCAuNDk1IDAgLjMyNS4wNjUuMTk1LjE5NWMtLjI2LjI2LS4yNi42ODMgMCAuOTQzbDMuNTYgMy41NiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+Cg==")}.yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon.left{top:1px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDYgMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHRpdGxlPmljb24tY2FyZXQtbGVmdC1mcG88L3RpdGxlPjxwYXRoIGQ9Ik0yLjI0NSA1LjMwM2wzLjU2LTMuNTZjLjI2LS4yNi4yNi0uNjgyIDAtLjk0Mi0uMjYtLjI2LS42ODMtLjI2LS45NDMgMEwuMzYgNS4zMDRsNC41MDIgNC41MDJjLjEzLjEzLjMuMTk1LjQ3LjE5NS4xNzIgMCAuMzQyLS4wNjUuNDcyLS4xOTUuMjYtLjI2LjI2LS42ODMgMC0uOTQzbC0zLjU2LTMuNTYiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item{display:inline-block;margin-right:6px;cursor:pointer;color:#fff;padding:4px;border:0;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item:hover{background-color:rgba(255,255,255,0.2);border-radius:3px}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item.last-item{margin-right:0}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item.yvp-disabled{display:none;pointer-events:none}.yvp-bottom-bar .yvp-settings-container .yvp-settings-activated{color:#fff;font-weight:normal;border-radius:3px;background-color:rgba(255,255,255,0.4);}.yvp-bottom-bar .yvp-settings-container .yvp-settings-activated:hover{background-color:rgba(255,255,255,0.4)}.yvp-main-settings.open{display:block}.yvp-main-settings.close{display:none}.yvp-main-settings .yvp-settings-divider{display:block;height:1px;margin:16px 0 16px 0;background:rgba(255,255,255,0.2)}.yvp-main-settings .yvp-settings-embed.close{display:none}.yvp-main-settings .yvp-settings-embed.open{display:block}.yvp-main-settings .yvp-input-container{height:20px;border:1px solid rgba(255,255,255,0.2);border-radius:4px}.yvp-main-settings .yvp-embed-input{display:block;min-width:178px;padding:3px 10px;font-size:11px;color:rgba(255,255,255,0.6);background:transparent;outline:none;box-shadow:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.yvp-main-settings .yvp-embed-input:hover{color:#fff;cursor:pointer}.yvp-main-settings .yvp-settings-quality{min-width:200px;display:none;}.yvp-main-settings .yvp-settings-quality.yvp-quality-enabled{display:block}.yvp-main-settings .yvp-settings-cc{min-width:115px;max-width:145px;cursor:pointer;}.yvp-main-settings .yvp-settings-cc .yvp-settings-header{display:inline-block;}.yvp-main-settings .yvp-settings-cc .yvp-settings-header:hover{color:rgba(255,255,255,0.6);opacity:1}'),n.prototype.create=function(){var e=this,t=l.render(p,{strings:s.i18n,qualityMap:e._qualityMap}),r=e._ccOptions.render();return e._node=t,e._mainSettings=t.querySelector(".yvp-main-settings"),e._qualityNode=e._mainSettings.querySelector(".yvp-settings-quality"),e._qualityAutoBtn=e._mainSettings.querySelector("."+e._qualityMap.auto.btnClass),e._qualityLowBtn=e._mainSettings.querySelector("."+e._qualityMap.low.btnClass),e._qualityMediumBtn=e._mainSettings.querySelector("."+e._qualityMap.medium.btnClass),e._qualityHighBtn=e._mainSettings.querySelector("."+e._qualityMap.high.btnClass),e._ccOptionsLink=e._mainSettings.querySelector(".yvp-settings-cc"),e._currentActivatedQuality=e._qualityAutoBtn,r.length>0&&(r.forEach(function(t){e._node.appendChild(t)}),e._ccSettingsMainScreen=r[0],e._backToMainSettings=e._ccSettingsMainScreen.querySelector(".yvp-cc-back-to-settings")),e._bindEvents(),t},n.prototype._bindEvents=function(){var e=this;e._ccOptionsTap=new a(e._ccOptionsLink),e._onCcOptionsTap=function(t){t.stopPropagation(),e._showCCMainOptions()},e._ccOptionsLink.addEventListener("tap",e._onCcOptionsTap),e._backToMainSettingsTap=new a(e._backToMainSettings),e._onBackToMainSettingsTap=function(t){t.stopPropagation(),e._backToSettings()},e._backToMainSettings.addEventListener("tap",e._onBackToMainSettingsTap),e._settingContainerTap=new a(e._node),e._onSettingContainerTap=function(e){e.stopPropagation()},e._node.addEventListener("tap",e._onSettingContainerTap)},n.prototype._showCCMainOptions=function(){var e=this;l.classList(e._mainSettings).remove("open"),l.classList(e._mainSettings).add("close"),l.classList(e._ccSettingsMainScreen).remove("close"),l.classList(e._ccSettingsMainScreen).add("open")},n.prototype._backToSettings=function(){var e=this;l.classList(e._mainSettings).remove("close"),l.classList(e._mainSettings).add("open"),l.classList(e._ccSettingsMainScreen).remove("add"),l.classList(e._ccSettingsMainScreen).add("close")},n.prototype._bindQualitySelection=function(e,t,r,n,o){var s=this;null!==e?(l.classList(t).remove("yvp-disabled"),"auto"!==o&&(s._availableStreamCount++,s._onlyAvailableStream=o),s._qualityMap[o].bitrate=e.bitrate,s[r]=function(r){r.stopPropagation(),s._bindQualityActivatedClass(t);var n="sr-"+o;s._eventBus.publish(i.API.UI_INTERACT,{srcElement:n}),s._eventBus.publish(i.QUALITY_SELECTED,{preference:o,stream:e}),s._model.playback.quality=o},s[n]=new a(t),t.addEventListener("tap",s[r])):l.classList(t).add("yvp-disabled")},n.prototype._bindVideoQuality=function(){var e=this;e._populateStreamSelections(),e._bindQualitySelection(e._lowQualityStream,e._qualityLowBtn,"_onQualityLowTap","_qualityLowTap","low"),e._bindQualitySelection(e._mediumQualityStream,e._qualityMediumBtn,"_onQualityMediumTap","_qualityMediumTap","medium"),e._bindQualitySelection(e._highQualityStream,e._qualityHighBtn,"_onQualityHighTap","_qualityHighTap","high"),e._bindQualitySelection(e._autoQualityStream,e._qualityAutoBtn,"_onQualityAutoTap","_qualityAutoTap","auto"),e._checkForOnlyOneStream()},n.prototype._populateStreamSelections=function(){var e=this;e._lowQualityStream=null,e._mediumQualityStream=null,e._highQualityStream=null,e._streams=e._model.playlist.getCurrentItem().streams,e._streamProfiles=e._model.playlist.getCurrentItem().streamProfiles,e._streamCapability=e._model.capabilities[e._model.playbackState.rendererType],e._setAutoQualityStream(),e._streams.length>1?e._streamMap=l.mapStreamsToQualities(e._streams):e._streamProfiles.length>1?e._streamMap=l.mapStreamsToQualities(e._streamProfiles):e._streamMap=l.mapStreamsToQualities({bitrates:e._model.playback.bitrates,heights:e._model.playback.heights}),e._lowQualityStream=e._streamMap.low,e._mediumQualityStream=e._streamMap.medium,e._highQualityStream=e._streamMap.high},n.prototype._checkForOnlyOneStream=function(){var e=this;if(1===e._availableStreamCount){var t=e._qualityMap[e._onlyAvailableStream].btnClass,r=e._qualityNode.querySelector("."+t);l.classList(r).add("yvp-disabled")}},n.prototype._onPlaybackStarted=function(){var e,t=this,r=l.shouldEnableQualitySelector(t._model);r?(t._bindVideoQuality(),e=t._qualityNode.querySelector("."+t._qualityMap.auto.btnClass),t._bindQualityActivatedClass(e),l.classList(t._qualityNode).add("yvp-quality-enabled")):l.classList(t._qualityNode).remove("yvp-quality-enabled")},n.prototype._bindQualityActivatedClass=function(e){var t=this;l.classList(t._currentActivatedQuality).remove("yvp-settings-activated"),t._currentActivatedQuality=e?e:t._qualityAutoBtn,l.classList(t._currentActivatedQuality).add("yvp-settings-activated")},n.prototype._destroyVQEventListener=function(e,t,r,n){t&&r&&(r.destroy(),e.removeEventListener("tap",n))},n.prototype._setAutoQualityStream=function(){var e=this,t=d.findStreamByProperty(e._streams,"bitrate",e._model.playback.desiredBitrate,e._streamCapability);e._autoQualityStream=t},n.prototype._bindEmbedCode=function(){var e=this,t=e._model.playlist.getCurrentItem(),r=e._getShareUrl(),n=t.embedCode||r,o=t.embedRights,d=e._node.querySelector(".yvp-settings-embed");e._emebedInputBox=e._node.querySelector(".yvp-embed-input"),e._embedCodeTap=new a(e._emebedInputBox),e._onEmbedCodeTap=function(t){t.target.focus(),t.target.setSelectionRange(0,t.target.value.length),e._eventBus.publish(i.API.UI_INTERACT,{srcElement:"settings-embed"})},e._emebedInputBox.addEventListener("tap",e._onEmbedCodeTap),r?(e._emebedInputBox.value=o?e.generateEmbedCode(n):s.i18n.EMBED_NOT_ALLOWED,l.classList(d).add("open"),l.classList(d).remove("close")):(l.classList(d).add("close"),l.classList(d).remove("open"))},n.prototype._getShareUrl=function(){var e=this,t=e._model.playlist&&e._model.playlist.getCurrentItem(),r=t&&t.shareUrl;return!e._model.playback.playInlineVideo&&window.location.pathname.indexOf(".html")>-1&&(r=window.location.protocol+"//"+window.location.host+window.location.pathname),r},n.prototype.generateEmbedCode=function(e){return e.match(/<iframe/)?e:"<iframe width='640' height='360' scrolling='no' frameborder='0' src='"+e+"?format=embed' allowfullscreen='true' mozallowfullscreen='true' webkitallowfullscreen='true' allowtransparency='true'></iframe>"},n.prototype.destroy=function(){var e=this;e._ccOptionsTap&&e._ccOptionsLink&&(e._ccOptionsTap.destroy(),e._ccOptionsLink.removeEventListener("tap",e._onCcOptionsTap)),e._embedCodeTap&&e._emebedInputBox&&(e._embedCodeTap.destroy(),e._emebedInputBox.removeEventListener("tap",e._onEmbedCodeTap)),e._backToMainSettingsTap&&e._backToMainSettings&&(e._backToMainSettingsTap.destroy(),e._backToMainSettings.removeEventListener("tap",e._onBackToMainSettingsTap)),e._settingContainerTap&&e._node&&(e._settingContainerTap.destroy(),e._node.removeEventListener("tap",e._onSettingContainerTap)),e._destroyVQEventListener(e._qualityAutoBtn,e._autoQualityStream,e._qualityAutoTap,e._onQualityAutoTap),e._destroyVQEventListener(e._qualityLowBtn,e._lowQualityStream,e._qualityLowTap,e._onQualityLowTap),e._destroyVQEventListener(e._qualityMediumBtn,e._mediumQualityStream,e._qualityMediumTap,e._onQualityMediumTap),e._destroyVQEventListener(e._qualityHighBtn,e._highQualityStream,e._qualityHighTap,e._onQualityHighTap),e._ccOptions=null,e._qualityNode=null,e._node=null}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../src/stream":"Af6MnA","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./cc-options":78,"./settings.html":96,fs:164,"insert-css":166}],98:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-start-screen' tabindex='-1'>"),n.b("\n"+r),n.b("    <img class='yvp-start-screen-image' src='"),n.b(n.v(n.f("imageSrc",e,t,0))),n.b("' width='"),n.b(n.v(n.f("width",e,t,0))),n.b("' height='"),n.b(n.v(n.f("height",e,t,0))),n.b("' aria-hidden='true'>"),n.b("\n"+r),n.s(n.d("config.showButton",e,t,1),e,t,0,188,308,"{{ }}")&&(n.rs(e,t,function(e,t,r){r.b("        <div class='yvp-start-screen-button' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.PLAY_VIDEO",e,t,0))),r.b("' role='button'></div>"),r.b("\n")}),e.pop()),n.b("    <div class='yvp-start-screen-bar-wrapper'>"),n.b("\n"+r),n.b("        <div class='yvp-start-screen-bar' tabindex='-1'>"),n.b("\n"+r),n.s(n.d("config.showProvider",e,t,1),e,t,0,471,579,"{{ }}")&&(n.rs(e,t,function(e,t,r){r.b("                <h4 class='yvp-start-screen-provider' tabindex='1'>"),r.b(r.v(r.d("item.provider.name",e,t,0))),r.b("</h4>"),r.b("\n")}),e.pop()),n.s(n.d("config.showTitle",e,t,1),e,t,0,637,734,"{{ }}")&&(n.rs(e,t,function(e,t,r){r.b("                <h3 class='yvp-start-screen-title' tabindex='2'>"),r.b(r.v(r.d("item.title",e,t,0))),r.b("</h3>"),r.b("\n")}),e.pop()),n.s(n.d("config.showDescription",e,t,1),e,t,0,795,902,"{{ }}")&&(n.rs(e,t,function(e,t,r){r.b("                <p class='yvp-start-screen-description' tabindex='3'>"),r.b(r.v(r.d("item.description",e,t,0))),r.b("</p>"),r.b("\n")}),e.pop()),n.b("        </div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],99:[function(e,t,r){"use strict";function n(e){var t=this;t._eventBus=e}t.exports=n;var o=e("../event"),i=e("../tap"),a=e("../util"),s=e("../strings"),l=e("../../../lib/user-agent"),d=e("./start-screen.html");n.prototype.create=function(e,t){var r=this,n=t.ui.startScreenConfig,c={showTitle:n.showTitle&&e.title,showButton:n.showButton,showDescription:n.showDescription&&e.description,showProvider:n.showProvider&&e.provider&&e.provider.name},p=e.images.large||e.images.thumbnail||e.images.medium||e.images.small||e.images.provider;return r.node=a.render(d,{item:e,config:c,width:t.uiState.width,height:t.uiState.height,imageSrc:p,strings:s.i18n}),r._startScreenTap=new i(r.node),r._onStartScreenTap=function(){var e=function(){r._eventBus.publish(o.START_SCREEN_CLICK),r._eventBus.publish(o.API.UI_INTERACT,{srcElement:"startScreen"})};l.htc_one?setTimeout(e,500):e()},r.node.addEventListener("tap",r._onStartScreenTap),r.node},n.prototype.destroy=function(){var e=this;e._startScreenTap.destroy(),e.node.removeEventListener("tap",e._onStartScreenTap),e.node=null}},{"../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./start-screen.html":98}],100:[function(e,t,r){"use strict";function n(e,t,r){var n=this;i.call(n,e,t,r)}t.exports=n;var o=e("../util"),i=e("./playlist"),a=e("../tap");o.inherits(n,i),n.prototype.create=function(e){var t=this;return n.super_.prototype.create.call(t,e)},n.prototype._fetchMoreRelatedItems=function(e){},n.prototype._createPlaylistItem=function(e){var t="";return t=e.mediaItem.thumbnail,!t&&e.mediaItem.images&&(t=e.mediaItem.images.defaultThumbnail||e.mediaItem.images.thumbnail),t=t||e.mediaItem._thumbnail,e.mediaItem.isBumper()&&(t=null,e.mediaItem.title="",e.title=""),{id:e.mediaItem.id,title:e.title,showUpNext:e.showUpNext,upNextTime:e.upNextTime,thumbnail:t,duration:e.duration,
provider:e.provider,idx:e.idx}},n.prototype._appendItemsToPlaylist=function(e){for(var t=this,r={items:e.items,strings:e.strings,isWideMode:e.isWideMode},n=o.render(e.template,r),i=Array.prototype.slice.call(n.querySelectorAll(".yvp-playlist-item"),0),s=(Array.prototype.slice.call(n.querySelectorAll(".yvp-playlist-item-header"),0),0);s<i.length;s++){var l=i[s];if(t._mdUpN)l.itemIndex=s+t._relItems.length,t._taps.push(new a(l)),l.addEventListener("tap",t._onPlaylistItemTap);else if(t._mdEnd)for(var d=Array.prototype.slice.call(l.querySelectorAll(".yvp-end-screen-fuji-tile"),0),c=0;c<d.length;c++){var p=d[c];p.itemIndex=c+t._relItems.length,t._taps.push(new a(p)),p.addEventListener("tap",t._onPlaylistItemTap)}t._plList.appendChild(l)}}},{"../tap":"dsc79Q","../util":"jJTEqU","./playlist":94}],101:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._cssSettings=e,n._config=t,n._eventBus=r,n._events=[],n._config.items=n._config.items||[]}t.exports=n;var o=e("../../util"),i=e("../../tap"),a=e("../../../../lib");n.prototype.create=function(){var e=this;return e.node=document.createElement("div"),o.classList(e.node).add(e._cssSettings.wrapper),e._selectedItemWrapper=document.createElement("div"),o.classList(e._selectedItemWrapper).add(e._cssSettings.selectedWrapper),e._selectedItem=document.createElement("div"),o.classList(e._selectedItem).add(e._cssSettings.selected),e._selectedIndicator=document.createElement("span"),o.classList(e._selectedIndicator).add(e._cssSettings.availability),e._dropDownIcon=document.createElement("span"),o.classList(e._dropDownIcon).add(e._cssSettings.dropDownIcon),e._selectedItemWrapper.appendChild(e._selectedItem),e._selectedItemWrapper.appendChild(e._dropDownIcon),e.node.appendChild(e._selectedItemWrapper),e._syncListItems(),e.node.appendChild(e._itemList),e._syncUI(e._config.selected),e._bindUI(),e.node},n.prototype._syncListItems=function(){var e=this;e._itemList?(e._unBindItemList(),e._itemList.innerHTML=""):e._itemList=document.createElement("ul"),o.classList(e._itemList).add(e._cssSettings.list);var t,r=document.createDocumentFragment();e._config.items.length>0?e._config.items.forEach(function(n,i){t=document.createElement("li"),e._config.itemsData&&(t.val=e._config.itemsData[i]),o.classList(t).add(e._cssSettings.listItem),t.appendChild(document.createTextNode(n));var a=document.createElement("span");o.classList(a).add(e._cssSettings.availability),t.appendChild(a),r.appendChild(t)}):(t=document.createElement("li"),o.classList(t).add(e._cssSettings.listItem),t.appendChild(document.createTextNode(e._config.noItemsText)),r.appendChild(t)),e._itemList.innerHTML="",e._itemList.appendChild(r),e._bindItemList()},n.prototype.syncData=function(e){var t=this;e.items&&(t._config.items=e.items.length>0?e.items:t._config.items,t._config.itemsData=e.itemsData.length>0?e.itemsData:t._config.itemsData,t._syncListItems()),t._config.selected=e.selected,t._syncUI(t._config.selected)},n.prototype._syncUI=function(e){var t=this,r=document.createTextNode(e);t._selectedItem.firstChild?t._selectedItem.replaceChild(r,t._selectedItem.firstChild):(t._selectedItem.appendChild(r),t._selectedItem.appendChild(t._selectedIndicator)),t._config.items.length>0?o.classList(t._selectedIndicator).remove(t._cssSettings.notAvailable):o.classList(t._selectedIndicator).add(t._cssSettings.notAvailable)},n.prototype._bindUI=function(){var e=this;e._dropDownTap=new i(e._selectedItemWrapper),e._onDropDownIconTap=function(t){t.stopPropagation(),e._toggleListDisplay()},e._selectedItemWrapper.addEventListener("tap",e._onDropDownIconTap)},n.prototype._bindItemList=function(){var e=this;e._onItemSelected=function(t){t.stopPropagation(),e._syncUI(t.target.textContent),e._toggleListDisplay(),e._publishEvents(t.target)},e._childTaps=[],Array.prototype.forEach.call(e._itemList.childNodes,function(t){var r=new i(t);e._childTaps.push(r),t.childNodes[0].nodeValue!==e._config.noItemsText&&t.addEventListener("tap",e._onItemSelected)})},n.prototype._toggleListDisplay=function(){var e=this;e._isListOpen?o.classList(e._itemList).remove("open"):o.classList(e._itemList).add("open"),e._isListOpen=!e._isListOpen},n.prototype._unBindUI=function(){var e=this;e._dropDownTap&&e._dropDownTap.destroy(),e._dropDownTap&&e._dropDownIcon.removeEventListener("tap",e._onDropDownIconTap),e._unBindItemList()},n.prototype._unBindItemList=function(){var e=this;e._itemList.childNodes&&(Array.prototype.forEach.call(e._itemList.childNodes,function(t){t.removeEventListener("tap",e._onItemSelected)}),e._childTaps.forEach(function(e){e.destroy()}))},n.prototype.registerEvent=function(e){var t=this;-1===t._events.indexOf(e)&&t._events.push(e)},n.prototype.removeEvent=function(e){var t=this,r=t._events.indexOf(e);-1!==r&&t._events.splice(r,1)},n.prototype._publishEvents=function(e){var t=this,r=a.isNullOrUndefined(e.val)?null:e.val;if(null===r&&(r=e.textContent),t._events)for(var n=0;n<t._events.length;n++)t._eventBus.publish(t._events[n],r)},n.prototype.destroy=function(){var e=this;e._unBindUI(),e.events=null,e.node=null,e._itemList=null,e._childTaps=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU"}],102:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._cssSettings=e,n._config=t,n._eventBus=r,n._events=[],n._validateInput()}t.exports=n;var o=e("../../util"),i=e("../../../../lib"),a=e("../../tap");n.prototype._validateInput=function(){var e=this;if(!e._config)throw new Error("No config object provided for slider");if(e._config.minValue>=e._config.maxValue)throw new Error("Slider's min value is bigger/equal than max value");if(e._config.minValue>e._config.initialValue)throw new Error("Slider's min value is bigger than initial value");if(e._config.maxValue<e._config.initialValue)throw new Error("Slider's max value is smaller than initial value")},n.prototype.create=function(){var e=this;e.node=document.createElement("div"),o.classList(e.node).add(e._cssSettings.wrapper),e._track=document.createElement("div"),o.classList(e._track).add(e._cssSettings.track);var t=100/(e._config.anchors-1),r=0;if(e._trackAnchorsXPos=[],e._config.anchors>0)for(var n=0;n<e._config.anchors;n++){var i=document.createElement("div");o.classList(i).add(e._cssSettings.anchor),i.setAttribute("style","left: "+r+"%"),e._trackAnchorsXPos.push(r),r+=t,e._track.appendChild(i)}return e._sliderHandle=document.createElement("div"),o.classList(e._sliderHandle).add(e._cssSettings.handle),e._config.initialValue&&(e._sliderHandle.setAttribute("style","left: "+e._config.initialValue+"%"),e._fractionValue=e._config.initialValue/e._config.maxValue),e._track.appendChild(e._sliderHandle),e.node.appendChild(e._track),e._bindUI(),e.node},n.prototype._syncUI=function(e,t){var r,n=this;if(n._config.anchors>0){var o=100;n._trackAnchorsXPos.forEach(function(t){Math.abs(t-e)<o&&(o=Math.abs(t-e),r=t)})}e=i.isNullOrUndefined(r)?e:r,n._syncSliderHandlePosition(e),t||n._publishEvents(e)},n.prototype._getEvtPositionAndSyncUI=function(e){var t=this,r=t._getSliderValue(e);this._syncUI(r)},n.prototype._bindUI=function(){var e=this;e.node&&(e._sliderTap=new a(e.node),e._onSliderTap=function(t){t.stopPropagation(),e._getEvtPositionAndSyncUI(t)},e.node.addEventListener("tap",e._onSliderTap),e._onSliderDown=function(t){e._preventTouchDefault(t),e._isSliding=!0,e._onSliderMove(t)},e._onSliderMove=function(t){e._isSliding&&(e._preventTouchDefault(t),e._getEvtPositionAndSyncUI(t))},e._onSliderUp=function(t){e._isSliding&&(e._preventTouchDefault(t),e._isSliding=!1)},["mousedown","touchstart"].forEach(function(t){e.node.addEventListener(t,e._onSliderDown)}),["mousemove","touchmove"].forEach(function(t){document.addEventListener(t,e._onSliderMove)}),["mouseup","touchend"].forEach(function(t){document.addEventListener(t,e._onSliderUp)}))},n.prototype._unBindUI=function(){var e=this;e._sliderTap&&e._sliderTap.destroy(),e.node.removeEventListener("tap",e._onSliderTap),["mousedown","touchstart"].forEach(function(t){e.node.removeEventListener(t,e._onSliderDown)}),["mousemove","touchmove"].forEach(function(t){document.removeEventListener(t,e._onSliderMove)}),["mouseup","touchend"].forEach(function(t){document.removeEventListener(t,e._onSliderUp)})},n.prototype._preventTouchDefault=function(e){-1!==e.type.indexOf("touch")&&e.preventDefault()},n.prototype._syncSliderHandlePosition=function(e){var t=this;t._sliderHandle.setAttribute("style","left: "+e+"%")},n.prototype._getSliderValue=function(e){var t=this,r=e.pageX-t.node.getBoundingClientRect().left;return t._fractionValue=r/t.node.clientWidth,100*Math.max(0,Math.min(1,t._fractionValue))},n.prototype.registerEvent=function(e){var t=this;-1===t._events.indexOf(e)&&t._events.push(e)},n.prototype.removeEvent=function(e){var t=this,r=t._events.indexOf(e);-1!==r&&t._events.splice(r,1)},n.prototype._publishEvents=function(e){var t=this;t._events.forEach(function(r){t._eventBus.publish(r,e)})},n.prototype.getValue=function(){var e=this;return e._fractionValue?e._config.maxValue&&e._fractionValue*e._config.maxValue:void 0},n.prototype.setValue=function(e,t){var r=this;r._fractionValue=r._config.maxValue&&e/r._config.maxValue,r._syncUI(e,t)},n.prototype.destroy=function(){var e=this;e._unBindUI(),e.events=null,e.node=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU"}],103:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div class='yvp-tooltip-wrapper'>"),n.b("\n"+r),n.b("    <div class='yvp-tooltip-content'>"),n.b("\n"+r),n.b("        "),n.b(n.v(n.f("tooltip-msg",e,t,0))),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],104:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n.node=e,n._tooltipText=i.isString(t)?t:"";var a=o.render(s,{"tooltip-msg":n._tooltipText});n._tooltipTextNode=a.querySelector(".yvp-tooltip-content"),n._tooltipWrapperNode=a,n.node.appendChild(a),n.setEnabled(!0),n._onMouseLeave=function(e){e.stopPropagation(),o.classList(n.node).remove("yvp-tooltip-hidden")},r&&(r.hideUponClick&&n.hideOnClick(),r.positionBottom&&n.setPositionBottom())}t.exports=n;var o=e("../../util"),i=e("../../../../lib"),a=e("../../tap"),s=e("./tooltip.html");n.prototype.setText=function(e){var t=this;t._tooltipText=e,t._tooltipTextNode.innerHTML=t._tooltipText},n.prototype.setEnabled=function(e){var t=this;t._isEnabled=e,e?o.classList(t.node).add("yvp-tooltip"):o.classList(t.node).remove("yvp-tooltip")},n.prototype.hideOnClick=function(){var e=this;e._hideOnClick||(e._elemTap=new a(e.node),e._onElemTap=function(t){e.node&&o.classList(e.node).add("yvp-tooltip-hidden")},e.node.addEventListener("tap",e._onElemTap,e),["mouseleave","touchend"].forEach(function(t){e.node.addEventListener(t,e._onMouseLeave)}),e._hideOnClick=!0)},n.prototype.setPositionBottom=function(){var e=this;o.classList(e._tooltipWrapperNode).add("yvp-tooltip-pos-bottom")},n.prototype.destroy=function(){var e=this;e.node&&(e._elemTap&&(e._elemTap.destroy(),e.node.removeEventListener("tap",e._onElemTap)),["mouseleave","touchend"].forEach(function(t){e.node.removeEventListener(t,e._onMouseLeave)})),e._tooltipTextNode=null,e.node=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU","./tooltip.html":103}],105:[function(e,t,r){var n=new(e("hogan.js/lib/template").Template)(function(e,t,r){var n=this;return n.b(r=r||""),n.b("<div>"),n.b("\n"+r),n.b("    <div class='yvp-top-bar'>"),n.b("\n"+r),n.b("        <a class='yvp-provider-logo' target='_blank' aria-hidden='true'></a>"),n.b("\n"+r),n.b("        <div class='yvp-content-type hide' tabindex='0'></div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("    <div class='yvp-login-prompt' id='yvp-login-prompt' role='dialog' tabindex='0'>"),n.b("\n"+r),n.b("        <div class='yvp-login-prompt-close' role='button' tabindex='0'></div>"),n.b("\n"+r),n.b("        <p class='yvp-login-prompt-msg' tabindex='0'>"),n.b(n.v(n.d("strings.LOGIN_MESSAGE",e,t,0))),n.b("</p>"),n.b("\n"+r),n.b("        <div class='yvp-login-yahoo-icn' role='button' tabindex='0'></div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("    <div class='yvp-playing-item-title'></div>"),n.b("\n"+r),n.b("    <div class='yvp-bottom-bar'>"),n.b("\n"+r),n.b("        <div class='yvp-bottom-container'>"),n.b("\n"+r),n.b("            <div class='yvp-slider' role='slider' tabindex='0'>"),n.b("\n"+r),n.b("                <div class='yvp-slider-extension' aria-hidden='true'></div>"),n.b("\n"+r),n.b("                <div class='yvp-handle'></div>"),n.b("\n"+r),n.b("                <div class='yvp-buffer-bar'></div>"),n.b("\n"+r),n.b("                <div class='yvp-playback-bar'></div>"),n.b("\n"+r),n.b("                <div class='yvp-visual-seek'>"),n.b("\n"+r),n.b("                    <div class='yvp-vs-thumbnail'></div>"),n.b("\n"+r),n.b("                    <div class='yvp-vs-time'></div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("            <div class='yvp-play-controls'>"),n.b("\n"+r),n.b("                <div class='yvp-play-btn' role='button' tabindex='0'></div>"),n.b("\n"+r),n.b("                <div class='yvp-upnext-container hide'>"),n.b("\n"+r),n.b("                    <div class='yvp-upnext-btn' role='button'>"),n.b("\n"+r),n.b("                    </div>"),n.b("\n"+r),n.b("                    <div class='yvp-upnext-playlist' role='dialog'>"),n.b("\n"+r),n.b("                        <div class='yvp-hover-elem'></div>"),n.b("\n"+r),n.b("                    </div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("                <div class='yvp-time-container' tabindex='-1' aria-hidden='true'>"),n.b("\n"+r),n.b("                    <div class='yvp-current-time'></div>"),n.b("\n"+r),n.b("                    <div class='yvp-total-time'></div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("            <div class='yvp-menu-controls'>"),n.b("\n"+r),n.b("                <div class='yvp-cc-btn button hide' role='button' tabindex='0' aria-label='"),n.b(n.v(n.d("strings.CC",e,t,0))),n.b("'></div>"),n.b("\n"+r),n.b("                <div class='yvp-volume-btn button' role='button' tabindex='0'>"),n.b("\n"+r),n.b("                    <div class='yvp-volume-bar-container'>"),n.b("\n"+r),n.b("                        <div class='yvp-volume-level'>"),n.b("\n"+r),n.b("                            <div class='yvp-volume-bar'>"),n.b("\n"+r),n.b("                                <div class='yvp-volume-handle'></div>"),n.b("\n"+r),n.b("                            </div>"),n.b("\n"+r),n.b("                            <div class='yvp-volume-value'></div>"),n.b("\n"+r),n.b("                        </div>"),n.b("\n"+r),n.b("                    </div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("                <div class='yvp-setting-btn button' role='button' tabindex='0' aria-label='"),n.b(n.v(n.d("strings.SETTINGS",e,t,0))),n.b("'>"),n.b("\n"+r),n.b("                    <div class='yvp-setting-pointer' aria-hidden='true'></div>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("                <div class='yvp-chromecast-btn button' role='button' tabindex='0' style='display:none;' aria-label='"),n.b(n.v(n.d("strings.CHROMECAST",e,t,0))),n.b("'></div>"),n.b("\n"+r),n.b("                <div class='yvp-fullscreen-btn button' role='button' tabindex='0'></div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("            <div class='yvp-docked-close-button'></div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("    <div class='yvp-cast-overlay'>"),n.b("\n"+r),n.b("        <div>"),n.b("\n"+r),n.b("            <div class='cast-overlay-header'>"),n.b("\n"+r),n.b("                <div class='cast-device-info'>"),n.b("\n"+r),n.b("                    <p class='cast-device-name'>"),n.b(n.v(n.d("strings.CAST_PLAYING_RECEIVER",e,t,0))),n.b("</p>"),n.b("\n"+r),n.b("                    <small class='cast-device-type'>"),n.b(n.v(n.d("strings.CHROMECAST",e,t,0))),n.b("</small>"),n.b("\n"+r),n.b("                </div>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("            <div class='cast-overlay-content'></div>"),n.b("\n"+r),n.b("            <div class='cast-overlay-footer'>"),n.b("\n"+r),n.b("                <small class='cast-disconnect-btn'>"),n.b(n.v(n.d("strings.DISCONNECT",e,t,0))),n.b("</small>"),n.b("\n"+r),n.b("            </div>"),n.b("\n"+r),n.b("        </div>"),n.b("\n"+r),n.b("    </div>"),n.b("\n"+r),n.b("    <div class='yvp-mute-indicator'></div>"),n.b("\n"+r),n.b("    <div class='yvp-custom-controls'></div>"),n.b("\n"+r),n.b("    <div class='yvp-object-overlay'></div>"),n.b("\n"+r),n.b("</div>"),n.b("\n"),n.fl()});t.exports={render:function(){return n.render.apply(n,arguments)},r:function(){return n.r.apply(n,arguments)},ri:function(){return n.ri.apply(n,arguments)}}},{"hogan.js/lib/template":165}],106:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._eventBus=e,n._view=t,n._model=r,n._isLive=!1,n._liveState=null,n._ccAvailable=!0,n._eventBus.subscribe(a.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),n._eventBus.subscribe(a.Video.PLAYING,n._onVideoPlaying,n),n._eventBus.subscribe(a.PLAYBACK_STARTED,n._onPlaybackStarted,n),n._eventBus.subscribe(a.AD_PLAYBACK_STARTED,n._onAdPlaying,n),n._eventBus.subscribe(a.PLAYBACK_PROGRESS,n._onPlaybackProgress,n),n._eventBus.subscribe(a.AD_PLAYBACK_PROGRESS,n._onAdPlaybackProgress,n),n._eventBus.subscribe(a.UPDATE_AD_BREAKS,n._updateAdBreaks,n),n._eventBus.subscribe(a.UPDATE_AD_COUNT,n._updateAdCount,n),n._eventBus.subscribe(a.CC.SHOW_CONTROLS,n._setCCUIAvailability,n),n._eventBus.subscribe(a.CC.REMOVED,n._checkCCAvailability,n),n._eventBus.subscribe(a.CC.UI_TOGGLE,n._setCCButtonsState,n),n._eventBus.subscribe(a.CC.TOGGLE,n._setCCButtonsState,n),n._eventBus.subscribe(a.API.CAST_AVAILABILITY_CHANGE,n._setChromecastBtnVisibility,n),n._eventBus.subscribe(a.CAST.CONNECTION_STATUS_CHANGED,n._onCastConnectionChange,n),n._eventBus.subscribe(a.CAST.MEDIA_CHANGED,n._onCastMediaLoaded,n),n._eventBus.subscribe(a.CAST.CAPTION_AVAILABILITY_CHANGED,n._onCastCCAvailabilityChanged,n),n._eventBus.subscribe(a.CONTROLS_BAR_CHANGE,n._onControlsBarChange,n),n._eventBus.subscribe(a.KEYDOWN,n._onKeyDown,n),n._eventBus.subscribe(a.Video.CLICK,n._onVideoClick,n)}t.exports=n;var o=(e("fs"),e("insert-css")),i=e("../../../lib/user-agent"),a=(e("../cc"),e("../error"),e("../event")),s=(e("../stream"),e("../strings")),l=e("../tap"),d=e("../util"),c=e("../../../lib"),p=e("./settings"),u=e("../views/uiwidgets/tooltip"),_=e("./yahoo-controls.html"),m="on";o(".yvp-content.yvp-browser-desktop.yvp-docked .yvp-docked-close-button{visibility:visible;opacity:1}.yvp-content.yvp-browser-desktop.yvp-docked .yvp-playing-item-title.yvp-title-standard{padding:5px 24px 5px 8px;font-weight:500;font-size:16px;line-height:20px;z-index:29;}.yvp-content.yvp-browser-desktop.yvp-docked .yvp-playing-item-title.yvp-title-standard.yvp-live{padding:35px 24px 5px 8px}.yvp-content.yvp-browser-desktop.yvp-docked .yvp-content-type{left:8px;top:8px}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar:hover{opacity:1}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls.yvp-muted .yvp-mute-indicator{opacity:1;visibility:visible;-webkit-transition:visibility .3s linear .3s,opacity .1s ease-out .5s;-moz-transition:visibility .3s linear .3s,opacity .1s ease-out .5s;-o-transition:visibility .3s linear .3s,opacity .1s ease-out .5s;transition:visibility .3s linear .3s,opacity .1s ease-out .5s}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-top-bar .yvp-content-type{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content:hover .yvp-bottom-bar{opacity:1;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content:hover .yvp-ads-overlay{-webkit-transition:height 0s;-moz-transition:height 0s;-o-transition:height 0s;transition:height 0s}.yvp-content:hover.yvp-muted .yvp-mute-indicator{opacity:0;visibility:hidden}.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar:hover{opacity:1}.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-top-bar .yvp-content-type{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls.yvp-muted .yvp-mute-indicator{opacity:0;visibility:hidden}.yvp-content.yvp-flag-paused:hover .yvp-bottom-bar{opacity:1;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.yvp-content.yvp-flag-paused:hover .yvp-top-bar .yvp-content-type{opacity:1;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.yvp-content.yvp-user-inactive div.yvp-bottom-bar{cursor:none;}.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-slider,.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-buffer-bar,.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-playback-bar{height:3px;bottom:2px;direction:ltr;-webkit-transition:height .5s linear 0s,bottom .5s linear 0s;-moz-transition:height .5s linear 0s,bottom .5s linear 0s;-o-transition:height .5s linear 0s,bottom .5s linear 0s;transition:height .5s linear 0s,bottom .5s linear 0s;-moz-transition:none}.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-handle{-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);-o-transform:scale(0);transform:scale(0);margin-top:-4px;-webkit-transition:all .51s linear 0s;-moz-transition:all .51s linear 0s;-o-transition:all .51s linear 0s;transition:all .51s linear 0s}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-disable-controls .yvp-bottom-bar{opacity:0 !important}.yvp-top-bar{position:absolute;z-index:28;width:100%;top:0;}.yvp-top-bar.hide{display:none}.yvp-top-bar .yvp-provider-logo{position:absolute;right:0;display:block;height:20px;width:55px;margin-top:20px;margin-right:10px;border:0;background-repeat:no-repeat;cursor:pointer;}.yvp-top-bar .yvp-provider-logo.yvp-hide{display:none}.yvp-top-bar .yvp-ad-count-container{display:none;position:absolute;left:16px;top:12px}.yvp-top-bar .yvp-ad-count,.yvp-top-bar .yvp-ad-countdowntimer{display:inline-block;color:#fff;position:relative;text-shadow:0 1px #000;font-size:11px;font-weight:normal}.yvp-top-bar .yvp-ad-countdowntimer{padding-left:5px;text-align:right}.yvp-bottom-bar{position:absolute;background-color:transparent;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);left:0;right:0;bottom:0;width:100%;height:100px;z-index:30;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container{display:block;position:relative;top:56px;height:44px;margin:0 10px 0 10px;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yNS42ODIgNTUuMDE2SDE2LjUzYy0uNDk1IDAtLjk0NC0uMTk0LTEuMjczLS41MTItLjM2My0uMzM0LS41OS0uODE0LS41OS0xLjM0OHYtMTguMjRjMC0uMTcuMDIyLS4zMzIuMDY0LS40ODcuMi0uNzkzLjkyLTEuMzc4IDEuNzc1LTEuMzc4aDkuMTYyVjMzbDE0LjY2Ni0xNC42Njd2NTEuMzM0bC0xNC42NS0xNC42NXpNNTIuNDQgNzAuMjQ1Yy0xLjY0NiAwLTIuOTI2LTEuMzQyLTMuMjkzLTIuNjAzLS41NS0xLjg4LjQ4OC0zLjg4IDIuMzEzLTQuNDYgOC4wMzMtMi41NiAxMy42NDQtMTAuNDEgMTMuNjQ0LTE5LjA5IDAtOC42NjMtNS42MS0xNi41MDYtMTMuNjQ2LTE5LjA3Mi0xLjgyNC0uNTgtMi44Ni0yLjU4My0yLjMxLTQuNDY0QzQ5LjU5IDE5LjA1IDUwLjk2NyAxOCA1Mi41IDE4Yy4zNTIgMCAuNzAyLjA1NSAxLjA0LjE2NCAxMC45MjUgMy40ODggMTguNTU4IDE0LjE1IDE4LjU1OCAyNS45MjggMCAxMS4xMzYtNy4wNjcgMjEuMDYtMTguNDQ0IDI1LjktLjM5My4xNy0uOC4yNTMtMS4yMTUuMjUzem0uMDk3LTE1LjQ4NGMtMS4wMDYgMC0xLjk2OC0uNDI3LTIuNjQtMS4xNzUtMS4yOTUtMS40Ni0xLjE2OC0zLjcuMjgtNC45OTcgMS4zMzgtMS4xOTMgMi4xMDUtMi45MDIgMi4xMDUtNC42OTQgMC0xLjgxOC0uNzYyLTMuNTM2LTIuMDktNC43MTItMS40NTYtMS4yOTctMS41OS0zLjUzNS0uMy00Ljk5Mi42NzUtLjc1OCAxLjY0LTEuMTkgMi42NS0xLjE5Ljg2NCAwIDEuNjk3LjMxNiAyLjM0NS44OSAyLjg0IDIuNTIzIDQuNDY3IDYuMTcgNC40NjcgMTAuMDA0IDAgMy44MDMtMS42MjYgNy40MzctNC40NjIgOS45Ny0uNjUuNTgtMS40ODYuODk3LTIuMzU1Ljg5N3oiLz48L2c+PC9zdmc+\");background-size:100%;left:0;top:0;opacity:.8;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn:hover,.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn:active{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn.muted{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lLW11dGU8L3RpdGxlPjxnIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTI1LjY4MiA1NS4wMTZIMTYuNTNjLS40OTUgMC0uOTQ0LS4xOTQtMS4yNzMtLjUxMi0uMzYzLS4zMzQtLjU5LS44MTQtLjU5LTEuMzQ4di0xOC4yNGMwLS4xNy4wMjItLjMzMi4wNjQtLjQ4Ny4yLS43OTMuOTItMS4zNzggMS43NzUtMS4zNzhoOS4xNjJWMzNsMTQuNjY2LTE0LjY2N3Y1MS4zMzRsLTE0LjY1LTE0LjY1ek01OC45MDQgMzkuMDUybC00Ljk2OC00Ljk2OGMtMS40MjgtMS40MjgtMy43NTQtMS40MzItNS4xODYgMC0xLjQzIDEuNDMtMS40MzIgMy43NTMgMCA1LjE4NWw0Ljk2OCA0Ljk2Ny00Ljk2OCA0Ljk2OGMtMS40MjggMS40MjgtMS40MyAzLjc1MyAwIDUuMTg1IDEuNDMgMS40MyAzLjc1NCAxLjQzMiA1LjE4NiAwbDQuOTY4LTQuOTY4IDQuOTY4IDQuOTdjMS40MjcgMS40MjYgMy43NTMgMS40MyA1LjE4NS0uMDAyIDEuNDMtMS40MyAxLjQzMi0zLjc1MyAwLTUuMTg1bC00Ljk2OC00Ljk2OCA0Ljk2Ny00Ljk2OGMxLjQyOC0xLjQzIDEuNDMyLTMuNzU0IDAtNS4xODYtMS40My0xLjQzLTMuNzUzLTEuNDMyLTUuMTg1IDBsLTQuOTY4IDQuOTY4eiIvPjwvZz48L3N2Zz4=\")}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+c2V0dGluZ3M8L3RpdGxlPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTU1LjczNyA0NC4zMTRjLS4wMDQtNi4yMTUtNS4xMDQtMTEuMzM4LTExLjMyLTExLjM1Ni02LjI3LS4wMjItMTEuNDIgNS4xMDgtMTEuNDE3IDExLjM3NC4wMDQgNi4yMTUgNS4xMDQgMTEuMzM0IDExLjMxNSAxMS4zNiA2LjI3NC4wMiAxMS40MjYtNS4xMTIgMTEuNDIyLTExLjM3OHptMTAuMjc4IDQuNDAzYy0zLjE0IDEuMTg4LTQuNDc0IDQuMzgyLTMuMDg4IDcuNDMuNDQuOTY3Ljk1NCAxLjkxIDEuMzQyIDIuOTAzLjExMy4zLjAyLjg1LS4yIDEuMDg1LTEuMjU2IDEuMzQtMi41NSAyLjYzNy0zLjg5IDMuODktLjIzNC4yMi0uNzg0LjMxMi0xLjA4NC4xOTUtLjk5NC0uMzgtMS45MzYtLjg5OC0yLjkwNC0xLjMzOC0zLjAzNi0xLjM4Ni02LjI0LS4wNTItNy40MyAzLjA4Ny0uNDU3IDEuMjE2LS45IDEuNzk4LTEuMzUyIDMuMDE2aC02LjgxNmMtLjQ1LTEuMjE4LS45LTEuOC0xLjM1My0zLjAxNy0xLjE4NC0zLjE0LTQuMzg1LTQuNDc0LTcuNDI4LTMuMDg4LS45NjguNDQtMS45MS45NTMtMi45MDQgMS4zMzgtLjMuMTE3LS44NS4wMjYtMS4wODUtLjE5NC0xLjM0LTEuMjU0LTIuNi0yLjU5My0zLjkyNC0zLjg2NS0uNDMtLjQwNi0uNDA4LS43NDMtLjE2Mi0xLjIyLjQ5LS45NDYuOTUtMS45MSAxLjM4LTIuODg2IDEuMzItMi45NTUtLjAxNi02LjE0LTMuMDM3LTcuMy0xLjI0Mi0uNDc3LTIuNDk2LS45MjgtMy43NDctMS4zOXYtNi44MTZjMS4yMi0uNDUgMi40NC0uODk4IDMuNjU2LTEuMzUzIDMuMTM4LTEuMTggNC40NzItNC4zODIgMy4wODYtNy40My0uNDQtLjk2Ny0uOTUzLTEuOTEtMS4zNDItMi45MDMtLjExMy0uMy0uMDIyLS44NS4xOTgtMS4wODUgMS4yNTgtMS4zMzggMi41NTItMi42MzYgMy44OS0zLjg5LjIzNS0uMjIuNzg1LS4zMTIgMS4wODYtLjE5NS45OTQuMzgyIDEuOTM2LjkgMi45MDQgMS4zNCAzLjA0MyAxLjM4IDYuMjQ4LjA0NiA3LjQzLTMuMDkuNDUzLTEuMjE2LjktMS44NDUgMS4zNTItMy4wNmg2LjgxNmMuNDUgMS4yMTUuODk4IDEuODQ4IDEuMzUzIDMuMDYgMS4xODQgMy4xNCA0LjM4NSA0LjQ3NSA3LjQzIDMuMDkuOTY3LS40NCAxLjkxLS45NTggMi45MDMtMS4zNC4zLS4xMTcuODUtLjAyNSAxLjA4NS4xOTUgMS4zNCAxLjI1NCAyLjYgMi41OTIgMy45MjQgMy44NjQuNDMuNDA4LjQwNy43NDYuMTYyIDEuMjIyLS40OTIuOTQ2LS45NSAxLjkxLTEuMzggMi44OS0xLjMyIDIuOTUuMDE2IDYuMTQ1IDMuMDM3IDcuMjk2IDEuMjQ3LjQ3NyAyLjQ5Ny45MjggMy43NDQgMS4zOXY2LjgxNmMtMS4yMTguNDUtMi40MzUuOS0zLjY1MiAxLjM1M3oiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNNTUuNzM3IDQ0LjI4Yy0uMDA0LTYuMjE2LTUuMTA0LTExLjMzOC0xMS4zMi0xMS4zNTYtNi4yNy0uMDIyLTExLjQyIDUuMTA3LTExLjQxNyAxMS4zNzQuMDA0IDYuMjE1IDUuMTA0IDExLjMzMyAxMS4zMTUgMTEuMzYgNi4yNzQuMDIgMTEuNDI2LTUuMTEyIDExLjQyMi0xMS4zOHptMTAuMjc4IDQuNDAzYy0zLjE0IDEuMTg4LTQuNDc0IDQuMzgyLTMuMDg4IDcuNDMuNDQuOTY3Ljk1NCAxLjkxIDEuMzQyIDIuOTAzLjExMy4zLjAyLjg1LS4yIDEuMDg1LTEuMjU2IDEuMzQtMi41NSAyLjYzNy0zLjg5IDMuODktLjIzNC4yMi0uNzg0LjMxMy0xLjA4NC4xOTYtLjk5NC0uMzgyLTEuOTM2LS45LTIuOTA0LTEuMzQtMy4wMzYtMS4zODUtNi4yNC0uMDUtNy40MyAzLjA5LS40NTcgMS4yMTYtLjkgMS44Ni0xLjM1MiAzLjA4aC02LjgxNmMtLjQ1LTEuMjItLjktMS44NjQtMS4zNTMtMy4wOC0xLjE4NC0zLjE0LTQuMzg1LTQuNDc1LTcuNDI4LTMuMDktLjk2OC40NC0xLjkxLjk1NS0yLjkwNCAxLjM0LS4zLjExNy0uODUuMDI1LTEuMDg1LS4xOTUtMS4zNC0xLjI1My0yLjYtMi41OS0zLjkyNC0zLjg2My0uNDMtLjQwNy0uNDA4LS43NDUtLjE2Mi0xLjIyLjQ5LS45NDcuOTUtMS45MTIgMS4zOC0yLjg4NyAxLjMyLTIuOTU1LS4wMTYtNi4xNDItMy4wMzctNy4zLTEuMjQyLS40NzctMi40OTYtLjkyOC0zLjc0Ny0xLjM5di02LjgxNmMxLjIyLS40NSAyLjQ0LS45IDMuNjU2LTEuMzUzIDMuMTM4LTEuMTggNC40NzItNC4zOCAzLjA4Ni03LjQyOC0uNDQtLjk2OC0uOTUzLTEuOTEtMS4zNDItMi45MDQtLjExMy0uMy0uMDIyLS44NS4xOTgtMS4wODUgMS4yNTgtMS4zNCAyLjU1Mi0yLjYzNyAzLjg5LTMuODkuMjM1LS4yMi43ODUtLjMxMiAxLjA4Ni0uMTk1Ljk5NC4zOCAxLjkzNi44OTggMi45MDQgMS4zMzggMy4wNDMgMS4zODMgNi4yNDguMDQ4IDcuNDMtMy4wODcuNDUzLTEuMjE4LjktMS44MTMgMS4zNTItMy4wMjdoNi44MTZjLjQ1IDEuMjE0Ljg5OCAxLjgxMiAxLjM1MyAzLjAyNiAxLjE4NCAzLjEzOCA0LjM4NSA0LjQ3MiA3LjQzIDMuMDg2Ljk2Ny0uNDQgMS45MS0uOTU3IDIuOTAzLTEuMzM4LjMtLjExNy44NS0uMDI2IDEuMDg1LjE5NCAxLjM0IDEuMjU0IDIuNiAyLjU5MyAzLjkyNCAzLjg2NS40My40MDcuNDA3Ljc0NC4xNjIgMS4yMi0uNDkyLjk0Ny0uOTUgMS45MS0xLjM4IDIuODktMS4zMiAyLjk1Mi4wMTYgNi4xNDYgMy4wMzcgNy4yOTcgMS4yNDcuNDc3IDIuNDk3LjkyOCAzLjc0NCAxLjM5djYuODE2Yy0xLjIxOC40NS0yLjQzNS44OTgtMy42NTIgMS4zNTN6IiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iLjIiLz48L2c+PC9zdmc+\");background-size:100%;left:0;opacity:.8;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn.hide{display:none}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn:hover{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer{position:relative;display:none;width:1px;border:solid;border-color:rgba(38,40,42,0.95) transparent;border-width:6px 5px 0;top:-6px;bottom:0;left:6px;content:'';}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer.open{display:block}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer.hide{display:none}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{background-image:url(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMyAoMjk4MDIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmNjLW9mZjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJkZXNrdG9wIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iY2Mtb2ZmIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTExLjI0NTI5MjcsMTMuMjY3OTEyMiBDMTEuMDAwNzE0NCwxMy4wMjc0OTE3IDEwLjYxMDU2NTQsMTIuOTUzMjkzOCAxMC4zMjI4NTUsMTMuMTQxNjc5NCBDMTAuMTAyMjkzNCwxMy4yODY3MDI2IDkuODM3MTI5MzUsMTMuMzcxNTAwMiA5LjU1MTg2OTY2LDEzLjM3MTUwMDIgQzguNzgxMzc0NDMsMTMuMzcxNTAwMiA4LjE1Njk0LDEyLjc1NzE5OTMgOC4xNTY5NCwxMS45OTk4MDIzIEM4LjE1Njk0LDExLjI0MjQwNTQgOC43ODEzNzQ0MywxMC42Mjg1ODYyIDkuNTUxODY5NjYsMTAuNjI4NTg2MiBDOS43Nzk3ODMzMywxMC42Mjg1ODYyIDkuOTkzOTczMTYsMTAuNjgyNTQ4NCAxMC4xODMxNjYsMTAuNzc4NDI3NSBDMTAuNTQwOTY2LDEwLjk1OTU4NiAxMC45NzIyODY0LDEwLjkwMzIxNDkgMTEuMjU5NTA2NywxMC42MjYxNzcyIEMxMS42MTI4OTU0LDEwLjI4NDU3NzcgMTEuNTUzMDk4Nyw5LjcwMTU5NDA1IDExLjEzMjU2MTIsOS40NDM4Mjg1NSBDMTAuNTE1NDc4OCw5LjA2NjA5MzY5IDkuNzUxODQ1NTIsOC45MDEzMTY0OSA4LjkzNTI3NzQyLDkuMDYwMzEyMDMgQzcuNzQ2Njk1NCw5LjI5MTU3ODI4IDYuNzgwNjM1NTMsMTAuMjQ1NTUxNSA2LjU1NjE1MjgyLDExLjQxNTM3MzMgQzYuMTg5MDQwMjcsMTMuMzI5MTAxNCA3LjY3MTcwNDQ1LDE1IDkuNTUxODY5NjYsMTUgQzEwLjEyNTMyOTksMTUgMTAuNjU3NjE4NSwxNC44NDE5NjgxIDExLjExMjQ2NTYsMTQuNTY4Nzg0OCBDMTEuNTc0NjY0NywxNC4yOTA3ODM1IDExLjYyOTA2OTksMTMuNjQ0NjgzNSAxMS4yNDUyOTI3LDEzLjI2NzkxMjIiIGlkPSJGaWxsLTEiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTE3LjI0NTQ4NCwxMy4yNjc5MTIyIEMxNy4wMDA4OTU5LDEzLjAyNzQ5MTcgMTYuNjEwNzMxMSwxMi45NTMyOTM4IDE2LjMyMzAwOTIsMTMuMTQxNjc5NCBDMTYuMTAyNDM4NywxMy4yODY3MDI2IDE1LjgzNzI2MzksMTMuMzcxNTAwMiAxNS41NTE5OTI3LDEzLjM3MTUwMDIgQzE0Ljc4MTQ2NjQsMTMuMzcxNTAwMiAxNC4xNTcwMDY4LDEyLjc1NzE5OTMgMTQuMTU3MDA2OCwxMS45OTk4MDIzIEMxNC4xNTcwMDY4LDExLjI0MjQwNTQgMTQuNzgxNDY2NCwxMC42Mjg1ODYyIDE1LjU1MTk5MjcsMTAuNjI4NTg2MiBDMTUuNzc5OTE1NiwxMC42Mjg1ODYyIDE1Ljk5NDExNCwxMC42ODI1NDg0IDE2LjE4MzMxNDUsMTAuNzc4NDI3NSBDMTYuNTQxMTI4OSwxMC45NTk1ODYgMTYuOTcyNDY2OCwxMC45MDMyMTQ5IDE3LjI1OTIwODQsMTAuNjI2MTc3MiBDMTcuNjEzMTAxNiwxMC4yODQ1Nzc3IDE3LjU1MzMwMjQsOS43MDE1OTQwNSAxNy4xMzI3NDgsOS40NDM4Mjg1NSBDMTYuNTE1NjQwNyw5LjA2NjA5MzY5IDE1Ljc1MTk3NjYsOC45MDEzMTY0OSAxNC45MzQ4ODU1LDkuMDYwMzEyMDMgQzEzLjc0Njc0NTcsOS4yOTE1NzgyOCAxMi43ODA2NDY4LDEwLjI0NTU1MTUgMTIuNTU2MTU1MSwxMS40MTUzNzMzIEMxMi4xODkwMjc3LDEzLjMyOTEwMTQgMTMuNjcxNzUxNywxNSAxNS41NTE5OTI3LDE1IEMxNi4xMjU0NzYsMTUgMTYuNjU3Nzg2MiwxNC44NDE5NjgxIDE3LjExMjY1MTYsMTQuNTY4Nzg0OCBDMTcuNTc0ODY5MywxNC4yOTA3ODM1IDE3LjYyODc4NjYsMTMuNjQ0NjgzNSAxNy4yNDU0ODQsMTMuMjY3OTEyMiIgaWQ9IkZpbGwtMyI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjEsMTcgTDMsMTcgTDMsNyBMMjEsNyBMMjEsMTcgWiBNMSwxOC4wODE0MjA5IEMxLDE4LjU4ODczODEgMS40MTk4MzQzOCwxOSAxLjkxNzMwMzQxLDE5IEwyMi4wODI2OTY2LDE5IEMyMi41ODkzMDkzLDE5IDIzLDE4LjU5NjEwNTYgMjMsMTguMDgxNDIwOSBMMjMsNS45MTg1NzkxIEMyMyw1LjQxMTI2MTg3IDIyLjU4MDE2NTYsNSAyMi4wODI2OTY2LDUgTDEuOTE3MzAzNDEsNSBDMS40MTA2OTA3Myw1IDEsNS40MDM4OTQ0MiAxLDUuOTE4NTc5MSBMMSwxOC4wODE0MjA5IFoiIGlkPSJGaWxsLTUiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==\");background-size:100%;top:0;left:0;opacity:.8;margin-right:4px;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.hide{opacity:.35}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.hide:hover{opacity:.35}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn:hover{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on{background-image:url(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMyAoMjk4MDIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmNjLW9uPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9ImRlc2t0b3AiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJjYy1vbiIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLDE4LjA4MTQyMDkgQzEsMTguNTg4NzM4MSAxLjQxOTgzNDM4LDE5IDEuOTE3MzAzNDEsMTkgTDIyLjA4MjY5NjYsMTkgQzIyLjU4OTMwOTMsMTkgMjMsMTguNTk2MTA1NiAyMywxOC4wODE0MjA5IEwyMyw1LjkxODU3OTEgQzIzLDUuNDExMjYxODcgMjIuNTgwMTY1Niw1IDIyLjA4MjY5NjYsNSBMMS45MTczMDM0MSw1IEMxLjQxMDY5MDczLDUgMSw1LjQwMzg5NDQyIDEsNS45MTg1NzkxIEwxLDE4LjA4MTQyMDkgWiBNMTEuMjQ1MjkyNywxMy4yNjc5MTIyIEMxMS4wMDA3MTQ0LDEzLjAyNzQ5MTcgMTAuNjEwNTY1NCwxMi45NTMyOTM4IDEwLjMyMjg1NSwxMy4xNDE2Nzk0IEMxMC4xMDIyOTM0LDEzLjI4NjcwMjYgOS44MzcxMjkzNSwxMy4zNzE1MDAyIDkuNTUxODY5NjYsMTMuMzcxNTAwMiBDOC43ODEzNzQ0MywxMy4zNzE1MDAyIDguMTU2OTQsMTIuNzU3MTk5MyA4LjE1Njk0LDExLjk5OTgwMjMgQzguMTU2OTQsMTEuMjQyNDA1NCA4Ljc4MTM3NDQzLDEwLjYyODU4NjIgOS41NTE4Njk2NiwxMC42Mjg1ODYyIEM5Ljc3OTc4MzMzLDEwLjYyODU4NjIgOS45OTM5NzMxNiwxMC42ODI1NDg0IDEwLjE4MzE2NiwxMC43Nzg0Mjc1IEMxMC41NDA5NjYsMTAuOTU5NTg2IDEwLjk3MjI4NjQsMTAuOTAzMjE0OSAxMS4yNTk1MDY3LDEwLjYyNjE3NzIgQzExLjYxMjg5NTQsMTAuMjg0NTc3NyAxMS41NTMwOTg3LDkuNzAxNTk0MDUgMTEuMTMyNTYxMiw5LjQ0MzgyODU1IEMxMC41MTU0Nzg4LDkuMDY2MDkzNjkgOS43NTE4NDU1Miw4LjkwMTMxNjQ5IDguOTM1Mjc3NDIsOS4wNjAzMTIwMyBDNy43NDY2OTU0LDkuMjkxNTc4MjggNi43ODA2MzU1MywxMC4yNDU1NTE1IDYuNTU2MTUyODIsMTEuNDE1MzczMyBDNi4xODkwNDAyNywxMy4zMjkxMDE0IDcuNjcxNzA0NDUsMTUgOS41NTE4Njk2NiwxNSBDMTAuMTI1MzI5OSwxNSAxMC42NTc2MTg1LDE0Ljg0MTk2ODEgMTEuMTEyNDY1NiwxNC41Njg3ODQ4IEMxMS41NzQ2NjQ3LDE0LjI5MDc4MzUgMTEuNjI5MDY5OSwxMy42NDQ2ODM1IDExLjI0NTI5MjcsMTMuMjY3OTEyMiBaIE0xNy4yNDU0ODQsMTMuMjY3OTEyMiBDMTcuMDAwODk1OSwxMy4wMjc0OTE3IDE2LjYxMDczMTEsMTIuOTUzMjkzOCAxNi4zMjMwMDkyLDEzLjE0MTY3OTQgQzE2LjEwMjQzODcsMTMuMjg2NzAyNiAxNS44MzcyNjM5LDEzLjM3MTUwMDIgMTUuNTUxOTkyNywxMy4zNzE1MDAyIEMxNC43ODE0NjY0LDEzLjM3MTUwMDIgMTQuMTU3MDA2OCwxMi43NTcxOTkzIDE0LjE1NzAwNjgsMTEuOTk5ODAyMyBDMTQuMTU3MDA2OCwxMS4yNDI0MDU0IDE0Ljc4MTQ2NjQsMTAuNjI4NTg2MiAxNS41NTE5OTI3LDEwLjYyODU4NjIgQzE1Ljc3OTkxNTYsMTAuNjI4NTg2MiAxNS45OTQxMTQsMTAuNjgyNTQ4NCAxNi4xODMzMTQ1LDEwLjc3ODQyNzUgQzE2LjU0MTEyODksMTAuOTU5NTg2IDE2Ljk3MjQ2NjgsMTAuOTAzMjE0OSAxNy4yNTkyMDg0LDEwLjYyNjE3NzIgQzE3LjYxMzEwMTYsMTAuMjg0NTc3NyAxNy41NTMzMDI0LDkuNzAxNTk0MDUgMTcuMTMyNzQ4LDkuNDQzODI4NTUgQzE2LjUxNTY0MDcsOS4wNjYwOTM2OSAxNS43NTE5NzY2LDguOTAxMzE2NDkgMTQuOTM0ODg1NSw5LjA2MDMxMjAzIEMxMy43NDY3NDU3LDkuMjkxNTc4MjggMTIuNzgwNjQ2OCwxMC4yNDU1NTE1IDEyLjU1NjE1NTEsMTEuNDE1MzczMyBDMTIuMTg5MDI3NywxMy4zMjkxMDE0IDEzLjY3MTc1MTcsMTUgMTUuNTUxOTkyNywxNSBDMTYuMTI1NDc2LDE1IDE2LjY1Nzc4NjIsMTQuODQxOTY4MSAxNy4xMTI2NTE2LDE0LjU2ODc4NDggQzE3LjU3NDg2OTMsMTQuMjkwNzgzNSAxNy42Mjg3ODY2LDEzLjY0NDY4MzUgMTcuMjQ1NDg0LDEzLjI2NzkxMjIgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\");opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on.hide{opacity:.35}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on.hide:hover{opacity:.35}.yvp-bottom-bar .yvp-volume-bar-container{display:block;position:relative;bottom:95px;left:-1px;width:24px;height:72px;padding:7px 0;background:rgba(18,23,23,0.8);border-radius:4px;z-index:1;visibility:hidden;-webkit-animation-name:none;animation-name:none;-webkit-animation-duration:0s;-moz-animation-duration:0s;animation-duration:0s;}.yvp-bottom-bar .yvp-volume-bar-container:after{display:block;border:solid;border-color:rgba(18,23,23,0.8) transparent;border-width:6px 5px 0;position:absolute;top:100%;bottom:0;left:7px;content:''}.yvp-bottom-bar .yvp-volume-bar-container.open{visibility:visible}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-level,.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-bar{margin-top:0;height:100%}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-bar{background:rgba(255,255,255,0.1);border-radius:2px}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-level{background:rgba(255,255,255,0.4);width:4px;margin-left:10px;margin-top:0;border-radius:2px}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-handle{position:relative;width:12px;height:12px;background:#fff;border:0;border-radius:50%;margin-left:-4px;z-index:2;opacity:0;}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-handle.show{opacity:1}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-value{background:rgba(255,255,255,0.8);border:0;border-radius:2px}.yvp-main .yvp-tooltip{display:inline-block;position:absolute;}.yvp-main .yvp-tooltip:hover{text-decoration:none;}.yvp-main .yvp-tooltip:hover .yvp-tooltip-wrapper .yvp-tooltip-content{display:table}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper{bottom:34px;margin:auto;position:absolute;display:block;z-index:5;text-align:center;left:-1000px;right:-1000px;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper .yvp-tooltip-content{display:none;background:rgba(25,26,27,0.8);color:#fff;font-size:11px;margin:auto;padding:5px 11px;white-space:nowrap;text-align:center;pointer-events:none;border-radius:3px;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper .yvp-tooltip-content:before{border:solid;border-color:rgba(38,40,42,0.95) transparent;border-width:5px 3px 0;bottom:-5px;content:'';display:block;left:50%;margin-left:-3px;position:absolute;z-index:5}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper.yvp-tooltip-pos-bottom{top:30px;bottom:0;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper.yvp-tooltip-pos-bottom .yvp-tooltip-content:before{border-width:0 3px 5px;top:-5px;bottom:0}.yvp-main .yvp-tooltip.yvp-tooltip-hidden .yvp-tooltip-wrapper{display:none}.yvp-main .yvp-tooltip.yvp-fullscreen-btn .yvp-tooltip-wrapper{margin-right:60px;}.yvp-main .yvp-tooltip.yvp-fullscreen-btn .yvp-tooltip-wrapper .yvp-tooltip-content:before{margin-left:25px}.yvp-mode-ad .yvp-top-bar .yvp-ad-count-container,.yvp-mode-vpaid .yvp-top-bar .yvp-ad-count-container{display:block}.yvp-state-video .yvp-top-bar{display:block}.yvp-state-start-screen .yvp-top-bar,.yvp-state-error .yvp-top-bar,.yvp-state-end-screen .yvp-top-bar,.yvp-state-loading .yvp-top-bar{display:none}.yvp-mode-ad .yvp-top-bar .yvp-provider-logo,.yvp-mode-vpaid .yvp-top-bar .yvp-provider-logo{display:none}.yvp-mode-ad .yvp-playing-item-title.yvp-title-standard,.yvp-mode-vpaid .yvp-playing-item-title.yvp-title-standard{opacity:0;z-index:0}.yvp-settings-on .yvp-bottom-bar .yvp-upnext-playlist{display:none}.yvp-settings-on .yvp-bottom-bar .yvp-volume-bar-container{visibility:hidden}.yvp-content .yvp-main .yvp-mute-indicator{position:absolute;bottom:0;right:0;width:10px;height:10px;margin:0 8px 8px 0;float:right;opacity:0;visibility:hidden;z-index:32;background-image:url(\"data:image/gif;base64,R0lGODlhCgAKAIABAP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBOEQ3QkM1NDcyNDQxMUU2QTVFRDg5Q0IwRUY3QjFDQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBOEQ3QkM1NTcyNDQxMUU2QTVFRDg5Q0IwRUY3QjFDQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE4RDdCQzUyNzI0NDExRTZBNUVEODlDQjBFRjdCMUNDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE4RDdCQzUzNzI0NDExRTZBNUVEODlDQjBFRjdCMUNDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQMAAQAsAAAAAAoACgAAAhCMj6nLnQAYNPPUC2PAmIICACH5BAUDAAEALAAABAAKAAMAAAIHBIKpaOthCgAh+QQFAwABACwIAAUAAgABAAACAgQKACH5BAUDAAEALAAAAwAKAAIAAAIGBIKpaAkFACH5BAUDAAEALAAAAgAJAAMAAAIHBIKpYetQAAAh+QQFAwABACwEAAIABgACAAACBASCiVYAIfkEBQMAAQAsAAABAAoAAgAAAgUEgqkbVgAh+QQJAwABACwAAAAABgACAAACBASCiVYAIfkEBQMAAQAsAAAAAAoACgAAAg2MA3CobLminLTai2kBACH5BAkDAAEALAAAAAAKAAIAAAIFjG8AyFEAIfkECQMAAQAsAAAAAAoACgAAAgyMbwCouQijnLTaKwsAIfkECQMAAQAsAAAAAAoACgAAAhSMjwkGe82ag0HOS7OMUff7cRVQAAAh+QQJAwABACwAAAAACgAKAAACFIyPqQdgHVyUDc5XMbY839lt1FgAACH5BAkDAAEALAAAAAAKAAoAAAITjI+pB2CNYGiy0ufm1dj2bHlaAQAh+QQJAwABACwAAAAACgAKAAACEoyPqasA5lAMbtoKH8U7X69dBQAh+QQJAwABACwAAAAACgAKAAACEYyPqbvA4AJEU8JYL96ZbwMVACH5BAkDAAEALAAAAAAKAAoAAAIRjI+pywxgHpLh0WsjrJlrrBUAIfkECQMAAQAsAAAAAAoACgAAAhCMj6nLDOBgeIjOJy3OXPMCACH5BAkDAAEALAAAAAAKAAoAAAIRjI+py90ADEQzwIqvjFb3XQAAIfkEBQMAAQAsAAAAAAoACgAAAhGMj6nL3QAQNDPAii+NVvddAAAh+QQFAwABACwEAAQAAgABAAACAgQKACH5BAUDAAEALAEABQABAAEAAAICRAEAIfkEBQMAAQAsAAADAAoAAwAAAgeMA3DLpo0KACH5BAUDAAEALAQAAgAFAAQAAAIFBIKpi1AAIfkEBQMAAQAsAAAEAAIAAQAAAgIECgAh+QQFAwABACwEAAEAAgABAAACAgQKACH5BAUDAAEALAAAAwACAAEAAAICBAoAIfkECQMAAQAsAAAAAAoABQAAAgiMA3DL7Q9TAQAh+QQJAwABACwAAAAACgAKAAACD4wDcIvKlh50szaJs96sAAAh+QQJAwABACwAAAAACgAKAAACFIyPCJC3bZ5jQS5Lb944Xu91FVAAACH5BAkDAAEALAAAAAAKAAoAAAITjI+pB7DRkoOzRWps3bfbzG1gAQAh+QQJAwABACwAAAAACgAKAAACEoyPqQew0V5kDtY2MzZa8219BQAh+QQJAwABACwAAAAACgAKAAACEYyPqasA7FAM09VHrbl36+wVACH5BAUDAAEALAAAAAAKAAoAAAIRjI+pywzgYHjP1EmtpLvfDxQAIfkECQMAAQAsBAAEAAYAAgAAAgOMj1YAIfkECQMAAQAsAAAAAAoACgAAAgqMj6nL3QCcnLIAACH5BAkDAAEALAAAAAAKAAoAAAIQjI+py+0NgIlxykBvxdTaAgAh+QQFAwABACwAAAAACgAKAAACD4yPqcvtjwAwksoZar7WFgAh+QQFAwABACwAAAYAAgABAAACAgQKACH5BAUDAAEALAAABQAGAAIAAAIEBIKJVgAh+QQFAwABACwAAAQACgADAAACBgSCqctrBQAh+QQFAwABACwEAAUABgABAAACAwQSVgAh+QQFAwABACwAAAMACgACAAACBQSCqYtQACH5BAUDAAEALAAAAgAJAAMAAAIHBIKpu4ZQAAAh+QQFAwABACwIAAMAAgABAAACAgQKACH5BAUDAAEALAAAAQAKAAMAAAIHBIKpG6aeCgAh+QQJAwABACwAAAAAAgABAAACAgQKACH5BAUDAAEALAAAAAAKAAoAAAILjI95AMgKo5y00gIAIfkECQMAAQAsAAAAAAoAAgAAAgWMbwDIUQAh+QQJAwABACwAAAAACgAKAAACC4xvAIjKD6OctNYCACH5BAkDAAEALAAAAAAKAAoAAAIUjI95AGrMXgtwRgqlvDzjbYWdVAAAIfkECQMAAQAsAAAAAAoACgAAAhSMj3kAahxalAzOVzG2PN/ZbdRYAAAh+QQJAwABACwAAAAACgAKAAACE4yPqQuAbRoMUzp6bcxy78qBWwEAIfkECQMAAQAsAAAAAAoACgAAAhOMj6kLgG3gkY26UK+1sfbOYUABACH5BAkDAAEALAAAAAAKAAoAAAITjI+pC4Bt4JEyutDozbtr+2FAAQAh+QQJAwABACwAAAAACgAKAAACEYyPqcsGgJ6DR4ZnM55Td6oVACH5BAkDAAEALAAAAAAKAAoAAAIRjI+pywaAnoNHBjun3Y9yPhUAIfkEBQMAAQAsAAAAAAoACgAAAhGMj6nLDGAekoFGWB+menvuFQAh+QQFAwABACwAAAAAAQABAAACAkwBACH5BAUDAAEALAEAAwAFAAQAAAIGjAGmG6kFACH5BAUDAAEALAAAAwAKAAQAAAIIjG8AyM3rQgEAIfkEBQMAAQAsBAACAAIAAQAAAgIECgAh+QQFAwABACwJAAIAAQABAAACAkQBACH5BAUDAAEALAgAAgABAAEAAAICRAEAIfkEBQMAAQAsAAABAAYABQAAAgeMA3DLnVsAACH5BAUDAAEALAkAAQABAAEAAAICRAEAIfkEBQMAAQAsCAABAAEAAQAAAgJEAQAh+QQFAwABACwEAAAAAgABAAACAgQKACH5BAkDAAEALAAAAAAKAAYAAAIIjG8AyO0PYygAIfkECQMAAQAsAAAAAAoACgAAAhGMjwhgqxzckbLBGi9MvPt/FAAh+QQJAwABACwAAAAACgAKAAACFIyPeQDI9lYLEc5KL9M2+m11XFYAACH5BAkDAAEALAAAAAAKAAoAAAITjI+pC4Bt4JEyutDozbtr+2FAAQAh+QQJAwABACwAAAAACgAKAAACEoyPqasA5lAMEz7q7sy6b99ZBQAh+QQJAwABACwAAAAACgAKAAACEYyPqcsGgJ6DR4ZnM55Td6oVACH5BAkDAAEALAAAAAAKAAoAAAIRjI+py30AEDTzxQCrzvRmDxYAIfkECQMAAQAsAAAAAAoACgAAAhGMj6nL3QAMRDPAiq+MVvddAAAh+QQJAwABACwAAAAACgAKAAACEIyPqcvtDYCJccpAb8XU2gIAIfkECQMAAQAsAAAAAAoACgAAAhGMj6nL7QmAitHUQCXW2XJQAAAh+QQFAwABACwAAAAACgAKAAACEIyPqcudABg8kdYZIN7a8AIAIfkEBQMAAQAsBAAGAAYAAQAAAgNEDlAAIfkEBQMAAQAsAAAEAAYAAgAAAgQEgolWACH5BAUDAAEALAAAAwAKAAMAAAIHBIKpaOthCgAh+QQFAwABACwEAAMABgACAAACBASCiVYAIfkEBQMAAQAsAAACAAoAAgAAAgUEgqkbVgAh+QQFAwABACwAAAEABgACAAACBASCiVYAIfkEBQMAAQAsAAAAAAoAAwAAAgcEgqlo62EKACH5BAkDAAEALAAAAAAKAAIAAAIFjI95AAUAIfkECQMAAQAsAAAAAAoACgAAAg2MA3CobLminLTai2kBACH5BAkDAAEALAAAAAAKAAoAAAITjG8AqKkbWnzOyUunhRjvOnlTAQAh+QQJAwABACwAAAAACgAKAAACFIyPeQDR/hgzE9YracxQY7+BmlYAACH5BAkDAAEALAAAAAAKAAoAAAIUjI+pB2DdngtwRgqlvDzjbYWdVAAAIfkECQMAAQAsAAAAAAoACgAAAhOMj6kLgG0aDFM6em3Mcu/KgVsBACH5BAkDAAEALAAAAAAKAAoAAAISjI+pywaAnnswSEvnvDzjXXUFACH5BAkDAAEALAAAAAAKAAoAAAISjI+pyw0G4gsRSmsrnZJ7DQIFACH5BAkDAAEALAAAAAAKAAoAAAISjI+py30AEDRwBlvj1Zny6nkFACH5BAkDAAEALAAAAAAKAAoAAAIRjI+py+0HAIom0nCtxFvXDhQAIfkECQMAAQAsAAAAAAoACgAAAhCMj6nL7W+ABJGGaWXVN4MCACH5BAUDAAEALAAAAAAKAAoAAAIQjI+py+0JAIuGhmgzrvKCAgA7\");}.yvp-content .yvp-main .yvp-mute-indicator:hover{cursor:pointer}.yvp-content .yvp-main .yvp-docked-close-button{position:absolute;opacity:0;visibility:hidden;background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+YnV0dG9uLWNsb3NlPC90aXRsZT48ZGVmcz48ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImEiPjxmZU9mZnNldCBkeD0iMSIgZHk9IjEiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiLz48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIuNSIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjM1IDAiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSIvPjxmZU1lcmdlPjxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIi8+PGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+PC9mZU1lcmdlPjwvZmlsdGVyPjwvZGVmcz48cGF0aCBkPSJNMTIuMDI1IDEwLjYxTDYuNzE4IDUuMzAzYy0uMzg1LS4zODQtMS4wMi0uMzg2LTEuNDEuMDA0LS4zOTQuMzkzLS4zOTMgMS4wMjItLjAwNSAxLjQxbDUuMzA3IDUuMzA4LTUuMzA3IDUuMzA3Yy0uMzg0LjM4NC0uMzg2IDEuMDIuMDA0IDEuNDEuMzkzLjM5MyAxLjAyMi4zOTIgMS40MS4wMDRsNS4zMDgtNS4zMDcgNS4zMDcgNS4zMDZjLjM4NC4zODQgMS4wMi4zODcgMS40MS0uMDA0LjM5My0uMzkzLjM5Mi0xLjAyMi4wMDQtMS40MWwtNS4zMDctNS4zMDcgNS4zMDYtNS4zMDdjLjM4NC0uMzg1LjM4Ny0xLjAyLS4wMDQtMS40MS0uMzkzLS4zOTQtMS4wMjItLjM5My0xLjQxLS4wMDVsLTUuMzA3IDUuMzA3eiIgZmlsdGVyPSJ1cmwoI2EpIiBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=\");background-size:100%;background-color:transparent;z-index:32;width:24px;height:24px;background-repeat:no-repeat;background-position:50% 50%;border-radius:0;right:-3px;cursor:pointer}.yvp-content.yvp-state-fullscreen .yvp-main .yvp-mute-indicator{margin:0 15px 15px 0}.yvp-content.yvp-state-fullscreen .yvp-main .yvp-docked-close-button{visibility:hidden}.yvp-overlay-hide-cursor{position:absolute;display:block;z-index:30;cursor:none;top:0;right:0;bottom:0;left:0}.yvp-custom-controls{position:absolute;z-index:29;display:none;height:100%;width:100%}#Stencil .channel-applet-wrap.mode-embedtron .yvp-content{z-index:5}html[dir='rtl'] .yvp-settings-caret-icon.right{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg);left:0;right:2px}html[dir='rtl'] .yvp-settings-caret-icon.left{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}html[dir='rtl'] .yvp-cc-feedback-link{float:left}html[dir='rtl'] .yvp-cc-options-more .effects{margin-left:0;margin-right:90px}html[dir='rtl'] .yvp-cc-options-more .bgcolorpicker{margin-left:0;margin-right:65px}html[dir='rtl'] .yvp-cc-options-more .fontcolorpicker{margin-left:0;margin-right:65px}html[dir='rtl'] .yvp-cc-options-more .yvp-cc-style-preview{margin:40px 85px 20px 0}@-moz-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-webkit-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-o-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-ms-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-ms-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}"),
n.prototype.create=function(){var e,t=this,r={hideUponClick:!0},n=d.render(_,{strings:s.i18n});t._topBar=n.querySelector(".yvp-top-bar"),t._bottomBar=n.querySelector(".yvp-bottom-bar"),t._titleBar=n.querySelector(".yvp-playing-item-title"),t._customControls=n.querySelector(".yvp-custom-controls"),t._objectOverlay=n.querySelector(".yvp-object-overlay"),t._muteIndicator=n.querySelector(".yvp-mute-indicator"),t._dockedCloseButton=n.querySelector(".yvp-docked-close-button"),t._castOverlay=n.querySelector(".yvp-cast-overlay"),t._slider=t._bottomBar.querySelector(".yvp-slider"),t._timeDisplay=t._bottomBar.querySelector(".yvp-time-container"),t._settingBtn=t._bottomBar.querySelector(".yvp-setting-btn"),t._fullScreenBtn=t._bottomBar.querySelector(".yvp-fullscreen-btn"),t._ccBtn=t._bottomBar.querySelector(".yvp-cc-btn"),t._castBtn=t._bottomBar.querySelector(".yvp-chromecast-btn"),t._menuControls=t._bottomBar.querySelector(".yvp-menu-controls"),t._contentType=t._topBar.querySelector(".yvp-content-type"),e=new p(t._eventBus,t._model),t._settingsNode=e.create(),t._menuControls.parentNode.insertBefore(t._settingsNode,t._menuControls.nextSibling),t._menuLabelTooltip=new u(t._settingBtn,s.i18n.SETTINGS,r),t._sliderTap=new l(t._slider),t._onSliderTap=function(e){e.stopPropagation()},t._slider.addEventListener("tap",t._onSliderTap,t),t._fullScreenTooltip=new u(t._fullScreenBtn,s.i18n.FULLSCREEN_SPACE,r),t._ccTooltip=new u(t._ccBtn,s.i18n.CAPTIONS_AVAILABLE,r);var o=[t._bottomBar,t._topBar,t._titleBar,t._customControls,t._objectOverlay,t._muteIndicator];return i.chrome>=32&&!t._model.disableCasting?(o.push(t._castOverlay),t._castBtnTooltip=new u(t._castBtn,s.i18n.CHROMECAST,r)):(t._castOverlay.parentNode.removeChild(t._castOverlay),t._castOverlay=null,t._castBtn.parentNode.removeChild(t._castBtn),t._castBtn=null),t._bindEvents(),o},n.prototype._bindEvents=function(){var e=this;e._bindMuteIndicator(),e._bindCC(),e._settingBtn&&(e._settingTap=new l(e._settingBtn),e._onSettingTap=function(t){t.stopPropagation(),e._view.toggleSettings(e._settingBtn)},e._settingBtn.addEventListener("tap",e._onSettingTap),e._bottomBarTap=new l(e._bottomBar),e._onBottomBarTap=function(t){t.stopPropagation(),e._hideSettings()},e._bottomBar.addEventListener("tap",e._onBottomBarTap)),e._castBtn&&(e._castBtnTap=new l(e._castBtn),e._onCastBtnTap=function(t){t.stopPropagation();var r="ctrl-cast-"+(e._castBtn.connected?"stop":"start");e._eventBus.publish(a.API.UI_INTERACT,{srcElement:r})},e._castBtn.addEventListener("tap",e._onCastBtnTap),e._castOverlayContent=e._castOverlay.querySelector(".cast-overlay-content"),e._castOverlayTap=new l(e._castOverlayContent),e._onCastOverlayTap=function(t){t.stopPropagation(),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-cast-overlay"})},e._castOverlayContent.addEventListener("tap",e._onCastOverlayTap),e._castDisconnectBtn=e._castOverlay.querySelector(".cast-disconnect-btn"),e._castDisconnectBtnTap=new l(e._castDisconnectBtn),e._onCastDisconnectBtnTap=function(t){t.stopPropagation(),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-cast-disconnect"})},e._castDisconnectBtn.addEventListener("tap",e._onCastDisconnectBtnTap)),e._dockedCloseButton&&(e._dockedCloseButtonTap=new l(e._dockedCloseButton),e._onDockedCloseButtonTap=function(t){t.stopPropagation(),e._view.undockVideoPlayer(!0),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ui_pop_close_clk"})},e._dockedCloseButton.addEventListener("tap",e._onDockedCloseButtonTap)),e._handleKeyDown=function(t){var r=function(){t.preventDefault()};e._eventBus.publish(a.KEYDOWN,{keyCode:t.keyCode,shiftDown:t.shiftKey,ctrlDown:t.ctrlKey,altDown:t.altKey,target:t.target,preventDefault:r})},e._view.getContentNode().addEventListener("keydown",e._handleKeyDown,!1)},n.prototype._bindMuteIndicator=function(){var e,t=this;t._muteOnTimeout=function(r){r.stopPropagation(),e||(e=setTimeout(function(){t._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-off"}),e=null},600))},["mouseenter","touchstart"].forEach(function(e){t._muteIndicator.addEventListener(e,t._muteOnTimeout)}),["mousemove","touchmove"].forEach(function(e){t._muteIndicator.addEventListener(e,t._muteOnTimeout)})},n.prototype._onKeyDown=function(e){var t=this,r=t._model.playbackState.volume,n=t._view.getCurrentTime(),o=t._view.getDuration(),i=.05;switch(e.keyCode){case 13:t._eventBus.publish(a.TOGGLE_PLAY_PAUSE);break;case 27:t._view.updateViewOnEscPress();break;case 32:t._eventBus.publish(a.TOGGLE_PLAY_PAUSE);break;case 37:var s=n-5;t._isLive||t._eventBus.publish(a.CONTROLS_SEEKING,s>=0?s:0);break;case 38:var l=r+i;t._eventBus.publish(a.CONTROLS_SET_VOLUME,l>1?1:l);break;case 39:s=n+5,t._isLive||t._eventBus.publish(a.CONTROLS_SEEKING,o>=s?s:o);break;case 40:var c=r-i;t._eventBus.publish(a.CONTROLS_SET_VOLUME,0>c?0:c);break;case 67:t._eventBus.publish(a.CC.UI_TOGGLE,!d.classList(t._ccBtn).contains(m));break;case 70:t._view.toggleFullscreen();break;case 77:t._eventBus.publish(a.CONTROLS_SET_MUTE,!t._model.playbackState.mute);break;case 191:e.shiftDown&&t._view.toggleSettings()}if(e.keyCode>=48&&e.keyCode<=57){var p=(e.keyCode-48)/10;o>0&&t._eventBus.publish(a.CONTROLS_SEEKING,o*p)}},n.prototype._syncMatureIndicator=function(){var e=this;e._isMature&&(e._contentType.innerHTML=s.i18n.MATURE,e._contentType.setAttribute("aria-label",s.i18n.MATURE),d.classList(e._contentType).remove("hide"))},n.prototype._onMediaItemLoaded=function(e){var t=this,r=t._getCCButtonState();t._isLive=e.isLive(),t._liveState=e.liveState,t._isMature=e&&e.ageGate&&"none"!==e.ageGate,t._contentType.innerHTML="",t._contentType.setAttribute("aria-label",""),d.classList(t._contentType).add("hide"),t._isLive?t._setLiveMode():t._setVodMode(),t._setCCButtonsState(r)},n.prototype._bindCC=function(){var e=this;e._onCCButtonTap=function(t){if(t.stopPropagation(),e._ccAvailable){var r=d.classList(e._ccBtn).contains(m),n=!r,o=!(!e._model.castState||!e._model.castState.connected),i="cc-"+(n?"on":"off")+(o?"-cast":"");e._eventBus.publish(a.API.UI_INTERACT,{srcElement:i}),e._eventBus.publish(a.CC.UI_TOGGLE,n),e._setCCButtonsState(n)}},e._ccBtnTap=new l(e._ccBtn),e._ccBtn.addEventListener("tap",e._onCCButtonTap,e)},n.prototype._unBindCC=function(){var e=this;e._ccBtnTap&&e._ccBtn&&(e._ccBtnTap.destroy(),e._ccBtn.removeEventListener("tap",e._onCCButtonTap,e))},n.prototype._checkCCAvailability=function(){var e=this;e._ccAvailable=!1},n.prototype._setCCButtonsState=function(e){var t=this;e?(d.classList(t._ccBtn).add(m),t._updateCCTooltip(s.i18n.CAPTIONS_ON)):(d.classList(t._ccBtn).remove(m),t._updateCCTooltip(s.i18n.CAPTIONS_OFF)),t._ccAvailable||t._updateCCTooltip(s.i18n.CAPTIONS_NOT_AVAILABLE)},n.prototype._setCCUIAvailability=function(e){var t=this;t._ccAvailable=e,e?(d.classList(t._ccBtn).remove("hide"),t._updateCCTooltip(s.i18n.CAPTIONS_AVAILABLE)):(d.classList(t._ccBtn).add("hide"),t._updateCCTooltip(s.i18n.CAPTIONS_NOT_AVAILABLE))},n.prototype._getCCButtonState=function(){var e=this;return e._model.userPreferences&&e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.show},n.prototype._updateCCTooltip=function(e){var t=this,r=t._ccBtn.querySelector(".yvp-tooltip-content");r.innerHTML=e},n.prototype._setChromecastBtnVisibility=function(e){var t=this;t._castBtn.style.display=e?"":"none"},n.prototype._onCastConnectionChange=function(e,t){var r=this,n=r._castOverlay&&r._castOverlay.querySelector(".cast-device-name");if(n&&e){var o=t.receiverName;n.innerHTML=d.strSubstitute(s.i18n.CAST_PLAYING_RECEIVER,{"device-name":o})}r._castBtn&&(r._castBtn.connected=e,r._castBtn.setAttribute("data-connected",e),r._castBtnTooltip.setText(e?s.i18n.DISCONNECT:s.i18n.CHROMECAST))},n.prototype._onAdPlaying=function(){var e=this;e._setAdMode()},n.prototype._onVideoPlaying=function(){var e=this;e._isLive?e._setLiveMode():e._setVodMode()},n.prototype._onCastMediaLoaded=function(e,t){var r=this;if(r._castOverlay){var n=t?t.thumbnail:"";r._castOverlay.style.backgroundImage="url("+n+")"}},n.prototype._onCastCCAvailabilityChanged=function(e){var t=this;t._setCCUIAvailability(e)},n.prototype._updateAdBreaks=function(e){var t=this;if(t._adBreaks=e,t._duration){for(var r=t._slider.querySelectorAll(".yvp-ad-break"),n=0;n<r.length;n++)t._slider.removeChild(r[n]);e&&e.forEach(function(e){var r=document.createElement("div");d.classList(r).add("yvp-ad-break"),e.occurred&&d.classList(r).add("occurred"),r.style.left=e.time/t._duration*100+"%",t._slider.appendChild(r)})}},n.prototype._onPlaybackProgress=function(e,t,r,n){var o=this;c.isNumber(r)&&o._duration!==r&&(o._duration=r,o._updateAdBreaks(o._adBreaks))},n.prototype._onAdPlaybackProgress=function(e,t,r,n){var o=this;if(c.isNumber(t)&&c.isNumber(r)&&o._countdownTimeIndicator){var i=Math.round(r-t);if(i>0){var a=i>1?s.i18n.NUM_SECONDS:s.i18n.NUM_SECOND;o._countdownTimeIndicator.innerHTML=d.strSubstitute(a,{"num-seconds":i})}else o._countdownTimeIndicator.innerHTML=""}},n.prototype._updateAdCount=function(e,t){var r=this,n=r._model.YVAP,o=n&&n.standaloneAd&&(n.standaloneAd.xml||n.standaloneAd.gemini);(!o||"undefined"!=typeof n.standaloneAd.showAdSlug&&n.standaloneAd.showAdSlug)&&(r._countIndicatorContainer||(r._countIndicatorContainer=document.createElement("div"),d.classList(r._countIndicatorContainer).add("yvp-ad-count-container"),r._topBar.appendChild(r._countIndicatorContainer)),r._countIndicator||(r._countIndicator=document.createElement("div"),d.classList(r._countIndicator).add("yvp-ad-count"),r._countIndicatorContainer.appendChild(r._countIndicator)),r._countdownTimeIndicator||(r._countdownTimeIndicator=document.createElement("div"),d.classList(r._countdownTimeIndicator).add("yvp-ad-countdowntimer"),r._countIndicatorContainer.appendChild(r._countdownTimeIndicator)),r._countIndicator.innerHTML=s.i18n.ADV_SHORT,!c.isNullOrUndefined(e)&&!c.isNullOrUndefined(t)&&t>1&&(r._countIndicator.innerHTML+=" "+e+" of "+t),d.classList(r._contentType).add("hide"))},n.prototype._onPlaybackStarted=function(){var e=this;e._bindProviderLogo()},n.prototype._setAdMode=function(){var e=this;d.classList(e._slider).add("yvp-disable"),d.classList(e._contentType).add("hide"),d.classList(e._timeDisplay).add("yvp-hide")},n.prototype._setLiveMode=function(){var e=this;d.classList(e._slider).add("yvp-disable"),d.classList(e._timeDisplay).add("yvp-hide");var t=e._model.ui.contentTypeLabel;c.isString(t)&&""!==t?(e._contentType.innerHTML=t,e._contentType.setAttribute("aria-label",t),d.classList(e._contentType).remove("hide")):e._liveState&&"live"===e._liveState&&(e._contentType.innerHTML=s.i18n.LIVE,e._contentType.setAttribute("aria-label",s.i18n.LIVE),d.classList(e._contentType).remove("hide"))},n.prototype._setVodMode=function(){var e=this;d.classList(e._slider).remove("yvp-disable"),d.classList(e._timeDisplay).remove("yvp-hide"),e._syncMatureIndicator()},n.prototype._bindProviderLogo=function(){var e=this,t=e._topBar.querySelector(".yvp-provider-logo"),r=e._model.playlist.getCurrentItem(),n=r.provider.providerLogoUrl,o=r.shareUrl;n?(d.classList(t).remove("yvp-hide"),t.style.backgroundImage="url("+n+")",t.setAttribute("href",o)):d.classList(t).add("yvp-hide")},n.prototype._onControlsBarChange=function(e,t){var r=this,n=r._settingsNode&&d.classList(r._settingsNode).contains("open"),o=n&&r._bottomBar.querySelector(".yvp-settings-container:hover");t&&n&&e===!1&&!o&&r.resetSettings();var i=!(!r._bottomBar.querySelector(":hover")&&r._bottomBar.parentNode.querySelector(":hover")!==r._bottomBar);if(t&&r._ccAvailable&&!i){var s=r._view.getFullscreen();s||r._eventBus.publish(a.CC.POSITION_FLOAT,e)}},n.prototype._onVideoClick=function(){var e=this;e._hideSettings()},n.prototype._hideSettings=function(){var e=this,t=d.classList(e._view.getContentNode()).contains("yvp-settings-on");t&&e.resetSettings()},n.prototype.resetSettings=function(){var e=this,t=e._settingsNode.querySelector(".yvp-main-settings"),r=e._settingsNode.querySelector(".yvp-cc-options-main"),n=e._settingsNode.querySelector(".yvp-cc-options-more");e._view.toggleSettings(e._settingBtn,!1),d.classList(t).add("open"),d.classList(t).remove("close"),d.classList(r).add("close"),d.classList(r).remove("open"),d.classList(n).add("close"),d.classList(n).remove("open")},n.prototype._unBindMuteIndicator=function(){var e=this;["mouseenter","touchstart"].forEach(function(t){e._muteIndicator.removeEventListener(t,e._muteOnTimeout)}),["mousemove","touchmove"].forEach(function(t){e._muteIndicator.removeEventListener(t,e._muteOnTimeout)})},n.prototype.syncAriaState=function(){},n.prototype.destroy=function(){var e=this;e._view.getContentNode().removeEventListener("keydown",e._handleKeyDown,!1),e._sliderTap&&e._slider&&(e._sliderTap.destroy(),e._slider.removeEventListener("tap",e._onSliderTap)),e._settingTap&&e._settingBtn&&(e._settingTap.destroy(),e._settingBtn.removeEventListener("tap",e._onSettingTap),e._menuLabelTooltip.destroy()),e._castBtnTap&&e._castBtn&&(e._castBtnTap.destroy(),e._castBtn.removeEventListener("tap",e._onCastBtnTap),e._castBtnTooltip&&(e._castBtnTooltip.destroy(),e._castBtnTooltip=null)),e._castOverlay&&(e._castOverlayTap&&(e._castOverlayTap.destroy(),e._castOverlayContent.removeEventListener("tap",e._onCastOverlayTap)),e._castDisconnectBtnTap&&(e._castDisconnectBtnTap.destroy(),e._castDisconnectBtn.removeEventListener("tap",e._onCastDisconnectBtnTap))),e._bottomBarTap&&e._bottomBar&&(e._bottomBarTap.destroy(),e._bottomBar.removeEventListener("tap",e._onBottomBarTap)),e._unBindCC(),e._fullScreenTooltip.destroy(),e._ccTooltip.destroy(),e._unBindMuteIndicator(),e.node=null}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../cc":"zKzgQw","../error":22,"../event":"YJm+dH","../stream":"Af6MnA","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../views/uiwidgets/tooltip":104,"./settings":97,"./yahoo-controls.html":105,fs:164,"insert-css":166}],107:[function(e,t,r){"use strict";function n(e,t){var r=this;r._eventBus=e,r._eventBus.subscribe(i.MEDIA_ITEM_LOADED,r._onMediaItemLoaded,r),r._eventBus.subscribe(i.PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(i.PLAYBACK_RESUMED,r._onPlaybackResumed,r),r._model=t;var n=t.ui.vttIndex;n>=1&&s>=n&&(l=n),r._vttPlaylistURL="",r._language="",r._vttList=[],r._resumed=!1,r._endReached=!1}t.exports=n;var o=e("xhr"),i=e("./event"),a=(e("../../lib/logger"),2),s=10,l=3;n.prototype._onMediaItemLoaded=function(e){var t=this;if(e.isLive()&&e&&e.streams&&e.streams[0]&&e.streams[0].url){var r=e.streams[0].url;t._urlPrefix=r.substring(0,r.lastIndexOf("/"));var n={url:r};o(n,function(e,r,n){if(!e){var o="#EXTM3U";if(-1!==n.indexOf(o)){for(var a,s=/#*BANDWIDTH=([0-9]+)/g,l=[];null!==(a=s.exec(n));)l.push(a[1]);l&&t._eventBus.publish(i.CTV.GET_BITRATE_FOR_OPSS,l);var d=n.match(/TYPE=SUBTITLES.+URI=['|"](.+?)['|"]/);if(d){var c=d[0].match(/LANGUAGE=['|"](.+?)['|"]/);if(!c)return;t._language=c[1],t._vttPlaylistURL=t._completeURL(d[1]),0===t._vttPlaylistURL.indexOf("http")&&(t._urlPrefix=t._vttPlaylistURL.substring(0,t._vttPlaylistURL.lastIndexOf("/")))}}}})}},n.prototype._onPlaybackProgress=function(e,t){var r=this;if(!r._endReached&&r._vttPlaylistURL)return r._lastTime||0===r._lastTime?r._resumed?(r._resumed=!1,r._lastTime=t,r._vttList=[],void r._updateVttList()):void(t-r._lastTime>=a&&(r._lastTime+=a,r._updateVttList())):(r._lastTime=t,void r._updateVttList())},n.prototype._onPlaybackResumed=function(){var e=this;e._resumed=!0},n.prototype._updateVttList=function(){var e=this;if(e._vttPlaylistURL){var t={url:e._vttPlaylistURL};o(t,function(t,r,n){if(!t){var o=n.match(/#EXT-X-MEDIA-SEQUENCE:(.+)/);if(o)var i=Number(o[1]);if(0===e._vttList.length)e._addVttDataToList(n,i);else{var a=n.lastIndexOf("#EXTINF:"),s=n.match(/#EXTINF:/g).length,l=n.substring(a);e._addVttDataToList(l,i+s-1)}e._endReached=n.indexOf("#EXT-X-ENDLIST")>-1}})}},n.prototype._addVttDataToList=function(e,t){for(var r=this,n=/\r\n|\r|\n/,o=e.split(n),i="",a=0,l=0;l<o.length;l++){var d=o[l].match(/#EXT-X-PROGRAM-DATE-TIME:(.+)/);if(d)i=d[1];else{var c=o[l].match(/#EXTINF:(.+),/);if(c)a=c[1];else if(o[l]&&"#"!==o[l].charAt(0)){var p=r._vttList[r._vttList.length-1];if(p&&o[l]===p.url)return;var u={};u.url=o[l],u.seqNum=t++,i&&(u.dateTime=i),a&&(u.duration=a),r._language&&(u.language=r._language),r._vttList.push(u),r._vttList.length>s&&r._vttList.shift(),r._sendVttEvent()}}}},n.prototype._sendVttEvent=function(){var e=this,t=e._vttList[e._vttList.length-l];if(t){var r={url:e._completeURL(t.url)};o(r,function(r,n,o){if(!r){var a={};a.mpegTSTime=0,a.localCueTime=0,a.clockReference=0,a.data=o,e._eventBus.publish(i.VTT_SEGMENT_LOADED,a,!0,l,e._completeURL(t.url))}})}},n.prototype._completeURL=function(e){var t=this;return 0===e.indexOf("http")?e:"/"===e.charAt(0)?t._urlPrefix+e:t._urlPrefix+"/"+e}},{"../../lib/logger":"IS9j5T","./event":"YJm+dH",xhr:230}],108:[function(e,t,r){"use strict";function n(e,t,r,i,a,s,l){var d=this;d.playbackId=e,d.pos=n.AD_ORDER[t]||"",d.position=t||"",d.adId=s||"",d.streams=r||[],d.clickUrl=i||"http://screen.yahoo.com/",d.type=a||n.ADTYPES.NO_AD,d.duration=l||o.DEFAULT_AD_DURATION}t.exports=n;var o=e("./common/Constants");n.AD_ORDER={bumper:"start1",preroll:"start0",postroll:"end",midroll:"immediate"},n.POSITION={bumper:"start0",preroll:"start1",postroll:"end",midroll:"immediate"},n.ADTYPES={NORMAL:o.AD,NO_AD:o.NOAD,VPAID:o.VPAID}},{"./common/Constants":116}],109:[function(e,t,r){"use strict";function n(){var e=this;e.priorityList=[],e.communicatorAllocation={},e.settingMap=null,e.communicatorIdNameMap={},e.algoId=null,e.propertyId="",e.disableFallback=!1}t.exports=n;var o=e("./CommunicatorSpec");n.prototype._canService=function(e,t){for(var r=t&&t.length,n=0;n<t.length;n++)r=r&&e.indexOf(t[n])>-1;return r},n.prototype.pickCommunicator=function(e){var t,r,n=this,i=0,a=null,s=null;if(e){for(t in n.communicatorAllocation)n.communicatorAllocation.hasOwnProperty(t)&&n.communicatorAllocation[t]>i&&(i=n.communicatorAllocation[t],a=t);a&&(r=n.settingMap["NETWORK."+a+".adTypes"].split(","),n._canService(r,e.actionValues)&&(s=new o,s.communicatorId=a,s.communicatorName=n.communicatorIdNameMap[a],s.isFallback=!1,s.propertyMap=n.settingMap,s.propertyId=n.propertyId))}return s},n.prototype.pickFallbackCommunicator=function(e){var t,r,n=this,i=0,a=null;if(!n.disableFallback&&e){for(r=e.communicatorId,i=0;i<n.priorityList.length&&n.priorityList[i]!==r;i++);t=n.priorityList[i+1],t&&(a=new o,a.communicatorId=t,a.communicatorName=n.communicatorIdNameMap[t],a.isFallback=!0,a.propertyMap=n.settingMap,a.propertyId=n.propertyId)}return a},n.prototype.pickPossibleCommunicators=function(e){var t,r=this,n=[];for(t=r.pickCommunicator(e);t;)n.push(t),t=r.pickFallbackCommunicator(t);return n}},{"./CommunicatorSpec":111}],110:[function(e,t,r){"use strict";var n=e("./Allocation"),o=e("../../../../lib");r.understandAllocation=function(e){if(!e)return null;var t=e.Settings||{},r=e.AllocationModule||{},i=e.NetworkModules;o.isArray(i)||(i=[i.NetworkModule]);var a,s,l,d,c,p,u={},_=null;for(d=0;d<t.length;d++)l=t[d],c=l["@name"],p=l["@value"],u[c]=p;var m=u["SELECTOR.ID"],v="true"===u["SELECTOR."+m+".disablePriorityFallback"],y=u["SYSTEM.PID"];for(d=0;d<r.length;d++)a=r[d],a["@id"]===m&&a["@uri"].indexOf("PercentageAllocationManager")&&(_=new n,_.algoId=m,_.disableFallback=v,_.propertyId=y);if(_){var f,g,b={};for(d=0;d<i.length;d++)s=i[d],f=s["@id"],g=s["@name"],b[f]=g;_.communicatorIdNameMap=b;var A,E,h,T;for(A in b)b.hasOwnProperty(A)&&(T="SELECTOR."+m+".NETWORK."+A,E=parseInt(u[T],10),h=parseInt(u[T+".priority"],10),_.priorityList[h]=A,_.communicatorAllocation[A]=E);_.settingMap=u}return _}},{"../../../../lib":"bRhrlU","./Allocation":109}],111:[function(e,t,r){"use strict";function n(){var e=this;e.propertyMap={},e.communicatorId=null,e.communicatorName=null,e.isFallback=!1,e.propertyId=""}t.exports=n,n.prototype.getSetting=function(e){var t=this;return t.propertyMap["NETWORK."+t.communicatorId+"."+e]}},{}],112:[function(e,t,r){"use strict";function n(){var e=this;i.call(e)}t.exports=n;var o=e("../../util"),i=e("./Allocation"),a=e("../common/Constants"),s=e("./CommunicatorSpec");o.inherits(n,i),n.prototype.pickCommunicator=function(e){var t=null;return e&&(t=new s,t.communicatorName=a.REFRESH),t}},{"../../util":"jJTEqU","../common/Constants":116,"./Allocation":109,"./CommunicatorSpec":111}],113:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n.timestamp=(new Date).getTime(),n.payload=t,n.key=e,n.cacheIdentifier=r}t.exports=n},{}],114:[function(e,t,r){"use strict";function n(e){var t=this;t._yvapBus=e,s.call(t,"cachemanager-bus"),t._IDENTIFIER="adCache"+Math.floor(100*Math.random())+(new Date).getTime(),t._ruleCache={},t._allocationCache={},t._playerDataCache={},t._cuePointsCache={},t._adCache={},t._adEngine=new o,t._positionsToPrefetch=[c.BUMPER,c.PREROLL,c.POSTROLL],t._midrollsCuePoints={}}t.exports=n;var o=e("../engine/AdEngine"),i=e("../communicator/CommunicatorFactory"),a=e("../../util"),s=e("../../../../lib/event-bus"),l=e("./CacheEntry"),d=e("../common/Events"),c=e("../common/Constants"),p=e("../../../../lib/user-agent");a.inherits(n,s);var u=12e5,_=10;n.prototype.prefetchCompleteHandler=function(e,t,r){var n=this;n._yvapBus.publish(d.AD_CALL_END,r,e),n.addAdResponseForKey(e,t)},n.prototype.prefetchFailureHandler=function(e,t,r,n){var o,i=this;o=e.adSpec,i._yvapBus.publish(d.AD_CALL_END,r,e),e&&e.setNewRedirectUrl&&(e.adCallSequence=o.adCallSequence,e.errorState=n,i.addAdResponseForKey(e,t))},n.prototype.updateAdCache=function(e,t){var r,n,o,a,s,l,p,u,_,m,v=this,y=v.getRuleForClipId(t),f=v.getAllocationForClipId(t),g=v.getPlayerDataForClipId(t),b={},A="",E="-1";e=e||[];for(var h=0;h<e.length;h++)r=e[h],n=r.adXML,o=r.key,A=o.adSystem||"",E=o.brId||"-1",p=o.pos,a=o.network,p&&n&&(a===c.MME||a===c.BRX)&&("BMPR"===p?p=c.BUMPER:"VID"===p&&(p=c.PREROLL),b[p]=n);if(y&&f&&g)for(h=0;h<v._positionsToPrefetch.length;h++){p=v._positionsToPrefetch[h],u=v._adEngine.preEvaluate(p,y);for(var T=0;T<u.length;T++){_=u[T],m=f.pickPossibleCommunicators(_);for(var S=0;S<m.length;S++)if(l=m[S],s=i.getCommunicatorUsingSpec(l),s&&s.allowPrefetch(b[p]))if(s.subscribe(d.AD_READY,v.prefetchCompleteHandler,v),s.subscribe(d.AD_FAILURE,v.prefetchFailureHandler,v),v._yvapBus.publish(d.AD_CALL_START,s),b[p]){var I=b[p];s.prefetchAd(I,_,g,A,E)}else s.getNewAd(_,g)}}},n.prototype.getAd=function(e,t,r){var n=this,o=null;if(e&&t&&r){var a=n.getPlayerDataForClipId(e),s=i.getCommunicatorUsingSpec(t);if(s){var l=s.getKey(r,a);o=n.getAdResponseForKey(l),o||n.getNewAd(s,r,a)}}return o},n.prototype.getNewAd=function(e,t,r){var n=this;e&&(e.subscribe(d.AD_READY,n.prefetchCompleteHandler,n),e.subscribe(d.AD_FAILURE,n.prefetchFailureHandler,n),n._yvapBus.publish(d.AD_CALL_START,e),e.getNewAd(t,r))},n.prototype.isMyOwn=function(e){var t=this;return e&&e.cacheIdentifier===t._IDENTIFIER},n.prototype.hasEntryExpired=function(e){return e&&(new Date).getTime()-e.timestamp>=u},n.prototype.hasBucketExpired=function(e){return e&&(new Date).getTime()-e.timestamp>=u},n.prototype._sortAscendingByTimeStamp=function(e,t){return e.timestamp>t.timestamp},n.prototype._cleanExpiredEntries=function(e){for(var t,r=this,n=[],o=0;o<e.length;o++)t=e[o],r.hasEntryExpired(t)||n.push(t);return n},n.prototype.sync=function(){var e,t,r,n,o,i,s=this,l=[],d=0;for(e in s._adCache)if(s._adCache.hasOwnProperty(e)){if(t=s._adCache[e]||[],l=s._cleanExpiredEntries(t),l.length>0&&!p.tv){for(o=a.localStorage.get(e),i=[],o&&(s.hasBucketExpired(o)?a.localStorage.remove(e):i=o.bucket||[]),i=s._cleanExpiredEntries(i),d=i.length,r=0;_-d>r;r++)n=l.shift(),n&&i.push(n);if(i.length>0){if(o={},o.bucket=i,o.timestamp=(new Date).getTime(),!a.localStorage.put(e,o)){for(d=l.length,r=0;_-d>r;r++)n=i.shift(),n&&!s.hasEntryExpired(n)&&l.push(n);a.localStorage.remove(e)}}else a.localStorage.remove(e)}s._adCache[e]=l}},n.prototype.addAdResponseForKey=function(e,t){var r=this,n=new l(t,e,r._IDENTIFIER),o=r._adCache[t]||[];o.push(n),r._adCache[t]=o,e.isCached=!0,r._yvapBus.publish(d.CACHE_UPDATE,t,e)},n.prototype.getAdResponseForKey=function(e){var t,r,n,o,i=this,s=null;for(r=i._adCache[e]||[],o=0;o<r.length;o++)if(t=r[o],!i.hasEntryExpired(t)){r.splice(o,1);break}if(t)s=t.payload;else if(n=a.localStorage.get(e)){for(i.hasBucketExpired(n)?(a.localStorage.remove(e),r=[]):r=n.bucket||[],o=0;o<r.length;o++)if(t=r[o],!i.hasEntryExpired(t)){r.splice(o,1);break}r.length>0?(n.bucket=r,n.timestamp=(new Date).getTime(),a.localStorage.put(e,n)):a.localStorage.remove(e)}return t&&(s=t.payload,s.cacheState=i.isMyOwn(t)?"l0":"l1"),s},n.prototype.addRuleForClipId=function(e,t){var r=this;e&&t&&(r._ruleCache[t]=e)},n.prototype.getRuleForClipId=function(e){var t=this;return t._ruleCache[e]},n.prototype.addAllocationForClipId=function(e,t){var r=this;e&&t&&(r._allocationCache[t]=e)},n.prototype.getAllocationForClipId=function(e){var t=this;return t._allocationCache[e]},n.prototype.addPlayerDataForClipId=function(e,t){var r=this;e&&t&&(r._playerDataCache[t]=e)},n.prototype.getPlayerDataForClipId=function(e){var t=this;return t._playerDataCache[e]},n.prototype.addCuePointsForClipId=function(e,t){var r=this;e&&t&&(r._midrollsCuePoints[t]=e)},n.prototype.getCuePointsForClipId=function(e){var t=this;return t._midrollsCuePoints[e]}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../common/Constants":116,"../common/Events":119,"../communicator/CommunicatorFactory":126,"../engine/AdEngine":146,"./CacheEntry":113}],115:[function(e,t,r){"use strict";function n(e){var t=this;s.call(t,e),t._vmapObjMap={}}t.exports=n;var o=e("../communicator/CommunicatorFactory"),i=e("../common/Events"),a=e("../../util"),s=(e("../../../../lib/logger"),e("./CacheManager")),l=e("xhr");a.inherits(n,s),n.prototype.updateAdCache=function(e,t){var r=this;e&&t&&(r._vmapObjMap[t]=e)},n.prototype.getAd=function(e,t,r){var n=this,a=null;if(e&&t&&r){var s=n._vmapObjMap[e],l=s.adBreakMap,d=r.type;if(l.hasOwnProperty(d)){var c=l[d],p=o.getCommunicatorUsingSpec(t),u=n.getPlayerDataForClipId(e);if(p&&(p.subscribe(i.AD_READY,n.prefetchCompleteHandler,n),p.subscribe(i.AD_FAILURE,n.prefetchFailureHandler,n),n._yvapBus.publish(i.AD_CALL_START,p),c)){p.prefetchAd(c,r,u);var _=p.getKey(r,u);a=n.getAdResponseForKey(_)}}}return a},n.prototype.getNewAd=function(e,t,r,n){var o=this;e&&(e.subscribe(i.AD_READY,o.prefetchCompleteHandler,o),e.subscribe(i.AD_FAILURE,o.prefetchFailureHandler,o),o._yvapBus.publish(i.AD_CALL_START,e),e.getNewAd(t,r,n))},n.prototype.getMidrollAdTagUri=function(e,t,r){var n,o=this;if(o._vmapObjMap&&o._vmapObjMap.hasOwnProperty(t)){var i=o._vmapObjMap[t].adBreakMap;if(i.hasOwnProperty(r)){var a=i[r],s=a.adSources||[],l=s[0];e.mediation=a.mediation||0,l&&(e.adCallSequence=l.sequence||1,e.adNetwork=l.network||"",l.vastAdData&&(n=l.vastAdData[0].redirectUrl||""),n||(n=l.adTagURI||""))}}return n},n.prototype.getNewIceBreakerResponseVMAPXml=function(e,t){try{var r={url:e,method:"GET",sync:!1};l(r,function(e,r,n){e||t(n)})}catch(n){}}},{"../../../../lib/logger":"IS9j5T","../../util":"jJTEqU","../common/Events":119,"../communicator/CommunicatorFactory":126,"./CacheManager":114,xhr:230}],116:[function(e,t,r){"use strict";r.MARKETING_AD_BREAK=3,r.DEFAULT_VPAID_TIMEOUT=5,r.AD_CACHE_EXPTIME=12e5,r.HTTP="http://",r.HTTPS="https://",r.SSL="https:",r.HTML="html",r.PROGRESSIVE="progressive",r.AD="ad",r.NOAD="noad",r.VPAID="vpaid",r.OVERLAY="overlay",r.VPAID_FLASH_FORMAT="application/x-shockwave-flash",r.VPAID_JS_FORMAT="application/javascript",r.STANDALONE_GEMINI_BRX="standalone_gemini_brx",r.STANDALONE_GEMINI_NATIVE="standalone_gemini_native",r.STANDALONE_BRXD="standalone_brxd",r.STATIC_RESORUCE="static",r.IFRAME_RESORUCE="iframe",r.HTML_RESORUCE="html",r.OVERLAY_IMAGE="image/jpeg",r.OVERLAY_VPAID="application/x-shockwave-flash",r.BUMPER="bumper",r.PREROLL="preroll",r.POSTROLL="postroll",r.NON_LINEAR="overlay",r.MIDROLL="midroll",r.CLIP_START="clip-start",r.CLIP_END="clip-end",r.COMPANION="companion",r.RULES_MISSING="rules-missing",r.CLIP_DATA_MISSING="clip-data-missing",r.CACHE_L0="l0",r.CACHE_L1="l1",r.CACHE_L2="l2",r.MME="MME",r.FREEWHEEL="FREEWHEEL_VAST",r.CBS="CBS",r.DFP="DFP",r.PREVIEW="PREVIEW",r.YAXv="YAXv",r.BRX="BRX",r.REFRESH="REFRESH",r.NFL_FREE_TIME=240,r.NFL_SESSION_TIME=14400,r.NFL_PREROLL="NFL_Preroll",r.NFL_ONLOAD="NFL_onLoad",r.NFL_NOW_LMSID="a0Vd0000003unOyEAI",r.NFL_SESSION_COOKIE="rvl_NFL",r.YVAP_INFO_AD_BREAKS="adBreaks",r.MAX_VOD_ADS_MIDROLL=4,r.MIDROLL_DEFAULT_ADS_PER_BREAK=4,r.MIDROLL_PREFETCH_MAX_RETRY=2,r.MIDROLL_PREFETCH_TIMER=18e5,r.DEFAULT_AD_DURATION=30,r.VIEWABILITY_ON=!0,r.ADBLOCKER=!1,r.INTERNAL_POLLING_INTERVAL=200,r.TIME_FOR_VIEWABLE_IMPRESSION=2e3,r.VIEWABILITY_THRESHOLD=.5,r.VIEWABILITY_MEASURABLE=1,r.VIEWABILITY_NOT_MEASURABLE_IFRAME=2,r.VIEWABILITY_NOT_MEASURABLE_NO_DARLA=3,r.PLAYER_AUTO_PLAY_ON=1,r.PLAYER_AUTO_PLAY_OFF=2,r.PLAYER_SOUND_ON=1,r.PLAYER_SOUND_OFF=2,r.PLAYER_IN_BANNER=1,r.PLAYER_NOT_IN_BANNER=2,r.PLAYER_LOCATION_ABOVE_THE_FOLD=1,r.PLAYER_LOCATION_BELOW_THE_FOLD=2,r.VIEWABILITY_VISIBLE=1,r.VIEWABILITY_NOT_VISIBLE=2,r.VIEWABILITY_NOT_MEASURABLE=3,r.PLAYER_FULLSCREEN_OFF=0,r.PLAYER_FULLSCREEN_ON=1,r.UNKNOWN=3,r.VIEWABILITY_RULE_TYPE="t",r.VIEWABILITY_RULE_MIN_DURATION="d",r.VIEWABILITY_RULE_CONSECUTIVE_PLAYBACK="c",r.VIEWABILITY_RULE_MIN_PIXELS="p",r.VIEWABILITY_RULE_AUDIO="a",r.STATUS_INITIALIZATION=0,r.STATUS_SWF_LOADED=1,r.STATUS_AD_INITED=2,r.VIDEO_START="VIDEO_START",r.VIDEO_QUARTILE_25="VIDEO_QUARTILE_25",r.VIDEO_QUARTILE_50="VIDEO_QUARTILE_50",r.VIDEO_QUARTILE_75="VIDEO_QUARTILE_75",r.VIDEO_QUARTILE_100="VIDEO_QUARTILE_100",r.VIDEO_VIEW="VIDEO_VIEW",r.VIDEO_VIEW_3P="VIDEO_VIEW_3P"},{}],117:[function(e,t,r){"use strict";function n(){var e=i.getCookie("yvapF");return e?JSON.parse(e):{}}function o(e){var t=JSON.stringify(e);i.setCookie("yvapF",t,{expires:new Date(Date.now()+1e5),path:"/",session:!0})}var i=e("../../util");r.getTotalClipCount=function(){var e=n(),t=e.cc;return t?t:0},r.incrementTotalClipCount=function(){var e=n(),t=e.cc;t=t?t+1:1,e.cc=t,o(e)},r.resetTotalClipCount=function(){var e=n();e.cc=0,o(e)},r.getRecentClipCount=function(){var e=n(),t=e.rcc||0;return t},r.incrementRecentClipCount=function(){var e=n();e.rcc=(e.rcc||0)+1,o(e)},r.resetRecentClipCount=function(){var e=n();e.rcc=0,o(e)},r.getTotalVideoLength=function(){var e=n(),t=e.vl||0;return t},r.incrementTotalVideoLength=function(e){var t=n(),r=e||1;t.vl=(t.vl||0)+r,o(t)},r.resetTotalVideoLength=function(){var e=n();e.vl=0,o(e)},r.getRecentVideoLength=function(){var e=n(),t=e.rvl||0;return t},r.incrementRecentVideoLength=function(e){var t=n(),r=e||1;t.rvl=(t.rvl||0)+r,o(t)},r.incrementNFLVideoLength=function(e){var t=n(),r=e||1;t.rvl_NFL=(t.rvl_NFL||0)+r,o(t)},r.getNFLVideoLength=function(e){var t=n(),r=t.rvl_NFL||0;return r},r.resetRecentVideoLengthNFL=function(){var e=n();e.rvl_NFL=0,o(e)},r.createNFLSession=function(){var e=n();(0===parseInt(e.session_NFL,10)||isNaN(parseInt(e.session_NFL,10)))&&(e.session_NFL=(new Date).getTime()/1e3,o(e))},r.resetNFLSession=function(){var e=n();e.session_NFL=0,o(e)},r.getNFLSession=function(){var e=n(),t=e.session_NFL||0;return t},r.resetRecentVideoLength=function(){var e=n();e.rvl=0,o(e)},r.getAdLength=function(){var e=n(),t=e.al||0;return t},r.incrementAdLength=function(e){var t=n(),r=e||1;t.al=(t.al||0)+r,o(t)},r.resetAdLength=function(){var e=n();e.al=0,o(e)},r.getAdCount=function(){var e=n(),t=e.ac||0;return t},r.incrementAdCount=function(){var e=n();e.ac=(e.ac||0)+1,o(e)},r.resetAdCount=function(){var e=n();e.ac=0,o(e)}},{"../../util":"jJTEqU"}],118:[function(e,t,r){"use strict";r.AD_CALL_TIMEOUT="ERR_AD_CALL_TIMEOUT",r.XML_PARSING="ERR_XML_PARSING",r.RESPONSE_GENERIC="ERR_RESPONSE_GENERIC",r.EMPTY_RESPONSE="ERR_EMPTY_RESPONSE",r.NO_PARSER="ERR_NO_PARSER",r.MISSING_ADTGT="ERR_MISSING_ADTGT",r.REQUEST_GENERIC="ERR_REQUEST_GENERIC",r.INCOMPATIBLE_MEDIA="ERR_INCOMPATIBLE_MEDIA",r.MEDIA_PLAYBACK="ERR_MEDIA_PLAYBACK",r.PLAYER_TIMEOUT="PLAYER_TIMEOUT",r.GENERIC="ERR_GENERIC",
r.VPAID_TIMEOUT="ERR_VPAID_TIMEOUT",r.THIRD_PARTY_NO_AD="THIRD_PARTY_NO_AD",r.SSL_MISMATCH="SSL_MISMATCH",r.MISSING_SPACEID="MISSING_SPACEID",r.ADBLOCKER="ADBLOCKER",r.VPAID_SWF_DOWNLOAD_ERROR="ERR_VPAID_SWF_DOWNLOAD_ERROR",r.BRX_WITHOUT_FLASH="ERR_BRX_WITHOUT_FLASH"},{}],119:[function(e,t,r){"use strict";r.AD_READY="ad-ready",r.AD_FAILURE="ad-failure",r.CACHE_UPDATE="cache-update",r.CACHE_REFRESH_REQUEST="cache-refresh-request",r.AD_METRIC="ad-metric",r.BEGIN_AD_EXP="begin-ad-experience",r.AD_OPPORTUNITY="ad-opportunity",r.NULL_AD_OPPORTUNITY="null-ad-opportunity",r.AD_CALL_START="ad-call-start",r.AD_CALL_END="ad-call-end",r.AD_REQUESTED="ad-requested",r.AD_SUBMITTED="ad-submitted",r.AD_DELIVERED="ad-delivered",r.AD_DELIVERY_ERROR="ad-delivery-error",r.VIDEO_START="video-start",r.VIDEO_END="video-end",r.AD_PAUSED="ad-paused",r.AD_RESUMED="ad-resumed",r.AD_STOPPED="ad-stopped",r.AD_STARTED="ad-started",r.AD_INITED="ad-inited",r.AD_INIT_ERROR="ad-init-error",r.PLAYER_FULLSCREEN="player-fullscreen",r.VPAID_AD_RENDERED="vpaid-ad-rendered",r.VPAID_AD_STARTED="vpaid-ad-started",r.VPAID_AD_QUARTILE="vpaid-ad-quartile",r.ADBREAK_START="adbreak-start",r.MIDROLL_START="midroll_start",r.AD_BREAK_ENDED="ad-break-ended",r.AD_BREAK_SUBMITTED="ad-break-sumbitted",r.MIDROLL_CACHE_UPDATE="midroll-cache-update",r.VPAID_SWF_LOAD_START="vpaid-swf-load-start",r.VPAID_SWF_LOAD_END="vpaid-swf-load-end",r.VPAID_AD_INITED="vpaid-ad-inited",r.VPAID_AD_INIT_ERROR="vpaid-ad-init-error",r.OVERLAY_CLICK="overlay-click",r.OVERLAY_RENDERED="overlay-rendered",r.PLAYER_SWF_READY="player-swf-ready",r.VPAID_PREFETCH_REQUEST="vpaid-prefetch-request",r.COMPANION_ADS_DELIVERED="companion-ads-delivered"},{}],120:[function(e,t,r){"use strict";r.AdLoaded="AdLoaded",r.AdStarted="AdStarted",r.AdStopped="AdStopped",r.AdLinearChange="AdLinearChange",r.AdExpandedChange="AdExpandedChange",r.AdRemainingTimeChange="AdRemainingTimeChange",r.AdVolumeChange="AdVolumeChange",r.AdImpression="AdImpression",r.AdVideoStart="AdVideoStart",r.AdVideoFirstQuartile="AdVideoFirstQuartile",r.AdVideoMidpoint="AdVideoMidpoint",r.AdVideoThirdQuartile="AdVideoThirdQuartile",r.AdVideoComplete="AdVideoComplete",r.AdClickThru="AdClickThru",r.AdUserAcceptInvitation="AdUserAcceptInvitation",r.AdUserMinimize="AdUserMinimize",r.AdUserClose="AdUserClose",r.AdPaused="AdPaused",r.AdPlaying="AdPlaying",r.AdLog="AdLog",r.AdError="AdError",r.AdTimeout="AdTimeout",r.AdProgress="AdProgress",r.AdSwfDownloadError="VPAIDSwfDownloadError",r.VPAIDCreativeInited="VPAIDCreativeInited",r.VPAIDCreativeInitError="VPAIDCreativeInitError"},{}],121:[function(e,t,r){"use strict";function n(){var e=this;e.adId=null,e.vastCreativeId=null,e.creativeId=null,e.bookingId=null,e.redirectUrl="",e.adFormat=null,e.adSystem="",e.streams=[],e.beacons={},e.params={},e.url="",e.type="",e.mtype="",e.mapif="",e.nonLinearAd=null,e.companion=[],e.isSkippable=!1,e.skipCountdown=5,e.isFallback=!1,e.fallbackFor="",e.timestamp=0,e.adXmlParseErr=null}t.exports=n,n.prototype.addBeaconOfType=function(e,t){var r,n=this;t&&e&&(t=t.toLowerCase(),r=n.beacons[t]||[],e=e.trim(),r.push(e),n.beacons[t]=r)},n.prototype.addMedia=function(e,t,r,n,o){if(e&&t&&r){var i=this;i.streams.push({url:r,format:e,bitrate:t,deliveryType:n,apiFramework:o})}},n.prototype.merge=function(e){var t,r,n,o,i=this;if(e&&e.merge){for(n in e.beacons)e.beacons.hasOwnProperty(n)&&(t=e.beacons[n]||[],t.length>0&&(r=(i.beacons[n]||[]).concat(t),i.beacons[n]=r));for(o in e.params)e.params.hasOwnProperty(o)&&(i.params[o]=e.params[o]);i.creativeId=e.creativeId,i.bookingId=e.bookingId,i.timestamp=e.timestamp,i.impressionId=e.impressionId,i.serveTime=e.serveTime,i.serveId=e.serveId,i.spaceId=e.spaceId,i.position=e.position,i.adSystem=e.adSystem}},n.prototype.addParamOfName=function(e,t){var r=this;t&&e&&(r.params[t.toLowerCase()]=e)},n.prototype.getParamOfName=function(e){var t=this;return e?t.params[e.toLowerCase()]:void 0},n.prototype.getBeaconsOfType=function(e){var t=this;return e?t.beacons[e.toLowerCase()]:void 0}},{}],122:[function(e,t,r){"use strict";function n(){var e=this;e.adSpec=null,e.adObj=null,e.fallbackAdTagURI="",e.adTagURI="",e.isCached=!1,e.communicatorSpec=null,e.cacheState=null,e.errorState=null,e.redirectList=[],e.firstCall="",e.type="",e.adCallSequence=0,e.midrollbreak=null,e.midrolladsequence=null,e.adDuration=0,e.adIdBeacon=0,e.primaryAdSeq=1,e.fallbackAdSeq=2,e.primaryAdNetwork="",e.fallbackAdNetwork=""}t.exports=n,n.prototype.toString=function(){return JSON.stringify(this)},n.prototype.setNewRedirectUrl=function(e){var t=this;t.redirectList&&t.redirectList.push(e)},n.prototype.clone=function(e){var t=this;if(e&&e.setNewRedirectUrl)for(var r in e)e.hasOwnProperty(r)&&("redirectList"===r?t.redirectList=[].concat(e.redirectList):t[r]=e[r])}},{}],123:[function(e,t,r){"use strict";function n(e){var t=this;i.call(t,e)}t.exports=n;var o=e("../../util"),i=e("./Communicator"),a=e("../common/Errors"),s=e("../common/Events"),l=e("./ParserManager"),d=e("../yvap-util");o.inherits(n,i),n.prototype.getKey=function(e,t){var r=this,n=r.spec,o=n.communicatorName||"BRX",i=t.clipId||"",a=e.type||"";return o+"_"+i+"_"+a},n.prototype.processAdXml=function(e){var t,r,n,o,i,a,s,d=l.parseAdXml(e);for(o=0;o<d.length;o++)for(t=d[o],n="errorimpression",r=t.beacons[n]||[],i=0;i<r.length;i++)a=r[i],s=a.replace(/\[ERRORCODE\]/g,"{err_code}"),r[i]=s;return d},n.prototype.getNewAd=function(e,t){var r,n,i=this,l=i.spec;if(n=l.getSetting("AdServerUrl"),i.key=i.getKey(e,t),!o.isFlashInstalled()&&!l.isFallback)return r=i.getNewAdResponseObject(e,n),void i.publish(s.AD_FAILURE,r,i.key,i,a.BRX_WITHOUT_FLASH);if(n){n=n.replace("http:",location.protocol),n=n.replace(/\[timestamp\]/g,d.getTimeStamp()),n=n.replace(/\[spid\]/g,l.customSPID),n=n.replace(/\[br_pageurl\]/g,l.customDomain),r=i.getNewAdResponseObject(e,n);try{i.fireRequest(n,r)}catch(c){i.publish(s.AD_FAILURE,r,i.key,i,c.message)}}else r=i.getNewAdResponseObject(e),i.publish(s.AD_FAILURE,r,i.key,i,a.REQUEST_GENERIC)},n.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Errors":118,"../common/Events":119,"../yvap-util":163,"./Communicator":125,"./ParserManager":132}],124:[function(e,t,r){"use strict";function n(e){var t=this;i.call(t,e)}t.exports=n;var o=e("../../util"),i=e("./Communicator"),a=e("./ParserManager"),s=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),l=e("../common/Events");o.inherits(n,i),n.prototype.getKey=function(e,t){var r=this,n=r.spec,o=n.communicatorName||"",i=t.clipId||"",a=e.type||"";return o+"_"+i+"_"+a},n.prototype.getNewAd=function(e,t){var r,n,o,i,d,c=this,p=t.adTargeting||"";if(i=a.parseXml(p),d=i.childNodes[0],c.key=c.getKey(e,t),d&&"adData"===d.nodeName&&(n=d.getAttribute("id"),"ad_url"===n&&(o=d.getAttribute("value"),o+=o.indexOf("xml=vast")>-1?";pos=1":";pos=1;xml=yahoo")),o){o=o.replace("http:",location.protocol),r=c.getNewAdResponseObject(e,o);try{c.fireRequest(o,r)}catch(u){c.publish(l.AD_FAILURE,r,c.key,c,u.message)}}else r=c.getNewAdResponseObject(e),c.publish(l.AD_FAILURE,r,c.key,c,s.MISSING_ADTGT)},n.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":116,"../common/Errors":118,"../common/Events":119,"./AdResponse":122,"./Communicator":125,"./ParserManager":132}],125:[function(e,t,r){"use strict";function n(e){var t=this;i.call(t,"communicator"),t.spec=e||{}}t.exports=n;var o=e("../../util"),i=(e("../../../../lib/logger"),e("../../../../lib/event-bus")),a=e("./ParserManager"),s=e("./VastValidator"),l=e("./AdResponse"),d=e("../common/Events"),c=e("../common/Errors"),p=e("../common/Constants"),u=e("../../../../lib/user-agent"),_=e("xhr"),m=e("../yvap-util");o.inherits(n,i);var v={"amgdgt.com":!0,"adap.tv":!0,"videohub.tv":!0,"doubleclick.net":!0,"undertone.com":!0,"jivox.com":!0,"adform.net":!0,"flashtalking.com":!0,"telemetryverification.net":!0,"fwmrm.net":!0,"eyereturn.com":!0,"zedo.com":!0,"tubemogul.com":!0,"tidaltv.com":!0,"yahoo.com":!0,"cbs.com":!0,"innovid.com":!0,"moatads.com":!0,"stickyadstv.com":!0,"btrll.com":!0,"ads.adaptv":!0};n.prototype.getNewAd=function(e,t,r){var n=this,o=n.getNewAdResponseObject(e,r);n.key=n.getKey(e,t);try{n.fireRequest(r,o)}catch(i){n.publish(d.AD_FAILURE,o,n.key,n,i.message)}},n.prototype.handleAdResponse=function(e){var t,r,n=this;t=e.adObj,t&&("redirect"===t.type?(r=t.redirectUrl,n.setNewRedirect(r,e)):(s.validateAdObj(t),n._processAuctionId(e),n.publish(d.AD_READY,e,n.key,n)))},n.prototype._processAuctionId=function(e){var t=e.adObj,r=/btrll\.com\//,n=e.redirectList.some(function(e){return r.test(e)});if(n||"brightroll_ad"===t.adId){var o,i=t.beacons.impression||[],a=t.adParameters&&t.adParameters.AdParameters||"",s=/(epix\/(?:[^\/]*\/){4}(.*?)\/|dsepix\/(?:[^\/]*\/){3}(.*?)\/)/;if(i.some(function(e){var t=e.match(s);return t&&(o=t[2]),!!t}),!o&&a){for(var l,d,c,p=/<Impression>(.*?)<\/Impression>/g;l=p.exec(a);){d=l[1];try{d=d&&"function"==typeof window.atob?window.atob(d):""}catch(u){}if(c=d.match(s),o=c&&c[2])break}if(!o){var _=a.match(/<QueryParams>(?:.*)cx=([^&]*)&?(?:.*)<\/QueryParams>/);o=_&&_[1]}}if(!o){var m=/[?&]cx=([^&#]*)/;t.streams.some(function(e){var t=e.url.match(m);return t&&(o=t[1]),!!t})}o?t.brxAuctionId=o:"brightroll_ad"===t.adId&&(t.brxAuctionId=null)}},n.prototype.processAdObjects=function(e,t){for(var r,n,o,i=this,a=0;a<t.length;a++)r=t[a],o=new l,o.clone(e),n=e.adObj,n&&r.merge(n),o.adObj=r,i.handleAdResponse(o)},n.prototype.getKey=function(){return"null-key"},n.prototype.getFirstCall=function(){return"null-first-call"},n.prototype.getNewAdResponseObject=function(e,t){var r=this,n=new l;return n.adSpec=e,n.type=e.type,n.communicatorSpec=r.spec,n.firstCall=t||r.getFirstCall(),n},n.prototype.processAdXml=function(e){return a.parseAdXml(e)},n.prototype.prefetchAd=function(e,t,r,n,o){var i,a,s=this;if(e){a=s.getNewAdResponseObject(t),a.adSystem=n,a.brId=o,s.key=s.getKey(t,r);try{i=s.processAdXml(e),s.processAdObjects(a,i)}catch(l){s.publish(d.AD_FAILURE,a,s.key,s,l.message)}}},n.prototype._isWhiteListed=function(e){var t=!1;for(var r in v)if(v.hasOwnProperty(r)&&e.indexOf(r)>-1){t=v[r];break}return t},n.prototype._timestampMacro=/\[TIMESTAMP\]/g,n.prototype._expandMacros=function(e){var t=this;if(!e||0===e.length)return null;var r=m.getTimeStamp();return e=e.replace(t._timestampMacro,r)},n.prototype.fireRequest=function(e,t){var r=this,n=(new Date).getTime(),i=o.parseDomain(e),a=r._isWhiteListed(i),s=r.httpTimeout||3e3;if(e=r._expandMacros(e),window.location.protocol===p.SSL&&0!==e.indexOf(p.SSL))throw new Error(c.SSL_MISMATCH);try{var l={url:e,method:"GET",cors:a,sync:!1,timeout:s};u.ie&&u.ie<10&&(l.responseType="text"),_(l,function(e,o,i){var a,l=o.statusText;a=(new Date).getTime(),a-n>=s?r.onAdCallFailure(t,"timeout"):e?r.onAdCallFailure(t,l):r.onAdCallSuccess(t,i)})}catch(d){throw new Error(c.REQUEST_GENERIC)}},n.prototype.setNewRedirect=function(e,t){var r=this;t.setNewRedirectUrl(e),r.fireRequest(e,t)},n.prototype.onAdCallSuccess=function(e,t){var r,n=this;if(t)try{r=n.processAdXml(t),n.processAdObjects(e,r)}catch(o){n.publish(d.AD_FAILURE,e,n.key,n,o.message)}else n.publish(d.AD_FAILURE,e,n.key,n,c.EMPTY_RESPONSE)},n.prototype.onAdCallFailure=function(e,t){var r,n=this;r="timeout"===t?c.AD_CALL_TIMEOUT:"SSLMismatch"===t?c.SSL_MISMATCH:p.ADBLOCKER?c.ADBLOCKER:c.RESPONSE_GENERIC,n.publish(d.AD_FAILURE,e,n.key,n,r)},n.prototype.allowPrefetch=function(){return!1}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/logger":"IS9j5T","../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../common/Constants":116,"../common/Errors":118,"../common/Events":119,"../yvap-util":163,"./AdResponse":122,"./ParserManager":132,"./VastValidator":143,xhr:230}],126:[function(e,t,r){"use strict";var n=e("../common/Constants"),o=e("./MMECommunicator"),i=e("./FreeWheelCommunicator"),a=e("./CBSCommunicator"),s=e("./DFPCommunicator"),l=e("./PreviewCommunicator"),d=e("./RefreshCommunicator"),c=e("./YAXvCommunicator"),p=e("./BRXCommunicator");r.getCommunicatorUsingSpec=function(e){var t=null;if(e){var r=e.communicatorName;r.indexOf(n.MME)>-1?t=new o(e):r.indexOf(n.FREEWHEEL)>-1?t=new i(e):r.indexOf(n.CBS)>-1?t=new a(e):r.indexOf(n.DFP)>-1?t=new s(e):r.indexOf(n.REFRESH)>-1?t=new d(e):r.indexOf(n.PREVIEW)>-1?t=new l(e):r.indexOf(n.YAXv)>-1?t=new c(e):r.indexOf(n.BRX)>-1&&(t=new p(e))}return t}},{"../common/Constants":116,"./BRXCommunicator":123,"./CBSCommunicator":124,"./DFPCommunicator":127,"./FreeWheelCommunicator":128,"./MMECommunicator":130,"./PreviewCommunicator":133,"./RefreshCommunicator":134,"./YAXvCommunicator":144}],127:[function(e,t,r){"use strict";function n(e){var t=this;i.call(t,e)}t.exports=n;var o=e("../../util"),i=(e("../../../../lib/logger"),e("./Communicator")),a=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors"),e("../common/Events"),e("./VMAP"),e("./ParserManager"),e("../common/Constants")),s=e("../../../../lib/user-agent.js"),l=e("../yvap-util");o.inherits(n,i),n.prototype._replaceAll=function(e,t,r){return r.replace(new RegExp(e,"g"),t)},n.prototype._parseAdTargeting=function(e){var t=this;e=t._replaceAll("nflnow:","",e),e=t._replaceAll("=",'":"',e),e=t._replaceAll(",",'","',e),e='{"'+e+'"}';try{return JSON.parse(e)}catch(r){return JSON.parse("{}")}},n.prototype.getKey=function(e,t){var r=this,n=r.spec,o=n.communicatorName||"",i=t.clipId||"",a=e.type||"";return o+"_"+i+"_"+a},n.prototype._getPlatform=function(){var e="nflnow/web/yahoo";return s.android?e=s.androidTablet?"nflnow/app/tablet/android/yahoo":"nflnow/app/phone/android/yahoo":s.ios&&(e=s.ipad?"nflnow/app/tablet/ios/yahoo":"nflnow/app/phone/ios/yahoo"),e},n.prototype._getValue=function(e){var t=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};if(null===e)return"";if("<"!==e.trim().charAt(0)&&">"!==e.trim().charAt(e.length-1))return"";var r=t(e);return r.getElementsByTagName("adData")[0].getAttribute("value")},n.prototype._populateMacro=function(e,t){var r,n,o,i=this,s={},d={},c={freeUserPeriodInSeconds:240,premiumUserPeriodInSeconds:720,publisherId:"1234567abcd",endpoint_preroll:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/nfl.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Dpreroll%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}",endpoint_loader:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/nfl.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Donloader%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}",endpoint_clubs:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/team.${club}.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Dpreroll%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}"};return s.serverUrl="",t.content_provider_data&&t.content_provider_data.rules&&(c=t.content_provider_data.rules),e.subType===a.NFL_ONLOAD?s.serverUrl=c.endpoint_loader:e.subType===a.NFL_PREROLL&&(r=t.adTargeting||"",n=i._parseAdTargeting(i._getValue(r)),o=n.origin||"",d.channel_id=n.channel,"CLUBS"===o.toUpperCase()?(d.club=n.contentProvider,s.serverUrl=c.endpoint_clubs):s.serverUrl=c.endpoint_preroll),d.timestamp=l.getTimeStamp(),d.platform=i._getPlatform(),d.referrer_url=document.referrer,s.serverUrl=s.serverUrl.replace("[PLATFORM]","${platform}"),s.serverUrl=s.serverUrl.replace("[CLUB]","${club}"),s.serverUrl=s.serverUrl.replace("[CHANNEL_ID]","${channel_id}"),s.serverUrl=s.serverUrl.replace("[referrer_url]","${referrer_url}"),s.serverUrl=s.serverUrl.replace("[timestamp]","${timestamp}"),s.macroDict=d,s},n.prototype.updateProtocol=function(e){var t=window.location.protocol;return e=t===a.SSL?e.replace(a.HTTP,a.HTTPS):e.replace(a.HTTPS,a.HTTP)},n.prototype.getNewAd=function(e,t){var r,n,o=this,i={},d=o.spec,c=d.getSetting("AdServerUrl");if(t.licenseId!==a.NFL_NOW_LMSID)c=c.replace("[referrer_url]","${referrer_url}"),c=c.replace("[REQUESTID]","${requestid}"),c=c.replace("[timestamp]","${requestid}"),c=c.replace("[TIMESTAMP]","${requestid}"),c=c.replace("${REQUESTID}","${requestid}"),s.mobile&&(c=c.replace("iu=/4595/nfl.video.yahoo","iu=/4595/nfl.video.yahoo/mobileweb")),i.requestid=l.getTimeStamp(),i.referrer_url=document.referrer||"yahoo.com";else{var p=o._populateMacro(e,t);i=p.macroDict,c=p.serverUrl}r=l.expandMacro(c,i),null!==r&&""!==r&&(r=o.updateProtocol(r),n=o.getNewAdResponseObject(e,r),o.key=o.getKey(e,t),o.fireRequest(r,n))},n.prototype.allowPrefetch=function(){return!1}},{"../../../../lib/logger":"IS9j5T","../../../../lib/user-agent.js":"ty5FFo","../../util":"jJTEqU","../common/Constants":116,"../common/Errors":118,"../common/Events":119,"../yvap-util":163,"./AdResponse":122,"./Communicator":125,"./ParserManager":132,"./VMAP":141}],128:[function(e,t,r){"use strict";function n(e){var t=this;i.call(t,e)}t.exports=n;var o=e("../../util"),i=e("./Communicator"),a=(e("./AdResponse"),e("./Ad")),s=e("../common/Constants"),l=e("../common/Errors"),d=e("../common/Events"),c=(e("./VMAP"),e("./ParserManager"));o.inherits(n,i),n.prototype.getKey=function(e,t){var r=this,n=r.spec,o=n.communicatorName||"",i=t.clipId||"",a=e.type||"";return o+"_"+i+"_"+a},n.prototype.processAdXml=function(e){var t,r,n,o,i,l,d=c.parseAdXml(e);if(d&&d.adBreakMap){t=d.adBreakMap.preroll||{};var p=t.adSources||[];if(r=p[0],!r){var u=new a;return u.adFormat="vmap",u.type=s.NOAD,[u]}n=r.vastAdData||[],o=t.trackingEvents||{},i=o.trackings||[];for(var _=0;_<i.length;_++)"breakStart"===i[_].event&&(l=i[_]);if(l)for(_=0;_<n.length;_++)n[_].addBeaconOfType(l.url,"ad-break-start");return n}return d},n.prototype.getNewAd=function(e,t){var r,n,i=this,a=i.spec,s=";;",c=";",p=t.clipCategory||"",u=t.adTargeting||"",_=new DOMParser,m=_.parseFromString(u,"application/xml");n=m.childNodes[0];var v,y,f,g,b,A,E,h,T,S,I="";if(T=a.getSetting("AdServerUrl"),r=i.getNewAdResponseObject(e,T),i.key=i.getKey(e,t),n&&"adData"===n.nodeName){v=n.getAttribute("id"),("TurnerVideoID"===v||"YahooPartnerVideoID"===v)&&(I=n.getAttribute("value")),y="true"===a.getSetting("OverrideSAPI")?a.getSetting("SiteSectionMapping"):p,f={nw:a.getSetting("YahooNetworkId"),metr:a.getSetting("CapabilitySupportFlags"),resp:a.getSetting("ResponseType"),sfid:a.getSetting("SiteSectionFallbackId"),ssnw:a.getSetting("SiteSectionNetworkId"),pvrn:Math.round(1e8*Math.random()).toString(),caid:I,csid:y,crtp:a.getSetting("CustomResponseType"),vprn:Math.round(1e8*Math.random()).toString(),afid:a.getSetting("VideoAssetFallbackId"),flag:a.getSetting("ImpressionFlags"),asnw:a.getSetting("VideoAssetNetworkId"),prof:a.getSetting("PlayerProfile")},A=o.querystring(f),g={tpcl:a.getSetting("SlotTimePositionClass"),slau:a.getSetting("CustomAdUnitName"),slid:a.getSetting("SlotCustomId"),ptgt:a.getSetting("SlotType"),flag:a.getSetting("SlotFlags"),h:a.getSetting("SlotHeight"),w:a.getSetting("SlotWidth"),tpos:a.getSetting("SlotTimePosition")},E=o.querystring(g),b={flag:a.getSetting("SlotFlags2"),h:a.getSetting("SlotHeight2"),w:a.getSetting("SlotWidth2"),tpcl:a.getSetting("SlotTimePositionClass2"),slau:a.getSetting("CustomAdUnitName2"),slid:a.getSetting("SlotCustomId2"),ptgt:a.getSetting("SlotType2"),tpos:a.getSetting("SlotTimePosition2")},h=o.querystring(b),T=T.replace("http:",location.protocol),S=T+"?"+A+s+E+c+h,r.firstCall=S;try{i.fireRequest(S,r)}catch(L){i.publish(d.AD_FAILURE,r,i.key,i,L.message)}}else i.publish(d.AD_FAILURE,r,i.key,i,l.MISSING_ADTGT)},n.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":116,"../common/Errors":118,"../common/Events":119,"./Ad":121,"./AdResponse":122,"./Communicator":125,"./ParserManager":132,"./VMAP":141}],129:[function(e,t,r){"use strict";function n(e){var t=0,r=e.mediaInfo;return!r||r.length<1?t:t=r[0].length||t}function o(e){var t={};return t.clickurl=e.clickUrl,t}function i(e){var t,r=[],n=e.mediaInfo;return!n||n.length<1?r:(n.forEach(function(e){t={url:e.url,format:e.contentType,bitrate:e.bitrate,deliveryType:"progressive",apiFramework:null},r.push(t)}),r)}var a=e("../common/Constants"),s=e("../engine/AdSpec"),l=e("./Ad"),d=e("./Communicator"),c=e("../allocation/CommunicatorSpec"),p=function(e,t){var r,p,u,_,m;return r=new c,r.communicatorName=a.STANDALONE_GEMINI_NATIVE,u=new s(a.PREROLL,["clickable"]),p=new d(r),m=new l,m.adId=a.STANDALONE_GEMINI_NATIVE,m.adFormat=a.STANDALONE_GEMINI_NATIVE,m.creativeId=null,m.vastCreativeId=null,m.bookingId=null,m.redirectUrl="",m.streams=i(e),m.params=o(e),m.url="",m.type=a.AD,m.nonLinearAd="",m.companion=[],m.isSkippable=!1,m.skipCountdown=5,m.isFallback=!1,m.fallbackFor="",m.timestamp=0,m.adXmlParseErr=null,m.duration=n(e),m.rules=t,_=p.getNewAdResponseObject(u),_.adSystem=a.STANDALONE_GEMINI_NATIVE,_.adObj=m,_};t.exports={constructAdResponse:p}},{"../allocation/CommunicatorSpec":111,"../common/Constants":116,"../engine/AdSpec":148,"./Ad":121,"./Communicator":125}],130:[function(e,t,r){"use strict";function n(e){var t=this;a.call(t,e)}t.exports=n;var o=e("../../util"),i=e("../yvap-util"),a=e("./Communicator"),s=e("./ParserManager"),l=e("../common/Constants"),d=e("../common/Events"),c=e("../common/Errors"),p=e("../../../../lib/user-agent");o.inherits(n,a);var u="yvap.query.yahoo.com/v1/public/yql",_="flv_as3;xml_ver_2.0vast",m="vi_ct_1",v="vpaidt_none;fm_mp4;fm_webm;vi_ct_1",y={overlayC2V:"v4",overlayC2S:"v5",clickable:"v1;v7;v8",interactive:"v2",asq:"v6"},f={bumper:"BMPR",overlay:"VIDO",preroll:"VID",postroll:"VID",midroll:"VID"},g=["playback0","playback25","playback50","playback75","playback100"],b="csc.beap.bc.yahoo.com/yi";n.prototype._parseCSCImpressionBeacon=function(e,t){for(var r=/([^,()]+),|([^,():]+)\)/g,n=t.match(r),o={},i=null,a=0,s=null,l=0;l<n.length;l++)i=n[l],a=i.length-1,i=","===i.charAt(a)||")"===i.charAt(a)?i.substr(0,a):i,s=i.split("$"),s=2===s.length?s:i.split("="),2===s.length&&(o[s[0]]=s[1]);e.position=o.ypos,e.bookingId=o.bi,e.creativeId=o.cr,e.impressionId=o.aid,e.serveTime=o.st,e.serveId=o.gid,e.spaceId=o.sp},n.prototype.getNewAd=function(e,t){var r,n,a,s,g,b,A=this,E=A.spec,h=E.getSetting("adBaseUrl")||"us",T="true"===E.getSetting("sendRsParam")?"lmsid:"+t.licenseId:"",S=e.actionValues||[],I=f[e.type]||"",L=m,M="",C="",N="",D=t.spaceId;if(e.type===l.MIDROLL){L="";var R=E.getSetting("spaceIdOverride");R&&(D=R),M=' vid.forcead=1  adbreak="'+e.cdtBreak.toString()+'" ';var P=parseInt(E.getSetting("adsPerBreak"))||l.MAX_ADS_MIDROLL;e.cdtBreak===l.MARKETING_AD_BREAK&&P++,I=P>0&&"VID"===I?"n"+P+I:I}for(var w="",O=0;O<S.length;O++)w=w+y[S[O]]+";";if(p.mobile&&(L=v),t.showName&&(C='show_name="'+t.showName+'" '),t.topics&&(N='cTopId="'+t.topics.join()+'" '),w+=_+";"+L,b='content="'+w+'" '+M+C+N,n={pn:"'"+E.getSetting("partnerId")+"'",f:"'"+D+"'",p:"'"+E.propertyId+"'",c:"'x'",rand:"'"+Math.round(1e13*Math.random())+"'",rs:"'"+T+"'",l:"'"+I+"'",at:"'"+b+"'",rg:"'"+h+"'",pt:"'"+location.protocol+"'"},a={q:i.generateYqlQuery(n,"yahoo.ads.video.vat"),format:"json",env:"prod"},s=o.querystring(a),g=location.protocol+"//"+u+"?"+s,r=A.getNewAdResponseObject(e,g),r.timestamp=(new Date).getTime()/1e3,A.key=A.getKey(e,t),!D)return void A.publish(d.AD_FAILURE,r,A.key,A,c.MISSING_SPACEID);try{A.fireRequest(g,r)}catch(k){A.publish(d.AD_FAILURE,r,A.key,A,k.message)}},n.prototype.getFirstCall=function(){var e=this,t=e.spec,r=t.getSetting("adBaseUrl")||"us";return"http://"+r+u},n.prototype.getKey=function(e,t){var r=this,n=r.spec,o=n.communicatorName||"",i=t.spaceId||"",a=(t.clipId||"",t.licenseId||""),s=e.type||"",l=f[s]||"";return o+"_"+i+"_"+l+"_"+a},n.prototype.processAdXml=function(e){var t=this,r=null;if(e=e.trim(),"<"===e.charAt(0))r=e;else try{var n=JSON.parse(e);if(!(n&&n.query&&n.query.results&&n.query.results.result))throw new Error(c.EMPTY_RESPONSE);r=n.query.results.result.xmlResponse||n.query.results.result}catch(o){throw new Error(c.XML_PARSING)}var i,a,l,d,p,u,_,m,v,y=s.parseAdXml(r);for(_=0;_<y.length;_++){for(i=y[_],m="impression",a=i.beacons[m]||[],u=0;u<a.length;u++)l=a[u],l.indexOf("csc.beap")>-1&&(t._parseCSCImpressionBeacon(i,l),l=l.replace(/eob\$/g,"cuuid${cuuid},eob$adb={ad_break}:sn={ad_sequence}:dur={duration}:pver={player_version}:"),a[u]=l);for(p=0;p<g.length;p++)for(m=g[p],a=i.beacons[m]||[],u=0;u<a.length;u++)l=a[u],l.indexOf("beap-bc")>-1&&(v=l.lastIndexOf("))"),v>-1&&(d=l.substring(0,v)+",{beap_client_event}))",a[u]=d));for(m="noadimpression",a=i.beacons[m]||[],u=0;u<a.length;u++)l=a[u],d=l.replace(/eob\$/g,"cuuid${cuuid},eob$yvap_code={err_code}:adb={ad_break}:sn={ad_sequence}:dur={duration}:dmn_1={initial_domain}:dmn_n={vendor_domain}:pver={player_version}:"),a[u]=d;for(m="errorimpression",a=i.beacons[m]||[],u=0;u<a.length;u++)l=a[u],l.indexOf(b)>-1&&a.splice(u,1);for(u=0;u<a.length;u++)l=a[u],d=l.replace(/\[ERRORCODE\]/g,"{err_code}"),a[u]=d}return y},n.prototype.allowPrefetch=function(e){try{if(e)for(var t=s.parseAdXml(e)||[],r=0;r<t.length;r++){var n=t[r];if("redirect"===n.type&&n.redirectUrl.indexOf("yrtas.btrll.com")>-1)return!1}return!0}catch(o){return!0}}},{"../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../common/Constants":116,"../common/Errors":118,"../common/Events":119,"../yvap-util":163,"./Communicator":125,"./ParserManager":132}],131:[function(e,t,r){"use strict";function n(e,t){var r=this;r._yvapBus=e,r._cacheManager=t,r._communicator=null,r._midrollsAds=[],r._totalAdEnd=0,r._fetchRetry=0,r._totalNoAds=0,r._totalDuplicatedAds=0,r._totalPrefetchedAdsDuration=0,r._toFillMidrollsAds=!1,r._adsPerBreak=0,r._successAdCount=0,r._failAdCount=0,r._toUnsubscribe=[],r._cdtbreak=1}t.exports=n;var o=(e("../../../../lib/logger"),e("../common/Events")),i=e("../common/Constants"),a=e("../engine/AdSpec"),s=e("./CommunicatorFactory"),l=e("../allocation/CommunicatorSpec"),d=e("../yvap-util"),c=function(e){};n.prototype._getNewAds=function(e,t){var r=this;if(e){var n=new a(i.MIDROLL,["clickable"]);n.cdtBreak=r.getCDTBreak(),n.fallbackParam=!1;var l=e.pickCommunicator(n);if(l&&l.communicatorName===i.MME){var d=s.getCommunicatorUsingSpec(l);r._adsPerBreak=parseInt(l.getSetting("adsPerBreak"),10),isNaN(r._adsPerBreak)&&(r._adsPerBreak=i.MIDROLL_DEFAULT_ADS_PER_BREAK),c("Making xhr call to fetch ads with: adsPerBreak="+r._adsPerBreak),r._toFillMidrollsAds=t.hasLiveMidrolls,r._midrollPrefetchDuration=t.hasLiveMidrolls?t.liveMidrollsMaxDur:0,r._totalAdEnd=0,r._failAdCount=0,r._successAdCount=0,r._toUnsubscribe.push(d.subscribe(o.AD_READY,r._adReadyHandler,r)),r._toUnsubscribe.push(d.subscribe(o.AD_FAILURE,r._adFailureHandler,r)),d.getNewAd(n,t)}else c("No suitable communicator found for midroll fetch")}},n.prototype._getCommunicator=function(e){var t=new l;return t.communicatorId=11,t.communicatorName="MME",t.isFallback=!1,t.propertyMap=e.settingMap,t.propertyId=e.propertyId,s.getCommunicatorUsingSpec(t)},n.prototype._checkForVPAIDPreInit=function(e){var t=this;if(e){var r=e.adObj;if(r&&r.type===i.VPAID){var n=r.streams||[],a=n[0];a&&"application/x-shockwave-flash"===a.format&&t._yvapBus.publish(o.VPAID_PREFETCH_REQUEST,r)}}},n.prototype._trimPrefetchedAds=function(e){var t,r,n,o,a=this,s=[],l={},d=0,p=0;for(o=0;o<e.length;o++)r=e[o],n=r&&r.adObj,n&&n.type!==i.NOAD&&n.streams&&n.streams.length&&n.streams.length>0?(t=n.creativeId,l[t]?d++:(l[t]=!0,s.push(r))):p++;return a._totalNoAds+=p,a._totalDuplicatedAds+=d,c("Trim: duplicate="+d+", no-ad="+p),s},n.prototype._startFetchAds=function(e,t){var r=this;r._currentPlayerDataItem=t,r._currentCommunicatorAllocation=e,r._fetchRetry=0,r._totalNoAds=0,r._totalDuplicatedAds=0,r._totalPrefetchedAdsDuration=0,r._getNewAds(e,t)},n.prototype._fillMidrollsAds=function(){var e,t,r=this,n=0;for(r._midrollsAds=r._trimPrefetchedAds(r._midrollsAds),e=0;e<r._midrollsAds.length;e++)t=r._midrollsAds[e],n+=t&&t.adObj&&t.adObj.duration||0;r._totalPrefetchedAdsDuration=n,c("Updated prefetched ads="+n+", total ads="+r._midrollsAds.length+", askDuration="+r._midrollPrefetchDuration),n<r._midrollPrefetchDuration&&r._fetchRetry<i.MIDROLL_PREFETCH_MAX_RETRY?(r._fetchRetry++,c("Fetch retry #"+r._fetchRetry),r._getNewAds(r._currentCommunicatorAllocation,r._currentPlayerDataItem)):r._publishPrefetchedAdsData()},n.prototype._publishPrefetchedAdsData=function(){var e=this,t={retryCount:e._fetchRetry,targetAdsDuration:e._midrollPrefetchDuration,totalUniqueAds:e._midrollsAds.length,totalDuplicatedAds:e._totalDuplicatedAds,totalNoAds:e._totalNoAds,uniqueAdsDuration:e._totalPrefetchedAdsDuration};e._yvapBus.publish(o.MIDROLL_CACHE_UPDATE,t)},n.prototype._adReadyHandler=function(e,t,r,n){var a=this,s=[];e.type=i.MIDROLL,s=a._midrollsAds,a._toFillMidrollsAds||s&&s[0]&&e.timestamp===s[0].timestamp||a.clearMidrollsAdCache(),a._addMidrollsAdCache(e),a._processAdCallEnd(n),a._yvapBus.publish(o.AD_CALL_END,r,e)},n.prototype._processAdCallEnd=function(e){var t=this;t._toFillMidrollsAds&&(t._totalAdEnd++,e?t._failAdCount++:t._successAdCount++,t._toFillMidrollsAds&&t._totalAdEnd>=t._adsPerBreak&&(c("SuccessAdCount="+t._successAdCount+", failAdCount="+t._failAdCount),t._fillMidrollsAds()))},n.prototype._adFailureHandler=function(e,t,r,n){var a=this;e.type=i.MIDROLL,e.errorState=n,a._addMidrollsAdCache(e),a._processAdCallEnd(n),a._yvapBus.publish(o.AD_CALL_END,r,e)},n.prototype.startMidRollsFetchThread=function(e){var t=this,r=t._cacheManager.getPlayerDataForClipId(e),n=t._cacheManager.getAllocationForClipId(e);n&&r?(t.resetCDTBreak(),t._startFetchAds(n,r),t.midRollFetchThread=setInterval(function(){t._startFetchAds(n,r)},i.MIDROLL_PREFETCH_TIMER)):c("Allocation, playerdata missing")},n.prototype.stopMidRollsFetchThread=function(){var e=this;e._currentPlayerDataItem=null,e._currentCommunicatorAllocation=null,e.midRollFetchThread&&clearInterval(e.midRollFetchThread);for(var t=0;t<e._toUnsubscribe.length;t++){var r=e._toUnsubscribe[t];r()}},n.prototype.getMidrollsAds=function(e,t){var r,n=this,s=n._midrollsAds||[],l=[],p=n._cacheManager.getPlayerDataForClipId(e),u=[],_=-1,m=new a(i.MIDROLL,["clickable"]),v=n._cacheManager.getAllocationForClipId(e),y=null,f=n._cacheManager.getCuePointsForClipId(e),g=0,b=0,A=0,E=function(e){var t=3;for(var r in f)if(f[r]){var n=f[r].timeOffset;if(n=d.convertTimeToSeconds(n),e+t>=n&&n>=e-t)return f[r].breakId}return 0};u=s.map(function(e){return e.timestamp||-1}),_=Math.max.apply(null,u);var h=E(t),T=n.getCDTBreak();if(v&&p&&(f||p.hasLiveMidrolls)){y=v.pickCommunicator(m);var S,I=0;p.isLive?S=s.length:(S=i.MAX_VOD_ADS_MIDROLL,y&&(I=y.getSetting("adsPerBreak")),parseInt(I)>0&&(S=I),T===i.MARKETING_AD_BREAK&&S++);for(var L=0;S>L;L++){var M=L+1;if(n._yvapBus.publish(o.AD_OPPORTUNITY,e,i.MIDROLL,m,y,p,M),p.isLive||s.length>L&&s[L].timestamp===_){r=s[L],r.midrollbreak=h,r.midrolladsequence=M,r.midrollnumber=T;var C=r.adObj;C&&(C.type===i.AD?b++:C.type===i.NOAD?g++:C.type===i.VPAID&&A++),l.push(r)}}n._yvapBus.publish(o.AD_BREAK_SUBMITTED,e,i.MIDROLL,S,l.length,g,b,A,h),n.clearMidrollsAdCache()}return n.incrementCDTBreak(),c("AdsToSendToPlayer size="+l.length),v&&p&&(c("Start prefill next midroll ads cache"),n._startFetchAds(v,p)),l},n.prototype.clearMidrollsAdCache=function(){var e=this;e._midrollsAds=[]},n.prototype.updateMidrollsAdCache=function(e){var t=this;t._midrollsAds=e},n.prototype._addMidrollsAdCache=function(e){var t=this;t._midrollsAds.push(e),t._checkForVPAIDPreInit(e)},n.prototype.resetCDTBreak=function(){var e=this;e._cdtbreak=1},n.prototype.getCDTBreak=function(){var e=this;return e._cdtbreak},n.prototype.incrementCDTBreak=function(){var e=this;e._cdtbreak++}},{"../../../../lib/logger":"IS9j5T","../allocation/CommunicatorSpec":111,"../common/Constants":116,"../common/Events":119,"../engine/AdSpec":148,"../yvap-util":163,"./CommunicatorFactory":126}],132:[function(e,t,r){"use strict";var n=e("./VASTParser"),o=e("./VMAPParser"),i=e("../common/Errors");r.parseAdXml=function(e){var t,n,o=null;if(!e)return null;e=r.cleanXml(e);try{t=r.parseXml(e,!0);
}catch(a){throw new Error(i.XML_PARSING)}if(t.xml&&(n=t.xml.childNodes[0],o=r.parseDom(n)),"object"==typeof o&&null!==t.xmlParseErr)for(var s=0;s<o.length;s++)o[s].adXmlParseErr=t.xmlParseErr;return o},r.cleanXml=function(e){return e&&(e=e.replace(/>\s+</g,"><"),e=e.replace(/<!--[\s\S]*?-->/g,"")),e},r.parseXml=function(e,t){var r=null,n=null;if("undefined"!=typeof DOMParser){r=(new DOMParser).parseFromString(e,"text/xml");var o=r.getElementsByTagName("parsererror");o.length&&(n="NonIE")}else"undefined"!=typeof ActiveXObject?(r=document.implementation.createDocument(),r.loadXML(e),0!==r.parseError&&(n="IE")):n="All";return t===!0?{xml:r,xmlParseErr:n}:r},r.parseDom=function(e){var t,n,o;if(!e)throw new Error(i.XML_PARSING);if(t=r.getParser(e),!t)throw o=e.nodeName,"parsererror"===o?new Error(i.XML_PARSING):new Error(i.NO_PARSER);return n=t.parse(e)},r.getParser=function(e){var t=e?e.nodeName:"";return"VAST"===t?n:t.indexOf("VMAP")>-1?o:null}},{"../common/Errors":118,"./VASTParser":140,"./VMAPParser":142}],133:[function(e,t,r){"use strict";function n(e){var t=this;t.key=t.getKey(),a.call(t,e)}t.exports=n;var o=e("../../util"),i=e("../../../../lib"),a=e("./MMECommunicator"),s=e("../common/Events"),l=e("../common/CookieUtil"),d=e("../yvap-util");o.inherits(n,a),n.prototype.getNewAd=function(e,t){var r,n=this;n.spec;if(i.isFunction(window.showAdInfo)&&n.subscribe(s.AD_READY,function(e){window.showAdInfo(e.adObj)}),i.isFunction(window.getAdXmlForPreview)){var o=window.getAdXmlForPreview();"tag"===o.type?(r=n.getNewAdResponseObject(e,o.value),n.fireRequest(o.value,r)):(r=n.getNewAdResponseObject(e),n.onAdCallSuccess(r,o.value))}},n.prototype.getKey=function(){return"preview-key"},n.prototype.setNewRedirect=function(e,t){var r=this;t.setNewRedirectUrl(e),e=r.fillMacros(e),r.fireRequest(e,t)},n.prototype.fillMacros=function(e){var t=this,r=t.spec;return e=e.replace("[CONTENT_WATCHED]",l.getTotalVideoLength()),e=e.replace("[CONTENT_CLIPS_WATCHED]",l.getTotalClipCount()),e=e.replace("[PLAYER_WIDTH]",r.getSetting("SlotWidth")),e=e.replace("[PLAYER_HEIGHT]",r.getSetting("SlotHeight")),e=e.replace("[TIMESTAMP]",d.getTimeStamp())},n.prototype.allowPrefetch=function(){return!0}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","../common/CookieUtil":117,"../common/Events":119,"../yvap-util":163,"./MMECommunicator":130}],134:[function(e,t,r){"use strict";function n(e){var t=this;i.call(t,e)}t.exports=n;var o=e("../../util"),i=e("./Communicator"),a=e("./Ad"),s=e("../common/Events"),l=e("../common/Constants"),d=e("../common/Errors"),c=e("./ParserManager"),p=["playback0","playback25","playback50","playback75","playback100"],u="csc.beap.bc.yahoo.com/yi";o.inherits(n,i),n.prototype.getNewAd=function(e,t,r){var n=this,o=n.getNewAdResponseObject(e,r);o.timestamp=(new Date).getTime()/1e3,n.key=n.getKey(e,t);try{n.fireRequest(r,o)}catch(i){n.publish(s.AD_FAILURE,o,n.key,n,i.message)}},n.prototype.prefetchAd=function(e,t,r){var n,o=this;if(e){o.key=o.getKey(t,r);var i=e.adSources||[],a=i[0]||{},l=i[1]||{};if(a.vastAdData){n=o.getNewAdResponseObject(t);var c=a.vastAdData;a.vastAdData=null,n.primaryAdSeq=a.sequence||1,n.primaryAdNetwork=a.network||"",l.adTagURI&&(n.adTagURI=l.adTagURI,n.fallbackAdTagURI=l.adTagURI,n.fallbackAdSeq=l.sequence||2,n.fallbackAdNetwork=l.network||""),a.adTagURI&&(n.adTagURI=a.adTagURI),t.mediation=e.mediation||0,t.adCallSequence=n.primaryAdSeq,t.adNetwork=n.primaryAdNetwork;try{o._parseAdObjects(c),o.processAdObjects(n,c)}catch(p){o.publish(s.AD_FAILURE,n,o.key,o,p.message)}}else a.adTagURI?(n=o.getNewAdResponseObject(t,a.adTagURI),n.primaryAdSeq=a.sequence||1,n.primaryAdNetwork=a.network||"",n.adTagURI=a.adTagURI,l.adTagURI&&(n.fallbackAdTagURI=l.adTagURI,n.fallbackAdSeq=l.sequence||2,n.fallbackAdNetwork=l.network||""),t.mediation=e.mediation||0,t.adCallSequence=n.primaryAdSeq,t.adNetwork=n.primaryAdNetwork,o.fireRequest(a.adTagURI,n)):(n=o.getNewAdResponseObject(t),o.publish(s.AD_FAILURE,n,o.key,o,d.RESPONSE_GENERIC))}},n.prototype._parseAdObjects=function(e){var t,r,n,o,i,a,s,l,d,c=this;for(s=0;s<e.length;s++){for(t=e[s],l="impression",r=t.beacons[l]||[],a=0;a<r.length;a++)n=r[a],n.indexOf("csc.beap")>-1&&(c._parseCSCImpressionBeacon(t,n),n=n.replace(/eob\$/g,"cuuid${cuuid},eob$adb={ad_break}:sn={ad_sequence}:dur={duration}:pver={player_version}:"),r[a]=n);for(i=0;i<p.length;i++)for(l=p[i],r=t.beacons[l]||[],a=0;a<r.length;a++)n=r[a],n.indexOf("beap-bc")>-1&&(d=n.lastIndexOf("))"),d>-1&&(o=n.substring(0,d)+",{beap_client_event}))",r[a]=o));for(l="noadimpression",r=t.beacons[l]||[],a=0;a<r.length;a++)n=r[a],o=n.replace(/eob\$/g,"cuuid${cuuid},eob$yvap_code={err_code}:adb={ad_break}:sn={ad_sequence}:dur={duration}:dmn_1={initial_domain}:dmn_n={vendor_domain}:pver={player_version}:"),r[a]=o;for(l="errorimpression",r=t.beacons[l]||[],a=0;a<r.length;a++)n=r[a],n.indexOf(u)>-1&&r.splice(a,1);for(a=0;a<r.length;a++)n=r[a],o=n.replace(/\[ERRORCODE\]/g,"{err_code}"),r[a]=o}},n.prototype._parseCSCImpressionBeacon=function(e,t){for(var r=/([^,()]+),|([^,():]+)\)/g,n=t.match(r),o={},i=null,a=0,s=null,l=0;l<n.length;l++)i=n[l],a=i.length-1,i=","===i.charAt(a)||")"===i.charAt(a)?i.substr(0,a):i,s=i.split("$"),s=2===s.length?s:i.split("="),2===s.length&&(o[s[0]]=s[1]);e.position=o.ypos,e.bookingId=o.bi,e.creativeId=o.cr,e.impressionId=o.aid,e.serveTime=o.st,e.serveId=o.gid,e.spaceId=o.sp},n.prototype.setNewRedirect=function(e,t){var r=this;t.setNewRedirectUrl(e),r.fireRequest(e,t)},n.prototype.allowPrefetch=function(){return!0},n.prototype.getKey=function(e,t){var r=t.spaceId||"",n=t.licenseId||"",o=e.type||"";return"Refresh_"+r+"_"+o+"_"+n},n.prototype.processAdXml=function(e){var t=this,r=c.parseAdXml(e);if(r){if(r.adBreakMap){var n,o,i,s,d,p;n=r.adBreakMap.preroll||{};var u=n.adSources||[];if(o=u[0],!o){var _=new a;return _.adFormat="vmap",_.type=l.NOAD,[_]}i=o.vastAdData||[],s=n.trackingEvents||{},d=s.trackings||[];for(var m=0;m<d.length;m++)"breakStart"===d[m].event&&(p=d[m]);if(p)for(m=0;m<i.length;m++)i[m].addBeaconOfType(p.url,"ad-break-start");return i}return t._parseAdObjects(r),r}return r}},{"../../util":"jJTEqU","../common/Constants":116,"../common/Errors":118,"../common/Events":119,"./Ad":121,"./Communicator":125,"./ParserManager":132}],135:[function(e,t,r){"use strict";function n(e,t){c.call(this,e,t)}t.exports=n;var o=e("../../util"),i=(e("../../../../lib/logger"),e("../common/Events")),a=e("../common/Constants"),s=e("../engine/AdSpec"),l=e("./CommunicatorFactory"),d=e("../allocation/CommunicatorSpec"),c=e("./MidRollsHelper");o.inherits(n,c);n.prototype._getNewAds=function(e,t){var r=this;if(e){var n=new s(a.MIDROLL,["clickable"]),o=r._getCommunicator(e);r._toFillMidrollsAds=t.hasLiveMidrolls,r._midrollPrefetchDuration=t.hasLiveMidrolls?t.liveMidrollsMaxDur:0,r._totalAdEnd=0,r._failAdCount=0,r._successAdCount=0,r._adsPerBreak=a.MIDROLL_DEFAULT_ADS_PER_BREAK,r._toUnsubscribe.push(o.subscribe(i.AD_READY,r._adReadyHandler,r)),r._toUnsubscribe.push(o.subscribe(i.AD_FAILURE,r._adFailureHandler,r));var l=r._cacheManager.getMidrollAdTagUri(n,t.clipId,a.MIDROLL);l&&(l=r._expandMacros(l),o.getNewAd(n,t,l))}},n.prototype._getCommunicator=function(e){var t=new d;return t.communicatorId=11,t.communicatorName="REFRESH",t.isFallback=!1,t.propertyMap=e.settingMap,t.propertyId=e.propertyId,l.getCommunicatorUsingSpec(t)},n.prototype._expandMacros=function(e){var t=this;return e=e.replace("[CDT_BREAK]",t._cdtbreak)}},{"../../../../lib/logger":"IS9j5T","../../util":"jJTEqU","../allocation/CommunicatorSpec":111,"../common/Constants":116,"../common/Events":119,"../engine/AdSpec":148,"./CommunicatorFactory":126,"./MidRollsHelper":131}],136:[function(e,t,r){"use strict";function n(e,t){var r=this;r._beaconMap={},r._beaconMap[o.VIDEO_START]="playback0",r._beaconMap[o.VIDEO_QUARTILE_25]="playback25",r._beaconMap[o.VIDEO_QUARTILE_50]="playback50",r._beaconMap[o.VIDEO_QUARTILE_75]="playback75",r._beaconMap[o.VIDEO_QUARTILE_100]="playback100",r._beaconMap[o.VIDEO_VIEW]="impression",r._beaconMap[o.VIDEO_VIEW_3P]="impression3p",r._yvapBus=e,r._standaloneAdConfig=t,r._standaloneAdBeacons=t.beacons,r._standaloneAdResponse=null}t.exports=n;var o=e("../common/Constants");n.prototype.getAd=function(){var e=this;return e._standaloneAdResponse},n.prototype.addBeacons=function(e){var t,r,n,o=this;if(o._standaloneAdBeacons)for(var i in o._beaconMap)if(o._beaconMap.hasOwnProperty(i)&&(t=o._standaloneAdBeacons[i])){r=o._beaconMap[i];for(var a=0;a<t.length;a++)n=t[a],e.addBeaconOfType(n,r)}}},{"../common/Constants":116}],137:[function(e,t,r){"use strict";function n(e,t){var r,o,c,p=this,u=null;n.super_.call(p,e,t),p._standaloneAdXML=t.brxd,r=new d,r.communicatorName=a.STANDALONE_BRXD,c=new s(a.PREROLL,["clickable"]),o=new l(r),o&&(o.subscribe(i.AD_READY,p.prefetchCompleteHandler,p),o.subscribe(i.AD_FAILURE,p.prefetchFailureHandler,p),p._yvapBus.publish(i.AD_CALL_START,o),o.prefetchAd(p._standaloneAdXML,c,u,a.STANDALONE_BRXD,parseInt(1e5*Math.random())))}t.exports=n;var o=e("../../util"),i=e("../common/Events"),a=e("../common/Constants"),s=e("../engine/AdSpec"),l=e("./Communicator"),d=e("../allocation/CommunicatorSpec"),c=e("./StandaloneAdHelper");o.inherits(n,c),n.prototype.prefetchCompleteHandler=function(e,t,r){var n=this;n._yvapBus.publish(i.AD_CALL_END,r,e),e&&e.adObj&&n.addBeacons(e.adObj),n._standaloneAdResponse=e},n.prototype.prefetchFailureHandler=function(e,t,r,n){var o=this,a=e.adSpec;o._yvapBus.publish(i.AD_CALL_END,r,e),e&&(e.adCallSequence=a.adCallSequence,e.errorState=n)},n.prototype.getAd=function(){var e=this,t=e._standaloneAdResponse;return e._standaloneAdResponse=null,t}},{"../../util":"jJTEqU","../allocation/CommunicatorSpec":111,"../common/Constants":116,"../common/Events":119,"../engine/AdSpec":148,"./Communicator":125,"./StandaloneAdHelper":136}],138:[function(e,t,r){"use strict";function n(e,t){var r,o,c,p=this,u=null;n.super_.call(p,e,t),p._standaloneAdXML=t.xml,r=new d,r.communicatorName=a.STANDALONE_GEMINI_BRX,c=new s(a.PREROLL,["clickable"]),o=new l(r),o&&(o.subscribe(i.AD_READY,p.prefetchCompleteHandler,p),o.subscribe(i.AD_FAILURE,p.prefetchFailureHandler,p),p._yvapBus.publish(i.AD_CALL_START,o),o.prefetchAd(p._standaloneAdXML,c,u,a.STANDALONE_GEMINI_BRX,parseInt(1e5*Math.random())))}t.exports=n;var o=e("../../util"),i=e("../common/Events"),a=e("../common/Constants"),s=e("../engine/AdSpec"),l=e("./Communicator"),d=e("../allocation/CommunicatorSpec"),c=e("./StandaloneAdHelper");o.inherits(n,c),n.prototype.prefetchCompleteHandler=function(e,t,r){var n=this;n._yvapBus.publish(i.AD_CALL_END,r,e),e&&e.adObj&&n.addBeacons(e.adObj),n._standaloneAdResponse=e},n.prototype.prefetchFailureHandler=function(e,t,r,n){var o=this,a=e.adSpec;o._yvapBus.publish(i.AD_CALL_END,r,e),e&&(e.adCallSequence=a.adCallSequence,e.errorState=n)}},{"../../util":"jJTEqU","../allocation/CommunicatorSpec":111,"../common/Constants":116,"../common/Events":119,"../engine/AdSpec":148,"./Communicator":125,"./StandaloneAdHelper":136}],139:[function(e,t,r){"use strict";function n(e,t){var r,o,i=this;n.super_.call(i,e,t),i._geminiConfig=t.gemini,i._rulesConfig=t.rules,r=a.constructAdResponse(i._geminiConfig,i._rulesConfig),o=r.adObj,o&&i.addBeacons(o),i._standaloneAdResponse=r}t.exports=n;var o=e("../../util"),i=e("./StandaloneAdHelper"),a=e("./GeminiNativeParser");o.inherits(n,i)},{"../../util":"jJTEqU","./GeminiNativeParser":129,"./StandaloneAdHelper":136}],140:[function(e,t,r){"use strict";function n(e,t,r){for(var n,o,i=e.childNodes,a=0;a<i.length;a++)n=i[a],o=t[n.nodeName],o&&o.call(void 0,r,n)}function o(e,t){var r={MediaFile:function(e,t){var r,n,o=t.getAttribute("type"),i=t.getAttribute("apiFramework"),a=t.getAttribute("delivery");r=t.getAttribute("bitrate")||100,r=parseInt(r,10),n=C.getTextFromNode(t),e.addMedia(o,r,n,a,i)}};n(t,r,e)}function i(e,t){var r={yahoo_video_ad_item:function(e,t){var r=t.getAttribute("name");r&&t.textContent&&e.addParamOfName(t.textContent,r)},yahoo_video_ad_beacon:function(e,t){var r=t.getAttribute("id");r&&t.textContent&&e.addBeaconOfType(t.textContent,r)},"#cdata-section":function(e,t){var r=e.adParameters||{};e.adParameters=r;var n=r.AdParameters||"";r.AdParameters=n+t.nodeValue},"#text":function(e,t){e.adParameters={AdParameters:t.nodeValue}}};n(t,r,e)}function a(e,t){var r={Tracking:function(e,t){var r,n=t.getAttribute("event");n&&t.textContent&&(r=P[n],r?e.addBeaconOfType(t.textContent,r):e.addBeaconOfType(t.textContent,n))}};n(t,r,e)}function s(e,t){var r={ClickThrough:function(e,t){t.textContent&&e.addParamOfName(t.textContent,"clickurl")},ClickTracking:function(e,t){var r=t.nodeName;r&&t.textContent&&e.addBeaconOfType(t.textContent,"clicktracking")}};n(t,r,e)}function l(e,t){var r={MediaFiles:o,AdParameters:i,TrackingEvents:a,VideoClicks:s,Duration:function(e,t){if(N.isNullOrUndefined(e.duration)){var r=C.getTextFromNode(t);e.duration=D.convertTimeToSeconds(r)}}};e.streams=[];for(var l in e.beacons)e.beacons.hasOwnProperty(l)&&"impression"!==l&&"errorimpression"!==l&&delete e.beacons[l];n(t,r,e)}function d(e,t){var r,n;e=e||{},t.textContent&&(r=t.getAttribute("creativeType")||"",n=t.textContent||"",e.resourceUrl=n.trim(),e.resourceType=r.trim())}function c(e,t){var r;t.textContent&&(r=t.textContent||"",r=r.trim(),e.addParamOfName(r,"clickurl"))}function p(e,t){var r={StaticResource:d,NonLinearClickThrough:c,AdParameters:i},o=e.nonLinearAd||{},a=t.getAttribute("width"),s=t.getAttribute("height"),l=t.getAttribute("scalable"),p=t.getAttribute("apiFramework");o.width=a,o.height=s,o.scalable=l,o.apiFramework=p,e.nonLinearAd=o,n(t,r,e),r={StaticResource:d},n(t,r,e.nonLinearAd)}function u(e,t){var r={TrackingEvents:a,NonLinear:p};n(t,r,e)}function _(e,t){e=e||{},t.textContent&&(e.companionClickThrough=t.textContent)}function m(e,t){var r,n;e=e||{},t.textContent&&(r=t.getAttribute("creativeType")||"",n=t.textContent||"",e.companionBannerSrc=n.trim(),e.companionMimeType=r)}function v(e,t){var r={},o=t.getAttribute("width"),i=t.getAttribute("height");r.companionWidth=o,r.companionHeight=i;var a=t.getElementsByTagName("StaticResource"),s=t.getElementsByTagName("IFrameResource"),l=t.getElementsByTagName("HTMLResource");a&&a.length>0?r.companionBannerType=R.STATIC_RESORUCE:s&&s.length>0?r.companionBannerType=R.IFRAME_RESORUCE:l&&l.length>0&&(r.companionBannerType=R.HTML_RESORUCE);var d={TrackingEvents:y,CompanionClickThrough:_,StaticResource:m,IFrameResource:m,HTMLResource:m};n(t,d,r),e.companion.push(r)}function y(e,t){var r={Tracking:function(e,t){var r=t.getAttribute("event");r&&t.textContent&&(e.companionImpression=t.textContent)}};n(t,r,e)}function f(e,t){var r={Companion:v};n(t,r,e)}function g(e,t){var r={Linear:l,CompanionAds:f,NonLinearAds:u};n(t,r,e),e.vastCreativeId||(e.vastCreativeId=t.getAttribute("id")||"")}function b(e,t){var r={Creative:g};n(t,r,e)}function A(e,t){var r=C.getTextFromNode(t);e.addBeaconOfType(r,"impression")}function E(e,t){var r,n,o,i,a,s=t.getAttribute("type");"SkipAd"===s?(r=t.childNodes[0],r&&"SkipDirective"===r.nodeName&&"2"===r.textContent&&(e.isSkippable=!0),n=t.childNodes[1],n&&"SkipBeacon"===n.nodeName&&n.textContent&&e.addBeaconOfType(n.textContent,"skip")):"CPCV"===s?(o=t.childNodes[0],o&&"Progress30SecBeacon"===o.nodeName&&o.textContent&&e.addBeaconOfType(o.textContent,"cpcv")):"CustomTracking"===s?(i=t.childNodes[0],i&&"NoAdImpression"===i.nodeName&&i.textContent&&e.addBeaconOfType(i.textContent,"noadimpression")):"YahooViewability"===s&&(a=t.childNodes[0],a&&"CustomTrackingViewableImpression"===a.nodeName&&a.textContent&&e.addBeaconOfType(a.textContent,"viewableimpression"))}function h(e,t){var r=C.getTextFromNode(t);e.addBeaconOfType(r,"errorimpression")}function T(e,t){var r={Extension:E};n(t,r,e)}function S(e,t){var r={VASTAdTagURI:function(e,t){e.redirectUrl=C.getTextFromNode(t),e.type="redirect"},Impression:A,Creatives:b,Extensions:T,Error:h,AdSystem:function(e,t){e.adSystem=C.getTextFromNode(t)}};n(t,r,e)}function I(e,t){var r={Impression:A,Creatives:b,Extensions:T,Error:h,AdSystem:function(e,t){e.adSystem=C.getTextFromNode(t)}};n(t,r,e)}function L(e,t){var r=t.getAttribute("fallbackfor"),o=t.getAttribute("id");o&&(e.adId=o),r&&(e.isFallback=!0,e.fallbackFor=r);var i={Wrapper:S,InLine:I};return n(t,i,e),e}var M=e("./Ad"),C=e("../../util"),N=e("../../../../lib"),D=e("../yvap-util"),R=e("../common/Constants"),P={start:"playback0",firstQuartile:"playback25",midpoint:"playback50",thirdQuartile:"playback75",complete:"playback100"};r.parse=function(e){var t,r=[];if(!e||"VAST"!==e.nodeName)return r;var o={Ad:function(e,t){e=new M,e.adFormat="vast",L(e,t),r.push(e)}};return n(e,o,t),0===r.length&&(t=new M,t.adFormat="vast",t.type=R.NOAD,r.push(t)),r}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","../common/Constants":116,"../yvap-util":163,"./Ad":121}],141:[function(e,t,r){"use strict";function n(){var e=this;e.adBreakMap={},e.version=""}function o(){var e=this;e.adSources=[],e.trackingEvents=null,e.timeOffset="",e.breakType=[],e.breakId="",e.repeatAfter="",e.extensions=null,e.mediation=0}function i(){var e=this;e.id="",e.allowMultipleAds=0,e.followRedirects=0,e.adTagURI="",e.customAdData="",e.vastAdData="",e.network="",e.sequence=0}function a(){var e=this;e.trackings=[]}function s(){var e=this;e.event="",e.url=""}function l(){var e=this;e.extensions=[],e.clientRules=null}function d(){var e=this;e.xml="",e.type="",e.data={}}t.exports={VMAPObject:n,AdBreak:o,AdSource:i,TrackingEvents:a,Tracking:s,Extensions:l,Extension:d}},{}],142:[function(e,t,r){"use strict";function n(e,t,r){for(var n,o,i=e.childNodes,a=0;a<i.length;a++)n=i[a],o=t[n.nodeName],o&&o.call(void 0,r,n)}function o(e,t){var r=new d.TrackingEvents,o={"vmap:Tracking":function(e,t){var r=new d.Tracking,n=t.getAttribute("event")||"";r.event=n,r.url=t.textContent,e.trackings.push(r)}};n(t,o,r),e.trackingEvents=r}function i(e,t){var r=new d.Extensions,o={ClientRules:a};n(t,o,r),e.extensions=r}function a(e,t){var r={},o={MinDuration:function(e,t){var r=t.textContent||0;e.MinDuration=r},StartAtClip:function(e,t){var r=t.textContent||0;e.StartAtClip=r},Frequency:function(e,t){var r=t.textContent||0;e.Frequency=r},Length:function(e,t){var r=t.textContent||0;e.Length=r},Offset:function(e,t){var r=t.textContent||0;e.Offset=r},AdDuration:function(e,t){var r=t.textContent||0;e.AdDuration=r},Repeat:function(e,t){var r=t.textContent||0;e.Repeat=r}};n(t,o,r),e.clientRules=r}function s(e,t){var r=new d.AdSource,o={"vmap:VASTAdData":function(e,t){var r=t.childNodes[0],n=c.getParser(r);e.vastAdData=n.parse(r)},"vmap:VASTData":function(e,t){var r=t.childNodes[0],n=c.getParser(r);e.vastAdData=n.parse(r)},"vmap:AdTagURI":function(e,t){e.adTagURI=t.textContent},"vmap:CustomAdData":function(e,t){e.customAdData=t.textContent}};n(t,o,r),r.network=t.getAttribute("network")||"";var i=t.getAttribute("seq")||"";i=parseInt(i),isNaN(i)?(r.sequence=1,e.adSources=[r]):(r.sequence=i,e.adSources[i-1]=r)}function l(e,t){var r=new d.AdBreak,a=t.getAttribute("breakId")||"";a.indexOf("pre")>-1?r.breakId="preroll":r.breakId=a,r.breakType=(t.getAttribute("breakType")||"").split(","),r.timeOffset=t.getAttribute("timeOffset")||"";var l=t.getAttribute("mediation")||"";l=parseInt(l),isNaN(l)?r.mediation=0:r.mediation=l;var c={"vmap:AdSource":s,"vmap:TrackingEvents":o,"vmap:Extensions":i};n(t,c,r),e.adBreakMap[r.breakId]=r}var d=e("./VMAP"),c=e("./ParserManager");r.parse=function(e){var t=null;if(!e||"vmap:VMAP"!==e.nodeName)return t;t=new d.VMAPObject;var r={"vmap:AdBreak":l};return n(e,r,t),t}},{"./ParserManager":132,"./VMAP":141}],143:[function(e,t,r){"use strict";var n=e("../common/Constants");r._isVpaid=function(e){var t=e.apiFramework||"";return t.toLowerCase()===n.VPAID},r._setType=function(e){var t=n.NOAD;if(e.nonLinearAd)t=n.OVERLAY;else if(e.streams&&e.streams.length>0){var o=e.streams,i=[],a=[];o.forEach(function(e){r._isVpaid(e)?a.push(e):i.push(e)}),i.length>0?(t=n.AD,e.streams=i):a.length>0&&(t=n.VPAID,e.streams=a)}e.type=t},r.validateAdObj=function(e){for(var t=[r._setType],n=0;n<t.length;n++)e=t[n](e)}},{"../common/Constants":116}],144:[function(e,t,r){"use strict";function n(e){var t=this;i.call(t,e)}t.exports=n;var o=e("../../util"),i=e("./Communicator"),a=e("../common/Errors"),s=e("../common/Events");o.inherits(n,i),n.prototype.getKey=function(e,t){var r=this,n=r.spec,o=n.communicatorName||"YAXv",i=t.clipId||"",a=e.type||"";return o+"_"+i+"_"+a},n.prototype.getNewAd=function(e,t){var r,n,o=this;if(n="https://na.ads.yahoo.com/yax/vdo?ve=1&si=370&tc=ac958c0f81cbb7a6&vdn=0&vdm=30&vfo=2&xmlVersion=xml_ver_2.0vast_wrapper,xml_ver_2.0vast&vpaidt=vpaidt_none&u=tumblr.com",o.key=o.getKey(e,t),n){n=n.replace("http:",location.protocol),r=o.getNewAdResponseObject(e,n);try{o.fireRequest(n,r)}catch(i){o.publish(s.AD_FAILURE,r,o.key,o,i.message)}}else r=o.getNewAdResponseObject(e),o.publish(s.AD_FAILURE,r,o.key,o,a.REQUEST_GENERIC)}},{"../../util":"jJTEqU","../common/Errors":118,"../common/Events":119,"./Communicator":125}],145:[function(e,t,r){"use strict";function n(){var e=this;e.actionValues=null,e.placement=null,e.ruleFunctions=[],e.cookieUtil=i}var o=e("../../../../lib"),i=e("../common/CookieUtil");t.exports=n,n.evaluateDefault=function(){var e=this,t=e.cookieUtil.getTotalClipCount()+1,r=e.start||1;return t>=r},n.evaluateStart=function(){var e=this,t=e.cookieUtil.getTotalClipCount()+1,r=e.start||1;return t===r},n.evaluateOverlay=function(){var e,t,r,n,o=this,i=o.clipDuration,a=o.timeUpdate,s=o.overlayStart||0,l=o.repeat||0,d=o.lastShown||0,c=o.padding||0,p=o.duration||0;return d=d>=a?0:d,e=a-d,t=a-s,r=a+p+c,n=t>=0&&(!d||e>=l)&&i>=r,n&&(o.lastShown=a),n},n.evaluateFrequency=function(){var e=this,t=e.cookieUtil.getRecentClipCount(),r=e.interval||0;return t>=r||1===r},n.evaluateLength=function(){var e=this,t=e.length||0,r=e.cookieUtil.getRecentVideoLength();return r>=t},n.evaluateRatio=function(){var e=this,t=e.ratio||0,r=e.cookieUtil.getAdLength(),n=e.cookieUtil.getTotalVideoLength(),o=n/r;return!isNaN(o)&&o>=t},n.evaluateMinimumDuration=function(){var e=this,t=e.clipDuration||0,r=e.minimumDuration||0;return t>=r},n.evaluatefirstAdProbability=function(){var e=this,t=e.probability||100,r=100*Math.random(),n=e.cookieUtil.getTotalClipCount()+1,o=e.start||1;return n===o&&t>=r},n.prototype.addRuleFunction=function(e){var t=this;o.isFunction(e)&&t.ruleFunctions.push(e)},n.prototype.evaluate=function(e,t){var r=this,n=0,o=r.ruleFunctions,i=!0;for(r.clipDuration=e||0,r.timeUpdate=t||0,n=0;n<o.length;n++)i=i&&o[n].call(this);return i}},{"../../../../lib":"bRhrlU","../common/CookieUtil":117}],146:[function(e,t,r){"use strict";function n(){}var o=e("./ActionRule"),i=e("./RuleGroup"),a=e("./AdSpec");t.exports=n;var s={bumper:"clipGateway",preroll:"preroll",postroll:"postroll",overlay:"videoTimeline"};n.prototype.understandRules=function(e){if(!e||"{}"===JSON.stringify(e))return null;var t,r,n,a,s,l,d,c,p,u,_,m=this,v=new i,y=e.ruleGroup;for(t=y[0],a=t.actionRule2,!a||a instanceof Array||(s=a,a=[],a.push(s)),n=0;n<a.length;n++){for(s=a[n],l=new o,d=s["@basis"]||"",c=s["@type"]||"",p=s.actionParam||[],r=0;r<p.length;r++)u=p[r],"id"===u["@name"]?l.actionValues=(u["@value"]||"").split(","):"placement"===u["@name"]&&(l.placement=u["@value"]);"videoTimeline"===d?(l.type=d,m._parseNonLinearRules(l,s)):"triggers"===d&&(l.type=c,m._parseLinearRules(l,s)),_=v[l.type]||[],_.push(l)}return v},n.prototype._parseNonLinearRules=function(e,t){e&&t&&(e.start=parseInt(t["@startatclip"],10),e.duration=parseInt(t["@duration"],10),e.interval=parseInt(t["@intervalbetweenclips"],10),e.overlayStart=parseInt(t["@start"],10),e.padding=parseInt(t["@padding"],10),e.repeat=parseInt(t["@interval"],10),e.addRuleFunction(o.evaluateOverlay))},n.prototype._parseLinearRules=function(e,t){var r=this,n=!1,i=!1,a=!1,s=!1;if(e&&t){n="true"===t["@ratioEnabled"],i="true"===t["@minDurEnabled"],a="true"===t["@lengthEnabled"],s="true"===t["@firstAdProbabilityEnabled"],e.interval=parseInt(t["@interval"],10),e.start=parseInt(t["@start"],10),e.addRuleFunction(o.evaluateDefault),i&&(e.minimumDuration=parseInt(t["@minDuration"],10),e.addRuleFunction(o.evaluateMinimumDuration));var l;s?(e.probability=parseInt(t["@firstAdProbability"],10),l=o.evaluatefirstAdProbability):l=o.evaluateStart;var d;n?(e.ratio=parseInt(t["@ratio"],10),d=o.evaluateRatio):a?(e.length=parseInt(t["@length"],10),d=o.evaluateLength):d=o.evaluateFrequency,e.addRuleFunction(r._combineFunctions(l,d,"OR"))}},n.prototype._combineFunctions=function(e,t,r){var n=function(){return!1};return"AND"===r?n=function(){var r=this;return e.call(r)&&t.call(r)}:"OR"===r&&(n=function(){var r=this;return e.call(r)||t.call(r)}),n},n.prototype.onAdEvent=function(e,t,r,n){var o=s[e],i=null,l=null;return t&&t.preEvaluate&&(l=t.evaluate(o,r,n),l&&(i=new a(e,l.actionValues,l.placement,l.duration,l.subType))),i},n.prototype.preEvaluate=function(e,t){var r,n,o=s[e],i=[],l=null;if(t&&t.preEvaluate)for(l=t.preEvaluate(o),n=0;n<l.length;n++)r=l[n],i.push(new a(e,r.actionValues,r.placement));return i}},{"./ActionRule":145,"./AdSpec":148,"./RuleGroup":150}],147:[function(e,t,r){"use strict";function n(){var e=this;o.call(e)}var o=e("./AdEngine"),i=e("./RuleGroup"),a=e("./ActionRule"),s=e("../../util");t.exports=n,s.inherits(n,o);var l={bumper:"clipGateway",preroll:"preroll",postroll:"postroll",overlay:"videoTimeline",midroll:"immediate"};n.prototype.understandRules=function(e){var t=this,r=new i,n=e.adBreakMap||{};for(var o in n)if(n.hasOwnProperty(o)){var s=n[o],d=l[o],c=r[d],p=s.extensions||{},u=p.clientRules;if(u){var _=new a;_.type=d,"videoTimeline"===d?t._parseNonLinearRules(_,u):t._parseLinearRules(_,u),c.push(_)}}return r},n.prototype._parseNonLinearRules=function(e,t){e&&t&&(e.start=parseInt(t.StartAtClip,10),e.duration=parseInt(t.AdDuration,10),e.interval=parseInt(t.Frequency,10),e.overlayStart=parseInt(t.Offset,10),e.repeat=parseInt(t.Repeat,10),e.placement="bottom",e.addRuleFunction(a.evaluateOverlay))},n.prototype._parseLinearRules=function(e,t){var r=this,n=function(){return!0};e.addRuleFunction(a.evaluateDefault);var o=t.MinDuration>0,i=t.Length>0,s=t.Frequency>0,l=t.StartAtClip>0;o&&(e.minimumDuration=parseInt(t.MinDuration,10),e.addRuleFunction(a.evaluateMinimumDuration));var d=a.evaluateStart;l&&(e.start=parseInt(t.StartAtClip,10));var c;i?(e.length=60*parseInt(t.Length,10),c=a.evaluateLength):s?(e.interval=parseInt(t.Frequency,10),c=a.evaluateFrequency):c=n,e.addRuleFunction(r._combineFunctions(d,c,"OR"))}},{"../../util":"jJTEqU","./ActionRule":145,"./AdEngine":146,"./RuleGroup":150}],148:[function(e,t,r){"use strict";function n(e,t,r,n,o){var i=this;i.type=e||"",i.actionValues=t||[],i.placement=r||"",i.adCallSequence=1,i.duration=n||0,i.adCount=0,i.fallbackParam=!0,i.adIdBeacon=0,i.subType=o,i.adNetwork="",i.mediation=0}t.exports=n},{}],149:[function(e,t,r){"use strict";function n(e,t){var r=this;r.actionValues=null,r.placement=null,r.ruleFunctions=[],r.cookieUtil=i,r.nfl_free_time=e,r.nfl_session_time=t,r.subType=""}var o=e("../../util"),i=e("../common/CookieUtil"),a=e("../common/Constants"),s=e("./ActionRule");o.inherits(n,s),t.exports=n,n.prototype._evaluateNFLPreroll=function(){var e=this,t=parseInt(e.cookieUtil.getNFLVideoLength(),10);return t>=e.nfl_free_time},n.prototype._isNFLSessionExpired=function(){var e=this,t=parseInt(e.cookieUtil.getNFLSession(),10);return(new Date).getTime()/1e3-t>=e.nfl_session_time},n.prototype.evaluate=function(){var e=this;return e._isNFLSessionExpired()?(e.actionValues=["clickable"],e.subType=a.NFL_ONLOAD,!0):e._evaluateNFLPreroll()?(e.actionValues=["clickable"],e.subType=a.NFL_PREROLL,!0):!1}},{"../../util":"jJTEqU","../common/Constants":116,"../common/CookieUtil":117,"./ActionRule":145}],150:[function(e,t,r){"use strict";function n(){var e=this;e.preroll=[],e.clipGateway=[],e.videoTimeline=[],e.postroll=[],e.immediate=[]}t.exports=n,n.prototype.evaluate=function(e,t,r){var n,o,i=this,a=i[e]||[],s=null;for(o=0;o<a.length;o++)n=a[o],n.type===e&&n.evaluate(t,r)&&(s=n);return s},n.prototype.preEvaluate=function(e){var t=this;return t[e]||[]}},{}],151:[function(e,t,r){"use strict";var n=function(e,t,r){var n,o,i,a,s,l,d=100,c=0,p=null,u=[],_=e.length;for(a=r+1;_>=a;a++){for(n=0,o=[],i=0,l=-1,s=r;_>s&&(c++,n+=e[s],i=n-t,o.push(s),!(i>=0));s=a+l)l++;if((null===p||i>=0&&p>=i)&&(p=i,u=o),0===p||c>d)break}return{indexCombo:u,exceed:p}},o=function(e,t){var r,o,i=null,a=[],s=[],l=[],d=[];for(e.sort(function(e,t){var r=e&&e.adObj&&parseInt(e.adObj.duration,10)||NaN,n=t&&t.adObj&&parseInt(t.adObj.duration,10)||NaN;return isNaN(r)&&(r=0),isNaN(n)&&(n=0),r-n}),l=e.map(function(e){var t=e&&e.adObj&&parseInt(e.adObj.duration,10)||NaN;return isNaN(t)&&(t=0),t}),r=0;r<l.length&&(s=n(l,t,r),(null===i||s.exceed>=0&&s.exceed<=i)&&(i=s.exceed,a=s.indexCombo),0!==i);r++);for(o=0;o<a.length;o++)d.push(e[a[o]]);return d};t.exports={findBestCombination:o}},{}],152:[function(e,t,r){"use strict";function n(e,t){var r,n=/\{(\w)+\}/g;return r=e.replace(n,function(e){var r,n=/(\w)+/g,o=e.match(n),i=o[0],a="";if("beap_client_event"===i.toLowerCase()){for(var s in t)t.hasOwnProperty(s)&&(a+=s+"$"+t[s]+",");return a=a.substring(0,a.length-1)}return"1x1pixel"===i.toLowerCase()?"http://ads.yimg.com/a/a/vdo/a/1x1.gif":(r=t[i],(null===t[i]||void 0===t[i])&&(r=e),r)})}function o(e,t){for(var r,n=[],o=0;o<e.length;o++)r=c.expandGeminiBeaconMacro(e[o],t),s.sendImageBeacon(r),n.push(r);return n}function i(e,t){for(var r,o=[],i=0;i<e.length;i++)r=e[i],r=n(r,t),s.sendImageBeacon(r),o.push(r);return o}function a(e,t){var r=e.adObj,n=r.beacons.impression||[],o=e.midrollbreak||0,a=e.midrolladsequence||0,s=r.duration||0,l=[];return l=l.concat(i(n,{cuuid:t,player_version:"nextgen",ad_break:o,ad_sequence:a,duration:s})),r.beacons.impression=null,l}var s=e("../../util"),l=e("../common/Errors"),d=e("../common/Constants"),c=e("../yvap-util"),p={};p[d.NOAD]=125,p[l.AD_CALL_TIMEOUT]=102,p[l.EMPTY_RESPONSE]=5122,p[l.XML_PARSING]=108,p[l.NO_PARSER]=5125,p[l.MISSING_ADTGT]=122,p[l.PLAYER_TIMEOUT]=105,p[l.REQUEST_GENERIC]=104,p[l.INCOMPATIBLE_MEDIA]=120,p[l.MEDIA_PLAYBACK]=114,p[l.ADBLOCKER]=124,p[l.SSL_MISMATCH]=121,p[l.VPAID_TIMEOUT]=127,p[l.RESPONSE_GENERIC]=5130,p[l.VPAID_SWF_DOWNLOAD_ERROR]=8121;var u={};u[d.NOAD]=303,u[l.AD_CALL_TIMEOUT]=301,u[l.EMPTY_RESPONSE]=912,u[l.XML_PARSING]=100,u[l.NO_PARSER]=101,u[l.MISSING_ADTGT]=913,u[l.PLAYER_TIMEOUT]=402,u[l.REQUEST_GENERIC]=900,u[l.INCOMPATIBLE_MEDIA]=200,u[l.MEDIA_PLAYBACK]=405,u[l.VPAID_TIMEOUT]=901,r.onAdProgress=function(e,t,r,n,s){var l=e.adObj,c=l.isSkippable?2:1;r=Math.floor(r),t=Math.round(t);var p,u=25*Math.floor(4*t/r),_="playback"+u,m=l.adFormat===d.STANDALONE_GEMINI_NATIVE,v=[];if(m)p=l.beacons[_]||[],v=v.concat(o(p,n)),l.beacons[_]=null;else{var y=l.type===d.VPAID;y||(0===u&&null!==l.beacons.impression&&(v=v.concat(a(e,s))),p=l.beacons[_]||[],n.ad_dur=r,n.s=c,v=v.concat(i(p,n)),l.beacons[_]=null),t>=30&&(p=l.beacons.cpcv||[],v=v.concat(i(p,{ad_dur:r,s:c})),l.beacons.cpcv=null)}return v},r.onVPAIDAdQuartile=function(e,t,r,n){var o=e.adObj,a=o.isSkippable?2:1,s="playback"+t,l=o.beacons[s]||[];r=Math.floor(r),n.ad_dur=r,n.s=a;var d=[];return d=d.concat(i(l,n)),o.beacons[s]=null,d},r.onAdStart=function(e,t,r){var n=e.adObj,o=[],s=n.type===d.VPAID,l=n.type===d.OVERLAY;(s||l)&&(o=o.concat(a(e,r)));var c=n.beacons.bitrate||[];return o=o.concat(i(c,{type:"bitrate",value:t})),n.beacons.bitrate=null,c=n.beacons.creativeview||[],o=o.concat(i(c,{}))},r.onAdBreakStart=function(e){var t=e.adObj,r=[];if(t&&t.beacons){var n=t.beacons["ad-break-start"]||[];r=r.concat(i(n)),t.beacons["ad-break-start"]=null}return r},r.onAdClick=function(e,t,r){var n,o=e.adObj,a=o.beacons.interaction||[],s=o.beacons.clicktracking||[],l=a.concat(s),d=Math.floor(t||10),c=[];return n=(o.params.clickCount||0)+1,o.params.clickCount=n,c=c.concat(i(l,{type:"click",time:d,seq:n}))},r.onNoAd=function(e,t){var r,n,o,a,l=e.redirectList.length,c=l>0,_=e.adObj,m=[],v=s.parseDomain(e.redirectList[0]||"")||"",y=s.parseDomain(e.redirectList[l-1]||"")||"",f=e.midrollbreak||0,g=e.midrolladsequence||0,b=_.duration||0;
return _=e.adObj||{},c||_.type!==d.NOAD?(n=e.errorState||_.type,o=p[n]||n,a=u[n],r=_.beacons.noadimpression||[],m=m.concat(i(r,{err_code:o,initial_domain:v,vendor_domain:y,cuuid:t,player_version:"nextgen",ad_break:f,ad_sequence:g,duration:b})),_.beacons.noadimpression=null,r=_.beacons.errorimpression||[],m=m.concat(i(r,{err_code:a})),_.beacons.errorimpression=null):(r=_.beacons.impression||[],m=m.concat(i(r,{cuuid:t,player_version:"nextgen",ad_break:f,ad_sequence:g,duration:b})),_.beacons.impression=null),m},r.onCompanionDisplayed=function(e){i(e,{})}},{"../../util":"jJTEqU","../common/Constants":116,"../common/Errors":118,"../yvap-util":163}],153:[function(e,t,r){"use strict";function n(){var e=this;e.bumper=null,e.preroll=null,e.midroll=null,e.postroll=null}function o(){var e=this;e.adOppEvents=[],e.adCallEvents=[],e.adDeliveryEvents=[]}function i(){var e=this;e.playContext="",e.networkName="",e.adPosition="none",e.subType="",e.taken=!1}function a(){var e=this;e.responseCode="",e.responseType="",e.firstRedirect="",e.redirectCount=0,e.adCallSequence=0,e.networkName="",e.creativeId="",e.bookingId="",e.cacheHit="",e.cacheId="",e.latency=null,e.clipStarted=!1,e.midrollAdBreak="",e.midrollAdPos="",e.adSystem="",e.br_id=""}function s(){var e=this;e.mediaStartLatency=null,e.serveId=null,e.error="",e.mtype="",e.mapif=""}function l(){}function d(){var e=this;e._latency=-1}function c(e,t,r,n){var o=this;o._yvapBus=e,o.yvapVersion=t||"default",o.accountId=r||"test",o.playerTimeout=n,o._adProfileMap={},o._allStats={},o._clipStartBoolean={},o._archiveStats={},o._yvapBus.subscribe(u.BEGIN_AD_EXP,o._onBeginAdExperience,o),o._yvapBus.subscribe(u.AD_OPPORTUNITY,o._onAdOpportunity,o),o._yvapBus.subscribe(u.NULL_AD_OPPORTUNITY,o._onNullAdOpportunity,o),o._yvapBus.subscribe(u.AD_CALL_START,o._onAdCallStart,o),o._yvapBus.subscribe(u.AD_CALL_END,o._onAdCallEnd,o),o._yvapBus.subscribe(u.AD_SUBMITTED,o._onAdSubmitted,o),o._yvapBus.subscribe(u.AD_DELIVERED,o._onAdDelivered,o),o._yvapBus.subscribe(u.AD_DELIVERY_ERROR,o._onAdDeliveryError,o),o._yvapBus.subscribe(u.VIDEO_START,o._onContentVideoStart,o),o._yvapBus.subscribe(u.VIDEO_END,o._onContentVideoEnd,o),o._yvapBus.subscribe(u.AD_BREAK_ENDED,o._midRollEnd,o),o._yvapBus.subscribe(u.AD_BREAK_SUBMITTED,o._onAdBreakSubmission,o),o._yvapBus.subscribe(u.VPAID_AD_RENDERED,o._onVpaidAdRendered,o),o._yvapBus.subscribe(u.VPAID_AD_STARTED,o._onVpaidAdStarted,o),o._yvapBus.subscribe(u.VPAID_AD_INITED,o._onVpaidAdInited,o),o._yvapBus.subscribe(u.VPAID_AD_INIT_ERROR,o._onVpaidAdInitError,o)}var p=e("../../util"),u=e("../common/Events"),_=e("../common/Errors"),m=e("../common/Constants");t.exports=c;var v={};v[m.NOAD]=2,v[m.AD]=2,v[m.VPAID]=4,v.ERROR=106;var y={};y[m.NOAD]=1,y[m.AD]=2,y[m.VPAID]=2,y[_.AD_CALL_TIMEOUT]=102,y[_.EMPTY_RESPONSE]=5122,y[_.XML_PARSING]=108,y[_.NO_PARSER]=5125,y[_.MISSING_ADTGT]=122,y[_.PLAYER_TIMEOUT]=105,y[_.REQUEST_GENERIC]=104,y[_.THIRD_PARTY_NO_AD]=125,y[_.SSL_MISMATCH]=121,y[_.MISSING_SPACEID]=131,y[_.RESPONSE_GENERIC]=5130,y[_.ADBLOCKER]=124,y[_.BRX_WITHOUT_FLASH]=750;var f=1,g=2,b={};b[m.CACHE_L0]=1,b[m.CACHE_L1]=2,b[m.CACHE_L2]=3;var A=[m.PREROLL,m.BUMPER,m.CLIP_START,m.MIDROLL,m.POSTROLL,m.CLIP_END],E={};E[_.INCOMPATIBLE_MEDIA]=120,E[_.MEDIA_PLAYBACK]=114,E[_.GENERIC]=112,E[_.VPAID_TIMEOUT]=115,E[_.ADBLOCKER]=124,E[_.VPAID_SWF_DOWNLOAD_ERROR]=8121;var h={};h[m.NOAD]=125,h[_.AD_CALL_TIMEOUT]=102,h[_.EMPTY_RESPONSE]=124,h[_.XML_PARSING]=108,h[_.MISSING_ADTGT]=122,h[_.PLAYER_TIMEOUT]=105,h[_.REQUEST_GENERIC]=104,h[_.INCOMPATIBLE_MEDIA]=120,h[_.MEDIA_PLAYBACK]=114,h[_.VPAID_TIMEOUT]=127;var T=1,S=2;a.prototype.translate=function(e){var t,r,n,o,i=this;e&&(t=e.adObj||{},e.errorState?i.responseType=v.ERROR:t.type&&(i.responseType=v[t.type]),r=e.errorState||t.type,i.responseCode=y[r]||"",i.firstCall=p.parseDomain(e.firstCall)||"",i.firstRedirect=p.parseDomain(e.redirectList[0])||"",i.redirectCount=e.redirectList.length,r===m.NOAD&&i.redirectCount>0&&(i.responseCode=y[_.THIRD_PARTY_NO_AD]),n=e.cacheState||"",i.cacheHit=b[n]||"",i.vastCreativeId=t.vastCreativeId,i.brxAuctionId=t.brxAuctionId,i.creativeId=t.creativeId||"",i.bookingId=t.bookingId||"",i.adSystem=t.adSystem||"",i.adId=t.adId||"",i.adXmlParseErr=t.adXmlParseErr||"",e.type===m.MIDROLL&&(i.midrollAdBreak=e.midrollbreak,i.midrollAdPos=e.midrolladsequence),o=e.adSpec||{},i.mediation=o.mediation||0,i.adCallSequence=o.adCallSequence||1,i.adNetwork=o.adNetwork||"")},d.prototype.start=function(){var e=this;e._startTime=(new Date).getTime()},d.prototype.end=function(){var e=this;e._startTime&&(e._latency=(new Date).getTime()-e._startTime)},d.prototype.getLatency=function(){var e=this;return e._latency},d.prototype.getStartTime=function(){var e=this;return e._startTime},c.prototype._onBeginAdExperience=function(e){var t=this;e&&(t._clipStartBoolean[e]=!1,t._allStats[e]=null)},c.prototype._onNullAdOpportunity=function(e,t){var r=this,n=new i;n.adPosition=t,n.taken=S,r._fireAdOpportunity(n)},c.prototype._onAdOpportunity=function(e,t,r,n,o,a){var s,l=this,d=null!==r&&null!==n,c=new i;a||(a=0),c.adPosition=t,r&&(c.subType=r.subType||t),o&&(c.playContext=o.licenseId),n&&(c.networkName=n.communicatorName),c.taken=d?T:S,e&&(s=l._getPositionStats(e,t),s.adOppEvents[a]=c)},c.prototype._onAdCallStart=function(e){var t,r,n=this;e&&(t="adCall"+Math.floor(100*Math.random())+(new Date).getTime(),r=new d,r.start(),n._adProfileMap[t]=r,e.adCallIdentifier=t)},c.prototype._onAdCallEnd=function(e,t){var r,n,o=this;e&&t&&(r=e.adCallIdentifier||"",n=o._adProfileMap[r],n&&(n.end(),t.adCallIdentifier=r))},c.prototype._onAdSubmitted=function(e,t){var r,n,o,i,s,l,d,c,p=this,u=0;t&&e&&(r=t.adCallIdentifier,s=t.type,i=p._adProfileMap[r],d=t.communicatorSpec,c=t.adSpec,s===m.MIDROLL&&(u=t.midrolladsequence),n=new a,n.position=s,l=p._getPositionStats(e,s),l.adCallEvents[u]=n,n.latency=i?i.getLatency():0,n.startTime=i?i.getStartTime():0,n.clipStarted=p._clipStartBoolean[e]?T:S,n.adCallSequence=c.adCallSequence,n.networkName=d.communicatorName,n.translate(t),n.br_id=t.br_id||"",p._clipStartBoolean[e]&&s!==m.MIDROLL&&(l=p._getArchivedPositionStats(e,s),l&&(o=l.adOppEvents[u],l.adCallEvents[u]=n,p._fireAdCall(o,n))))},c.prototype._onAdBreakSubmission=function(e,t,r,n,o,i,a,s){var l,d=this;r=r||0,n=n||0,o=o||0,i=i||0,a=a||0,s=s||0,e&&t===m.MIDROLL&&(l={evt:"ad_mbrk",adbrk:s,n_adopp:r,n_adsub:n,n_noad:o,n_ads:i,n_vpads:a,tmout_ms:d.playerTimeout,yvap:!0},d._yvapBus.publish(u.AD_METRIC,{ult:l}))},c.prototype._getArchivedPositionStats=function(e,t){var r,n=this;return r=n._archiveStats[e],r?r[t]:null},c.prototype._getPositionStats=function(e,t){var r,i,a=this;return r=a._allStats[e]||new n,a._allStats[e]=r,i=r[t]||new o,r[t]=i,i},c.prototype._archivePositionStats=function(e,t,r){var i,a,s,l,d,c,p=this;r=r||0,i=p._allStats[e],s=i[t],i[t]&&(l=i[t].adOppEvents[r],c=i[t].adDeliveryEvents[r],d=i[t].adCallEvents[r],i[t].adOppEvents[r]=null,i[t].adCallEvents[r]=null,i[t].adDeliveryEvents[r]=null),a=p._archiveStats[e]||new n,a[t]=a[t]||new o,l&&(a[t].adOppEvents[r]=l),l&&(a[t].adCallEvents[r]=d),l&&(a[t].adDeliveryEvents[r]=c),p._archiveStats[e]=a},c.prototype._fireForPrecedingPositions=function(e,t){for(var r,n,o,i=this,a=0;a<A.length&&A[a]!==t;a++){if(r=i._getPositionStats(e,A[a]))for(var s=0;s<r.adOppEvents.length;s++)n=r.adOppEvents[s],o=r.adCallEvents[s],i._fireAdOpportunity(n,o),i._fireAdCall(n,o);i._archivePositionStats(e,A[a])}},c.prototype._onAdDelivered=function(e,t,r,n,o,i,a,l,d,c){var p,_,v,y,f,g,b=this,A=o||0,E=i||0,h=a||0,T=l||0,S=d||0,I=c||0,L=0,M=0;if(b._fireForPrecedingPositions(e,t),n&&(M=n.adObj.duration||0),n&&n.type===m.MIDROLL&&(L=n.midrolladsequence),e&&t){if(v=new s,v.mediaStartLatency=r,n&&n.adObj&&(n.adObj.serveId&&(v.serveId=n.adObj.serveId),v.mtype=n.adObj.mtype,v.mapif=n.adObj.mapif),p=b._getPositionStats(e,t),_=b._getArchivedPositionStats(e,t),p.adDeliveryEvents[L]=v,y=p.adOppEvents[L],f=p.adCallEvents[L],b._fireAdOpportunity(y,f),b._fireAdCall(y,f),_&&(y=y||_.adOppEvents[L],f=f||_.adCallEvents[L]),y&&f&&(g={evt:"ad_dlv",ntwk:f.networkName+f.adNetwork,mediation:f.mediation,pos:y.adPosition,f_hop:f.firstRedirect,n_hop:f.redirectCount,acct_id:b.accountId,r_code:f.responseCode,r_type:f.responseType,crid:f.creativeId,bkid:f.bookingId,cchit:f.cacheHit,ms_lat:v.mediaStartLatency,adseq:f.adCallSequence,mrtime:f.midrollAdBreak,duration:M,subt:y.subType,mrpos:f.midrollAdPos,tmout_ms:b.playerTimeout,vsl:A,vil:E,vst:h,s_vsl:T,s_vil:S,s_vst:I,serv_id:v.serveId,adid:f.adId,ad_xml_err:f.adXmlParseErr,v_cr_id:f.vastCreativeId,auc_id:f.brxAuctionId||"na",ad_sys:f.adSystem,f_call:f.firstCall,yvap:!0,mtype:v.mtype,mapif:v.mapif},b._yvapBus.publish(u.AD_METRIC,{ult:g}),window.showLatencies)){var C={vsl:A,vil:E,vst:h,aml:v.mediaStartLatency};window.showLatencies(C,!0)}b._archivePositionStats(e,t,L)}},c.prototype._onAdDeliveryError=function(e,t,r,n,o,i,a){var l,d,c,p,v,y,f=this,g=0;r!==m.NOAD&&(f._fireForPrecedingPositions(e,t),n&&n.type===m.MIDROLL&&(g=n.midrolladsequence),e&&t&&(c=new s,c.error=r||_.GENERIC,n&&n.adObj&&(c.mtype=n.adObj.mtype,c.mapif=n.adObj.mapif),v=f._getPositionStats(e,t),y=f._getArchivedPositionStats(e,t),v.adDeliveryEvent=c,l=v.adOppEvents[g],d=v.adCallEvents[g],f._fireAdOpportunity(l,d),f._fireAdCall(l,d),y&&(l=l||y.adOppEvents[g],d=d||y.adCallEvents[g]),l&&d&&(p={evt:"ad_err",ntwk:d.networkName+d.adNetwork,mediation:d.mediation,pos:l.adPosition,f_hop:d.firstRedirect,n_hop:d.redirectCount,acct_id:f.accountId,r_code:d.responseCode,r_type:d.responseType,crid:d.creativeId,bkid:d.bookingId,a_dlv_err:E[c.error],adseq:d.adCallSequence,subt:l.subType,mrtime:d.midrollAdBreak,mrpos:d.midrollAdPos,tmout_ms:f.playerTimeout,vsl:o,vil:i,vpaidS:a,adid:d.adId,serv_id:c.serveId,ad_xml_err:d.adXmlParseErr,v_cr_id:d.vastCreativeId,auc_id:d.brxAuctionId||"na",ad_sys:d.adSystem,f_call:d.firstCall,yvap:!0,mtype:c.mtype,mapif:c.mapif},f._yvapBus.publish(u.AD_METRIC,{ult:p})),f._archivePositionStats(e,t,g)))},c.prototype._onVpaidAdRendered=function(e,t,r){var n,o,i,a=this,s=0;r&&r.type===m.MIDROLL&&(s=r.midrolladsequence),e&&t&&(n=a._getPositionStats(e,t),o=n.adOppEvents[s],i=n.adCallEvents[s],a._fireAdOpportunity(o,i),a._fireAdCall(o,i),a._archivePositionStats(e,t,s))},c.prototype._onVpaidAdStarted=function(e,t,r){var n,o,i,a,s,d,c=this,p=0,_=0;r&&(_=r.adObj.duration||0),r&&r.type===m.MIDROLL&&(p=r.midrolladsequence),e&&t&&(i=new l,r&&r.adObj&&r.adObj.serveId&&(i.serveId=r.adObj.serveId),n=c._getPositionStats(e,t),o=c._getArchivedPositionStats(e,t),n.adStartEvents=i,a=n.adOppEvents[p],s=n.adCallEvents[p],o&&(a=a||o.adOppEvents[p],s=s||o.adCallEvents[p]),a&&s&&(d={evt:"ad_beg",ntwk:s.networkName+s.adNetwork,mediation:s.mediation,pos:a.adPosition,subt:a.subType,f_hop:s.firstRedirect,n_hop:s.redirectCount,acct_id:c.accountId,r_code:s.responseCode,r_type:s.responseType,crid:s.creativeId,bkid:s.bookingId,cchit:s.cacheHit,adseq:s.adCallSequence,mrtime:s.midrollAdBreak,mrpos:s.midrollAdPos,duration:_,tmout_ms:c.playerTimeout,serv_id:i.serveId,adid:s.adId,ad_xml_err:s.adXmlParseErr,v_cr_id:s.vastCreativeId,auc_id:s.brxAuctionId||"na",ad_sys:s.adSystem,f_call:s.firstCall,yvap:!0},c._yvapBus.publish(u.AD_METRIC,{ult:d})),c._archivePositionStats(e,t,p))},c.prototype._onVpaidAdInited=function(e,t,r){var n=this;n._fireAdInit(e,t,r,f)},c.prototype._onVpaidAdInitError=function(e,t,r){var n=this;n._fireAdInit(e,t,r,g)},c.prototype._onContentVideoStart=function(e){var t=this;t._clipStartBoolean[e]=!0,t._fireForPrecedingPositions(e,m.CLIP_START)},c.prototype._midRollEnd=function(e){var t=this;t._clipStartBoolean[e]=!0,t._fireForPrecedingPositions(e,m.POSTROLL)},c.prototype._onContentVideoEnd=function(e){var t=this;t._fireForPrecedingPositions(e,m.CLIP_END)},c.prototype._fireAdOpportunity=function(e,t){var r,n=this,o=t&&t.adSystem?t.adSystem:"",i=t&&t.adNetwork?t.adNetwork:"",a=t&&t.mediation?t.mediation:0,s=t&&t.adCallSequence?t.adCallSequence:1;t=t||{},e&&(r={evt:"ad_oppty",pos:e.adPosition,ntwk:e.networkName+i,mediation:a,adSeq:s,acct_id:n.accountId,tmout_ms:n.playerTimeout,subt:e.subType,taken:e.taken,ad_sys:o,yvap:!0},n._yvapBus.publish(u.AD_METRIC,{ult:r}))},c.prototype._fireAdInit=function(e,t,r,n){var o,i,a,s,d,c,p=this,_=0,v=0;r&&(v=r.adObj.duration||0),r&&r.type===m.MIDROLL&&(_=r.midrolladsequence),e&&t&&(a=new l,r&&r.adObj&&r.adObj.serveId&&(a.serveId=r.adObj.serveId),o=p._getPositionStats(e,t),i=p._getArchivedPositionStats(e,t),o.adStartEvents=a,s=o.adOppEvents[_],d=o.adCallEvents[_],i&&(s=s||i.adOppEvents[_],d=d||i.adCallEvents[_]),s&&d&&(c={evt:"ad_init",init_code:n,ntwk:d.networkName+d.adNetwork,mediation:d.mediation,pos:s.adPosition,subt:s.subType,f_hop:d.firstRedirect,n_hop:d.redirectCount,acct_id:p.accountId,r_code:d.responseCode,r_type:d.responseType,crid:d.creativeId,bkid:d.bookingId,cchit:d.cacheHit,adseq:d.adCallSequence,mrtime:d.midrollAdBreak,mrpos:d.midrollAdPos,duration:v,tmout_ms:p.playerTimeout,serv_id:a.serveId,adid:d.adId,ad_xml_err:d.adXmlParseErr,v_cr_id:d.vastCreativeId,auc_id:d.brxAuctionId||"na",ad_sys:d.adSystem,f_call:d.firstCall,yvap:!0},p._yvapBus.publish(u.AD_METRIC,{ult:c})),p._archivePositionStats(e,t,_))},c.prototype._fireAdCall=function(e,t){var r,n,o=this;if(e&&t&&(n=t.clipStarted?T:S,r={evt:"ad_call",ntwk:t.networkName+t.adNetwork,mediation:t.mediation,pos:e.adPosition,f_hop:t.firstRedirect,n_hop:t.redirectCount,acct_id:o.accountId,r_code:t.responseCode,r_type:t.responseType,tmout:t.clipStarted,adl:t.latency,s_adl:t.startTime,crid:t.creativeId,bkid:t.bookingId,cchit:t.cacheHit,lms_id:e.playContext,adseq:t.adCallSequence,subt:e.subType,tmout_ms:o.playerTimeout,adblock:m.ADBLOCKER,ad_sys:t.adSystem,br_id:t.br_id,adid:t.adId,ad_xml_err:t.adXmlParseErr,v_cr_id:t.vastCreativeId,auc_id:t.brxAuctionId||"na",f_call:t.firstCall,yvap:!0},o._yvapBus.publish(u.AD_METRIC,{ult:r}),window.showLatencies)){var i={adl:t.latency};window.showLatencies(i)}},c.prototype.getArchive=function(){var e=this;return e._archiveStats}},{"../../util":"jJTEqU","../common/Constants":116,"../common/Errors":118,"../common/Events":119}],154:[function(e,t,r){"use strict";function n(){var e=this;e.diagnostic=null,e._submittedAds={}}function o(e,t,r){var n=this,o=r.adObj||{};n._adObj=o,n.clipId=e,n.playbackId=t,n.position=r.type,n.firstCall=r.firstCall,n.redirectList=[].concat(r.redirectList),n.errorState=r.errorState,n.vastCreativeId=o.vastCreativeId,n.creativeId=o.creativeId,n.bookingId=o.bookingId,n.type=o.type,n.adId=o.adId,n.duration=o.duration,n.AdParameters=o.adParameters&&o.adParameters.AdParameters,n.streams=o.streams,n.adstate=l.UNPLAYED,n.adstateData={},n.updateState=function(e,t){(n.adstate===l.UNPLAYED||n.adstate===l.PLAYING)&&(n.adstate=e,n.adstateData[e]=t)}}var i=e("../../views/ads-diagnostics.html"),a=e("../../util"),s=e("../common/Constants"),l={UNPLAYED:"unplayed",PLAYING:"playing",ENDED:"ended",ERROR:"error",CANCELLED:"cancelled"};t.exports=n,t.exports.ADSTATES=l,n.prototype.generateDiagnostics=function(e){var t=this,r=[];for(var n in e)if(e.hasOwnProperty(n)){var o={};o.clipId=n;var l=e[n];o.data=[];var d={};d.position=s.PREROLL,d.data=t._generatePositionStat(l.preroll),o.data.push(d);var c={};c.position=s.BUMPER,c.data=t._generatePositionStat(l.bumper),o.data.push(c);var p={};p.position=s.MIDROLL,p.data=t._generatePositionStat(l.midroll),o.data.push(p);var u={};u.position=s.POSTROLL,u.data=t._generatePositionStat(l.postroll),o.data.push(u),r.push(o)}var _;return r&&(_=a.render(i,{clipStats:r})),_},n.prototype._generatePositionStat=function(e){var t=[];if(e)for(var r=e.adOppEvents,n=e.adCallEvents,o=e.adDeliveryEvents,i=0;i<r.length;i++){var a={},s=r[i];s&&(a.taken=1===s.taken?!0:!1,a.communicator=s.networkName);var l=n[i];l&&(a.responseCode=l.responseCode,a.responseType=l.responseType,a.firstRedirect=l.firstRedirect,a.redirectCount=l.redirectCount);var d=o[i];d&&(a.error=d.error,a.mediaStartLatency=d.mediaStartLatency),t.push(a)}return t},n.prototype.registerAdStateChangeListener=function(e){var t=this;t._adStateChangeCb=e},n.prototype.registerAdDataAvailableListener=function(e){var t=this;t._newAdSDataAvailableCb=e},n.prototype.updateAdState=function(e,t,r){var n=this,o=n.getAdDiagnosticsById(e);o&&(o.updateState(t,r),n._adStateChangeCb&&n._adStateChangeCb(e,o.adstate,o.adstateData))},n.prototype.getAllAdDiagnostics=function(){var e=this;return e._submittedAds},n.prototype.getAdDiagnosticsById=function(e){var t=this;for(var r in t._submittedAds)if(t._submittedAds.hasOwnProperty(r)){var n=t._submittedAds[r][e];if(n)return n}return null},n.prototype.addAdData=function(e,t,r){var n=this;n._submittedAds[e]||(n._submittedAds[e]={});var i=new o(e,t,r);n._submittedAds[e][t]=i,n._newAdSDataAvailableCb&&n._newAdSDataAvailableCb(i)}},{"../../util":"jJTEqU","../../views/ads-diagnostics.html":68,"../common/Constants":116}],155:[function(e,t,r){"use strict";function n(e){var t,r=this,o="",i=-1;if(r&&r instanceof n&&e&&!a.hasOwn(r,"_rendererDiv")){try{i=e.getAttribute&&e.setAttribute&&(e.parentElement||e.parentNode)?1:0}catch(s){i=-2}if(1===i)try{i=e.ownerDocument||e.document?1:-3}catch(s){i=-4}1===i?(t=r.getFrameElement(),t&&(e=t),o=e.getAttribute("id")||"",o=o?o:e.id,r._rendererDiv=e,o||(o="yvapview_"+c,e.id=o,e.setAttribute("id",o),c+=p),r._elementID=o,r._validElement=1):(r._rendererDiv=null,r._elementID="",r._validElement=i)}}function o(e,t,r){var o=this;n.call(o,t),o._reset(),o._eventBus=e,o._isMute=r,o._eventBus.subscribe(d.AD_PLAYBACK_ENDED,o._stop,o),o._eventBus.subscribe(d.Ad.PAUSE,o._pause,o),o._eventBus.subscribe(d.AD_PLAYBACK_RESUMED,o._resume,o),o._eventBus.subscribe(d.FULLSCREEN_CHANGE,o._toggleFullScreenSetting,o),o._eventBus.subscribe(d.API.PLAYER_MUTE_CHANGE,o._muteChange,o)}var i=e("../../util"),a=(e("../../../../lib/logger"),e("../yvap-util")),s=e("../common/Constants"),l=e("./ViewabilityTracker"),d=e("../../event"),c=(new Date).getTime()-Math.round(1e4*Math.random()),p=Math.round(100*Math.random());t.exports=o,n.getViewability=function(e,t){var r=new n(e);return r.getViewability(t)},n.prototype.getWindow=function(){return window},n.prototype.getFrameElement=function(){var e=this,t=e&&e.getWindow(),r=!a.isInTopWindow(t),n=null;if(r)try{n=t.frameElement||null}catch(o){n=null}return n},n.prototype._getViewInfoFromSafeFrame=function(){var e=this,t=e&&e.getWindow()||null,r=null;if(a.isInSafeFrame(t))try{r=t.$sf.ext.geom()||null}catch(n){r=null}return r},n.prototype._getViewInfoFromDARLA=function(){var e,t=this,r=t&&t.getWindow()||null,n=a.getDARLA(r)||null,o=n&&n.darla||null,i=t&&t._elementID||"";if(o&&i)try{e=o.yvap.view(i),e&&"object"==typeof e&&("self"in e&&"rect"in e||"iv"in e||(e=null))}catch(s){e=null}return e},n.prototype.getSize=function(e){var t,r,n=this,o=n&&n._rendererDiv||null,i=n&&n.getWindow()||null,s=(n&&n._elementID||"",""),l=0,d=0;if(i)if(a.isInTopWindow(i))if(t=n._getViewInfoFromDARLA(),t&&(r=t.rect||t.self||t),r)l=r.w,d=r.h;else try{l=o.clientWidth,d=o.clientHeight}catch(c){l=d=0}else if(t=n._getViewInfoFromSafeFrame(),t&&(r=t.rect||t.self||t),r)l=r.w,d=r.h;else try{l=o.clientWidth,d=o.clientHeight}catch(c){l=d=0}return l=parseInt(l,10),d=parseInt(d,10),(isNaN(l)||0>l)&&(l=d=0),(isNaN(d)||0>d)&&(l=d=0),s=l+"x"+d,e=e||{},e.w=l,e.h=d,t&&(e.v=t),s},n.prototype.getViewability=function(e){var t,r,n,o=this,i=o&&o.getWindow(),s=0;return o._isFullScreen?s=1:(t=a.isInTopWindow(i)?o._getViewInfoFromDARLA():o._getViewInfoFromSafeFrame(),t&&(n=t.rect,r=t.self),r&&"iv"in r?s=r.iv:n&&"iv"in n?s=n.iv:t&&"iv"in t&&(s=t.iv),s=parseFloat(s),(isNaN(s)||0>s)&&(s=0)),e&&t&&a.mix(e,t,!0,!0),s},o.prototype=new n,o.prototype._reset=function(){var e=this;clearInterval(e._timer),e._timer=null,e._ad=null,e._communicatorName=null,e._isFullScreen=!1,e._firstCheck=!0,e._viewAtInit=0,e._viewabilityBeaconFired=!1,e._viewableTime=0,e._totalViewableTime=0,e._totalPlaybackDuration=0,e._started=0,e._percentViewArr=[],e._isViewabilityMeasurable=s.UNKNOWN,e._viewabilityTrackers=[],e._totalAudioTimeInView100=0},o.prototype._getViewability=function(){var e,t,r,n=this,o=n&&n.getWindow(),i=(n&&n._elementID,0);n._isFullScreen?i=1:(e=a.isInTopWindow(o)?n._getViewInfoFromDARLA():n._getViewInfoFromSafeFrame(),e&&(r=e.rect,t=e.self),t&&"iv"in t?i=t.iv:r&&"iv"in r?i=r.iv:e&&"iv"in e&&(i=e.iv),i=parseFloat(i),(isNaN(i)||0>i)&&(i=0)),n._viewabilityTrackers.forEach(function(e){e.viewabilityUpdated(i)}),n._handleViewability(i)},o.prototype._handleViewability=function(e){var t,r,n=this;if(n._totalPlaybackDuration=n._firstCheck?0:n._totalPlaybackDuration+s.INTERNAL_POLLING_INTERVAL,e>=s.VIEWABILITY_THRESHOLD&&!n._firstCheck?(n._viewableTime=n._viewableTime+s.INTERNAL_POLLING_INTERVAL,n._totalViewableTime=n._totalViewableTime+s.INTERNAL_POLLING_INTERVAL):n._viewableTime=0,n._firstCheck?(n._firstCheck=!1,n._viewAtInit=e>=s.VIEWABILITY_THRESHOLD?1:0):1!==e||n._isMute||(n._totalAudioTimeInView100+=s.INTERNAL_POLLING_INTERVAL),n._percentViewArr.push(e),n._viewableTime>=s.TIME_FOR_VIEWABLE_IMPRESSION&&!n._viewabilityBeaconFired&&(t=n._getAvBeaconUrl(e),r=n._ad.beacons.viewableimpression||[],t||r.length>0)){if(t&&i.sendImageBeacon(t),r.length>0)for(var o=0;o<r.length;o++)n._processYamPlusBeacon(r[o],e);n._viewabilityBeaconFired=!0}n._viewabilityTrackers.forEach(function(t){t.maybeSendBeacon(e,n._isMute)})},o.prototype._processYamPlusBeacon=function(e,t){var r=this;if(e){var n,o={},a=(new Date).getTime();o.pctview=100*t,o.initview=r._viewAtInit,o.MeasurementType=1,o.Timestamp=a,n=r._populateYamPlusMacros(e,o),i.sendImageBeacon(n)}},o.prototype._populateYamPlusMacros=function(e,t){var r,n=/\{(\w)+\}|\%(\w)+\%/g,o=t,i=function(e){var t,r=/(\w)+/g,n=e.match(r),i=n[0];return t=o[i],"undefined"!=typeof t&&null!==t?t:e};return r=e.replace(n,i)},o.prototype._getAvBeaconUrl=function(e){var t,r,n,o=this,i=o.getWindow(),s=(o._elementID,"");if(n=o._getBeaconData(e),t=a.getDARLA(i)||null,r=t&&t.darla||null,n&&r)try{s=r.yvap.avb(n.spaceId,n.pvId,n.position,n.serveTime)}catch(l){s=""}return s},o.prototype._getBeaconData=function(e){var t=this,r={},n={};return n.size=t.getSize(),n.bookID=t._ad.bookingId,n.ioID=999999,n.lineID=999999,n.adID=999999,n.slotID=999999,n.creativeID=t._ad.creativeId,n.impID=t._ad.impressionId,n.pctIV=100*e,n.initIV=t._viewAtInit,r.spaceId=t._ad.spaceId,r.pvId=t._ad.serveId,r.serveTime=t._ad.serveTime,r.position={},r.position[t._ad.position]=n,r},o.prototype._toggleFullScreenSetting=function(){var e=this,t=e._isFullScreen;e._isFullScreen=t?!1:!0},o.prototype._pause=function(){var e=this;clearInterval(e._timer),e._viewabilityTrackers.forEach(function(e){e.pauseTriggered()})},o.prototype._resume=function(e){var t=this;1===t._started&&(t._timer=setInterval(function(){t._getViewability()},s.INTERNAL_POLLING_INTERVAL))},o.prototype._muteChange=function(e){var t=this;t._isMute=e,t._viewabilityTrackers.forEach(function(t){t.muteTriggered(e)})},o.prototype._stop=function(e){var t=this;clearInterval(t._timer),t._started=0,t._viewabilityTrackers.forEach(function(e){e.stopTriggered()})},o.prototype._isSupportedCommunicator=function(){var e=this,t=[s.PREVIEW,s.STANDALONE_GEMINI_NATIVE];return-1!==t.indexOf(e._communicatorName)?!0:!1},o.prototype.start=function(e,t){var r,n=this;n._reset(),n._rendererDiv&&e&&(n._ad=e.adObj,r=e.communicatorSpec,n._communicatorName=r&&r.communicatorName?r.communicatorName:"",n._isSupportedCommunicator()&&(a.isViewabilityMeasurable()?(n._viewabilityTrackers=n._constructTrackers(n._ad),n._isViewabilityMeasurable=s.VIEWABILITY_MEASURABLE,n._started=1,n._getViewability(),n._timer=setInterval(function(){n._getViewability()},s.INTERNAL_POLLING_INTERVAL)):n._isViewabilityMeasurable=a.getViewabilityNonMeasurableValue()))},o.prototype._constructTrackers=function(e){var t=this,r=[],n=e&&e.rules||{},o=e&&e.beacons||{},i=n.viewabilityDefVideo,a=o.impression;i&&a&&r.push(new l(i,a,t,t._isMute));var s=n.viewabilityDefVideo3P,d=o.impression3p;return s&&d&&s.forEach(function(e){r.push(new l(e,d,t,t._isMute))}),r},o.prototype.getViewabilitySummary=function(){var e=this;if(!e._isSupportedCommunicator())return{};var t={data:e._percentViewArr,max:function(){return this.data.length?Math.max.apply(Math,this.data):0},min:function(){return this.data.length?Math.min.apply(Math,this.data):0},avg:function(){for(var e=this.data,t=e.length,r=0,n=0,o=0;t>o;o++)r+=e[o];return n=r/t||0},latest:function(){var e=this.data.length,t=0;if(e){var r=e-1;t=this.data[r]||0}return t}},r={},n=(e.getSize(r),{vi_tpd:e._totalPlaybackDuration,vi_tvd:e._totalViewableTime,vi_mpv:(100*t.min()).toFixed(0),vi_mxpv:(100*t.max()).toFixed(0),vi_apv:(100*t.avg()).toFixed(0),vi_lpv:t.latest(),vi_tativ:e._totalAudioTimeInView100,vi_pw:r.w,vi_ph:r.h,vi_psnd:e._isMute?s.PLAYER_SOUND_OFF:s.PLAYER_SOUND_ON,vi_pfs:e._isFullScreen?s.PLAYER_FULLSCREEN_ON:s.PLAYER_FULLSCREEN_OFF,vi_ploc:s.UNKNOWN,vi_pib:s.UNKNOWN,vi_pap:s.UNKNOWN,vi_m:e._isViewabilityMeasurable});return n}},{"../../../../lib/logger":"IS9j5T","../../event":"YJm+dH","../../util":"jJTEqU","../common/Constants":116,"../yvap-util":163,"./ViewabilityTracker":156}],156:[function(e,t,r){"use strict";function n(e,t,r,n){var i=this;i._rule=e||{},i._beaconTemplates=t.slice()||[],i._viewabilityManager=r,i._isBeaconSent=!1,i._viewabilityType=i._rule[o.VIEWABILITY_RULE_TYPE],i._isConsecutivePlaybackRequired=1===i._rule[o.VIEWABILITY_RULE_CONSECUTIVE_PLAYBACK],i._isAudioRequired=1===i._rule[o.VIEWABILITY_RULE_AUDIO],i._minViewability=(i._rule[o.VIEWABILITY_RULE_MIN_PIXELS]||0)/100,i._minDuration=1e3*(i._rule[o.VIEWABILITY_RULE_MIN_DURATION]||0),i._previousViewability=null,i._previousIsMute=n,i._viewableDuration=0}var o=e("../common/Constants"),i=e("../../util"),a=e("../yvap-util");t.exports=n,n.prototype.pauseTriggered=function(){var e=this;e._isConsecutivePlaybackRequired&&(e._viewableDuration=0)},n.prototype.stopTriggered=function(){var e=this;e._isConsecutivePlaybackRequired&&(e._viewableDuration=0)},n.prototype.muteTriggered=function(e){var t=this;t._isAudioRequired&&t._isConsecutivePlaybackRequired&&e&&(t._viewableDuration=0)},n.prototype.viewabilityUpdated=function(e){var t=this;t._isConsecutivePlaybackRequired&&e<t._minViewability&&(t._viewableDuration=0)},n.prototype.maybeSendBeacon=function(e,t){var r=this;return r._isBeaconSent?!0:(null===r._previousViewability?r._previousViewability=e:r._previousViewability>=r._minViewability&&e>=r._minViewability&&(r._isAudioRequired&&(r._previousIsMute||t)||(r._viewableDuration+=o.INTERNAL_POLLING_INTERVAL)),r._previousViewability=e,r._previousIsMute=t,r._viewableDuration>=r._minDuration?(r._sendBeacon(),!0):!1)},n.prototype._sendBeacon=function(){var e=this,t=e._viewabilityManager.getViewabilitySummary(),r=[];if(e._isBeaconSent)return r;for(var n=0;n<e._beaconTemplates.length;n++){var o=a.expandGeminiBeaconMacro(e._beaconTemplates[n],t,{viewabilityType:e._viewabilityType});i.sendImageBeacon(o),r.push(o)}return e._isBeaconSent=!0,r}},{"../../util":"jJTEqU","../common/Constants":116,"../yvap-util":163}],157:[function(e,t,r){"use strict";function n(e,t,r,n,o){var i=this;t&&(i.playbackId=e||"",i.resourceType=t.resourceType||"",i.resourceUrl=t.resourceUrl||"",i.scalable=t.scalable||"",i.duration=n||0,i.position=r||"",o&&(i.adParams=o.AdParameters))}t.exports=n},{}],158:[function(e,t,r){"use strict";function n(e){var t=this;t._customParams={},t.rules=null,t.allocation=null,t.adList=null,t.rendererType=null,t.adTargeting=null,t.clipCategory=null,t.iceBreaker=null,e&&(t.clipId=e.clipId,t.clipDuration=e.clipDuration,t.licenseId=e.licenseId,t.spaceId=e.spaceId,t.playlistId=e.playlistId,t.rendererType=e.rendererType,e.yvap&&t._processAdData(e.yvap),t.isLive=e.isLive||!1,t.hasLiveMidrolls=e.hasLiveMidrolls||!1,t.hasLiveMidrolls&&(t.liveMidrollsMaxDur=e.liveMidrollsMaxDur),t.isLive&&0===t.clipDuration&&(t.clipDuration=450))}t.exports=n;var o=e("./common/Constants"),i=e("./communicator/ParserManager");n.prototype.addCustomParams=function(e,t){var r=this;r._customParams[e]=t},n.prototype.getCustomParams=function(e){var t=this;return t._customParams[e]},n.prototype.setAdData=function(e){var t=this;t._processAdData(e)},n.prototype._processAdData=function(e){var t,r=this;if(e){var n=e.adRules;if(n){var a=n.result;if(a){r.rules=a.ruleGroup||{},r.allocation=a.allocation||{},r.rendererType=a.rendererType||"",r.adList=a.adList||[];var s=a.vmap;s&&(t=i.parseAdXml(s),t&&(r.vmapData=t))}else n.adResponse&&(t=i.parseAdXml(n.adResponse),t&&(r.vmapData=t))}r.adTargeting=e.ad_targeting||"",r.clipCategory=e.category||"",r[o.YVAP_INFO_AD_BREAKS]=e[o.YVAP_INFO_AD_BREAKS]||"",r.content_provider_data=e.content_provider_data,r.topics=e.topics,r.showName=e.show_name}},n.prototype.clean=function(){var e=this;e.rules=null,e.allocation=null,e.rendererType=null,e.adList=null,e.iceBreaker=null,e.vmapData=null,e[o.YVAP_INFO_AD_BREAKS]=null}},{"./common/Constants":116,"./communicator/ParserManager":132}],159:[function(e,t,r){"use strict";function n(e,t){var r=this;r._yvapBus=e,t&&t.getElementsByTagName&&(r._container=t),r._overlayDiv=document.createElement("div"),r._overlayDiv.style.display="inline-block",r._overlayDiv.style.textAlign="auto",r._overlayDiv.style.position="absolute",r._currentDom=null,r._displayTimer=null;r.svgElem=document.createElement("div"),r.svgElem.style.display="block",r.svgElem.style.position="absolute",r.svgElem.style.top="0",r.svgElem.style.right="0",r.svgElem.style.backgroundColor="white",r.svgElem.style.pointerEvents="auto",r.svgElem.style.width="10px",r.svgElem.style.height="10px",r.svgElem.innerHTML='<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg" style="position: absolute; top:0px; right:0px;">        <g>        <title>Layer 1</title>        <polygon fill="#000000" points="10,1.502 8.498,0 5,3.499 1.502,0.001 0,1.503 3.498,5 0,8.498 1.502,10 5,6.502 8.498,10 10,8.498    6.502,5 " id="svg_1"/>        </g>        </svg>',r.svgElem.addEventListener("click",function(e){r.removeOverlay()})}var o=e("../common/Events");e("../../../../lib/logger");t.exports=n,n.prototype.renderOverlay=function(e){var t,r,n,i,a,s,l,d=this,c=document.createElement("div");if(!d._currentDom&&e&&(l=e.playbackId||"",r=e.resourceType||"",t=e.resourceUrl||"",i=e.scalable||!1,a=e.duration||0,s=e.position,"image/jpeg"===r&&t&&(n=document.createElement("img"),n.src=t),n&&d._container)){d._overlayDiv.style[s]="0px",c.appendChild(n),c.appendChild(d.svgElem),d._currentDom=c;var p=d._overlayDiv.style;p.position="absolute",p.display="block",d._overlayDiv.style[s]="0px",p.height="50px",p.width="100%",p.zIndex=100,p.pointerEvents="none",p.background="transparent",p.textAlign="center",c.style.position="relative",c.style.display="inline-block",c.style.textAlign="auto",c.style.background="transparent",c.style.textAlign="center",c.style.height="50px",d._container.appendChild(d._overlayDiv),d._overlayDiv.appendChild(c),d._displayTimer=setTimeout(function(){d.removeOverlay()},1e3*a),n.style.pointerEvents="auto",n.style.opacity="0.5",n.addEventListener("click",function(e){d._yvapBus&&d._yvapBus.publish(o.OVERLAY_CLICK,l)}),n.addEventListener("mouseover",function(e){e.target.style.opacity="1.0"}),n.addEventListener("mouseout",function(e){e.target.style.opacity="0.85"}),d._yvapBus&&d._yvapBus.publish(o.OVERLAY_RENDERED,l)}},n.prototype.removeOverlay=function(){var e=this;e._container&&e._currentDom&&e._overlayDiv&&(e._overlayDiv.removeChild(e._currentDom),e._container.removeChild(e._overlayDiv),e._currentDom=null),clearTimeout(e._displayTimer)}},{"../../../../lib/logger":"IS9j5T","../common/Events":119}],160:[function(e,t,r){"use strict";function n(e,t,r,n){var s=this,c=e.yvap.accountId,p=e.yvap.timeout,u=e.yvap.standaloneAd;s._config=e,s._eventBus=t,s._yvapBus=new i("yvap"),s._rendererDiv=r||{},s._player=n||{},s._standaloneMode=e.yvap.standaloneAd&&e.yvap.standaloneAd.xml?!0:!1,s._cacheManagerYQL=new g(s._yvapBus),s._cacheManagerIceBreaker=new b(s._yvapBus),s._cacheManager=s._cacheManagerYQL,s._analytics=new S(s._yvapBus,"fireball",c,p),s._adEngineYQL=new m,s._adEngineIceBreaker=new v,s._adEngine=s._adEngineYQL,s._allocationManager=A,s._adPlaybackManager=h,
s._diagnostics=new T;var _=s._rendererDiv.clientWidth,y=s._rendererDiv.clientHeight;s._vpaidjsRenderer=new E(s._eventBus,s._yvapBus),s._vpaidflashInterface=new M(s._eventBus,s._yvapBus,_,y,n,e.yvap.vpaidTimeout,e.yvap.preInitVpaid),s._overlayRenderer=new C(s._yvapBus,s._rendererDiv),s._midrollsHelper=null,(!a.ie||a.ie>=10)&&P.detectAdBlocker(function(e){d.ADBLOCKER=e}),s._currentClipId="",s.playbackMap={},s.waitlistMap={},s._videoStartTime=0,s._lastVolume=1,"number"==typeof e.yvap.volume&&(s._lastVolume=e.yvap.volume),s._mute=e.yvap.mute||!1,s._onVolumeChange(s._lastVolume),s._onMuteChange(s._mute),s._viewabilityManager=new I(s._eventBus,s._rendererDiv,s._mute),s._clipStarted=!1,s._iceBreakerClips={},s._yvapBus.subscribe(l.CACHE_UPDATE,s._onCacheUpdate,s),s._yvapBus.subscribe(l.CACHE_REFRESH_REQUEST,s._onCacheRefreshRequest,s),s._yvapBus.subscribe(l.MIDROLL_CACHE_UPDATE,s._onMidrollCacheUpdate,s),s._yvapBus.subscribe(l.AD_METRIC,s._onAdMetric,s),t.subscribe(o.PLAYBACK_PROGRESS,s._onContentVideoProgress,s),t.subscribe(o.PLAYBACK_STARTED,s._onContentVideoStart,s),t.subscribe(o.PLAYBACK_ENDED,s._onContentVideoEnd,s),t.subscribe(o.AD_PLAYBACK_STARTED,s._onAdStart,s),t.subscribe(o.AD_PLAYBACK_PROGRESS,s._onAdProgress,s),t.subscribe(o.AD_PLAYBACK_ENDED,s._onAdEnd,s),t.subscribe(o.AD_CLICK,s._onAdClick,s),t.subscribe(o.Ad.BREAK_CANCELLED,s._onAdBreakCancelled,s),t.subscribe(o.Ad.NO_PLAYABLE_STREAM,s._onAdNotPlayable,s),t.subscribe(o.Ad.NO_AD,s._onNoAd,s),t.subscribe(o.AD_PLAYBACK_ERROR,s._onAdPlaybackError,s),t.subscribe(o.API.PLAYBACK_SEEK_COMPLETE,s._onContentVideoSeek,s),t.subscribe(o.PLAYER_RESIZE,s._onPlayerResize,s),t.subscribe(o.CONTROLS_SET_VOLUME,s._onVolumeChange,s),t.subscribe(o.CONTROLS_SET_MUTE,s._onMuteChange,s),t.subscribe(o.AD_PLAYBACK_REQUEST,s._onAdPlaybackRequest,s),t.subscribe(o.SWF_READY,s._onSwfReady,s),t.subscribe(o.PAUSE_VPAID,s._onPauseVpaid,s),t.subscribe(o.RESUME_VPAID,s._onResumeVpaid,s),s._yvapBus.subscribe(l.OVERLAY_CLICK,s._onOverlayAdClick,s),s._yvapBus.subscribe(l.OVERLAY_RENDERED,s._onOverlayAdStart,s),t.subscribe(o.AD_BREAK_STARTED,s._midRollStart,s),t.subscribe(o.AD_BREAK_ENDED,s._midRollEnd,s),s._yvapBus.subscribe(l.AD_STARTED,s._onVpaidAdStart,s),s._yvapBus.subscribe(l.AD_INITED,s._onVpaidAdInited,s),s._yvapBus.subscribe(l.AD_INIT_ERROR,s._onVpaidAdInitError,s),s._yvapBus.subscribe(l.VPAID_AD_QUARTILE,s._onVPAIDAdQuartile,s),s._secretCode="",s._theBestTeam(),u&&(u.xml||u.gemini||u.brxd)&&(s._standaloneMode=!0,u.xml?s._standaloneAdHelper=new k(s._yvapBus,u):u.gemini?s._standaloneAdHelper=new x(s._yvapBus,u):u.brxd&&(s._standaloneAdHelper=new B(s._yvapBus,u))),n.createAdsInfoPanel(s._diagnostics)}t.exports=n;var o=(e("../../../lib/logger"),e("../event")),i=e("../../../lib/event-bus"),a=e("../../../lib/user-agent"),s=e("../../../lib"),l=e("./common/Events"),d=e("./common/Constants"),c=e("./common/Errors"),p=e("./ads-json"),u=e("./engine/AdSpec"),_=e("./player-data"),m=e("./engine/AdEngine"),v=e("./engine/AdEngineIceBreaker"),y=e("./engine/NFLRules"),f=e("./allocation/RefreshAllocation"),g=e("./cache/CacheManager"),b=e("./cache/CacheManagerIceBreaker"),A=e("./allocation/AllocationManager"),E=e("./vpaid/vpaidjs-renderer"),h=e("./monitoring/AdPlaybackManager"),T=e("./monitoring/Diagnostics"),S=e("./monitoring/Analytics"),I=e("./monitoring/ViewabilityManager"),L=e("./engine/RuleGroup"),M=e("./vpaid/VPAIDFlashInterface"),C=e("./renderer/HTML5OverlayRenderer"),N=e("./communicator/CommunicatorFactory"),D=e("./allocation/CommunicatorSpec"),R=e("./common/CookieUtil"),P=e("./yvap-util"),w=e("./overlay-json"),O=e("./communicator/MidRollsHelper"),k=e("./communicator/StandaloneGeminiBRXHelper"),x=e("./communicator/StandaloneGeminiNativeHelper"),B=e("./communicator/StandaloneBRXDHelper"),j=e("./midrolls-util"),U=e("./communicator/RefreshMidRollsHelper"),V=e("./communicator/ParserManager"),F={};F[d.BUMPER]=!0,F[d.PREROLL]=!0,F[d.POSTROLL]=!0,F[d.NON_LINEAR]=!1;var Y=e("./yvap-util"),z=[c.AD_CALL_TIMEOUT,c.PLAYER_TIMEOUT,c.ERR_VPAID_TIMEOUT,c.ADBLOCKER];n.prototype._parseNewPlayerData=function(e){var t=this,r=e.clipId,n=e.vmapData;if(t._cacheManager.addAllocationForClipId(new f,r),t._cacheManager.addPlayerDataForClipId(e,r),s.isFunction(window.getAdXmlForPreview)){var o=window.getAdXmlForPreview();if("xml"===o.type){var i=V.parseAdXml(o.value);i&&i.adBreakMap&&(n=i)}}var a=t._adEngine.understandRules(n);t._cacheManager.addRuleForClipId(a,r),t._cacheManager.updateAdCache(n,r)},n.prototype._parsePlayerData=function(e){var t=this,r=e.clipId,n=e.rules,o=t._adEngine.understandRules(n);o&&t._cacheManager.addRuleForClipId(o,r);var i=e.allocation,a=t._allocationManager.understandAllocation(i);a&&t._cacheManager.addAllocationForClipId(a,r),t._cacheManager.addPlayerDataForClipId(e,r);var s=e.adList;t._cacheManager.updateAdCache(s,r)},n.prototype._handleNFLRules=function(e,t){var r=this,n=new L,o=n.preroll,i=d.NFL_FREE_TIME,a=d.NFL_SESSION_TIME;t&&t.rules&&(i=parseInt(t.rules.freeUserPeriodInSeconds,10),a=parseInt(t.rules.onloaderPeriodInSeconds,10));var s=new y(i,a);s.type=d.PREROLL,o.push(s),r._cacheManager.addRuleForClipId(n,e)},n.prototype.updatePlayerData=function(e){for(var t,r=this,n=0;n<e.length;n++){t=new _(e[n]);var o=t.clipId;t.vmapData?(r._iceBreakerClips[o]=!0,r._cacheManager=r._cacheManagerIceBreaker,r._adEngine=r._adEngineIceBreaker,r._parseNewPlayerData(t)):(r._iceBreakerClips[o]=!1,r._cacheManager=r._cacheManagerYQL,r._adEngine=r._adEngineYQL,r._parsePlayerData(t)),t.licenseId===d.NFL_NOW_LMSID&&r._handleNFLRules(o,t.content_provider_data);var i=t[d.YVAP_INFO_AD_BREAKS];if(i||t.hasLiveMidrolls){if(i){var a=V.parseAdXml(i)||{};a=a.adBreakMap,r._cacheManager.addCuePointsForClipId(a,o)}r._midrollsHelper||(r._iceBreakerClips[o]?(r._midrollsHelperIceBreaker=new U(r._yvapBus,r._cacheManagerIceBreaker),r._midrollsHelper=r._midrollsHelperIceBreaker):(r._midrollsHelperYQL=new O(r._yvapBus,r._cacheManagerYQL),r._midrollsHelper=r._midrollsHelperYQL))}t.clean()}},n.prototype.getAdsFor=function(e){var t,r,n,o,i,a=this,s=new D;return s.communicatorName=d.YAXv,t=N.getCommunicatorUsingSpec(s),e&&e.clipId?(i=e.clipId,t?(n=new _(e),r=new u(d.PREROLL,["clickable"]),o=t.getKey(r,n),a._cacheManager.addPlayerDataForClipId(n,i),a._yvapBus.publish(l.AD_OPPORTUNITY,i,d.PREROLL,r,s,n),a._cacheManager.getNewAd(t,r,n),a._addKeyToWaitlist(o,r),!0):!1):(a._yvapBus.publish(l.NULL_AD_OPPORTUNITY,i,d.CLIP_DATA_MISSING),!1)},n.prototype.beginAdExperience=function(e,t){var r,n=this;if(n._iceBreakerClips[e]===!0?(n._cacheManager=n._cacheManagerIceBreaker,n._adEngine=n._adEngineIceBreaker):(n._cacheManager=n._cacheManagerYQL,n._adEngine=n._adEngineYQL),n.waitlistMap={},n._currentClipId=e,n._clipStarted=!1,n._overlayRenderer.removeOverlay(),n._vpaidflashInterface.stopAd(),n._yvapBus.publish(l.BEGIN_AD_EXP,e),n._standaloneMode){var i=n._standaloneAdHelper.getAd();return void(i&&(n._checkForVPAIDPreInit(i),n._yvapBus.publish(l.AD_OPPORTUNITY,e,i.type,i.adSpec,i.communicatorSpec,{}),n._updateAds(i)))}if(s.isFunction(window.getAdXmlForPreview)&&s.isFunction(n._cacheManager.getNewIceBreakerResponseVMAPXml)){var a=window.getAdXmlForPreview();if("tag"===a.type)return void n._cacheManager.getNewIceBreakerResponseVMAPXml(a.value,function(t){var r=V.parseAdXml(t);if(r&&r.adBreakMap){var o=n._adEngine.understandRules(r);n._cacheManager.addRuleForClipId(o,e),n._cacheManager.updateAdCache(r,e);var i=n._cacheManager.getRuleForClipId(e);if(i){var a=n._getAd(d.PREROLL,e);n._updateAds(a);var s=n._getAd(d.BUMPER,e);n._updateAds(s)}else n._yvapBus.publish(l.NULL_AD_OPPORTUNITY,e,d.RULES_MISSING);n._fireAdsReady()}})}if(r=n._cacheManager.getCuePointsForClipId(e)){var c=[];for(var p in r)if(r.hasOwnProperty(p)){var u=Y.convertTimeToSeconds(r[p].timeOffset);c.push(u)}n._eventBus.publish(o.AD_BREAK_TIMELINE,c)}var _=n._cacheManager.getPlayerDataForClipId(e);(r||_.hasLiveMidrolls)&&(n._midrollsHelper.stopMidRollsFetchThread(),n._midrollsHelper.startMidRollsFetchThread(e));var m=n._cacheManager.getRuleForClipId(e);if(m){var v=n._getAd(d.PREROLL,e);n._updateAds(v);var y=n._getAd(d.BUMPER,e);n._updateAds(y)}else n._yvapBus.publish(l.NULL_AD_OPPORTUNITY,e,d.RULES_MISSING);n._fireAdsReady()},n.prototype._fireAdsReady=function(){var e=this,t=!1;for(var r in e.waitlistMap)e.waitlistMap.hasOwnProperty(r)&&(t=t||e.waitlistMap[r]);t||e._eventBus.publish(o.ADS_READY)},n.prototype._getAd=function(e,t,r){var n=this,o=null,i=n._cacheManager.getRuleForClipId(t),a=n._cacheManager.getPlayerDataForClipId(t),s=n._cacheManager.getAllocationForClipId(t);if(i&&a&&s){var d=n._adEngine.onAdEvent(e,i,a.clipDuration,r),c=s.pickCommunicator(d);if(null!==c&&(c.customSPID=n._config.yvap.customSPID,c.customDomain=n._config.yvap.customDomain),n._yvapBus.publish(l.AD_OPPORTUNITY,t,e,d,c,a),o=n._cacheManager.getAd(t,c,d),!o){var p=N.getCommunicatorUsingSpec(c);if(p){var u=p.getKey(d,a);n._addKeyToWaitlist(u,d)}}}return o},n.prototype._checkForVPAIDPreInit=function(e){var t,r=this;e&&(t=e.adObj,t&&t.type===d.VPAID&&r._yvapBus.publish(l.VPAID_PREFETCH_REQUEST,t))},n.prototype._createAdsJson=function(e){var t=this,r=null;if(e){var n=e.adObj,o=e.type,i="ad"+Math.floor(1e3*Math.random())+(new Date).getTime(),a=0;if(n&&!e.errorState){var s=n.type,l=n.streams,c=n.params?n.params.clickurl:null,u=n.adId;a=n.duration||d.DEFAULT_AD_DURATION,r=new p(i,o,l,c,s,u,a)}else r=new p(i,o,null,"",d.NOAD,"",a);t._diagnostics.addAdData(t._currentClipId,i,e),r&&(r.adObj=n)}return r},n.prototype._handleFallback=function(e){var t,r=this,n=r._cacheManager.getPlayerDataForClipId(r._currentClipId),o=e.adSpec,i=e.communicatorSpec,a=r._cacheManager.getAllocationForClipId(r._currentClipId),s=a&&a.pickFallbackCommunicator&&a.pickFallbackCommunicator(i);if(s){o.adCallSequence++;var l=r._cacheManager.getAd(r._currentClipId,s,o);if(l)l.adSpec=e.adSpec,l.type=e.type,e=l;else{var c=N.getCommunicatorUsingSpec(s);if(c)return t=c.getKey(o,n),r._addKeyToWaitlist(t,o),null}}else if(i.communicatorName===d.REFRESH&&e.fallbackAdTagURI){o.adCallSequence=e.fallbackAdSeq,o.adNetwork=e.fallbackAdNetwork;var p=N.getCommunicatorUsingSpec(i);return t=p.getKey(o,n),r._addKeyToWaitlist(t,o),r._cacheManager.getNewAd(p,o,n,e.fallbackAdTagURI),null}return e},n.prototype._updateAds=function(e){var t=this,r=[];if(e){var n=e.adObj,i=e.errorState&&-1===z.indexOf(e.errorState);(n&&n.type===d.NOAD||i)&&(e=t._handleFallback(e))}if(e){var a=t._createAdsJson(e),s=a.playbackId;if(t.playbackMap[s]=e,r.push(a),t._clipStarted){var p=e.type;(p===d.BUMPER||p===d.PREROLL)&&(e.errorState=c.PLAYER_TIMEOUT,h.onNoAd(e,t._currentClipId))}"l1"===e.cacheState&&t._checkForVPAIDPreInit(e),t._yvapBus.publish(l.AD_SUBMITTED,t._currentClipId,e)}r.length>0&&(t._eventBus.publish(o.ADS_OBJS_UPDATE,r),t._fireAdsReady())},n.prototype._renderOverlay=function(e){var t=this;if(e){var r=e.adSpec,n=e.adObj;if(n){var o="ad"+Math.floor(1e3*Math.random())+(new Date).getTime();t.playbackMap[o]=e;var i=new w(o,n.nonLinearAd,r.placement,r.duration,n.adParameters),a=i.resourceType;a===d.OVERLAY_VPAID?t._vpaidflashInterface.renderOverlayAd(i):a===d.OVERLAY_IMAGE&&t._overlayRenderer.renderOverlay(i)}}},n.prototype._addKeyToWaitlist=function(e,t){var r=this;e&&t&&(r.waitlistMap[e]=t)},n.prototype.renderVPAIDAd=function(e,t,r,n,i,a,s){var d,p,u=this;if(u._vpaidRendererType=null,e){p=u.playbackMap[e]||{},d=p.adObj||{};for(var _=d.streams,m=null,v=null,y=0;y<_.length;y++){var f=_[y],g=f.format||"";g.indexOf("shockwave")>-1?m=f:g.indexOf("javascript")>-1&&(v=f)}u._yvapBus.publish(l.VPAID_AD_RENDERED,u._currentClipId,p.type,p),!m||"flash"!==s&&"flash-simple"!==s?v?(d.streams=[v],d.mtype=v.format,d.mapif=v.apiFramework,u._vpaidRendererType="js",u._vpaidjsRenderer.render(e,r,n,t,d,u._rendererDiv)):u._eventBus.publish(o.Ad.ERROR,c.INCOMPATIBLE_MEDIA):(d.streams=[m],d.mtype=m.format,d.mapif=m.apiFramework,u._vpaidRendererType="flash",u._vpaidflashInterface.renderAd(e,p))}else u._eventBus.publish(o.Ad.ERROR,c.GENERIC)},n.prototype._limitAdsBasedOnDuration=function(e,t){return t?j.findBestCombination(e,t):e},n.prototype.getMidrollAds=function(e,t){var r,n,o,i=this,a=i._midrollsHelper.getMidrollsAds(i._currentClipId,i._cacheManager,e),s=[];t&&(a=i._limitAdsBasedOnDuration(a,t));for(var d=0;d<a.length;d++)r=a[d],n=i._createAdsJson(r),o=n.playbackId,i.playbackMap[o]=r,i._yvapBus.publish(l.AD_SUBMITTED,i._currentClipId,r),s.push(n);return s},n.prototype._onAdPlaybackRequest=function(e){var t,r=this;e&&(t=r.playbackMap[e],t&&h.onAdBreakStart(t))},n.prototype._onMidrollCacheUpdate=function(e){var t=this;t._eventBus.publish(o.YVAP_MIDROLL_CACHE_UPDATE,e)},n.prototype._onCacheUpdate=function(e,t){var r,n,o=this;o._checkForVPAIDPreInit(t),e&&(r=o.waitlistMap[e],r&&(n=o._cacheManager.getAdResponseForKey(e),n&&(n.adSpec=r,n.type=r.type,o.waitlistMap[e]=null,n.type===d.NON_LINEAR?o._renderOverlay(n):o._updateAds(n))))},n.prototype._onCacheRefreshRequest=function(e){var t=this;e&&e.length>0&&t._eventBus.publish(o.SAPI_REFRESH_REQUEST,e)},n.prototype._onAdMetric=function(e){var t=this;t._eventBus.publish(o.AD_METRICS,e)},n.prototype._onContentVideoStart=function(e){var t=this;t._videoStartTime=0,R.incrementTotalClipCount(),R.incrementRecentClipCount(),t._clipStarted=!0,t._yvapBus.publish(l.VIDEO_START,e);var r=t._getAd(d.POSTROLL,e);t._updateAds(r),t._cacheManager.sync();var n=t._analytics.getArchive(),i=t._diagnostics.generateDiagnostics(n);t._eventBus.publish(o.YVAP_INFO_UPDATE,i)},n.prototype._onContentVideoProgress=function(e,t,r){var n,o=this,i=t-o._videoStartTime;o._videoStartTime=t,R.incrementTotalVideoLength(i),R.incrementRecentVideoLength(i);var a=o._getAd(d.NON_LINEAR,e,t);o._renderOverlay(a),n=o._cacheManager.getPlayerDataForClipId(e),n&&n.licenseId===d.NFL_NOW_LMSID&&(R.incrementNFLVideoLength(i),R.createNFLSession())},n.prototype._onContentVideoSeek=function(e){},n.prototype._onContentVideoEnd=function(e){var t=this;t._overlayRenderer.removeOverlay(),t._yvapBus.publish(l.VIDEO_END,t._currentClipId)},n.prototype._midRollStart=function(){},n.prototype._midRollEnd=function(){var e=this;e._yvapBus.publish(l.AD_BREAK_ENDED,e._currentClipId)},n.prototype._onAdEnd=function(e){var t=this;t.playbackMap[e]=null,t._diagnostics.updateAdState(e,T.ADSTATES.ENDED)},n.prototype._onOverlayAdClick=function(e){var t,r,n,o=this;e&&(n=o.playbackMap[e],n&&(r=n.adObj||{},t=r.params?r.params.clickurl:null,h.onAdClick(n,0,0),t&&window.open(t,"_blank")))},n.prototype._onOverlayAdStart=function(e){var t,r=this;e&&(t=r.playbackMap[e],t&&h.onAdStart(t,"",r._currentClipId))},n.prototype._onAdStart=function(e,t,r,n,o,i,a,s,c){var p,u,_=this,m=r||"";_._videoStartTime=0,R.resetRecentVideoLength(),R.resetRecentClipCount(),R.incrementAdCount(),_._overlayRenderer.removeOverlay(),e&&(p=_.playbackMap[e],p&&(u=p.adSpec||{},u.placement===d.NFL_ONLOAD?R.resetNFLSession():u.placement===d.NFL_PREROLL&&R.resetRecentVideoLengthNFL(),h.onAdStart(p,t,_._currentClipId),d.VIEWABILITY_ON&&_._viewabilityManager.start(p,_._currentClipId),_._yvapBus.publish(l.AD_DELIVERED,_._currentClipId,p.type,m,p,n,o,i,a,s,c))),_._diagnostics.updateAdState(e,T.ADSTATES.PLAYING,{chosenBitrate:t,latency:r,swfLoadLat:n,vpaidInitLat:o,vpaidStartLat:i}),_._renderCompanionAd(p)},n.prototype._onVpaidAdStart=function(e){var t,r=this;e&&(t=r.playbackMap[e],t&&r._yvapBus.publish(l.VPAID_AD_STARTED,r._currentClipId,t.type,t))},n.prototype._onVpaidAdInited=function(e){var t,r=this;e&&(t=r.playbackMap[e],t&&r._yvapBus.publish(l.VPAID_AD_INITED,r._currentClipId,t.type,t))},n.prototype._onVpaidAdInitError=function(e){var t,r=this;e&&(t=r.playbackMap[e],t&&r._yvapBus.publish(l.VPAID_AD_INIT_ERROR,r._currentClipId,t.type,t))},n.prototype._renderCompanionAd=function(e){var t,r=window.YAHOO_Yvap||{};if(e&&r&&r.load_companions){t=e.adObj,t.companion.list=t.companion;var n=r.load_companions(t.companion);h.onCompanionDisplayed(n)}},n.prototype._onAdProgress=function(e,t,r){var n,o,i=this,a=t-i._videoStartTime;i._videoStartTime=t,R.incrementAdLength(a),e&&(n=i.playbackMap[e],n&&(o=i._viewabilityManager.getViewabilitySummary(),n.adDuration||(n.adDuration=r),h.onAdProgress(n,t,r,o,i._currentClipId)))},n.prototype._onVPAIDAdQuartile=function(e,t,r){var n=this;if(e){var o=n.playbackMap[e];if(o){var i=d.VIEWABILITY_ON&&P.isViewabilityMeasurable()?n._viewabilityManager.getViewabilitySummary():{};h.onVPAIDAdQuartile(o,t,r,i)}}},n.prototype._onAdClick=function(e,t,r){var n=this,o=n.playbackMap[e];o&&h.onAdClick(o,t,r)},n.prototype._onAdBreakCancelled=function(e){function t(e){r._diagnostics.updateAdState(e,T.ADSTATES.CANCELLED)}var r=this;t(e.currentPlaybackId),e.unplayedPlaybackIds.forEach(t)},n.prototype._onAdNotPlayable=function(e){var t=this,r=t.playbackMap[e];r&&(r.errorState=c.INCOMPATIBLE_MEDIA,t._yvapBus.publish(l.AD_DELIVERY_ERROR,t._currentClipId,r.type,c.INCOMPATIBLE_MEDIA,r),h.onNoAd(r,t._currentClipId))},n.prototype._onAdPlaybackError=function(e,t,r){var n=this,o=n.playbackMap[e],i="string"==typeof t?t:c.MEDIA_PLAYBACK;i=d.ADBLOCKER?c.ADBLOCKER:i;var a=-1,s=-1,p=2;r&&(a=r.swfLoadLatency,s=r.initLatency,p=r.timeoutStatus),o&&(o.errorState=i,n._yvapBus.publish(l.AD_DELIVERY_ERROR,n._currentClipId,o.type,i,o,a,s,p),h.onNoAd(o,n._currentClipId)),n._diagnostics.updateAdState(e,T.ADSTATES.ERROR,{error:i,vsl:a,vil:s,timeoutStatus:p})},n.prototype._onNoAd=function(e){var t,r=this,n=r.playbackMap[e];n&&(t=n.adObj,t&&(r._yvapBus.publish(l.AD_DELIVERY_ERROR,r._currentClipId,n.type,d.NOAD,n),h.onNoAd(n,r._currentClipId)))},n.prototype._onSwfReady=function(e){var t=this;e&&(t._swfReady=!0,t._yvapBus.publish(l.PLAYER_SWF_READY,e))},n.prototype._onPauseVpaid=function(){var e=this;e._vpaidflashInterface.pauseAd(),e._vpaidjsRenderer.pauseAd()},n.prototype._onResumeVpaid=function(){var e=this;e._vpaidflashInterface.resumeAd(),e._vpaidjsRenderer.resumeAd()},n.prototype._onPlayerResize=function(e,t){var r=this;r._vpaidflashInterface.updateDimensions(e,t),r._vpaidjsRenderer.updateDimensions(e,t)},n.prototype._onVolumeChange=function(e){var t=this;e>=0&&(t._lastVolume=e,t._vpaidflashInterface.updateVolume(e),t._vpaidjsRenderer.updateVolume(e))},n.prototype._onMuteChange=function(e){var t=this,r=e?0:t._lastVolume;t._vpaidflashInterface.updateVolume(r),t._vpaidjsRenderer.updateVolume(r)},n.prototype.isAdBlockerDetected=function(){return d.ADBLOCKER},n.prototype.getVPAIDLatencies=function(){var e=this;return"flash"===e._vpaidRendererType?e._vpaidflashInterface.getVPAIDLatencies():"js"===e._vpaidRendererType?e._vpaidflashInterface.getVPAIDLatencies():null},n.prototype.skipAd=function(){var e=this,t=e._player.skipNormalAd();t||e._vpaidflashInterface.stopAd()},n.prototype.destroy=function(){var e=this;e._removeSkipAdEasterEgg&&e._removeSkipAdEasterEgg()},n.prototype._theBestTeam=function(){var e=this,t=[89,86,65,80,84,72,69,66,69,83,84],r=String.fromCharCode.apply(null,t);r=r.toLowerCase();var n=function(t){t=t||window.event;var n="number"==typeof t.which?t.which:t.keyCode;n&&0===r.indexOf(e._secretCode)?e._secretCode=e._secretCode+String.fromCharCode(n).toLowerCase():e._secretCode="",e._secretCode.toLowerCase()===r&&e.skipAd()};e._player&&"function"==typeof e._player.skipNormalAd&&(document.addEventListener("keydown",n),e._removeSkipAdEasterEgg=function(){document.removeEventListener("keydown",n)})}},{"../../../lib":"bRhrlU","../../../lib/event-bus":"3ECu9u","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","./ads-json":108,"./allocation/AllocationManager":110,"./allocation/CommunicatorSpec":111,"./allocation/RefreshAllocation":112,"./cache/CacheManager":114,"./cache/CacheManagerIceBreaker":115,"./common/Constants":116,"./common/CookieUtil":117,"./common/Errors":118,"./common/Events":119,"./communicator/CommunicatorFactory":126,"./communicator/MidRollsHelper":131,"./communicator/ParserManager":132,"./communicator/RefreshMidRollsHelper":135,"./communicator/StandaloneBRXDHelper":137,"./communicator/StandaloneGeminiBRXHelper":138,"./communicator/StandaloneGeminiNativeHelper":139,"./engine/AdEngine":146,"./engine/AdEngineIceBreaker":147,"./engine/AdSpec":148,"./engine/NFLRules":149,"./engine/RuleGroup":150,"./midrolls-util":151,"./monitoring/AdPlaybackManager":152,"./monitoring/Analytics":153,"./monitoring/Diagnostics":154,"./monitoring/ViewabilityManager":155,"./overlay-json":157,"./player-data":158,"./renderer/HTML5OverlayRenderer":159,"./vpaid/VPAIDFlashInterface":161,"./vpaid/vpaidjs-renderer":162,"./yvap-util":163}],161:[function(e,t,r){"use strict";function n(e,t,r,n,o,s,d){var c=this;c._externalBus=e,c._yvapBus=t,c._currentBitrate=0,c._prefetchList=[],c._vpaidCacheAd,c._renderWidth=r||0,c._renderHeight=n||0,c._preInitVpaid=d,c._yvapBus.subscribe(a.PLAYER_SWF_READY,c._onSwfReady,c),c._externalBus.subscribe(l.YVAP_SWF_PROXIED_EVENT,c._onFlashEvent,c),c.overlayLinearState=!1,c._player=o,c._vpaidTimeout=s||i.DEFAULT_VPAID_TIMEOUT,window.flash_callback_yvap=function(e){c._onFlashEvent(e)},c._preInitVpaid&&c._yvapBus.subscribe(a.VPAID_PREFETCH_REQUEST,c._onPrefetchRequest,c)}t.exports=n;var o=e("../common/VPAIDEvent"),i=e("../common/Constants"),a=e("../common/Events"),s=e("../common/Errors"),l=e("../../event"),d=e("../../../../lib");e("../../../../lib/logger");n.prototype.renderAd=function(e,t){var r,n,o,a,s=this;r=t.adObj,r&&e&&r.type===i.VPAID&&(s._preInitVpaid||s._onPrefetchRequest(r),n=r.streams||[],o=n[0],a=r.vpaidId,o&&o.format===i.VPAID_FLASH_FORMAT&&a&&(s._swfNode&&s._swfNode.renderVPAIDAd?(s._swfNode.renderVPAIDAd({url:o.url,vpaidId:a,playbackId:e},s._vpaidTimeout),s.updateVolume(s._volume)):s._vpaidCacheAd={url:o.url,vpaidId:a,playbackId:e}))},n.prototype.renderOverlayAd=function(e){var t=this;if(t._swfNode){var r="vpaidO_"+Math.floor(100*Math.random())+(new Date).getTime(),n=e.playbackId||"",o=e.resourceType||"",a=e.resourceUrl||"",s=e.duration||0,l=e.position,d=e.adParams||"";o===i.OVERLAY_VPAID&&t._swfNode&&t._swfNode.renderVPAIDOverlayAd&&t._swfNode.renderVPAIDOverlayAd({url:a,vpaidId:r,playbackId:n,duration:s,position:l,adParam:d})}},n.prototype.stopAd=function(){var e=this;e._swfNode&&e._swfNode.resetVPAIDAd&&e._swfNode.resetVPAIDAd()},n.prototype.pauseAd=function(){var e=this;e._swfNode&&e._swfNode.pauseVPAIDAd&&e._swfNode.pauseVPAIDAd()},n.prototype.resumeAd=function(){var e=this;e._swfNode&&e._swfNode.resumeVPAIDAd&&e._swfNode.resumeVPAIDAd()},n.prototype.updateDimensions=function(e,t){var r=this;r._renderWidth=e||0,r._renderHeight=t||0,r._swfNode&&r._swfNode.updateVPAIDAdDimensions&&r._swfNode.updateVPAIDAdDimensions(e,t)},n.prototype.updateVolume=function(e){var t=this;t._volume=e,t._swfNode&&t._swfNode.updateVPAIDAdVolume&&t._swfNode.updateVPAIDAdVolume(t._volume)},n.prototype.getVPAIDLatencies=function(){var e=this,t={};if(e._swfNode&&e._swfNode.getVPAIDLatencies){var r=e._swfNode.getVPAIDLatencies()||{};t={vsl:r.swfLoadLatency,sVsl:r.swfLoadStartTime,vil:r.adInitLatency,sVil:r.adInitStartTime,vst:r.vpaidStartLatency,sVst:r.vpaidStartTime}}return t},n.prototype._onPrefetchRequest=function(e){var t,r,n,o,a,s=this;e&&e.type===i.VPAID&&(r=e.streams||[],n=r[0],o=e.adParameters&&e.adParameters.AdParameters?e.adParameters.AdParameters:"",n&&n.format===i.VPAID_FLASH_FORMAT&&(s._swfNode&&s._swfNode.prefetchVPAIDAd?(a="vpaid_"+Math.floor(100*Math.random())+(new Date).getTime(),e.vpaidId=a,s._swfNode.prefetchVPAIDAd({url:n.url,vpaidId:a,adParam:o})):(t=s._prefetchList||[],t.push(e),s._prefetchList=t)))},n.prototype._onSwfReady=function(e){var t,r,n=this,o=e.tagName||"",i=n._renderWidth||0,a=n._renderHeight||0;if(e&&"object"===o.toLowerCase()){if(n._swfNode=e,n._swfNode&&n._swfNode.updateVPAIDAdDimensions&&n._swfNode.updateVPAIDAdDimensions(i,a),n._swfNode.prefetchVPAIDAd)for(t=n._prefetchList||[];t.length>0;)r=t.shift(),n._onPrefetchRequest(r);n._swfNode.renderVPAIDAd&&n._vpaidCacheAd&&(n._swfNode.renderVPAIDAd(n._vpaidCacheAd),n._vpaidCacheAd=null)}},n.prototype._onFlashEvent=function(e){var t=this,r=e.name||"",n=t._vpaidEventHandlerMap[r],o=t[n];d.isFunction(o)&&o.call(this,e)},n.prototype._progressMap={},n.prototype._progressMap[o.AdVideoStart]=0,n.prototype._progressMap[o.AdVideoFirstQuartile]=25,n.prototype._progressMap[o.AdVideoMidpoint]=50,n.prototype._progressMap[o.AdVideoThirdQuartile]=75,n.prototype._progressMap[o.AdVideoComplete]=100,n.prototype._onAdImpression=function(e){var t=this,r=e.playbackId||"";t._currentBitrate=e.bitrate;var n=e.swfLoadLatency||0,o=e.adInitLatency||0,i=e.latency||0,a=e.vpaidStartLatency,s=e.swfLoadStartTime||0,d=e.adInitStartTime||0,c=e.vpaidStartTime;t._externalBus&&t._externalBus.publish(l.AD_PLAYBACK_STARTED,r,t._currentBitrate,i,n,o,a,s,d,c)},n.prototype._onAdStarted=function(e){var t=this,r=e.playbackId||"";t._yvapBus&&t._yvapBus.publish(a.AD_STARTED,r)},n.prototype._onAdQuartile=function(e){var t=this,r=e.name||"",n=t._progressMap[r],o=e.playbackId||"",i=e.duration>0?e.duration:100;t._yvapBus&&t._yvapBus.publish(a.VPAID_AD_QUARTILE,o,n,i)},n.prototype._onAdProgress=function(e){var t=this,r=e.timeupdate,n=e.duration,o=e.playbackId||"";t._externalBus&&n>=0&&r>=0&&t._externalBus.publish(l.AD_PLAYBACK_PROGRESS,o,r,n)},n.prototype._onAdEnd=function(e){var t=this,r=e.playbackId||"";t._externalBus&&setTimeout(function(){t._externalBus.publish(l.AD_PLAYBACK_ENDED,r)},1)},n.prototype._onAdClick=function(e){var t=this,r=e.playbackId||"",n=e.duration||0,o=e.timeupdate||0;t._externalBus&&t._externalBus.publish(l.AD_CLICK,r,o,n)},n.prototype._onAdError=function(e){var t=this;e.playbackId||"";t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.MEDIA_PLAYBACK)},n.prototype._onAdLinearChange=function(e){var t=this,r=e.adLinear||!1;r?(t._player.setOverlayActive(!0),t._player.pause()):(t._player.setOverlayActive(!1),t._player.play())},n.prototype._onAdTimeout=function(e){var t=this,r=(e.playbackId||"",{});r.swfLoadLatency=e.loadLatency||-1,r.initLatency=e.initLatency||-1,r.timeoutStatus=e.timeoutStatus,t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.VPAID_TIMEOUT,r)},n.prototype._onVPAIDSwfDownloadError=function(e){var t=this;t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.VPAID_SWF_DOWNLOAD_ERROR)},n.prototype._onAdInited=function(e){var t=this,r=e.playbackId||"";t._yvapBus&&t._yvapBus.publish(a.AD_INITED,r)},n.prototype._onAdInitError=function(e){var t=this,r=e.playbackId||"";t._yvapBus&&t._yvapBus.publish(a.AD_INIT_ERROR,r)},n.prototype._vpaidEventHandlerMap={},n.prototype._vpaidEventHandlerMap[o.AdImpression]="_onAdImpression",n.prototype._vpaidEventHandlerMap[o.AdStarted]="_onAdStarted",n.prototype._vpaidEventHandlerMap[o.AdVideoStart]="_onAdQuartile",n.prototype._vpaidEventHandlerMap[o.AdVideoFirstQuartile]="_onAdQuartile",n.prototype._vpaidEventHandlerMap[o.AdVideoMidpoint]="_onAdQuartile",n.prototype._vpaidEventHandlerMap[o.AdVideoThirdQuartile]="_onAdQuartile",n.prototype._vpaidEventHandlerMap[o.AdVideoComplete]="_onAdQuartile",n.prototype._vpaidEventHandlerMap[o.AdStopped]="_onAdEnd",n.prototype._vpaidEventHandlerMap[o.AdClickThru]="_onAdClick",n.prototype._vpaidEventHandlerMap[o.AdError]="_onAdError",n.prototype._vpaidEventHandlerMap[o.AdTimeout]="_onAdTimeout",n.prototype._vpaidEventHandlerMap[o.AdProgress]="_onAdProgress",n.prototype._vpaidEventHandlerMap[o.AdLinearChange]="_onAdLinearChange",n.prototype._vpaidEventHandlerMap[o.AdSwfDownloadError]="_onVPAIDSwfDownloadError",n.prototype._vpaidEventHandlerMap[o.VPAIDCreativeInited]="_onAdInited",n.prototype._vpaidEventHandlerMap[o.VPAIDCreativeInitError]="_onAdInitError"},{"../../../../lib":"bRhrlU","../../../../lib/logger":"IS9j5T","../../event":"YJm+dH","../common/Constants":116,"../common/Errors":118,"../common/Events":119,"../common/VPAIDEvent":120}],162:[function(e,t,r){"use strict";function n(e,t){var r=this;r._eventBus=e,r._yvapBus=t,r._creativeCallbacks={AdStarted:r._onAdStarted,AdStopped:r._onAdStopped,AdLoaded:r._onAdLoaded,AdVideoStart:r._onAdProgress,AdVideoFirstQuartile:r._onAdProgress,AdVideoMidpoint:r._onAdProgress,AdVideoThirdQuartile:r._onAdProgress,AdVideoComplete:r._onAdComplete,AdClickThru:r._onAdClickThru,AdError:r._onAdError,AdImpression:r._onAdImpression,AdSkipped:r._onAdSkipped,AdSkippableStateChange:r._onAdSkippableStateChange,AdSizeChange:r._onAdSizeChange,AdLinearChange:r._onAdLinearChange,AdDurationChange:r._onAdDurationChange,AdExpandedChange:r._onAdExpandedChange,AdVolumeChange:r._onAdVolumeChange,AdInteraction:r._onAdInteraction,AdUserAcceptInvitation:r._onAdInteraction,AdUserMinimize:r._onAdInteraction,AdUserClose:r._onAdInteraction},r._adloaderframe="adloaderframe",r._adrenderframe="adrenderframe",r._iframeCount=0,r._videoTag,r._videoTagOpacity=1,r._timer,r._targetBitrate=0,r._creative={},r._idToIframeMap={},r._vpaidAdLatencies={}}t.exports=n;var o=e("../../event"),i=e("../../../../lib"),a=e("../common/Events"),s=e("../common/Errors");n.prototype.onAdUpdateInCache=function(e,t){var r,n=this;if(t&&t.adObj){var o=t.adObj;if(o.vpaidId||(o.vpaidId="vpaidjs_"+Math.floor(100*Math.random())+(new Date).getTime(),n._vpaidAdLatencies[o.vpaidId]={}),"vpaid"===t.adObj.type){var i=t.adObj.streams;if(!i)return;for(var a=0;a<i.length;a++)if("application/javascript"===i[a].format){r=i[a].url;break}}r&&n._load(r,!0,o.vpaidId)}},n.prototype.pauseAd=function(){var e=this,t=e._creative.creative;t&&t.pauseAd()},n.prototype.resumeAd=function(){var e=this,t=e._creative.creative;t&&t.resumeAd()},n.prototype.updateVolume=function(e){var t=this,r=t._creative.creative;r&&r.setAdVolume(e)},n.prototype.updateDimensions=function(e,t){var r=this,n=r._creative.creative;n&&n.resizeAd(e,t)},n.prototype._unload=function(){var e=this;e._creative.creative&&delete e._creative.creative,e._adProgressTimer&&clearInterval(e._adProgressTimer);var t=document.getElementById(e._adrenderframe);if(t&&t.parentNode.removeChild(t),e._videoTag){var r=e._videoTagOpacity||1;e._videoTag.style.opacity=r}e._timer&&window.clearInterval(e._timer)},n.prototype._isVPAIDAdValid=function(){var e,t=this,r=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],n=t._creative.creative;if(!n)return!1;for(e=0;e<r.length;e++)if(!i.isFunction(n[r[e]]))return!1;return!0},n.prototype._subscribeCreative=function(){var e=this,t=e._creativeCallbacks,r=e._creative.creative;if(r)for(var n in t)t.hasOwnProperty(n)&&r.subscribe(t[n].bind(e),n,e)},n.prototype._unsubscribeCreative=function(){var e=this,t=e._creativeCallbacks,r=e._creative.creative;if(r)for(var n in t)t.hasOwnProperty(n)&&r.unsubscribe(t[n].bind(e))},n.prototype._onScriptLoad=function(e,t){var r=this,n=e.contentWindow.getVPAIDAd;if(n&&"function"==typeof n){if(r._creative.creative=n(),r._creative.vpaidId=t,r._isVPAIDAdValid())return void r._onVPAIDAdFileLoaded();r._yvapBus.publish(a.AD_INIT_ERROR,r._playbackId)}r._onAdError({message:"vpaid creative is invalid"})},n.prototype._onVPAIDAdFileLoaded=function(){var e=this,t={type:"AdError"};e._subscribeCreative(),e._vpaidAdLatencies[e._creative.vpaidId].sVil=(new Date).getTime(),e._yvapBus.publish(a.AD_INITED,e._playbackId);try{e._creative.creative.initAd(e._adConfig.width,e._adConfig.height,e._adConfig.viewMode,e._adConfig.bitrate,e._adConfig.creativeData,e._adConfig.environmentVars)}catch(r){t.message="vpaid creative init: "+r,e._onAdError(t)}},n.prototype._onAdLoaded=function(e){var t=this,r=(new Date).getTime();t._vpaidAdLatencies[t._creative.vpaidId].vil=r-t._vpaidAdLatencies[t._creative.vpaidId].sVil,t._vpaidAdLatencies[t._creative.vpaidId].sVst=(new Date).getTime(),t._creative.creative.startAd()},n.prototype._onAdProgress=function(e){var t=this,r=t._creative.creative,n=t._adConfig.environmentVars.videoSlot;t._eventBus.publish(o.AD_PLAYBACK_PROGRESS,t._playbackId,n.currentTime,r.getAdDuration())},n.prototype._onAdStarted=function(e){var t=this,r=t._creative.vpaidId,n=(new Date).getTime();t._vpaidAdLatencies[r].vst=n-t._vpaidAdLatencies[r].sVst,t._vpaidAdLatencies[r].pst=n-t._vpaidAdLatencies[r].pst;var i=t._vpaidAdLatencies[r].vsl,s=t._vpaidAdLatencies[r].sVsl,l=t._vpaidAdLatencies[r].vil,d=t._vpaidAdLatencies[r].sVil,c=t._vpaidAdLatencies[r].vst,p=t._vpaidAdLatencies[r].sVst,u=t._vpaidAdLatencies[r].pst;
t._yvapBus.publish(a.AD_STARTED,t._playbackId),t._eventBus.publish(o.AD_PLAYBACK_STARTED,t._playbackId,t._targetBitrate,u,i,l,c,s,d,p),t._timer&&window.clearInterval(t._timer),t._timer=window.setInterval(function(){t._onAdProgress()},200)},n.prototype._onAdComplete=function(e){var t=this,r=t._creative.creative;t._eventBus.publish(o.AD_PLAYBACK_PROGRESS,t._playbackId,r.getAdDuration(),r.getAdDuration()),r.stopAd()},n.prototype._onAdStopped=function(e){var t=this;t._unload(),t._eventBus.publish(o.AD_PLAYBACK_ENDED,t._playbackId)},n.prototype._onAdClickThru=function(e){var t,r=this;e.data&&(e.data.playerHandles&&(t=e.data.url?e.data.url:r._adConfig.clickThruUrl),t&&window.open(t,"_blank")),r._eventBus.publish(o.AD_CLICK,r._playbackId)},n.prototype._onAdError=function(e){var t=this;e.yvap_err_type||(e.yvap_err_type=o.AD_PLAYBACK_ERROR),t._unload(),t._eventBus.publish(o.Ad.ERROR,s.MEDIA_PLAYBACK),t._eventBus.publish(o.Ad.ENDED)},n.prototype._onAdImpression=function(e){},n.prototype._onAdSkipped=function(e){},n.prototype._onAdSkippableStateChange=function(e){},n.prototype._onAdSizeChange=function(e){},n.prototype._onAdLinearChange=function(e){},n.prototype._onAdDurationChange=function(e){},n.prototype._onAdExpandedChange=function(e){},n.prototype._onAdVolumeChange=function(e){},n.prototype._onAdInteraction=function(e){},n.prototype._load=function(e,t,r){var n,o,i,a=this;if(!e)throw{message:"vpaid creativeUrl cannot be undefined, null or empty"};a._idToIframeMap[r]||(n=document,o=n.createElement("iframe"),o.id=a._adloaderframe+a._iframeCount,a._iframeCount=a._iframeCount+1,o.style.display="none",o.onload=function(){var n=o.contentDocument||o.contentWindow.document;i=o.contentWindow.document.createElement("script"),i.type="text/javascript",i.onload=function(){var e=(new Date).getTime();a._vpaidAdLatencies[r].vsl=e-a._vpaidAdLatencies[r].sVsl,t?a._idToIframeMap[r]=o:a._onScriptLoad(o,r)},i.onerror=function(){a._onAdError({message:"error loading vpaidjs script"})},a._vpaidAdLatencies[r].sVsl=(new Date).getTime(),i.src=e,n.getElementsByTagName("head")[0].appendChild(i)},n.body.appendChild(o))},n.prototype.render=function(e,t,r,n,o,i){var a,s,l=this,d=900,c="normal",p={type:"AdError"};if(l._playbackId=e,l._targetBitrate=!n||isNaN(n)?d:n,!t||isNaN(t)||!r||isNaN(r))return p.message="Video dimensions missing",void l._onAdError(p);if(!i||!i.nodeName&&!i.tagName)return p.message="Slot has to be a DOMElement",void l._onAdError(p);if(l._videoTag=i.getElementsByTagName("video")[0],l._videoTag&&(l._videoTagOpacity=l._videoTag.style.opacity,l._videoTag.style.opacity=0),!o)return p.message="Ad object cannot be undefined or null.",void l._onAdError(p);if(o.vpaidId||(o.vpaidId="vpaidjs_"+Math.floor(100*Math.random())+(new Date).getTime(),l._vpaidAdLatencies[o.vpaidId]={}),l._vpaidAdLatencies[o.vpaidId].pst=(new Date).getTime(),s=o.streams,!(s&&s instanceof Array&&s.length>0))return p.message="No valid media file in ad object.",void l._onAdError(p);for(var u=0;u<s.length;u++)if("application/javascript"===s[u].format){a=s[u].url;break}var _=i.childNodes[1];_||(_=i);var m=document.createElement("video");m&&m.style&&(m.style.position="absolute",m.style.height="100%",m.style.width="100%",m.style.backgroundColor="black"),l._adConfig={width:t,height:r,viewMode:c,bitrate:l._targetBitrate,creativeData:o.adParameters,environmentVars:{videoSlot:m},clickThruUrl:o.params?o.params.clickurl:void 0};var v=document.createElement("iframe");v.id=l._adrenderframe,v.style.position="absolute",v.style.height="100%",v.style.width="100%",v.scrolling="no",v.style.border="0",v.style.zIndex=10,v.onload=function(){var e=v.contentDocument||v.contentWindow.document;e=e.body,e.style.margin="0",e.appendChild(m),l._adConfig.environmentVars.slot=e;try{var t=l._idToIframeMap[o.vpaidId];t?l._onScriptLoad(t,o.vpaidId):l._load(a,!1,o.vpaidId)}catch(r){p.message=r.message,l._onAdError(p)}},_.insertBefore(v,_.firstChild)},n.prototype.getVPAIDLatencies=function(){var e=this;return e._vpaidAdLatencies[e._creative.vpaidId]||{}}},{"../../../../lib":"bRhrlU","../../event":"YJm+dH","../common/Errors":118,"../common/Events":119}],163:[function(e,t,r){"use strict";function n(e){var t=e&&typeof e||"";return"object"===t||"function"===t}function o(e,t){return n(e)&&E.call(e,t)}function i(e,t){return n(e)&&n(t)&&A.call(t,e)}function a(e,t,r,i,s,l,d){var c,p,u,_,m,v,y,f;if(!n(t))return e;if(e||(e={}),c=d?e:t,!u&&c)for(u in c)try{if(p=t[u],_=typeof p,v=!0,y=u in e,r&&!o(c,u))continue;if(i&&"function"===_)continue;if(y&&(2!==s||l?s&&(v=!1):v="object"===_?!0:!1),!v)continue;if("object"===_&&p){if(l)continue;try{f=p.tagName||p.nodeType,f=!f&&(p==window||p==self||p==document),f=!f&&(p==parent||p==top)}catch(g){f=!1}m=2===s&&y?e[u]:{},p=f?"#node":a(m,p,r,i,s,!1,d)}e[u]=p}catch(g){}return e}function s(e){var t,r=this;if(r&&i(r,g))if(e=l(e),t=d(e,!0)){if(!o(r,"darla"))try{r.darla=t.DARLA||null}catch(n){r.darla=null}o(r,"isIFrame")||(c(e)?r.isIFrame=0:r.isIFrame=1)}else o(r,"darla")||(r.darla=null),o(r,"isIFrame")||(r.isIFrame=1)}function l(e){try{e=e||window,e=e.Object?e:null}catch(t){e=null}return e}function d(e,t){var r=null;try{e=l(e),r=e&&e.top||null,r&&t&&(r=r.document?r:null)}catch(n){r=null}return r}function c(e){var t;return e=l(e),t=d(e),!(!e||!t||e!=t)}function p(e){var t,r=!1;if(e=l(e),_(e))try{t=e&&e.$sf&&e.$sf.ext,t&&("function"==typeof t.register||"function"==typeof t.supports)&&(r=!0)}catch(n){r=!1}return r}function u(e){var t=new s(e);return t.darla||(t=null),t}function _(e,t){var r,n,o=!1;if(e=l(e),r=d(e),e&&r)try{n=e.parent,o=n&&!c(e)&&n==r}catch(i){o=!1}if(o&&t)try{o=!(!n||!n.document)}catch(i){o=!1}return o}var m=e("./common/Constants"),v=e("../util"),y=e("xhr"),f=e("../../../lib/user-agent"),g={},b=Object.prototype,A=b.isPrototypeOf,E=b.hasOwnProperty;g.constructor=s,g.darla=null,g.isIFrame=0,s.prototype=g,r.mix=a,r.isObjLike=n,r.hasOwn=o,r.kindOf=i,r.convertTimeToSeconds=function(e){var t=e.split(":").reverse();t=t.map(function(e){return parseFloat(e,10)});var r=t[0];4===t.length?t=t.slice(1):r=0;var n=t.reduce(function(e,t,r,n){return e+Math.pow(60,r)*t});return n+=r/1e3,isNaN(n)?null:n},r.isViewabilityMeasurable=function(e){return this.getViewabilityNonMeasurableValue(e)===m.VIEWABILITY_MEASURABLE},r.isInTopWindow=c,r.isInSafeFrame=p,r.isDirectChildOfTopWindow=_,r.getTopWin=d,r.getViewabilityNonMeasurableValue=function(e){var t=m.VIEWABILITY_MEASURABLE,r=u(e),n=null;return null===r?c(e)?t=m.VIEWABILITY_NOT_MEASURABLE_NO_DARLA:p(e)||(t=m.VIEWABILITY_NOT_MEASURABLE_IFRAME):(n=r.yvap?r:r.darla||null,n.yvap||(t=m.VIEWABILITY_NOT_MEASURABLE_NO_DARLA)),t},r.getDARLA=u,r.getTimeStamp=function(){var e=new Date,t=[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],r=t.join("");return r},r.expandMacro=function(e,t){var r=/\$\{(\w)+\}/g,n=function(e){var r=/(\w)+/g,n=e.match(r),o=n[0];return t[o]?t[o]:""};return e=e.replace(r,n),e=this.cleanUpUrl(e)},r.cleanUpUrl=function(e){for(var t,r,n=/(\w)+=&/g;e.match(n);)e=e.replace(n,"");for(t=/(\w)+=($|;|;;)/;e.match(t);)e=e.replace(t,"$2");for(r=/(;|;;|&)$/;e.match(r);)e=e.replace(r,"");return e},r.generateYqlQuery=function(e,t){return"select * from "+t+" where "+v.querystring(e," and ",null,function(e){return e})},r.detectAdBlocker=function(e){var t=location.protocol+"//us.adserver.yahoo.com/a?c=x&p=&f=343121&pn=&rs=&l=VIDO&at=";f.samsung&&(t=0===t.indexOf("file")?"https"+t.substring(4,t.length):t);try{y({url:t,method:"GET",sync:!1,timeout:3e3},function(t,r,n){e(!!t)})}catch(r){e(!0)}},r.expandGeminiBeaconMacro=function(e,t,r){var n=/\$\((\w)+\)/g,o=e.replace(n,function(e){var n=e;switch(e){case"$(V_SKIP_AVAIL)":n=0;break;case"$(V_AUTOPLAYED)":n=1;break;case"$(V_PLAYER_HEIGHT)":t&&(n=t.vi_ph);break;case"$(V_PLAYER_WIDTH)":t&&(n=t.vi_pw);break;case"$(V_EXPANDED)":t&&(n=t.vi_pfs);break;case"$(V_VIEW_INFO)":if(t){var o=t.vi_m;if(o!==m.VIEWABILITY_MEASURABLE)n=m.VIEWABILITY_NOT_MEASURABLE;else{var i=t.vi_lpv;n=i>=m.VIEWABILITY_THRESHOLD?m.VIEWABILITY_VISIBLE:m.VIEWABILITY_NOT_VISIBLE}}else n=m.VIEWABILITY_NOT_MEASURABLE;break;case"$(V_AUD_INFO)":n=t?t.vi_psnd:m.UNKNOWN;break;case"$(V_AUD_TIME_INVIEW_100)":t&&(n=t.vi_tativ);break;case"$(V_VIEW_TYPE)":n=r&&r.viewabilityType||""}return n});return o}},{"../../../lib/user-agent":"ty5FFo","../util":"jJTEqU","./common/Constants":116,xhr:230}],164:[function(e,t,r){},{}],165:[function(e,t,r){var n={};!function(e,t){function r(e){return String(null===e||void 0===e?"":e)}function n(e){return e=r(e),d.test(e)?e.replace(o,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(s,"&#39;").replace(l,"&quot;"):e}e.Template=function(e,r,n,o){this.r=e||this.r,this.c=n,this.options=o,this.text=r||"",this.buf=t?[]:""},e.Template.prototype={r:function(e,t,r){return""},v:n,t:r,render:function(e,t,r){return this.ri([e],t||{},r)},ri:function(e,t,r){return this.r(e,t,r)},rp:function(e,t,r,n){var o=r[e];return o?(this.c&&"string"==typeof o&&(o=this.c.compile(o,this.options)),o.ri(t,r,n)):""},rs:function(e,t,r){var n=e[e.length-1];if(!c(n))return void r(e,t,this);for(var o=0;o<n.length;o++)e.push(n[o]),r(e,t,this),e.pop()},s:function(e,t,r,n,o,i,a){var s;return c(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ls(e,t,r,n,o,i,a)),s=""===e||!!e,!n&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s)},d:function(e,t,r,n){var o=e.split("."),i=this.f(o[0],t,r,n),a=null;if("."===e&&c(t[t.length-2]))return t[t.length-1];for(var s=1;s<o.length;s++)i&&"object"==typeof i&&o[s]in i?(a=i,i=i[o[s]]):i="";return n&&!i?!1:(n||"function"!=typeof i||(t.push(a),i=this.lv(i,t,r),t.pop()),i)},f:function(e,t,r,n){for(var o=!1,i=null,a=!1,s=t.length-1;s>=0;s--)if(i=t[s],i&&"object"==typeof i&&e in i){o=i[e],a=!0;break}return a?(n||"function"!=typeof o||(o=this.lv(o,t,r)),o):n?!1:""},ho:function(e,t,r,n,o){var i=this.c,a=this.options;a.delimiters=o;var n=e.call(t,n);return n=null==n?String(n):n.toString(),this.b(i.compile(n,a).render(t,r)),!1},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,r,n,o,i,a){var s=t[t.length-1],l=null;if(!n&&this.c&&e.length>0)return this.ho(e,s,r,this.text.substring(o,i),a);if(l=e.call(s),"function"==typeof l){if(n)return!0;if(this.c)return this.ho(l,s,r,this.text.substring(o,i),a)}return l},lv:function(e,t,n){var o=t[t.length-1],i=e.call(o);return"function"==typeof i&&(i=r(i.call(o)),this.c&&~i.indexOf("{{"))?this.c.compile(i,this.options).render(o,n):r(i)}};var o=/&/g,i=/</g,a=/>/g,s=/\'/g,l=/\"/g,d=/[&<>\"\']/,c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof r?r:n)},{}],166:[function(e,t,r){var n={};t.exports=function(e){if(!n[e]){n[e]=!0;var t=document.createElement("style");t.setAttribute("type","text/css"),"textContent"in t?t.textContent=e:t.styleSheet.cssText=e;var r=document.getElementsByTagName("head")[0];r.appendChild(t)}}},{}],167:[function(e,t,r){"use strict";function n(e,t){var r=this;r._data=[],r.length=0,r._type=e||Uint8Array,t&&r.set(t)}var o=e("./index");t.exports=n,n.prototype.destroy=function(){var e=this;e._data=[],e.length=0},n.prototype.set=function(e){var t=this;t._data.push(e),t.length=t.length+e.length},n.prototype.get=function(e){var t=this;if(o.isNullOrUndefined(e)||0>e||e>t.length)throw new Error("[DataManager] Array position out of bounds");for(var r=0,n=0,i=null,a=0;a<t._data.length;a++){var s=t._data[a];if(r+=s.length,r>e){i=s[e-n];break}n+=s.length}return i},n.prototype.subArray=function(e,t){var r=this;if((o.isNullOrUndefined(t)||t>r.length)&&(t=r.length),o.isNullOrUndefined(e)&&(e=0),e>=t)return new r._type(0);for(var n=t-e,i=new r._type(n),a=0,s=0,l=0,d=0;d<r._data.length;d++){var c=r._data[d];if(l+=c.length,a>0){if(l>=t){i.set(c.subarray(0,n-a),a);break}i.set(c.subarray(0),a),a+=c.length}else{if(l>e&&l>=t){i=c.subarray(e-s,t-s);break}if(l>e){var p=e-s;i.set(c.subarray(p)),a=c.length-p}}s+=c.length}return i}},{"./index":170}],168:[function(e,t,r){"use strict";function n(e){var t=this;t.name=e?e:"unnamed",t._events={},t._eventKeyCounter=0}t.exports=n,n.prototype.addEventListener=function(e,t,r){var n=this;if(n._events){n._events[e]||(n._events[e]={});var o=e+"_"+ ++n._eventKeyCounter;return n._events[e][o]={subscriber:r,cb:t},o}},n.prototype.removeEventListener=function(e,t){var r=this;r._events&&e in r._events&&r._events[e].hasOwnProperty(t)&&delete r._events[e][t]},n.prototype.removeEventListeners=function(e){var t=this;t._events&&e&&Object.keys(e).forEach(function(r){var n=e[r];r in t._events&&t._events[r].hasOwnProperty(n)&&(delete t._events[r][n],delete e[r])})},n.prototype.publish=function(e){var t=this;if(t._events&&e in t._events){var r=t._events[e],n=arguments;Object.keys(r).forEach(function(e){var t=r[e];if(t)try{t.cb.apply(t.subscriber,Array.prototype.slice.call(n,1))}catch(o){console.error("Error in event handler: ",o.message||o.toString(),o.stack)}})}},n.prototype.destroy=function(){var e=this;e._events=null}},{}],169:[function(e,t,r){"use strict";var n=t.exports={};n.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},n.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{}],170:[function(e,t,r){function n(e){return Object.prototype.toString.call(e)}r.isArray=function(e){return Array.isArray(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isNullOrUndefined=function(e){return null==e},r.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},r.isString=function(e){return"string"==typeof e},r.isObject=function(e){return"[object Object]"===n(e)},r.isFunction=function(e){return"function"==typeof e},r.deepCopy=function(e){var t={};return r.isNullOrUndefined(e)?e:(Object.keys(e).forEach(function(n){r.isArray(e[n])?t[n]=e[n].slice():r.isObject(e[n])?t[n]=r.deepCopy(e[n]):t[n]=e[n]}),t)}},{}],171:[function(e,t,r){"use strict";function n(){var e=this;try{e._window=e.getWindow()}catch(t){e._window=null}e._isSupported=!1,e._window&&e._window.performance&&"function"==typeof e._window.performance.clearResourceTimings&&"function"==typeof e._window.performance.getEntriesByName&&(e._isSupported=!0,e._window.performance.onresourcetimingbufferfull=e._clearResourceTiming.bind(e))}t.exports=n,r.entryTypes=["mark","measure","navigation","frame","resource","server"],n.prototype.getWindow=function(){return window},n.prototype._clearResourceTiming=function(){var e=this;e._isSupported&&e._window.performance.clearResourceTimings()},n.prototype.getPerformanceTiming=function(e,t,n){var o,i=this,a={};if(!e||!t&&!n)return null;if(n&&r.entryTypes.indexOf(n)<0)return null;if(!i._isSupported)return null;if(o=t?i._window.performance.getEntriesByName(t,n?n:void 0):i._window.performance.getEntriesByType(n),!o||!o.length)return null;var s=o[o.length-1];return e.forEach(function(e){a[e]=s[e]}),a},n.prototype.destroy=function(){var e=this;e._isSupported&&e._window&&(e._window.performance.onresourcetimingbufferfull=null),e._window=null,e._isSupported=!1}},{}],172:[function(e,t,r){"use strict";function n(){var e=this;e.LOCALSTORAGE_PREFIX="com.yahoo.yep",e._islocalStorageAvailable=e._islocalStorageSupported()}t.exports=n,n.prototype._islocalStorageSupported=function(){return"localStorage"in window&&null!==window.localStorage},n.prototype.writeProperty=function(e,t){var r=this;r._islocalStorageAvailable&&(t=JSON.stringify(t),e=r.LOCALSTORAGE_PREFIX+"."+e,window.localStorage.setItem(e,t))},n.prototype.readProperty=function(e){var t=this;if(!e||!e.length)return null;if(t._islocalStorageAvailable){e=t.LOCALSTORAGE_PREFIX+"."+e;var r=JSON.parse(window.localStorage.getItem(e));return r?r:null}return null}},{}],173:[function(e,t,r){"use strict";var n=e("./user-agent");r.apply=function(){o()};var o=function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=window.document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}(n.ie||!window.CustomEvent)&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}},{"./user-agent":175}],174:[function(e,t,r){"use strict";function n(e,t){var r=this;if(!e||isNaN(e))throw new Error("Invalid Argument: No delay");o.call(r,r.constructor.name),r.delay=Math.max(e,20),r.repeatCount=t>0?t:Number.POSITIVE_INFINITY,r.currentCount=0,r.running=!1,r.startTime=0,r._timerHandle=null,r._subscriptions={},r._eventKeys={}}t.exports=n;var o=e("./event-bus"),i=e("./hls-utils");i.inherits(n,o),n.prototype.destroy=function(){var e=this;e.reset(),e._subscriptions={},o.prototype.destroy.call(e)},n.prototype.addEventListener=function(e,t){var r=this;if(!t)throw new Error("Invalid Argument: No context");var n=o.prototype.addEventListener.call(r,"timedOut",e,t);r._eventKeys.timedOut=n},n.prototype.removeEventListener=function(e,t){var r=this;if(!t)throw new Error("Invalid Argument: No context");o.removeEventListeners(r._eventKeys)},n.prototype.start=function(){var e=this;e._timerHandle||e.running||(e._timerHandle=setInterval(function(){e.currentCount++,e.currentCount>=e.repeatCount&&e.stop(),e.publish("timedOut"),e.startTime=Date.now()},e.delay),e.startTime=Date.now(),e.running=!0)},n.prototype.stop=function(){var e=this;e._timerHandle&&e.running&&(clearInterval(e._timerHandle),e._timerHandle=null,e.running=!1,e.startTime=0)},n.prototype.reset=function(){var e=this;e.stop(),e.currentCount=0,e.startTime=0}},{"./event-bus":168,"./hls-utils":169}],175:[function(e,t,r){"use strict";function n(e){if(null===e)return!1;var t=e[1];return parseFloat(t.split(".",2).join("."))||1}var o=/<[A-Za-z]+.*?(\/>|>.*?<\/[A-Za-z]+>)|javascript:/g,i=navigator.userAgent.toLowerCase().replace(o,"");r.ua=i,r.chromium=n(/chromium\/([^\s]*)/.exec(i)),r.edge=n(/edge\/([^\s]*)/.exec(i)),r.opera=/opr\/|opera\//.test(i),r.chrome=!r.chromium&&!r.edge&&!r.opera&&n(/chrome\/([^\s]*)/.exec(i)),r.ie=n(/msie ([^;]*)/.exec(i))||n(/trident.*; rv:([0-9.]+)/.exec(i)),r.firefox=n(/firefox\/([^\s]*)/.exec(i)),r.android=/android/.test(i),r.androidTablet=r.android&&!/mobile/.test(i),r.htc_one=/htc_one/.test(i),r.tivo=/TiVo/i.test(i),r.firetv=r.android&&/amazonwebappplatform/.test(i)&&/aft/.test(i),r.samsung=/smarttv/.test(i)||/tizen/.test(i),r.sony=/(sony)/.test(i),r.ios=/(ipad|iphone|ipod)/.test(i),r.iphone=/(iphone|ipod)/.test(i)&&!/ipad/.test(i),r.ipad=r.ios&&!r.iphone,r.androidBrowser=!r.chrome&&/android/.test(i),r.androidVersion=n(/android\s([0-9\.]*)/.exec(i)),r.safari=!r.chrome&&!r.chromium&&!r.android&&/safari\/([^\s]*)/.test(i)&&n(/version\/([^\s]*)/.exec(i)),r.iosWebView=r.ios&&!navigator.standalone&&!r.safari,r.mobile=r.ios||r.android,r.safariDesktop=!r.mobile&&r.safari,r.tv=r.vizio||r.tivo||r.firetv||r.samsung||r.sony,r.desktop=!r.mobile&&!r.tv,r.tv?r.vizio?r.os="vizio":r.tivo?r.os="tivo":r.firetv?r.os="firetv":r.samsung?r.os="samsung":r.sony?r.os="sony":r.os=null:r.ios?r.os="ios":r.android?r.os="android":/windows|win32/.test(i)?r.os="windows":/macintosh|mac_powerpc/.test(i)?r.os="macintosh":/symbos/.test(i)?r.os="symbos":/linux/.test(i)?r.os="linux":r.os=null},{}],176:[function(e,t,r){"use strict";function n(){var e=this;e._rules=[],e._rules.push(new o.BandwidthRule),e._rules.push(new o.BufferRule),e._rules.push(new o.ResolutionRule)}t.exports=n;var o=e("./abr-rules");n.prototype.destroy=function(){var e=this;e._rules=[]},n.prototype.getNextStreamIndex=function(e){var t=this;if(!o.validateAbrInput(e))return-1;var r=Number.MAX_VALUE;return t._rules.forEach(function(t){var n=t.getNextStreamIndex(e);0>n||(r=Math.min(r,n))}),r===Number.MAX_VALUE?-1:r}},{"./abr-rules":177}],177:[function(e,t,r){"use strict";function n(){var e=this;e.BANDWIDTH_FACTOR_LOW=1.3,e.BANDWIDTH_FACTOR_HIGH=1.6,e.MIN_BW_FOR_LOW_FACTOR=25e5,e.MIN_BUFFER_TO_SWITCH_DOWN=10}function o(){var e=this;e.BANDWIDTH_FACTOR_LOW=1.3,e.BANDWIDTH_FACTOR_HIGH=1.6,e.MIN_BW_FOR_LOW_FACTOR=25e5,e.MIN_BUFFER_TO_SWITCH_UP=6,e.MIN_LENGTH_DATA=2,e.ALLOWED_LOAD_TIME=500}function i(){var e=this;e.MAX_WIDTH_240P=427,e.MAX_HEIGHT_240P=240,e.MAX_BITRATE_240P=9e5,e.MAX_BITRATE_LIMIT=1e7}t.exports.BandwidthRule=n,t.exports.BufferRule=o,t.exports.ResolutionRule=i,r.validateAbrInput=function(e){return!e||"object"!=typeof e||!e.bitrateList||!e.bitrateList.length||"number"!=typeof e.estimatedBandwidthInBps||isNaN(e.estimatedBandwidthInBps)||void 0===e.currentIndex||null===e.currentIndex||isNaN(e.currentIndex)||void 0===e.bufferLength||isNaN(e.bufferLength)||void 0===e.displayWidth||isNaN(e.displayWidth)||e.displayWidth<=0||void 0===e.displayHeight||isNaN(e.displayHeight)||e.displayHeight<=0||void 0===e.streams||e.streams.length<=0?!1:!0},n.prototype.getNextStreamIndex=function(e){var t=this;if(!r.validateAbrInput(e))return-1;for(var n=0,o=e.estimatedBandwidthInBps,i=t._getBandwidthFactor(o),a=0;a<e.bitrateList.length&&!(o<i*e.bitrateList[a]);a++)n=a;return n<e.currentIndex&&e.bufferLength>t.MIN_BUFFER_TO_SWITCH_DOWN&&(n=e.currentIndex),n},n.prototype._getBandwidthFactor=function(e){var t=this;return e>=t.MIN_BW_FOR_LOW_FACTOR?t.BANDWIDTH_FACTOR_LOW:t.BANDWIDTH_FACTOR_HIGH},o.prototype.getNextStreamIndex=function(e){var t=this;if(!r.validateAbrInput(e))return-1;var n=-1;return n=0===e.bufferLength?t._getIndexWithLoadTime(e):e.bufferLength<t.MIN_BUFFER_TO_SWITCH_UP?e.currentIndex:e.bitrateList.length-1},o.prototype._getIndexWithLoadTime=function(e){for(var t=this,r=0,n=e.estimatedBandwidthInBps,o=t._getBandwidthFactor(n),i=t.ALLOWED_LOAD_TIME/1e3,a=0;a<e.bitrateList.length&&!(o*e.bitrateList[a]*t.MIN_LENGTH_DATA/n>i);a++)r=a;return r},o.prototype._getBandwidthFactor=function(e){var t=this;return e>=t.MIN_BW_FOR_LOW_FACTOR?t.BANDWIDTH_FACTOR_LOW:t.BANDWIDTH_FACTOR_HIGH},i.prototype.getNextStreamIndex=function(e){var t=this;if(!r.validateAbrInput(e))return-1;var n=e.pixelRatio||t.getPixelRatio(),o=e.displayWidth,i=e.displayHeight;!isNaN(n)&&n>1&&(o*=n,i*=n);for(var a=0,s=e.bitrateList[0],l=0;l<e.streams.length&&!(e.streams[l].width>o||e.streams[l].height>i);l++)a=l;var d=e.streams[a].width,c=e.streams[a].height,p=o<=t.MAX_WIDTH_240P||i<=t.MAX_HEIGHT_240P?t.MAX_BITRATE_240P:t.MAX_BITRATE_LIMIT;if(s=e.streams[a].bitrate,e.streams.forEach(function(e,t){e&&e.width===d&&e.height===c&&e.bitrate<=p&&t>a&&e.bitrate>s&&(a=t,s=e.bitrate)}),a<e.streams.length-1&&e.streams[a+1].bitrate<p){var u=Math.abs(e.streams[a+1].height-i)<=Math.abs(e.streams[a].height-i);a=u?a+1:a}return a},i.prototype.getPixelRatio=function(){var e=1;try{window&&(e=window.devicePixelRatio)}catch(t){e=1}return e||(e=1),e}},{}],178:[function(e,t,r){"use strict";function n(e){var t=this;t.COLLECTION_INTERVAL=100,t.MIN_SAMPLE_SIZE=5e4,t.SAMPLE_QUEUE_LENGTH=40,t.INSTANCE_SAMPLE_QUEUE_LENGTH=15,t.BW_ADJUSTMENT_FACTOR=.8,t._samplesQueue=[],t._instanceSamplesQueue=[],t.averageBandwidth=e||0,t.instantaneousBandwidth=e||0}t.exports=n,n.prototype.destroy=function(){var e=this;e._samplesQueue=[],e._instanceSamplesQueue=[],e.averageBandwidth=0,e.instantaneousTotalBandwidth=0},n.prototype.addSample=function(e){var t=this;if(e&&!(e.time<=0)){t._addSingleSample(e);var r=0,n=t._samplesQueue.length,o=n*(n+1)/2,i=1/o;t._samplesQueue.forEach(function(e,t){r+=(t+1)*i*e.bandwidth}),t.averageBandwidth=t.BW_ADJUSTMENT_FACTOR*r,r=0,n=t._instanceSamplesQueue.length,o=n*(n+1)/2,i=1/o,t._instanceSamplesQueue.forEach(function(e,t){r+=(t+1)*i*e.bandwidth}),t.instantaneousBandwidth=t.BW_ADJUSTMENT_FACTOR*r}},n.prototype._addSingleSample=function(e){var t=this;!e||e.time<=0||(e.bandwidth=e.size/e.time*.008,e.bandwidth=Math.min(50,e.bandwidth),t._samplesQueue.push(e),t._instanceSamplesQueue.push(e),t._samplesQueue.length>t.SAMPLE_QUEUE_LENGTH&&t._samplesQueue.shift(),t._instanceSamplesQueue.length>t.INSTANCE_SAMPLE_QUEUE_LENGTH&&t._instanceSamplesQueue.shift())},n.prototype.replaceSamples=function(e,t){var r=this,n=e&&t?e/t*.008:0;if(n>0){r.averageBandwidth=n,r._samplesQueue=[];for(var o=Math.min(Math.ceil(t/r.COLLECTION_INTERVAL),r.SAMPLE_QUEUE_LENGTH),i=0;o>i;i++){var a={bandwidth:n};r._samplesQueue.push(a)}}}},{}],179:[function(e,t,r){"use strict";t.exports={Command:e("./command"),MediaLoadCommand:e("./media-load-command"),StreamLoadCommand:e("./stream-load-command"),SubtitleStreamLoadCommand:e("./subtitle-stream-load-command"),SegmentLoadCommand:e("./segment-load-command"),SubtitleSegmentLoadCommand:e("./subtitle-segment-load-command"),ErrorHandleCommand:e("./error-handle-command")}},{"./command":182,"./error-handle-command":183,"./media-load-command":184,"./segment-load-command":185,"./stream-load-command":186,"./subtitle-segment-load-command":187,"./subtitle-stream-load-command":188}],180:[function(e,t,r){"use strict";var n=e("./command").CmdNames,o=e("./command-defs");t.exports.create=function(e,t,r){for(var i in n)if(n.hasOwnProperty(i)&&n[i]===e){var a=e+"Command",s=o[a];return new s(t,r)}return null}},{"./command":182,"./command-defs":179}],181:[function(e,t,r){"use strict";function n(){var e=this;e._commandMap={},e._eventKeys={};for(var t in a)a.hasOwnProperty(t)&&(e._commandMap[a[t]]={})}t.exports=n;var o=e("../command/command"),i=o.CmdEvents,a=o.CmdNames,s=e("../command/command-factory"),l=e("../../lib/hls-utils");n.prototype.destroy=function(){var e=this;e.removeAllCommands(),e._commandMap=null},n.prototype.executeCommand=function(e,t,r){var n=this;t&&(t.controller=n._controller);var o=n.createCommand(e,t,r);o&&o.execute()},n.prototype.createCommand=function(e,t,r){var n,o=this;try{n=s.create(e,t,r)}catch(a){console.error("[CommandManager] Could not create command. Error = "+a.toString()),n=null}if(!n)return null;for(var d in i)if(i.hasOwnProperty(d)){var c=i[d],p="on"+e+c;r[p]&&(o._eventKeys[c+e]=n.addEventListener(c,r[p],r))}var u=o._commandMap[e];return n.key=l.guid(),u[n.key]=n,n},n.prototype.removeCommand=function(e){var t=this;if(e){var r=t._commandMap[e.name];if(r[e.key]===e){if(delete r[e.key],e.client)for(var n in i)if(i.hasOwnProperty(n)){var o=i[n],a="on"+e.name+o;e.client[a]&&(e.removeEventListener(o,t._eventKeys[o+e.name]),delete t._eventKeys[o+e.name])}e.destroy()}}},n.prototype.removeRelatedCommands=function(e){var t=this;if(t._commandMap.hasOwnProperty(e)){var r=t._commandMap[e];for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];o&&t.removeCommand(o)}}},n.prototype.removeAllCommands=function(){var e=this;for(var t in e._commandMap)e._commandMap.hasOwnProperty(t)&&e.removeRelatedCommands(t)},n.prototype.getCommand=function(e){var t=this,r=t._commandMap[e];if(!r)return null;var n=Object.keys(r);return n.length<1?null:r[n[n.length-1]]}},{"../../lib/hls-utils":169,"../command/command":182,"../command/command-factory":180}],182:[function(e,t,r){"use strict";function n(e,t){var r=this;r.data=e,r.client=t,o.call(r,r.constructor.name)}t.exports.Command=n;var o=e("../../lib/event-bus"),i=e("../../lib/hls-utils");t.exports.CmdNames={CMD_MEDIA_LOAD:"MediaLoad",CMD_STREAM_LOAD:"StreamLoad",CMD_SUBTITLE_STREAM_LOAD:"SubtitleStreamLoad",CMD_SEGMENT_LOAD:"SegmentLoad",CMD_SUBTITLE_SEGMENT_LOAD:"SubtitleSegmentLoad",CMD_ERROR_HANDLE:"ErrorHandle"},t.exports.CmdEvents={CMD_COMPLETE:"Complete",CMD_PROGRESS:"Progress",CMD_ERROR:"Error"},i.inherits(n,o),n.prototype.destroy=function(){var e=this;e.data=null,o.prototype.destroy.call(e)},n.prototype.execute=function(){},n.prototype.cancel=function(){}},{"../../lib/event-bus":168,"../../lib/hls-utils":169}],183:[function(e,t,r){"use strict";function n(e,t){var r=this;if(!e||!e.controller)throw new Error("Invalid argument: data argument of the command is not complete");a.call(r,e,t),r.name=s.CMD_ERROR_HANDLE,r._controller=r.data.controller,r._model=r._controller.model,r.ERR_INTERVAL_AFTER_BUFFER_EMPTY=1e4,r._errorHandlingTimer=new d(r.ERR_INTERVAL_AFTER_BUFFER_EMPTY,1),r._errorHandlingTimer.addEventListener(function(){r._errorHandlingTimer.destroy(),r.publish(l.CMD_ERROR,r)},r),r._init(),r._locked=!1}t.exports=n;var o=e("../../lib/hls-utils"),i=e("./command"),a=i.Command,s=i.CmdNames,l=i.CmdEvents,d=e("../../lib/timer"),c=e("../model/worker-scope/model").AbrModes;o.inherits(n,a),n.prototype.destroy=function(){var e=this;e._errorHandlingTimer&&e._errorHandlingTimer.destroy(),a.prototype.destroy.call(e)},n.prototype.execute=function(e){var t=this;if(!t._locked||e){if(e&&(t._locked=!0),t._model.getABRMode()===c.AUTO){if(t._retryIndexList.length){var r=t._retryIndexList.shift();return void t.publish(l.CMD_PROGRESS,t,{index:r})}0!==t._model.currentLoadingStreamIndex&&t.publish(l.CMD_PROGRESS,t,{index:0})}t._model.bufferLength>.1||(t._errorHandlingTimer.start(),t._errorHandlingTimer.running)}},n.prototype.cancel=function(){},n.prototype._init=function(){var e=this;e._retryIndexList=[];var t,r=e._model.currentLoadingStreamIndex;for(t=r-1;t>=0;t--)e._retryIndexList.push(t);for(t=r+1;t<e._model.streams.length;t++)e._retryIndexList.push(t)}},{"../../lib/hls-utils":169,"../../lib/timer":174,"../model/worker-scope/model":211,"./command":182}],184:[function(e,t,r){"use strict";function n(e,t){var r=this;if(!e||!e.url||!e.controller)throw new Error("Invalid argument: data argument of the command is not complete");s.call(r,e,t),r.name=l.CMD_MEDIA_LOAD,r._loader=e.controller.services.getNewLoader()}t.exports=n;var o=e("../../lib/hls-utils"),i=e("./../services/loader").Events,a=e("./command"),s=a.Command,l=a.CmdNames,d=a.CmdEvents;o.inherits(n,s),n.prototype.destroy=function(){var e=this;e._loader.destroy(),s.prototype.destroy.call(e)},n.prototype.execute=function(){var e=this,t=e.data.url,r=function(t){e.publish(d.CMD_COMPLETE,e,t.data)},n=function(t){e.publish(d.CMD_ERROR,e,t)};e._loader.addEventListener(i.COMPLETE,r,e),e._loader.addEventListener(i.ERROR,n,e),e._loader.load(t)},n.prototype.cancel=function(){}},{"../../lib/hls-utils":169,"./../services/loader":218,"./command":182}],185:[function(e,t,r){"use strict";function n(e,t){var r=this;if(!e||!e.segment||!e.controller)throw new Error("Invalid argument: data argument of the command is not complete");u.call(r,e,t),r.name=_.CMD_SEGMENT_LOAD,r._segment=r.data.segment,r._controller=r.data.controller,r._model=r._controller.model,r._loading=!1,r._loadProfiler=new l,r._bytesTotal=0,r._segmentPerfInfo=null,r._streamIndex=r._segment.streamIndex;var n=r._model.streams;r._stream=n&&n.length?n[r._streamIndex]:null;var o=r._segment.bitrate*r._segment.duration/8,i=.025,a={responseType:"arraybuffer",isChunkedLoad:!0,minChunkSize:o*i};"atlas"===r._segment.cdn&&(a.headerFields={"X-PLAYBACK-SESSION-ID":r._segment.sessionId}),0===r._segment.streamIndex&&(a.timeout=1e4),r._loader=e.controller.services.getNewLoader(a),r._bandwidthEstimator=r._controller.services.bandwidthEstimator,r._metricsTimer=new d(r._bandwidthEstimator.COLLECTION_INTERVAL),r._metricsTimer.addEventListener(r._addSample,r);var c={demux:r._model.config.demux,width:r._stream?r._stream.width:640,height:r._stream?r._stream.height:360,timescale:r._model.timescale,duration:r._model.duration,pcr:r._model.getPCR(),frameRate:r._stream?r._stream.frameRate:30,mp4State:e.state.mp4,startOffsetTimestamp:r._model.startOffsetTimestamp,startTime:r._segment.startTime,lastAudioTimestamp:e.state.lastAudioTimestamp,live:r._model.live,onlyMetadata:e.onlyMetadata,useEditBox:!0};r._hlsTransformer=r._controller.create(s,c,r._onTransformProgress.bind(r))}t.exports=n;var o=e("../../lib/hls-utils"),i=e("../services/loader"),a=i.Events,s=e("../helper/hls-transformer-facade"),l=e("../../lib/load-profiler"),d=e("../../lib/timer"),c=e("./../event").HLSEvent,p=e("./command"),u=p.Command,_=p.CmdNames,m=p.CmdEvents;o.inherits(n,u),n.prototype.destroy=function(){var e=this;e.cancel(),e._loader.destroy(),e._metricsTimer.destroy(),e._hlsTransformer.destroy(),e._loadProfiler.destroy(),u.prototype.destroy.call(e)},n.prototype.execute=function(){var e=this,t=e._segment.url;e._bytesTotal=0,e._beginning=!1,e._loading=!0,e._chunkLoadStartTime=Date.now(),e._chunkLength=0,e._chunkDownloadTime=0,e._segment.totalDownloadTime=0,e._segment.timeToFirstByte=0,e._segment.startLoadTime=Date.now(),
e._metricsTimer.start();var r=function(){e._onLoadComplete()},n=function(t,r){e._onProgress(t,r)},o=function(t){e.publish(m.CMD_ERROR,e,t)},i=function(t,r){e._onBytesLoaded(t,r)};e._loader.addEventListener(a.COMPLETE,r,e),e._loader.addEventListener(a.PROGRESS,n,e),e._loader.addEventListener(a.ERROR,o,e),e._loader.addEventListener(a.BYTES_LOADED,i,e),e._loader.load(t)},n.prototype.cancel=function(){var e=this;e._close(),e._loader.reset()},n.prototype._close=function(){var e=this;e._metricsTimer.reset(),e._hlsTransformer.close(),e._loading=!1},n.prototype._onBytesLoaded=function(e,t){var r=this;0===r._segment.timeToFirstByte&&(r._segment.timeToFirstByte=Date.now()-r._segment.startLoadTime,r._controller.sendEvent(c.SEGMENT_FIRST_BYTE_LOADED,t),r.publish(m.CMD_PROGRESS,r,{position:"firstByte"})),r._chunkLength+=Math.max(e-r._bytesTotal,0),r._bytesTotal=e},n.prototype._onProgress=function(e,t){var r=this;t!==r._bytesTotal&&r._onBytesLoaded(t),r._hlsTransformer.append(e)},n.prototype._onTransformProgress=function(e,t){var r=this;if(e){r._segmentPerfInfo&&e.putParam&&e.putParam("perfInfo",r._segmentPerfInfo),r.publish(m.CMD_PROGRESS,r,e,t);var n;e.getParam&&(n=e.getParam("parsedInfo"));var o=n?n.position:e.position;"end"===o&&r.publish(m.CMD_COMPLETE,r)}},n.prototype._addSample=function(){var e=this,t=Math.max(e._chunkLength,0),r=Date.now();e._chunkDownloadTime=r-e._chunkLoadStartTime,e._metricsTimer.reset(),e._bandwidthEstimator&&e._chunkDownloadTime>10&&(e._chunkLoadStartTime=r,e._segment.totalDownloadTime+=e._chunkDownloadTime,e._chunkLength=0,e._bandwidthEstimator.addSample({size:t,time:e._chunkDownloadTime})),e._metricsTimer.start()},n.prototype._onLoadComplete=function(){var e=this;e._addSample(),e._metricsTimer.stop();var t=["startTime","requestStart","responseStart","responseEnd","secureConnectionStart","fetchStart","connectStart","domainLookupStart"],r=e._loadProfiler.getPerformanceTiming(t,e._segment.url),n=r&&r.responseEnd&&r.startTime?r.responseEnd-r.startTime:null;e._segmentPerfInfo=r,e._hlsTransformer.endOfSegment(),e._bandwidthEstimator.replaceSamples(e._bytesTotal,n)}},{"../../lib/hls-utils":169,"../../lib/load-profiler":171,"../../lib/timer":174,"../helper/hls-transformer-facade":202,"../services/loader":218,"./../event":200,"./command":182}],186:[function(e,t,r){"use strict";function n(e,t){var r=this;if(!e||!e.streamUrl||!e.controller)throw new Error("Invalid argument: data argument of the command is not complete");s.call(r,e,t),r.name=l.CMD_STREAM_LOAD,r._loader=e.controller.services.getNewLoader()}t.exports=n;var o=e("../../lib/hls-utils"),i=e("./../services/loader").Events,a=e("./command"),s=a.Command,l=a.CmdNames,d=a.CmdEvents;o.inherits(n,s),n.prototype.destroy=function(){var e=this;e._loader.destroy(),s.prototype.destroy.call(e)},n.prototype.execute=function(){var e=this,t=e.data.streamUrl,r=function(r){e.publish(d.CMD_COMPLETE,e,{data:r.data,streamUrl:t,streamIndex:e.data.index})},n=function(t){e.publish(d.CMD_ERROR,e,t)};e._loader.addEventListener(i.COMPLETE,r,e),e._loader.addEventListener(i.ERROR,n,e),e._loader.load(t)},n.prototype.cancel=function(){}},{"../../lib/hls-utils":169,"./../services/loader":218,"./command":182}],187:[function(e,t,r){"use strict";function n(e,t){var r=this;if(!e||!e.controller||!e.subtitleStream||e.live&&!e.programDateTime)throw new Error("Invalid Argument: data arg is incomplete");d.call(r,e,t),r.name=c.CMD_SUBTITLE_SEGMENT_LOAD,r._stream=e.subtitleStream,r._controller=e.controller,r._segment=r._stream.getVTTSegment(e.seqNum,e.programDateTime),r._ready=!0,r._eventKeys={},r._setupLoader()}t.exports=n;var o=e("../../lib/hls-utils"),i=e("../services/loader"),a=i.Events,s=e("./../event").HLSEvent,l=e("./command"),d=l.Command,c=l.CmdNames,p=l.CmdEvents;o.inherits(n,d),n.prototype.destroy=function(){var e=this;e._loader.destroy(),e._controller.removeEventListeners(e._eventKeys),d.prototype.destroy.call(e)},n.prototype.execute=function(){var e=this;return e._segment?void(e._segment&&e._loader&&e._loader.load(e._segment.url)):(e._eventKeys[s.SUBTITLE_STREAM_UPDATED]=e._controller.addEventListener(s.SUBTITLE_STREAM_UPDATED,e._onSubtitleStreamUpdate,e),void(e._ready=!1))},n.prototype.cancel=function(){},n.prototype._setupLoader=function(){var e=this;e._loader=e._controller.services.getNewLoader();var t=function(t){e._onLoadComplete(t)},r=function(t){e.publish(p.CMD_ERROR,e,t)};e._loader.addEventListener(a.COMPLETE,t,e),e._loader.addEventListener(a.ERROR,r,e)},n.prototype._onSubtitleStreamUpdate=function(){var e=this;e._segment=e._stream.getVTTSegment(e.data.seqNum,e.data.programDateTime),e._segment&&!e._ready&&(e._ready=!0,e.execute())},n.prototype._onLoadComplete=function(e){var t=this;if(t._segment)return t._segment.data=e.data,void 0===t._segment.pcr()?void t._controller.addEventListener(s.PCR_AVAILABLE,t._parse,t):void t._parse()},n.prototype._parse=function(){var e=this;e._segment.parseSegment(),e.publish(p.CMD_COMPLETE,e,{data:e._segment.toObject(),url:e._segment.url})}},{"../../lib/hls-utils":169,"../services/loader":218,"./../event":200,"./command":182}],188:[function(e,t,r){"use strict";function n(e,t){var r=this;if(!e||!e.streamUrl||!e.controller)throw new Error("Invalid argument: data argument of the command is not complete");s.call(r,e,t),r.name=l.CMD_SUBTITLE_STREAM_LOAD,r._loader=e.controller.services.getNewLoader()}t.exports=n;var o=e("../../lib/hls-utils"),i=e("./../services/loader").Events,a=e("./command"),s=a.Command,l=a.CmdNames,d=a.CmdEvents;o.inherits(n,s),n.prototype.destroy=function(){var e=this;e._loader.destroy(),s.prototype.destroy.call(e)},n.prototype.execute=function(){var e=this,t=e.data.streamUrl,r=function(r){e.publish(d.CMD_COMPLETE,e,{data:r.data,streamUrl:t})},n=function(t){e.publish(d.CMD_ERROR,e,t)};e._loader.addEventListener(i.COMPLETE,r,e),e._loader.addEventListener(i.ERROR,n,e),e._loader.load(t)},n.prototype.cancel=function(){}},{"../../lib/hls-utils":169,"./../services/loader":218,"./command":182}],189:[function(e,t,r){"use strict";function n(){var e=this;e._node=e._context.node,e._mediaSource=e._context.mediaSource,e._switchManager=null,e._sourceBuffers=[],e._error=!1,e._model=e._context.appModel,e._pastBufferLengthLimit=e._model.config.pastBufferLengthLimit}t.exports=n;var o=e("./source-buffer-manager");n.prototype.destroy=function(){var e=this;e._abortBuffer(),e._sourceBuffers=[]},n.prototype.setSwitchManager=function(e){var t=this;t._switchManager=e},n.prototype.process=function(){var e=this;e._areSourceBuffersClosed()&&"open"===e._mediaSource.readyState&&e._mediaSource.endOfStream()},n.prototype.onError=function(){var e=this;e._error=!0},n.prototype.onSeeking=function(e){var t=this;e&&t._abortBuffer()},n.prototype._getSourceBuffer=function(e){for(var t=this,r=0;r<t._sourceBuffers.length;r++)if(e===t._sourceBuffers[r].type)return t._sourceBuffers[r];return null},n.prototype.setMinimumBufferTime=function(e){var t=this;t._sourceBuffers.forEach(function(t){t.setMinBufferTime(e)})},n.prototype.createSourceBuffer=function(e,t,r){var n=this;if(!n._mediaSource||n._error)return null;var i=n._getSourceBuffer(e);if(!i){var a=e+'/mp4; codecs="'+t+'"';i=n._context.create(o,n._mediaSource,e,a),n._sourceBuffers.push(i);var s=isNaN(r)?n._model.live?n._model.config.minBufferTime.live:n._model.config.minBufferTime.vod:r;n.setMinimumBufferTime(s)}return i},n.prototype._abortBuffer=function(){var e=this;e._mediaSource&&!e._error&&e._sourceBuffers.forEach(function(e){e.abort()})},n.prototype.clear=function(e,t){var r=this;if(r._mediaSource&&!r._error){if(!e)return void r._sourceBuffers.forEach(function(e){e.clearAll()});if(!(e&&e.end-e.start<10)&&t){var n=function(e){};t.clearBuffer(e.start,e.end,n)}}},n.prototype.appendBuffer=function(e,t){var r=this,n=r.createSourceBuffer(e.type,e.codec),o=function(e,n){r._onAppendBufferComplete(e,n),t(e,n)};n&&!r._error&&e.data&&e.data.length&&n.appendBuffer(e.data,e.startTime,e.endTime,e.onlyMetadata,o)},n.prototype.endOfStream=function(e){var t=this;t._sourceBuffers.forEach(function(t){t.setEndOfStream(e)})},n.prototype._areSourceBuffersClosed=function(){var e=this;if(!e._sourceBuffers.length)return!1;var t=!0;return e._sourceBuffers.forEach(function(e){t=t&&"closed"===e.state}),t},n.prototype.getPendingBufferLength=function(){var e=this,t=0;return e._sourceBuffers.forEach(function(e){var r=e.getTotalPendingBufferLength();r>t&&(t=r)}),t},n.prototype.resetReadyState=function(){var e=this;e._sourceBuffers.forEach(function(e){e.ready=!1})},n.prototype.areSrcBuffersReady=function(){for(var e=this,t=0;t<e._sourceBuffers.length;t++)if(!e._sourceBuffers[t].ready)return!1;return!0},n.prototype._onAppendBufferComplete=function(e,t){var r=this;t&&r.clear(r._getPastBufferRange(t),t)},n.prototype._getPastBufferRange=function(e){var t=this,r=t._node.currentTime,n=e.buffer.buffered,o=0,i=0,a=t._model.live?t._pastBufferLengthLimit.live:t._pastBufferLengthLimit.vod;return n&&n.length&&(o=n.start(0),i=Math.max(r-a,0)),{start:o,end:i}}},{"./source-buffer-manager":192}],190:[function(e,t,r){"use strict";function n(e){var t=this;if(t._moduleName="Controller",t._instanceId=s.guid(),!e||!e.config)throw new Error("Invalid arguments - properties/config absent");if(t._node=t._context.node,t._mediaSource=t._context.mediaSource,t._model=t._context.appModel,t._useWorker=e.config?e.config.useWorker:!0,t.mediaLoaded=!1,t._preloadProgressSent=!1,t._synchPosition=null,t.VALID_TIME_GAP_BW_HISTROY=6e5,t._videoEventHandler=new u(t._node,t._context.mediaSource,t),t._bufferController=t._context.create(_),t._playbackMetrics=t._context.create(y),t._localStorageHandler=new g,e.config.seedBandwidth=t._getAverageBWFromLS(),t._updateTimer=new l(250),t._updateTimer.addEventListener(t._update,t),e.config.userAgent&&e.config.userAgent.chrome&&(t._useWorker=!1),t._workerStats={from:0,avgFrom:0,countFrom:0},t._jobQueue=[],t._useWorker){if(t._worker=t._getWorker(t._moduleName),t._worker)return e.config.inWorkerScope=!0,t._worker.addEventListener("message",t._onMessage.bind(t)),void t._sendMessage(i.CREATE,[e]);e.config.useWorker=!1}t._controller=new p(e,t._onCallback.bind(t)),t._useWorker=!1,t._timeOnPause=0,t._synchPosition=null,t._synchState=b.SYNCH_DONE}t.exports=n;var o=e("../../worker-utils/worker-defs"),i=o.MessageIds,a=o.MessageTypes,s=e("../../../lib/hls-utils"),l=e("../../../lib/timer"),d=e("../../worker-utils/worker-bridge"),c=e("webworkify"),p=e("../worker-scope/controller"),u=e("./video-event-handler"),_=e("./buffer-controller"),m=e("../../event"),v=m.HLSEvent,y=e("../../services/playback-metrics"),f=e("../../worker-utils/message"),g=e("../../../lib/localstoragehandler"),b={SYNCH_BEGIN:"synchBegin",SYNCH_METADATA_READY:"synchMetadataReady",SYNCH_DONE:"synchDone"};n.prototype.destroy=function(){var e=this;e._videoEventHandler.destroy(),e._bufferController.destroy(),e._playbackMetrics.destroy(),e._jobQueue=null,e._updateTimer&&(e._updateTimer.destroy(),e._updateTimer=null),e._useWorker&&e._worker?(e._sendMessage(i.DESTROY),e._worker.terminate()):e._controller.destroy()},n.prototype.sendVideoEvent=function(e){var t=this;if(e){var r=e.type;switch(r){case"play":t._onPlay();break;case"playing":t._onPlaying();break;case"pause":t._onPause();break;case"seeking":t._onSeeking(e);break;case"seeked":t._onSeeked(e);break;case"ended":t._onComplete();break;case"error":t._onError();break;case"timeupdate":t._onTimeUpdate(e);break;case"resize":t._onResize(e)}}},n.prototype.onMediaSourceOpen=function(){var e=this;e.mediaLoaded&&(e._updateTimer.reset(),e._updateTimer.start(),e._jobQueue.length&&e._flushJobQueue())},n.prototype.play=function(e){var t=this;if(t._mediaSource&&("closed"===t._mediaSource.readyState||!t.mediaLoaded))return void t._jobQueue.push([t,"play",[e]]);var r=!t._model.live&&e>0&&e<=t._model.duration?e:null;r&&t._onSynchBegin(r),t._node.play()},n.prototype.preload=function(e){var t=this;return!t._mediaSource||"closed"!==t._mediaSource.readyState&&t.mediaLoaded?void t._callMethod("preload",[e]):void t._jobQueue.push([t,"preload",[e]])},n.prototype.setABRMode=function(e){var t=this;t._callMethod("setABRMode",[e])},n.prototype.getSegInfo=function(){var e=this,t={mode:"sync",segInfo:null};return e._useWorker&&e._worker?(t.mode="async",e._sendMessage(i.CALL_METHOD,null,"getSegInfo")):t.segInfo=e._controller.getSegInfo(),t},n.prototype._onPlay=function(){var e=this;return e._model.setDimensions(),!e._mediaSource||"closed"!==e._mediaSource.readyState&&e.mediaLoaded?(e._callMethod("onPlay",[e._synchPosition]),void e._playbackMetrics.onPlay()):void e._jobQueue.push([e,"_onPlay"])},n.prototype._onPlaying=function(){var e=this;e._callMethod("onPlaying")},n.prototype._onPause=function(){var e=this;e._callMethod("onPause"),e._playbackMetrics.onPause()},n.prototype._onSeeking=function(e){var t=this,r=e.target.currentTime,n=!t._model.live;t._bufferController.onSeeking(n),t._callMethod("onSeeking",[r])},n.prototype._onSeeked=function(e){var t=this,r=e.target.currentTime;t._callMethod("onSeeked",[r])},n.prototype._onComplete=function(){var e=this;e._updateTimer.stop(),e._callMethod("onComplete")},n.prototype._onError=function(){var e=this,t=e._node.error?e._node.error.code:null;e._callMethod("onError",[t]),e._bufferController.onError()},n.prototype._onResize=function(e){var t=this;t._model.setDimensions()},n.prototype._onTimeUpdate=function(e){var t=this,r={currentTime:e.currentTarget.currentTime,bufferLength:t._model.getBufferLength(),pendingBufferLength:t._bufferController.getPendingBufferLength(),bufferedRanges:t._model.getBufferedDto(),dimensions:t._model.getDimensions(),pixelRatio:t._model.getPixelRatio()};t._callMethod("onTimeUpdate",[r])},n.prototype._update=function(){var e=this;if(e.mediaLoaded){e._bufferController.process();var t={currentTime:e._node.currentTime,bufferLength:e._model.getBufferLength(),pendingBufferLength:e._bufferController.getPendingBufferLength(),bufferedRanges:e._model.getBufferedDto(),dimensions:e._model.getDimensions(),pixelRatio:e._model.getPixelRatio()};e._callMethod("onUpdate",[t])}},n.prototype._onMediaLoaded=function(){var e=this;e.mediaLoaded=!0,e._mediaSource&&"closed"===e._mediaSource.readyState||(e._updateTimer.start(),e._jobQueue.length&&e._flushJobQueue())},n.prototype._onSynchBegin=function(e){var t=this;t._synchPosition=e,t._synchState=b.SYNCH_BEGIN,t._model.live&&t._bufferController.resetReadyState()},n.prototype._onSynchComplete=function(e){var t=this;t._synchPosition=null,t._synchState=b.SYNCH_DONE,t._model.live&&t._callMethod("onSynchComplete",[e])},n.prototype._flushJobQueue=function(){var e=this,t=e._jobQueue;e._jobQueue=[],t.forEach(function(e){var t=e[0],r=e[1],n=e.length>2?e[2]:null;t[r].apply(t,n)})},n.prototype._callMethod=function(e,t){var r=this;r._useWorker&&r._worker?r._sendMessage(i.CALL_METHOD,t,e):r._controller[e].apply(r._controller,t)},n.prototype._getWorker=function(e){var t=this;if(!e)return null;if(t._useWorker&&"undefined"!=typeof Worker)try{return t._worker||(t._worker=c(d)),t._worker}catch(r){}return null},n.prototype._onMessage=function(e){var t=this;if(e){var r=e.data?new f(e.data):e;if(r&&r.instanceId===t._instanceId){var n=r.getParam("media");if(t._updateFromWorkerStats(n,r.timestamp),n&&t._model.update(n),r.type===a.EVENT)return void t._handleEvent(r.id,r.getParam("eventData"));switch(r.id){case i.APPEND_SRC_BUFFER:t._appendSrcBuffers(r.getParam("tracks"));break;case i.SAVE_AVG_BANDWIDTH:t._setAvgBWToLocalStorage(r.getParam("avgBwInfo"));break;case i.END_OF_STREAM:r.args&&r.args.length&&(t._bufferController.endOfStream(r.getParam("endOfStream")),t._context.sendEvent(v.CONTENT_LOAD_FINISHED,r.args[0]));break;case i.QUALITY_CHANGE_PAUSE:t._pauseOnQualityChange();break;case i.QUALITY_CHANGE_PLAY:t._playOnQualityChange()}}}},n.prototype._onCallback=function(e){var t=this;e.instanceId=t._instanceId,t._onMessage(e)},n.prototype._handleEvent=function(e,t){var r=this;if(e){switch(e){case v.MEDIA_LOADED:r._onMediaLoaded();break;case v.WAITING:var n=t?t.minBufferTime:.1;r._bufferController.setMinimumBufferTime(n),r._playbackMetrics.updateBufferingInfo(t);break;case v.LIVE_SYNCH:r._onSynchBegin(t?t.synchPosition:null);break;case v.ERROR:return t.error=new Error(t.message,t.code),void r._context.notifyError(t)}r._context.sendEvent(e,t)}},n.prototype._appendSrcBuffers=function(e){var t=this;e&&(e.forEach(function(e){t._bufferController.createSourceBuffer(e.type,e.codec,e.minBufferTime)}),e.forEach(function(e){t._bufferController.appendBuffer(e,function(e,r){e&&console.error("[ControllerFacade] Error in appendBuffer Err = "+e.toString()),t._onAppendBufferComplete(e,r)})}),t._model.preloading&&!t._preloadProgressSent&&(t._context.sendEvent(v.PRELOAD_PROGRESS),t._preloadProgressSent=!0))},n.prototype._onAppendBufferComplete=function(e,t){var r=this;if(!r._model.live&&r._synchState===b.SYNCH_BEGIN)return r._synchState=b.SYNCH_METADATA_READY,r._bufferController.onSeeking(!0),void r._callMethod("onSynchMetadataReady",[r._synchPosition]);if(r._synchPosition&&r._bufferController.areSrcBuffersReady()){var n=r._node.seekable,o=r._node.buffered;if(n.length&&o.length){var i=n.start(n.length-1),a=n.end(n.length-1);if(r._synchPosition>=i&&r._synchPosition<=a){for(var s=r._synchPosition,l=0;l<o.length;l++)if(!(s>o.end(l))&&s<o.start(l)){s=o.start(l);break}try{r._node.currentTime=s}catch(d){}r._onSynchComplete(s)}}}},n.prototype._sendMessage=function(e,t,r){var n=this;if(n._worker&&e){var o={type:a.MESSAGE,id:e,moduleName:n._moduleName,instanceId:n._instanceId,funcName:r,args:t,timestamp:Date.now()};n._worker.postMessage(o)}},n.prototype._getAverageBWFromLS=function(){var e=this,t=e._localStorageHandler.readProperty("avgBW"),r=t?t.avgBWtimestamp:null,n=r?Date.now()-parseInt(r):Number.MAX_VALUE;if(n<e.VALID_TIME_GAP_BW_HISTROY&&t){var o=t.avgBW;return o?parseInt(o):0}return 0},n.prototype._setAvgBWToLocalStorage=function(e){var t=this;e&&t._localStorageHandler&&t._localStorageHandler.writeProperty("avgBW",e)},n.prototype._updateFromWorkerStats=function(e,t){var r=this;if(r._workerStats.from+=Date.now()-t,r._workerStats.countFrom++,r._workerStats.avgFrom=r._workerStats.countFrom?Math.floor(r._workerStats.from/r._workerStats.countFrom):0,e){var n=e.segInfoList;if(n&&n.length){var o=n[n.length-1];o.from=r._workerStats.from,o.fr_n=r._workerStats.countFrom,o.fr_avg=r._workerStats.avgFrom,r._workerStats.from=0,r._workerStats.countFrom=0,r._workerStats.avgFrom=0}}},n.prototype._playOnQualityChange=function(){var e=this;e._node.currentTime=e._timeOnPause,e._node.play()},n.prototype._pauseOnQualityChange=function(){var e=this;e._bufferController.clear(),e._controller.sendEvent(v.WAITING,{value:!0,bufferInit:!1}),e._timeOnPause=e._node.currentTime,e._node.pause()}},{"../../../lib/hls-utils":169,"../../../lib/localstoragehandler":172,"../../../lib/timer":174,"../../event":200,"../../services/playback-metrics":219,"../../worker-utils/message":226,"../../worker-utils/worker-bridge":227,"../../worker-utils/worker-defs":228,"../worker-scope/controller":195,"./buffer-controller":189,"./video-event-handler":193,webworkify:229}],191:[function(e,t,r){"use strict";t.exports={ERROR:-1,INITIAL:0,MEDIA_METADATA_LOADING:1,MEDIA_METADATA_LOADED:2,STREAM_METADATA_LOADING:3,STREAM_METADATA_LOADED:4,MEDIA_LOADED:5,PRELOADING:6,PLAY_REQUESTED:7,PLAYING:8,PAUSED:9,PLAY_COMPLETE:10,SUBTITLE_METADATA_LOADING:11}},{}],192:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n._node=n._context.node,n._destroyed=!1,n.type=t,n._mediaSource=e,n.buffer=e.addSourceBuffer(r),n._appendQueue=[],n._removeQueue=[],n._waitingList=[],n._endOfStream=!1,n._minBufferTime=o,n.ready=!1,n.TIMESTAMP_COMPARE_EPSILON=.065,n.GOP_LENGTH=2,n.buffer.addEventListener("updateend",n._onTransferComplete.bind(n)),n.buffer.addEventListener("error",function(){n.abort()}),n.state="open"}t.exports=n;var o=.1,i={APPEND:"append",REMOVE:"remove"};n.prototype.destroy=function(){var e=this;e.remove(),e._appendQueue=[],e._removeQueue=[],e._waitingList=[],e.state="closed"},n.prototype.remove=function(){var e=this;e._destroyed||(e._destroyed=!0,e.abort(),"closed"!==e._mediaSource.readyState&&e._mediaSource.removeSourceBuffer(e.buffer))},n.prototype.setMinBufferTime=function(e){var t=this;t._minBufferTime=Math.max(o,e)},n.prototype.appendBuffer=function(e,t,r,n,o){var a=this;if(!a._destroyed){var s={type:i.APPEND,cb:o,buffer:e,startTime:t,endTime:r,time:r-t,onlyMetadata:n||!1};a._appendQueue.push(s),a._processSourceBufferTasks()}},n.prototype.clearBuffer=function(e,t,r){var n=this;if(n._destroyed||e>=t)return r("["+n.constructor.name+"] Invalid remove buffer call");var o={type:i.REMOVE,cb:r,startTime:e,endTime:Math.round(1e3*parseFloat(t))/1e3};n._removeQueue.push(o),n._processSourceBufferTasks()},n.prototype.abort=function(){var e=this;if("open"===e._mediaSource.readyState){e._appendQueue=[],e._removeQueue=[],e._waitingList=[];try{e.buffer.abort()}catch(t){}}},n.prototype.clearAll=function(){var e=this;if("closed"!==e._mediaSource.readyState){e.abort();try{var t=e.buffer.buffered,r=t.length?t.start(0):0,n=t.length?t.end(t.length-1):0;n>r&&e.buffer.remove(r,n)}catch(o){}}},n.prototype.setEndOfStream=function(e){var t=this;t._endOfStream=e,e?(t._markClosedOnComplete(),t._processSourceBufferTasks()):t.state=t._appendQueue.length?t.state:"empty"},n.prototype._markClosedOnComplete=function(){var e=this;e._endOfStream&&"empty"===e.state&&!e._waitingList.length&&(e.state="closed")},n.prototype._onTransferComplete=function(){var e=this;if(e.ready=!0,e._waitingList.length){var t=e._waitingList.shift();t.cb(null,e)}e._appendQueue.length||(e.state="empty"),e._processSourceBufferTasks(),e._markClosedOnComplete()},n.prototype._processSourceBufferTasks=function(){for(var e=this;e._removeQueue.length;){if(e.buffer.updating)return;e._performTask(e._removeQueue.shift())}for(;e._appendQueue.length;){if(e.buffer.updating)return;var t=e._getBufferLength()+e.getTotalPendingBufferLength(),r=e._appendQueue.length&&e._appendQueue[0]&&e._appendQueue[0].onlyMetadata;if(!e._endOfStream&&t<e._minBufferTime&&!r)return;e._performTask(e._appendQueue.shift())}},n.prototype._performTask=function(e){var t=this;if(e&&e.type)try{e.type===i.APPEND?t.buffer.appendBuffer(e.buffer):e.type===i.REMOVE&&t.buffer.remove(e.startTime,e.endTime),t._waitingList.push(e),t.state="updating"}catch(r){if("QuotaExceededError"===r.name){var n=t._clearOnQuotaExceed();n&&e.type===i.APPEND&&t._appendQueue.unshift(e)}}},n.prototype._clearOnQuotaExceed=function(){var e=this,t=e._node.buffered,r=t.length>0?t.start(0):NaN,n=e._node.currentTime-e.GOP_LENGTH;return n>r?(e.buffer.remove(r,n),!0):!1},n.prototype.getTotalPendingBufferLength=function(){var e=this,t=0;return e._appendQueue.forEach(function(e){e&&e.time&&(t+=e.time)}),t},n.prototype._getBufferLength=function(){var e,t=this,r=t._context.node,n=t.TIMESTAMP_COMPARE_EPSILON,o=0,i=r.currentTime,a=null;try{a=t.buffer.buffered;for(var s=0;a&&s<a.length;s++)if(i+n>=a.start(s)&&i<a.end(s)){e=s;break}e>=0&&a&&a.length&&(o=a.end(e)-i)}catch(l){}return o}},{}],193:[function(e,t,r){"use strict";function n(e,t,r){var n=this;e&&t&&r&&(n._node=e,n._client=r,n._mediaSource=t,n._addEventListeners())}t.exports=n,n.prototype.destroy=function(){var e=this;e._removeEventListeners()},n.prototype._addEventListeners=function(){var e=this;e._videoEventHandler=e._onNativeVideoEvent.bind(e),e._videoNativeEvents=["play","playing","pause","seeking","seeked","ended","error","timeupdate"],e._videoNativeEvents.forEach(function(t){e._node.addEventListener(t,e._videoEventHandler)}),e._mediaSourceOpenHandler=e._onMediaSourceOpen.bind(e),e._mediaSource.addEventListener("sourceopen",e._mediaSourceOpenHandler),window.addEventListener("resize",e._videoEventHandler)},n.prototype._removeEventListeners=function(){var e=this;e._videoNativeEvents.forEach(function(t){e._node.removeEventListener(t,e._videoEventHandler)}),e._mediaSource.removeEventListener("sourceopen",e._mediaSourceOpenHandler),window.removeEventListener("resize",e._videoEventHandler)},n.prototype._onNativeVideoEvent=function(e){var t=this;t._client.sendVideoEvent(e)},n.prototype._onMediaSourceOpen=function(e){var t=this;t._client.onMediaSourceOpen(e)}},{}],194:[function(e,t,r){"use strict";function n(){var e=this;e._model=e._controller.model,e._buffering=!1,e._error=!1,e._timeAtBufferEmpty=NaN,e._waitingEvtObj={},e._paused=!0,e._lastTime=-1,e.MIN_BUFFER_TO_PLAY=1,e.MIN_TIME_TO_BUFFER_CHECK=150,e.BUFFER_REPORT_THRESHOLD=20,e.MIN_BUFFER_TIME_UPPER_BOUND=5,e.WEIGHT=.5,e._bufferInit=!0,e._seeking=!1}t.exports=n;var o=e("./../../event").HLSEvent;n.prototype.onPlayRequested=function(){var e=this;e._setBufferEmpty()},n.prototype.destroy=function(){},n.prototype.checkBuffering=function(e){var t=this,r=t._model.bufferLength,n=t._model.currentTime,o=t._model.duration;if(!(isFinite(o)&&n+.05>o)){var i=t._getBufferCheckDelta();!e&&i<t.MIN_TIME_TO_BUFFER_CHECK||(!(.02>=r||t._lastKnownVideoTime===n&&r<t.MIN_BUFFER_TO_PLAY)||t._paused||t._model.preloading||t._buffering?!isNaN(t._timeAtBufferEmpty)&&n>t._timeAtBufferEmpty&&t._setBufferFull():t._setBufferEmpty(),t._lastKnownVideoTime=n,t._lastBufferCheckTime=Date.now())}},n.prototype.onPlaying=function(){var e=this;e._paused=!1},n.prototype.onPause=function(){var e=this;e._paused=!0,e._buffering&&(e._waitingEvtObj.bufferInit=!0,e._setBufferFull())},n.prototype.onSeeking=function(){var e=this;e._seeking=!0},n.prototype.onSeeked=function(){var e=this;e._seeking=!1},n.prototype.onTimeUpdate=function(){var e=this;e._buffering&&e.checkBuffering(!0)},n.prototype.onVideoSync=function(e){var t=this;t._lastKnownVideoTime=e},n.prototype.onError=function(){var e=this;e._buffering&&e._setBufferFull()},n.prototype._setBufferEmpty=function(){var e=this;if(!e._buffering){e._buffering=!0;var t=e.getMinimumBufferTime();e._setBufferingStartTime(),e._timeAtBufferEmpty=e._model.currentTime,e._seeking&&(e._bufferInit=!0),e._waitingEvtObj={value:e._buffering,bufferInit:e._bufferInit,minBufferTime:t},e._controller.sendEvent(o.WAITING,e._waitingEvtObj)}},n.prototype._setBufferFull=function(){var e=this;e._buffering&&(e._buffering=!1,e._timeAtBufferEmpty=NaN,e._waitingEvtObj={value:!1,waitTime:e._getRebufferingTime(),bufferInit:e._bufferInit,minBufferTime:.1},e._controller.sendEvent(o.WAITING,e._waitingEvtObj),e._waitingEvtObj={},e._bufferInit=!1)},n.prototype.getMinimumBufferTime=function(){var e=this,t=.1,r=e._controller.services.bandwidthEstimator.instantaneousBandwidth,n=e._model.getCurrentLoadingStream(),o=n?n.bitrate/1e6:0,i=e._model.config.minBufferTime;i=e._model.live?i.live:i.vod;var a=e._model.config.variableMinBuffer;return t=a&&o&&!isNaN(r)?e._calculateMinimumBufferTime(r/o,i):i},n.prototype._calculateMinimumBufferTime=function(e,t){var r=this,n=r.MIN_BUFFER_TIME_UPPER_BOUND;if(t>=n)return t;var o=Math.max(t,0);if(e>=1)return o;var i=e*n;return 1*Math.max(o,n-i*r.WEIGHT).toFixed(1)},n.prototype._getBufferCheckDelta=function(){var e=this,t=Date.now();return e._lastBufferCheckTime=e._lastBufferCheckTime||t,t-e._lastBufferCheckTime},n.prototype._setBufferingStartTime=function(){var e=this,t=e._getBufferCheckDelta(),r=e._getVideoProgressDelta();e._bufferingStartTime=Date.now()-Math.max(t-r,0)},n.prototype._getRebufferingTime=function(){var e=this,t=e._getVideoProgressDelta(),r=Math.max(Date.now()-e._bufferingStartTime-t,0);return e._waitingEvtObj.bufferInit?0:r<e.BUFFER_REPORT_THRESHOLD?0:r},n.prototype._getVideoProgressDelta=function(){var e=this,t=0;return e._lastKnownVideoTime&&(t=1e3*(e._model.currentTime-e._lastKnownVideoTime).toFixed(3)),t}},{"./../../event":200}],195:[function(e,t,r){"use strict";function n(e,t){var r=this;y.call(r,r.constructor.name),r._properties=e,r._callback=t,r.model=r.create(g,e.metadata,e.config),r.services=r.create(b),r._parser=r.services.metadataParser,r._commandManager=r.create(_),r._streamLoader=r.create(d,r._commandManager),r._bufferMonitor=r.create(c),r._state=v.INITIAL,r._eventKeys={},r._inWorkerScope=r._properties.config.inWorkerScope,r._addEventListeners(),r._seeking=!1,r._playStarted=!1,r._processTimer=new m(250),r._processTimer.addEventListener(r._process,r),r._workerStats={to:0,countTo:0,avgTo:0},r.initialize()}t.exports=n;var o=e("../../event"),i=o.HLSEvent,a=e("../../error"),s=e("./streaming-controller"),l=e("./live-streaming-controller"),d=e("../../helper/stream-loader"),c=e("./buffer-monitor"),p=e("../../model/worker-scope/model").MetadataTypes,u=e("../../command/command").CmdNames,_=e("../../command/command-manager"),m=e("../../../lib/timer"),v=e("../main/controller-states"),y=e("../../../lib/event-bus"),f=e("../../../lib/hls-utils"),g=e("../../model/worker-scope/model").Model,b=e("../../services/services"),A=e("../../worker-utils/worker-defs"),E=e("../../worker-utils/message");f.inherits(n,y),n.prototype.create=function(){var e=this,t=Array.prototype.slice.call(arguments),r=t.shift(),n=Object.create(r.prototype);return n._controller=e,r.apply(n,t),n},n.prototype.destroy=function(){var e=this;e._streamingController&&(e._streamingController.destroy(),e._streamingController=null),e._bufferMonitor.destroy(),e._bufferMonitor=null,e._commandManager.destroy(),e._commandManager=null,e._removeEventListeners(),e._processTimer.destroy(),e._processTimer=null,e._state=v.INITIAL},n.prototype.initialize=function(){var e=this;e._loadMetadata()},n.prototype.getSegInfo=function(){var e=this,t=null;return e._streamingController&&(t=e._streamingController.getSegInfo()),e._inWorkerScope&&e.sendEvent(i.SEG_INFO_METRICS_AVAILABLE,t),t},n.prototype.sendEvent=function(e,t){var r=this;r.publish(e,t);var n=r.create(E,{type:A.MessageTypes.EVENT,id:e,args:[t],argNames:["eventData"]});r._notifyClient(n)},n.prototype.sendMessage=function(e,t,r,n){var o=this,i=o.create(E,{type:A.MessageTypes.MESSAGE,id:e,args:t,argNames:r});o._notifyClient(i,n)},n.prototype.notifyError=function(e){var t=this;t.error=e,t.sendEvent(i.ERROR,"HlsError"===t.error.constructor.name?t.error.dto():t.error)},n.prototype._notifyClient=function(e,t){var r=this;e&&r._callback&&(e.addMedia(),r._callback(e,t))},n.prototype._addEventListeners=function(){var e=this;e._eventKeys[i.STREAM_UPDATED]=e.addEventListener(i.STREAM_UPDATED,e._onStreamUpdated,e),e._eventKeys[i.PRELOADED]=e.addEventListener(i.PRELOADED,e._onPreloaded,e)},n.prototype._removeEventListeners=function(){var e=this;e.removeEventListeners(e._eventKeys)},n.prototype._beforeStateChange=function(e){},n.prototype._setState=function(e,t){var r=this;r._beforeStateChange(e),r._state=e,r.sendEvent(i.STATE_CHANGED,e),r._afterStateChange(t)},n.prototype.getState=function(e,t){var r=this;return r._state},n.prototype._afterStateChange=function(e){var t=this;switch(t._state){case v.MEDIA_METADATA_LOADING:t._loadMedia();break;case v.MEDIA_METADATA_LOADED:t._setState(v.STREAM_METADATA_LOADING);break;case v.STREAM_METADATA_LOADING:t._streamLoader.loadCurrentStream();break;case v.STREAM_METADATA_LOADED:t._setState(v.MEDIA_LOADED);break;case v.SUBTITLE_METADATA_LOADING:t.model.streams.forEach(function(e){t._streamLoader.loadAssociatedSubtitleStream(e)}),t._setState(v.MEDIA_LOADED);break;case v.MEDIA_LOADED:if(!t._streamingController){var r=t.model.live?l:s;t._streamingController=t.create(r,t._commandManager),t.sendEvent(i.MEDIA_LOADED,t.model.getMediaDto())}!t.model.live&&t.model.bufferLength+t.model.pendingBufferLength<t.model.config.preloadBufferLimit&&t._setState(v.PRELOADING);break;case v.PRELOADING:t._streamingController&&t._streamingController.onPreloadBegin(),t._processTimer.start();break;case v.PLAY_REQUESTED:t._processTimer.start(),t._streamingController&&t._streamingController.onPlay(e),t._playStarted||(t._bufferMonitor.onPlayRequested(),t._playStarted=!0);break;case v.PLAYING:t._streamingController&&t._streamingController.onPlaying();break;case v.PLAY_COMPLETE:t._processTimer.stop(),t._streamingController&&t._streamingController.onComplete();break;case v.ERROR:t._processTimer.stop(),t._streamingController&&t._streamingController.onError(),t._commandManager.removeAllCommands(),t._bufferMonitor.onError();
}},n.prototype._loadMetadata=function(){var e=this,t=e.model.metadata;return e._state===v.INITIAL?t.type===p.STRUCTURED?(e.model.build(e._parser.parse(t)),void(t.hasStreamMetadata?t.hasSubtitleMetadata?e._setState(v.SUBTITLE_METADATA_LOADING):e._setState(v.MEDIA_LOADED):t.hasMediaMetadata&&e._setState(v.MEDIA_METADATA_LOADED))):void e._setState(v.MEDIA_METADATA_LOADING):void 0},n.prototype._process=function(){var e=this;e._state<v.MEDIA_LOADED||(e._bufferMonitor.checkBuffering(),e._streamingController&&e._streamingController.process())},n.prototype.onPlay=function(e){var t=this;t._state<v.MEDIA_LOADED||(t._state===v.PRELOADING&&t._streamingController.onPreloadEnd(),t._setState(v.PLAY_REQUESTED,e))},n.prototype.onPlaying=function(){var e=this;e._state<v.MEDIA_LOADED||(e._setState(v.PLAYING),e._bufferMonitor.onPlaying())},n.prototype.onPause=function(){var e=this;e._state<v.MEDIA_LOADED||(e._streamingController&&e._streamingController.onPause(),e._bufferMonitor.onPause(),e._setState(v.PAUSED))},n.prototype.onSeeking=function(e){var t=this;t._state<v.MEDIA_LOADED||(t._seeking=!0,t._streamingController&&t._streamingController.onSeeking(e),t._bufferMonitor.onSeeking())},n.prototype.onSeeked=function(e){var t=this;t._state<v.MEDIA_LOADED||(t._seeking=!1,t._streamingController&&t._streamingController.onSeeked(e),t._bufferMonitor.onSeeked())},n.prototype.onComplete=function(){var e=this;e._state<v.MEDIA_LOADED||e._setState(v.PLAY_COMPLETE)},n.prototype.onError=function(e){var t=this;t._setState(v.ERROR)},n.prototype.onTimeUpdate=function(e){var t=this;t._updateModel(e),t._bufferMonitor.onTimeUpdate(),t._streamingController&&t._streamingController.onTimeUpdate(t.model.currentTime)},n.prototype.onUpdate=function(e){var t=this;t._updateModel(e),t._bufferMonitor.onTimeUpdate()},n.prototype.onSynchComplete=function(e){var t=this;t._bufferMonitor.onVideoSync(e)},n.prototype.onSynchMetadataReady=function(e){var t=this;t._streamingController.onSynchMetadataReady(e)},n.prototype._updateModel=function(e){var t=this;e&&(t.model.currentTime=e.currentTime,t.model.bufferLength=e.bufferLength,t.model.pendingBufferLength=e.pendingBufferLength,t.model.bufferedRanges=e.bufferedRanges,t.model.dimensions=e.dimensions,t.model.pixelRatio=e.pixelRatio)},n.prototype._getStreamUrl=function(e){if(!e)return null;var t=e.streams;if(!t||!t.length)return e.url;if(e.url&&e.url.length)return e.url;if(t[0].url&&t[0].url.length)return t[0].url;var r=t[0].host;return t[0].path&&(r+=t[0].path),r},n.prototype._loadMedia=function(){var e=this;e._commandManager.executeCommand(u.CMD_MEDIA_LOAD,{url:e._getStreamUrl(e.model.metadata)},e)},n.prototype.onMediaLoadComplete=function(e,t){var r=this;if(e){if(!t)return void r._commandManager.removeCommand(e);var n={rawData:t,type:p.RAW,url:e.data?e.data.url:""};r.model.build(r._parser.parse(n)),r._commandManager.removeCommand(e),r._setState(v.MEDIA_METADATA_LOADED)}},n.prototype.onMediaLoadError=function(e,t){var r=this;e&&r._commandManager.removeCommand(e),t&&1===t.code&&(r._setState(v.ERROR),r.notifyError(new a.Error(a.ERR_PLAYLIST_LOAD)))},n.prototype._onStreamUpdated=function(e){var t=this;t._state<v.MEDIA_LOADED&&t._setState(v.STREAM_METADATA_LOADED)},n.prototype._onPreloaded=function(e){var t=this;t._streamingController.onPreloadEnd(),t._state===v.PRELOADING&&t._setState(v.MEDIA_LOADED),t._processTimer.reset()},n.prototype._stateToString=function(e){for(var t=Object.keys(v),r=0;r<t.length;r++)if(e===v[t[r]])return t[r]},n.prototype.preload=function(e){var t=this;e&&(t.model.config.preloadBufferLimit=e,t.model.bufferLength+t.model.pendingBufferLength<e&&t._state===v.MEDIA_LOADED&&t._setState(v.PRELOADING))},n.prototype.setABRMode=function(e){var t=this;t._state<v.MEDIA_LOADED||t._streamingController.setABRMode(e)},n.prototype.getMinimumBufferTime=function(){var e=this;return e._bufferMonitor.getMinimumBufferTime()},n.prototype.updateToWorkerStats=function(e){var t=this;t._workerStats.to+=Date.now()-e,t._workerStats.countTo++,t._workerStats.avgTo=t._workerStats.countTo?Math.floor(t._workerStats.to/t._workerStats.countTo):0}},{"../../../lib/event-bus":168,"../../../lib/hls-utils":169,"../../../lib/timer":174,"../../command/command":182,"../../command/command-manager":181,"../../error":199,"../../event":200,"../../helper/stream-loader":204,"../../model/worker-scope/model":211,"../../services/services":222,"../../worker-utils/message":226,"../../worker-utils/worker-defs":228,"../main/controller-states":191,"./buffer-monitor":194,"./live-streaming-controller":196,"./streaming-controller":197}],196:[function(e,t,r){"use strict";function n(e){var t=this;i.call(t,e),t._eventKeys={},t._eventKeys[s.MEDIA_LOADED]=t._controller.addEventListener(s.MEDIA_LOADED,t._onMediaLoaded,t),t._eventKeys[s.STREAM_UPDATED]=t._controller.addEventListener(s.STREAM_UPDATED,t._onStreamUpdated,t),t.DEFAULT_STREAM_UPDATE_INTERVAL=8e3,t.MAX_STREAM_UPDATE_INTERVAL=1e4,t.PAST_BUFFER_LENGTH_LIMIT=t._model.config.pastBufferLengthLimit.live,t.SEGMENT_OFFSET=2,t.LONG_PAUSE_INTERVAL=24e3,t._updateStreamTimer=new a(t.DEFAULT_STREAM_UPDATE_INTERVAL),t._updateStreamTimer.addEventListener(t._loadCurrentStream,t),t._endOfLive=!1,t._synchPosition=null,t._seeking=!1,t._timestampAtPause=null,t._pauseTimer=new a(t.LONG_PAUSE_INTERVAL,1),t._pauseTimer.addEventListener(t._onLongPauseInterval,t)}t.exports=n;var o=e("../../../lib/hls-utils"),i=e("./streaming-controller"),a=e("../../../lib/timer"),s=e("./../../event").HLSEvent,l=e("../../worker-utils/worker-defs");o.inherits(n,i),n.prototype.destroy=function(){var e=this;e._updateStreamTimer.destroy(),e._pauseTimer.destroy(),e._controller.removeEventListeners(e._eventKeys),i.prototype.destroy.call(e)},n.prototype.onPlay=function(){var e=this;e._scheduleStreamUpdate();var t=e._model.getCurrentLoadingStream(),r=t&&t.targetDuration?3*t.targetDuration*1e3:e.LONG_PAUSE_INTERVAL;(!e._timestampAtPause||Date.now()-e._timestampAtPause>r)&&(e._synch(),e.process(e._targetPosition),e._timestampAtPause=null),i.prototype.onPlay.call(e),e._pauseTimer.stop()},n.prototype.onPause=function(){var e=this;e._timestampAtPause=Date.now(),e._pauseTimer.start(),i.prototype.onPause.call(e)},n.prototype.onSeeking=function(e){var t=this;t._seeking=!0,t._lastAudioTimestamp=NaN},n.prototype.onSeeked=function(e){var t=this;t._seeking=!1},n.prototype.process=function(e){var t=this;if(e&&(t._targetPosition=e),t._shouldLoadSegment()){var r=t._getNextSeqNum(t._targetPosition),n=t._isSegmentAvailable(r);if("empty"===n||"ahead"===n)return void t._updateStream();if(t._switchManager.switchStream("load"),n=t._isSegmentAvailable(r),"empty"===n||"ahead"===n)return void t._updateStream();if("behind"===n)return void t._synch();t._initMp4State(),t._targetPosition=null,t._loadSegment(r)}},n.prototype._isSegmentAvailable=function(e){var t=this,r=t._model.getCurrentLoadingStream();if(r.isEmpty())return"empty";if(!r.contains(e)){if(e<r.startSeqNum)return"behind";if(e>r.endSeqNum)return"ahead"}return"available"},n.prototype._synch=function(){var e=this,t=e._model.getCurrentLoadingStream(),r=t.segments.length-1;e._targetPosition=t.segments[r-e.SEGMENT_OFFSET].startTime,e._synchPosition=e._targetPosition,e._lastAudioTimestamp=NaN,e._controller.sendEvent(s.LIVE_SYNCH,{synchPosition:e._synchPosition})},n.prototype._onLongPauseInterval=function(){},n.prototype._shouldLoadSegment=function(){var e=this,t=e._model.config.maxBuffer;return!e._endOfLive&&e._state!==e.STATES.LOADING&&!e._paused&&e._model.bufferLength+e._model.pendingBufferLength<t},n.prototype._updateStream=function(){var e=this;e._switchManager.switching&&(e._updateStreamTimer.reset(),e._loadCurrentStream())},n.prototype._getNextSeqNum=function(e){var t=this,r=t._model.getCurrentLoadingStream();if(isNaN(t._seqNum))return Math.max(r.endSeqNum-t.SEGMENT_OFFSET,r.startSeqNum);if(e){var n=r.getSeqNumBeforePosition(e+t._model.TIMESTAMP_COMPARE_EPSILON),o=t._model.bufferedRanges,i=o.length,a=t._getBufferedRangeIndex(n);return a>=0&&i&&i>a?(t._targetPosition=o.ranges[a].end,r.getSeqNumBeforePosition(t._targetPosition)):n}return t._state===t.STATES.ERROR?t._seqNum:t._seqNum+1},n.prototype._onStreamUpdated=function(e){var t=this;t._scheduleStreamUpdate()},n.prototype._onMediaLoaded=function(e){var t=this;t._scheduleStreamUpdate()},n.prototype._loadCurrentStream=function(){var e=this;e._streamLoader.loadCurrentStream()},n.prototype._scheduleStreamUpdate=function(){var e,t,r=this;return r._model.hasEndlist?void r._updateStreamTimer.destroy():(e=r._updateStreamTimer.startTime>0?Date.now()-r._updateStreamTimer.startTime:0,r._updateStreamTimer.reset(),t=r._model.getStreamRefreshInterval()||r.DEFAULT_STREAM_UPDATE_INTERVAL,t-=e,t=Math.max(t,100),t=Math.min(t,r.MAX_STREAM_UPDATE_INTERVAL),r._updateStreamTimer.delay=t,void r._updateStreamTimer.start())},n.prototype._switchStream=function(e,t){var r=this;r._synchPosition||i.prototype._switchStream.call(r,e,t)},n.prototype._handleSegmentEnd=function(){var e=this,t=e._model.getCurrentLoadingStream();t&&t.endSeqNum===e._seqNum&&e._model.hasEndlist&&e._setEndOfLive(!0)},n.prototype._setEndOfLive=function(e){var t=this;t._endOfLive=e,t._controller.sendMessage(l.MessageIds.END_OF_STREAM,[e],["endOfStream"])}},{"../../../lib/hls-utils":169,"../../../lib/timer":174,"../../worker-utils/worker-defs":228,"./../../event":200,"./streaming-controller":197}],197:[function(e,t,r){"use strict";function n(e){var t=this;t._model=t._controller.model,t._metrics=t._controller.services.segmentMetrics,t._services=t._controller.services,t._commandManager=e,t._switchManager=t._controller.create(d),t._switchManager.addEventListener(t._switchManager.SWITCH_BEGIN,t._onSwitchBegin,t),t._errorHandler=t._controller.create(l,e),t._errorHandler.addEventListener(t._errorHandler.SWITCH_ON_ERROR,t._onErrorSwitch,t),t._streamLoader=t._controller.create(s,e,t._errorHandler),t.AVG_BW_MEASUREMENT_INTERVAL=30,t._playedSinceLastBWMeasurement=0,t._lastPlayedTime=0,t.STATES={ERROR:-1,NONE:0,LOADING:1},t._state=t.STATES.NONE,t._processOnlyMetadata=!1,t._preloading=!1,t._seqNum=NaN,t._endOfVod=!1,t._targetPosition=null,t._paused=!1,t._lastAudioTimestamp=NaN,t._maxBuffer=t._model.config.maxBuffer,t._initMp4State(),t._loadMonitorTimer=new c(1e3*t._model.config.segmentLoadMonitorInterval),t._loadMonitorTimer.addEventListener(t._onLoadMonitor,t),t._qualityChange=!1}t.exports=n;var o=e("../../command/command").CmdNames,i=e("./../../event").HLSEvent,a=e("../../error"),s=e("../../helper/stream-loader"),l=e("../../helper/error-handler"),d=e("./switch-manager"),c=e("../../../lib/timer"),p=e("../../../lib/index"),u=e("../../worker-utils/worker-defs"),_=e("../../model/worker-scope/model").AbrModes;n.prototype.destroy=function(){var e=this;e._streamLoader.destroy(),e._errorHandler.destroy(),e._switchManager.destroy(),e._loadMonitorTimer.destroy(),e._initMp4State(),e._state=e.STATES.NONE},n.prototype.process=function(e){var t=this;if(e&&(t._targetPosition=e),t._shouldLoadSegment()){t._targetPosition=t._preProcess(t._targetPosition),t._switchManager.switchStream("load");var r=t._getNextSeqNum(t._targetPosition);if(t._initMp4State(),!t._isReady(r))return void t._updateStream();t._targetPosition=null,t._loadSegment(r)}},n.prototype.onPlay=function(e){var t=this;t._paused=!1,t._loadMonitorTimer.start(),t._maxBuffer=t._model.config.maxBuffer,e&&t.onSynchBegin()},n.prototype.onPlaying=function(){},n.prototype.onPause=function(){var e=this;e._paused=!0,e._loadMonitorTimer.stop()},n.prototype.onSeeking=function(e){var t=this;t._lastAudioTimestamp=NaN,t._closeLoadingSegments(),t._setEndOfVod(!1),t.process(e)},n.prototype.onSeeked=function(e){},n.prototype.onError=function(){},n.prototype.onTimeUpdate=function(e){var t=this;if(t._lastPlayedTime){var r=e-t._lastPlayedTime;r>0&&(t._playedSinceLastBWMeasurement+=r)}t._playedSinceLastBWMeasurement>t.AVG_BW_MEASUREMENT_INTERVAL&&(t._setAvgBWToLocalStorage(t._services.bandwidthEstimator.averageBandwidth),t._playedSinceLastBWMeasurement=0),t._lastPlayedTime=e,t._metrics.onTimeUpdate(e)},n.prototype.onComplete=function(){var e=this;e._metrics.onComplete()},n.prototype.onPreloadBegin=function(){var e=this;e._preloading=!0,e._maxBuffer=e._model.config.preloadBufferLimit},n.prototype.onPreloadEnd=function(){var e=this;e._preloading=!1},n.prototype.getSegInfo=function(){var e=this;return e._metrics.getMetrics()},n.prototype._preProcess=function(e){var t=this,r=t._getNextSeqNum(e),n=t._model.bufferedRanges.length,o=t._getBufferedRangeIndex(r);return o>=0&&n&&n>o?t._model.bufferedRanges.ranges[o].end:e},n.prototype._shouldLoadSegment=function(){var e=this,t=e._model.bufferLength+e._model.pendingBufferLength>=e._maxBuffer,r=e._model.config.maxTotalBuffer,n=e._model.config.stopBufferingOnPause;if(e._preloading&&t&&e._controller.sendEvent(i.PRELOADED),e._endOfVod||e._state===e.STATES.LOADING)return!1;if(e._paused&&n)return!1;var o=e._model.getTotalBufferLength()>=r;return!t&&!o},n.prototype._onLoadMonitor=function(){var e=this;if(e._state===e.STATES.LOADING){var t=e._commandManager.getCommand(o.CMD_SEGMENT_LOAD);t&&e._switchStream(t,t.position)}},n.prototype._onSwitchBegin=function(e){var t=this;t._initMp4State()},n.prototype._onErrorSwitch=function(e){var t=this;t._switchManager.switchStream("error",null,e)},n.prototype._isReady=function(e){var t=this,r=t._model.getCurrentLoadingStream();return!isNaN(e)&&r&&r.segments&&r.segments.length>0&&null!==r.getSegmentfromSeqNum(e)},n.prototype._updateStream=function(){var e=this;e._streamLoader.loadCurrentStream()},n.prototype._getNextSeqNum=function(e){var t=this,r=t._model.getCurrentLoadingStream();if(e)return Math.min(r.getSeqNumBeforePosition(e),r.endSeqNum);if(isNaN(t._seqNum))return Math.min(r.getSeqNumBeforePosition(0),r.endSeqNum);var n=t._state===t.STATES.ERROR?t._seqNum:t._seqNum+1;return Math.min(n,r.endSeqNum)},n.prototype._getBufferedRangeIndex=function(e){var t=this,r=t._model.getCurrentLoadingStream().getSegmentfromSeqNum(e);if(!r)return-1;for(var n=0;n<t._model.bufferedRanges.length;n++){var o=t._model.bufferedRanges.ranges[n],i=o.start-t._model.TIMESTAMP_COMPARE_EPSILON,a=o.end+t._model.TIMESTAMP_COMPARE_EPSILON;if(r.startTime>=i&&r.startTime+r.duration<=a)return n}return-1},n.prototype._loadSegment=function(e){var t=this;t._closeLoadingSegments(),t._state=t.STATES.LOADING,t._seqNum=e;var r=t._model.getSegment(t._model.currentLoadingStreamIndex,t._seqNum);if(r){var n={segment:r,state:{mp4:t._mp4State,lastAudioTimestamp:t._lastAudioTimestamp},onlyMetadata:t._processOnlyMetadata};t._commandManager.executeCommand(o.CMD_SEGMENT_LOAD,n,t);t._model.getCurrentLoadingStream();t._loadSubtitleSegment(r),t._loadMonitorTimer.reset(),t._paused||t._loadMonitorTimer.start()}},n.prototype.onSegmentLoadProgress=function(e,t,r){var n=this;if(t){var o,i,a;t.getParam&&(o=t.getParam("parsedInfo"),i=t.getParam("tracks"),a=t.getParam("perfInfo"));var s=o?o.position:t.position,l=o?o.inWorkerScope:!1;switch(o&&(p.isNumber(o.pcr)&&n._model.setPCR(o.pcr),p.isNumber(o.startOffsetTimestamp)&&n._model.setStartOffset(o.startOffsetTimestamp),p.isNumber(o.lastAudioTimestamp)&&(n._lastAudioTimestamp=o.lastAudioTimestamp)),n._setSegLoadMetrics(s,l,a),n._model.preloading=n._preloading,s){case"firstByte":return;case"start":n._switchManager.switchComplete();break;case"end":n._state=n.STATES.NONE}i&&(i.forEach(function(e){e.minBufferTime=n._controller.getMinimumBufferTime()}),n._sendToBuffer(i,r)),n._loadMonitorTimer.reset(),n._paused||n._loadMonitorTimer.start()}},n.prototype.onSegmentLoadComplete=function(e){var t=this;t._state=t.STATES.NONE,t._qualityChange&&(t._qualityChange=!1,t._controller.sendMessage(u.MessageIds.QUALITY_CHANGE_PLAY)),t._commandManager.removeCommand(e),t._errorHandler.onLoadComplete(),t._handleSegmentEnd(),t.process()},n.prototype.onSegmentLoadError=function(e,t){var r=this;if(t&&(t.code===a.ERR_PARTIAL_LOAD[0]||t.code===a.ERR_SEGMENT_PARSE[0]))return r._abortCurrentSegment(e),void r.process();r._state=r.STATES.ERROR,r._commandManager.removeCommand(e);var n=t.code===a.ERR_XHR_LOAD[0]?new a.Error(a.ERR_SEGMENT_LOAD):t;r._errorHandler.handle(n)},n.prototype._switchStream=function(e,t){var r=this;if("end"!==t){var n=r._switchManager.switchStream("mid-segment","down");n&&(r._state===r.STATES.LOADING&&r._abortCurrentSegment(e),r.process())}},n.prototype._abortCurrentSegment=function(e){var t=this;e&&t._commandManager.removeCommand(e),t._setSegLoadMetrics("end"),t._state=t.STATES.ERROR},n.prototype._loadSubtitleSegment=function(e){var t=this;if(e){var r=t._model.getCurrentLoadingStream();if(r&&r.subtitleStream){var n={subtitleStream:r.subtitleStream,seqNum:e.seqNum,programDateTime:e.programDateTime,live:t._model.live};t._commandManager.executeCommand(o.CMD_SUBTITLE_SEGMENT_LOAD,n,t)}}},n.prototype.onSubtitleSegmentLoadComplete=function(e,t){var r=this;t&&r._controller.sendEvent(i.VTT_SEGMENT_LOADED,t.data),r._commandManager.removeCommand(e)},n.prototype.onSubtitleSegmentLoadError=function(e,t){var r=this;r._commandManager.removeCommand(e)},n.prototype._closeLoadingSegments=function(){var e=this;e._state=e.STATES.NONE,e._commandManager.removeRelatedCommands(o.CMD_SEGMENT_LOAD)},n.prototype._sendToBuffer=function(e,t){var r=this;e&&(r._controller.sendMessage(u.MessageIds.APPEND_SRC_BUFFER,[e],["tracks"],t),e.forEach(function(e){r._mp4State[e.type].shouldInit=!1}))},n.prototype._initMp4State=function(){var e=this;e._mp4State={audio:{shouldInit:!0,seqNum:0},video:{shouldInit:!0,seqNum:0}}},n.prototype._setEndOfVod=function(e){var t=this;t._endOfVod=e,t._controller.sendMessage(u.MessageIds.END_OF_STREAM,[e],["endOfStream"])},n.prototype._setSegLoadMetrics=function(e,t,r){var n=this,o=n._model.getCurrentLoadingStream(),i=o?o.getSegmentfromSeqNum(n._seqNum):null,a={bitrateIndex:o?o.index:0,frameRate:o?o.frameRate:30};"firstByte"===e?(a.beginTime=i?i.startTime:NaN,a.switchReason="none",a.observedBitrate=n._services.bandwidthEstimator.averageBandwidth,a.timeToFirstByte=i?i.timeToFirstByte:NaN,a.endTime=i?i.startTime+i.duration:NaN,n._metrics.segmentLoadBegin(n._seqNum,a)):"end"===e&&(a.perfInfo=r,a.timeToDownload=i?i.totalDownloadTime:NaN,a.segmentInWorker=!!t,n._metrics.segmentLoadEnd(n._seqNum,a))},n.prototype._handleSegmentEnd=function(){var e=this,t=e._model.getCurrentLoadingStream();t&&t.endSeqNum===e._seqNum&&e._setEndOfVod(!0)},n.prototype._setAvgBWToLocalStorage=function(e){var t=this,r={avgBWtimestamp:Date.now(),avgBW:e};t._controller.sendMessage(u.MessageIds.SAVE_AVG_BANDWIDTH,[r],["avgBwInfo"])},n.prototype.setABRMode=function(e){var t=this;t._model.setABRMode(e)&&t._model.getABRMode()!==_.AUTO&&(t._setEndOfVod(!1),t._qualityChange=!0,t._controller.sendMessage(u.MessageIds.QUALITY_CHANGE_PAUSE))},n.prototype.onSynchBegin=function(){var e=this;e._model.live||(e._processOnlyMetadata=!0)},n.prototype.onSynchMetadataReady=function(e){var t=this;t._processOnlyMetadata=!1,t._closeLoadingSegments(),t._setEndOfVod(!1),t.process(e)}},{"../../../lib/index":170,"../../../lib/timer":174,"../../command/command":182,"../../error":199,"../../helper/error-handler":201,"../../helper/stream-loader":204,"../../model/worker-scope/model":211,"../../worker-utils/worker-defs":228,"./../../event":200,"./switch-manager":198}],198:[function(e,t,r){"use strict";function n(){var e=this;e._model=e._controller.model,e._abrController=e._controller.create(o),e._abrInputData={estimatedBandwidthInBps:0,bitrateList:[],currentIndex:0,bufferLength:0},e._eventKeys={},e._onMediaLoaded(),e.switching=!0,e.SWITCH_BEGIN="switchBegin",e.SWITCH_END="switchEnd",e._useAnalytics=e._model.config.sendAbrAnalytics,e._analytics=new d,a.call(e,e.constructor.name),e._eventKeys[l.MEDIA_LOADED]=e._controller.addEventListener(l.MEDIA_LOADED,e._onMediaLoaded,e)}t.exports=n;var o=e("./../../abr/abr-controller"),i=e("../../model/worker-scope/model").AbrModes,a=e("../../../lib/event-bus"),s=e("../../../lib/hls-utils"),l=e("./../../event").HLSEvent,d=e("../../model/worker-scope/abr-analytics"),c=e("../../abr/abr-rules").ResolutionRule;s.inherits(n,a),n.prototype.destroy=function(){var e=this;e._abrController.destroy(),e._controller.removeEventListeners(e._eventKeys),e._analytics.destroy(),a.prototype.destroy.call(e)},n.prototype.switchStream=function(e,t,r){var n=this;n._model.getABRMode()!==i.AUTO&&n._model.streams.forEach(function(e,t){n._model.getUserReqBitrate()===e.bitrate&&(r=t)});var o,a=n._model.currentLoadingStreamIndex,s=n._prepareAbrInput();return o="number"==typeof r?r:n._abrController.getNextStreamIndex(s),n._useAnalytics&&(n._analytics.nextIndex=o,n._analytics.scenario=e,n._updateAnalytics(s),"load"===e&&n._sendAnalyticsData()),0>o?!1:o===a?!1:t&&("up"===t&&a>o||"down"===t&&o>a)?!1:(n._model.setCurrentLoadingStream(o),n.switching=!0,n.publish(n.SWITCH_BEGIN,o),n._useAnalytics&&n._analytics.switchCount++,!0)},n.prototype.switchComplete=function(){var e=this;e.switching=!1,e.publish(e.SWITCH_END)},n.prototype._prepareAbrInput=function(){var e=this,t=e._abrInputData,r=e._controller.services.bandwidthEstimator,n=e._model.dimensions;return t.estimatedBandwidthInBps=1e3*r.averageBandwidth*1e3,t.currentIndex=e._model.currentLoadingStreamIndex,t.bufferLength=e._model.bufferLength,t.displayWidth=isNaN(n.width)?640:n.width,t.displayHeight=isNaN(n.height)?360:n.height,t.pixelRatio=e._model.pixelRatio,t.streams=e._model.streams,t},n.prototype._onMediaLoaded=function(){var e=this;e._model.streams&&(e._abrInputData.bitrateList=[],e._model.streams.forEach(function(t){e._abrInputData.bitrateList.push(t.bitrate)}))},n.prototype._updateAnalytics=function(e){var t=this,r=Date.now();t._analytics.pixelRatio=(new c).getPixelRatio(),t._analytics.baseTime||(t._analytics.baseTime=r),e&&(t._analytics.currentIndex=e.currentIndex,t._analytics.displayHeight=e.displayHeight,t._analytics.displayWidth=e.displayWidth,t._analytics.estimatedBandwidth=Math.floor(e.estimatedBandwidthInBps/1e3),t._analytics.bufferLength=e.bufferLength,t._analytics.time=r-t._analytics.baseTime);var n={};n.bl=t._model.bufferLength.toFixed(2),n.sc=t._analytics.scenario?t._analytics.scenario.charAt(0):"",n.dw=e?e.displayWidth:NaN,n.dh=e?e.displayHeight:NaN,n.eb=e?Math.floor(e.estimatedBandwidthInBps/1e3):NaN,n.ci=t._analytics.currentIndex,n.ni=t._analytics.nextIndex,n.pr=t._analytics.pixelRatio.toFixed(2),n.time=t._analytics.time,t._analytics.push(n)},n.prototype.addBufferingEntry=function(e,t,r){var n=this;if(e>=0){var o={bl:n._model.bufferLength.toFixed(2),sc:"b",mbt:e.toFixed(1),br:Math.floor(r),eb:Math.floor(t),ci:n._model.currentLoadingStreamIndex,time:n._analytics.baseTime?Date.now()-n._analytics.baseTime:0};n._analytics.push(o)}},n.prototype._sendAnalyticsData=function(){var e=this;e._controller.sendEvent(l.ABR_DATA_UPDATED,e._analytics.getDto()),e._analytics.reset()}},{"../../../lib/event-bus":168,"../../../lib/hls-utils":169,"../../abr/abr-rules":177,"../../model/worker-scope/abr-analytics":209,"../../model/worker-scope/model":211,"./../../abr/abr-controller":176,"./../../event":200}],199:[function(e,t,r){"use strict";function n(e,t){var r=this;r.code=e[0],r.message=e[1],r.type=e[2],t&&(r.message+=": "+t),r.error=new Error(r.message,r.code)}r.Error=n;var o={API:"api",NETWORK:"network",DECODE:"decode"},i={ERR_XHR_LOAD:[11,"Failed to load xhr request",o.NETWORK],ERR_PLAYLIST_LOAD:[12,"Failed to load Playlist",o.NETWORK],ERR_SUBS_LOAD:[13,"Failed to load Subtitle",o.NETWORK],ERR_SEGMENT_LOAD:[14,"Failed to load Segment",o.NETWORK],ERR_PARTIAL_LOAD:[15,"Loader failed to load complete data",o.NETWORK],ERR_MASTER_PLAYLIST_PARSE:[16,"Failed to parse Master Playlist",o.DECODE],ERR_MEDIA_PLAYLIST_PARSE:[17,"Failed to parse Media Playlist",o.DECODE],ERR_SEGMENT_PARSE:[18,"Failed to parse segment data",o.DECODE],ERR_API_NO_NODE:[19,"No video node is being set",o.API]};Object.keys(i).forEach(function(e){r[e]=i[e]}),n.prototype.dto=function(){var e=this,t={code:e.code,message:e.message,type:e.type};return t}},{}],200:[function(e,t,r){"use strict";r.HLSEvent={STATE_CHANGED:"stateChanged",PRELOADED:"preloaded",PRELOAD_PROGRESS:"preloadProgress",MEDIA_LOADED:"mediaLoaded",STREAM_UPDATED:"streamUpdated",SUBTITLE_STREAM_UPDATED:"subtitleStreamUpdated",INFO_UPDATE:"infoUpdate",SEGMENT_FIRST_BYTE_LOADED:"segmentFirstByteLoaded",SEGMENT_RENDERED:"segmentRendered",VTT_SEGMENT_LOADED:"vttSegmentLoaded",PCR_AVAILABLE:"pcrAvailable",STREAM_SWITCHED:"streamSwitched",LIVE_LOADING_LATE:"liveLoadingLate",LIVE_SYNCH:"liveSynch",WAITING:"hlsWaiting",CUEPOINT_DETECTED:"cuepointDetected",CUEPOINT_STARTED:"cuepointStarted",ABR_DATA_UPDATED:"abrDataUpdated",ERROR:"error",SEG_INFO_METRICS_AVAILABLE:"segInfoMetricsAvailable",CONTENT_LOAD_FINISHED:"contentLoadFinished"},r.ExternalEvents=[r.HLSEvent.MEDIA_LOADED,r.HLSEvent.INFO_UPDATE,r.HLSEvent.VTT_SEGMENT_LOADED,r.HLSEvent.SEGMENT_FIRST_BYTE_LOADED,r.HLSEvent.STREAM_SWITCHED,r.HLSEvent.LIVE_LOADING_LATE,r.HLSEvent.STREAM_UPDATED,r.HLSEvent.WAITING,r.HLSEvent.CUEPOINT_DETECTED,r.HLSEvent.CUEPOINT_STARTED,r.HLSEvent.SUBTITLE_STREAM_UPDATED,r.HLSEvent.ABR_DATA_UPDATED,r.HLSEvent.PRELOAD_PROGRESS,r.HLSEvent.SEG_INFO_METRICS_AVAILABLE,r.HLSEvent.CONTENT_LOAD_FINISHED]},{}],201:[function(e,t,r){"use strict";function n(e){var t=this;t._model=t._controller.model,t._commandManager=e,t.SWITCH_ON_ERROR="switchOnError",t._error=null,o.call(t,t.constructor.name)}t.exports=n;var o=e("../../lib/event-bus"),i=e("../../lib/hls-utils"),a=e("../command/command").CmdNames;i.inherits(n,o),n.prototype.destroy=function(){var e=this;e._model=null,e._commandManager=null,e._error=null},n.prototype.handle=function(e,t){var r=this;r._error=e;var n=r._commandManager.getCommand(a.CMD_ERROR_HANDLE);n?n.execute(t):r._commandManager.executeCommand(a.CMD_ERROR_HANDLE,{isMaster:t},r)},n.prototype.onErrorHandleProgress=function(e,t){var r=this;r.publish(r.SWITCH_ON_ERROR,t.index)},n.prototype.onErrorHandleError=function(e){var t=this;t._commandManager.removeCommand(e),t._controller.notifyError(t._error)},n.prototype.onLoadComplete=function(){var e=this,t=e._commandManager.getCommand(a.CMD_ERROR_HANDLE);e._commandManager.removeCommand(t)}},{"../../lib/event-bus":168,"../../lib/hls-utils":169,"../command/command":182}],202:[function(e,t,r){"use strict";function n(e,t){var r=this;if(r._model=r._controller.model,r._useWorker=r._model.config.useWorker,r._userAgent=r._model.userAgent,r._moduleName="HlsTransformer",r._instanceId=a.guid(),r._properties=e,r._callback=t,r.MIN_BUFFER_LENGTH=5,r._shouldUseWorker()){if(r._worker=r._controller.services.getWorker(r._moduleName),r._worker)return r._worker.addEventListener("message",r._onMessage.bind(r)),void r._sendMessage(i.MessageIds.CREATE,[e]);r._model.config.useWorker=!1}r._transformer=new o(e,t),r._useWorker=!1}t.exports=n;var o=e("./hls-transformer"),i=e("../worker-utils/worker-defs"),a=e("../../lib/hls-utils"),s=e("../controller/main/controller-states"),l=e("../worker-utils/message");n.prototype.destroy=function(){var e=this;e._useWorker&&e._worker?e._sendMessage(i.MessageIds.DESTROY):e._transformer.destroy()},n.prototype.close=function(){var e=this;e._useWorker&&e._worker?e._sendMessage(i.MessageIds.CALL_METHOD,null,"close"):e._transformer.close()},n.prototype.append=function(e){var t=this;t._useWorker&&t._worker?t._sendMessage(i.MessageIds.CALL_METHOD,[e],"append",[e.buffer]):t._transformer.append(e)},n.prototype.endOfSegment=function(){var e=this;e._useWorker&&e._worker?e._sendMessage(i.MessageIds.CALL_METHOD,null,"endOfSegment"):e._transformer.endOfSegment()},n.prototype._onMessage=function(e){var t=this;if(e){var r=e.data?new l(e.data):e;if(r&&r.instanceId===t._instanceId&&r.id===i.MessageIds.APPEND_SRC_BUFFER){var n=r.getParam("parsedInfo");n&&(n.inWorkerScope=!0),t._callback(r)}}},n.prototype._shouldUseWorker=function(){var e=this;return e._useWorker?(e._userAgent.chrome?e._useWorker=e._controller&&e._controller.getState()>=s.PLAY_REQUESTED?e._model.bufferLength>e.MIN_BUFFER_LENGTH:!0:e._useWorker=!1,e._useWorker):!1},n.prototype._sendMessage=function(e,t,r,n){var o=this;if(o._worker&&e){var a={type:i.MessageTypes.MESSAGE,id:e,moduleName:o._moduleName,instanceId:o._instanceId,funcName:r,args:t,timestamp:Date.now()};o._worker.postMessage(a,n)}}},{"../../lib/hls-utils":169,"../controller/main/controller-states":191,"../worker-utils/message":226,"../worker-utils/worker-defs":228,"./hls-transformer":203}],203:[function(e,t,r){"use strict";function n(e,t){var r=this;r._properties=e,r._callback=t,r._tsDemux=new o(e.demux,r._processSegmentData.bind(r)),r._mp4Generator=new i,r.DEFAULT_WIDTH=640,r.DEFAULT_HEIGHT=360,r._startOffsetTimestamp=r._properties.startOffsetTimestamp,r._lastAudioTimestamp=r._properties.lastAudioTimestamp}t.exports=n;var o=e("../ts-demux/ts-parser"),i=e("../mp4/mp4-generator"),a=e("../../lib"),s=e("../worker-utils/worker-defs"),l=e("../worker-utils/message");n.prototype.destroy=function(){var e=this;e._tsDemux.destroy(),e._mp4Generator.destroy()},n.prototype.close=function(){var e=this;e._tsDemux.destroy()},n.prototype.append=function(e){var t=this;t._tsDemux.append(e)},n.prototype.endOfSegment=function(){var e=this;e._tsDemux.endOfSegment()},n.prototype._processSegmentData=function(e){var t=this;if(e&&!e.error){var r=e.avData,n=e.pos;if(r){t._properties.pcr||(t._properties.pcr=r.pcr-t._properties.startTime*t._properties.timescale);var o=[],i=r.audio,a=r.video,d="Position = "+n,c=t._properties.pcr,p=null;i&&i.frames&&i.frames.length&&(i.type="audio",i.config.timescale=t._properties.timescale,i.config.duration=t._properties.duration*i.config.timescale,i.config.useEditBox=t._properties.useEditBox,i.frames.forEach(function(e){e.dts-=c,e.pts-=c}),i.startTime=i.frames[0].dts,i.endTime=i.frames[i.frames.length-1].dts,d=d+" audio frames = "+i.frames.length+" audio time = "+(i.endTime-i.startTime),o.push(i)),a&&a.frames&&a.frames.length&&(a.type="video",a.config.timescale=t._properties.timescale,a.config.duration=t._properties.duration*a.config.timescale,a.config.width=t._properties.width||t.DEFAULT_WIDTH,a.config.height=t._properties.height||t.DEFAULT_HEIGHT,a.config.useEditBox=t._properties.useEditBox,a.frames.forEach(function(e){e.dts-=c,e.pts-=c}),a.startTime=a.frames[0].dts,a.endTime=a.frames[a.frames.length-1].dts,p=a.frames[0].pts,d=d+" video frames = "+a.frames.length+" video time = "+(a.endTime-a.startTime),o.push(a));var u=new l({type:s.MessageTypes.MESSAGE,id:s.MessageIds.APPEND_SRC_BUFFER}),_={};_.position=t.position=n,_.pcr=c,"number"!=typeof t._startOffsetTimestamp&&"number"==typeof p&&(t._startOffsetTimestamp=p),_.startOffsetTimestamp=t._startOffsetTimestamp;var m=t._convertToMp4(o);_.lastAudioTimestamp=t._lastAudioTimestamp,u.putParam("parsedInfo",_);var v=[];m&&m.tracks&&(u.putParam("tracks",m.tracks),m.tracks.forEach(function(e){v.push(e.data.buffer)})),t._callback&&t._callback(u,v)}}},n.prototype._convertToMp4=function(e){var t=this;if(e&&e.length){var r={tracks:[]};return e.forEach(function(e){if(e){e.config.offset=t._properties.live?0:t._startOffsetTimestamp,e.config.shouldInit=t._properties.mp4State[e.type].shouldInit,e.config.seqNum=t._properties.mp4State[e.type].seqNum++,"video"===e.type?e.config.defaultFrameDuration=t._properties.timescale/t._properties.frameRate:"audio"===e.type&&(e.config.defaultFrameDuration=1024*t._properties.timescale/e.config.samplingFreq,t._closeGapsInBuffer(e.frames,e.config.defaultFrameDuration)),t._properties.mp4State[e.type].shouldInit=!1,t._properties.onlyMetadata&&(e.frames=[]);var n=t._mp4Generator.generate(e);n.onlyMetadata=t._properties.onlyMetadata,r.tracks.push(n)}}),r}},n.prototype._closeGapsInBuffer=function(e,t){var r=this;if(e&&e.length){var n=e[e.length-1].dts,o=e[0].dts;if(a.isNumber(r._lastAudioTimestamp)&&!isNaN(r._lastAudioTimestamp)){var i=o-r._lastAudioTimestamp,s=Math.ceil(2*t),l=Math.ceil(4*t);if(i>s&&l>i)for(var d=Math.floor(i/t)-1,c=0;d>c;c++){var p=e[0].dts;e.unshift(a.deepCopy(e[0])),e[0].dts=p-t,e[0].pts=e[0].dts}}r._lastAudioTimestamp=n}}},{"../../lib":170,"../mp4/mp4-generator":217,"../ts-demux/ts-parser":225,"../worker-utils/message":226,
"../worker-utils/worker-defs":228}],204:[function(e,t,r){"use strict";function n(e,t){var r=this;r._model=r._controller.model,r._commandManager=e,r._parser=r._controller.services.metadataParser,r._errorHandler=t}t.exports=n;var o=e("../command/command").CmdNames,i=e("./../model/worker-scope/model").MetadataTypes,a=e("../error"),s=e("./../event").HLSEvent;n.prototype.destroy=function(){},n.prototype.loadCurrentStream=function(){var e=this,t=e._model.getCurrentLoadingStream();e._commandManager.executeCommand(o.CMD_STREAM_LOAD,{streamUrl:t.url,index:t.index},e),e.loadAssociatedSubtitleStream(t)},n.prototype.loadAssociatedSubtitleStream=function(e){var t=this;e.subtitleStream=t._model.getAssociatedSubtitleStream(e),e.subtitleStream&&t._commandManager.executeCommand(o.CMD_SUBTITLE_STREAM_LOAD,{streamUrl:e.subtitleStream.url},t)},n.prototype.onStreamLoadComplete=function(e,t){var r=this;if(e){if(!t)return void r._commandManager.removeCommand(e);var n={rawData:t.data,type:i.RAW,url:t.streamUrl,index:t.streamIndex};r._model.build(r._parser.parse(n)),r._commandManager.removeCommand(e),r._controller.sendEvent(s.STREAM_UPDATED,n.index),r._errorHandler&&r._errorHandler.onLoadComplete()}},n.prototype.onStreamLoadError=function(e,t){var r=this;r._commandManager.removeCommand(e);var n=t.code===a.ERR_XHR_LOAD[0]?new a.Error(a.ERR_PLAYLIST_LOAD):t;r._errorHandler?r._errorHandler.handle(n,!0):r._controller.notifyError(n)},n.prototype.onSubtitleStreamLoadComplete=function(e,t){var r=this;if(e){if(!t)return void r._commandManager.removeCommand(e);var n={rawData:t.data,type:i.RAW_SUBTITLE,url:t.streamUrl};r._model.build(r._parser.parse(n)),r._controller.sendEvent(s.SUBTITLE_STREAM_UPDATED),r._commandManager.removeCommand(e)}},n.prototype.onSubtitleStreamLoadError=function(e,t){1===t.code}},{"../command/command":182,"../error":199,"./../event":200,"./../model/worker-scope/model":211}],205:[function(e,t,r){"use strict";function n(e,t,r,n){var a=this;i.call(a,a.constructor.name),a.node=t,a.window=e,a.mediaSource=new e.MediaSource,a.node.src=e.URL.createObjectURL(a.mediaSource),n=n||{},n.userAgent=l,n.inWorkerScope=!1,a.appModel=a.create(d,n);var s={userAgent:l,metadata:r,config:n};a.controller=a.create(o,s),a.node.load()}t.exports=n;var o=e("./controller/main/controller-facade"),i=e("../lib/event-bus"),a=e("./event"),s=e("../lib/hls-utils"),l=e("../lib/user-agent"),d=e("./model/main/app-model");s.inherits(n,i),n.prototype.create=function(){var e=this,t=Array.prototype.slice.call(arguments),r=t.shift(),n=Object.create(r.prototype);return n._context=e,r.apply(n,t),n},n.prototype.sendEvent=function(e,t){var r=this;r.publish(e,t),e&&a.ExternalEvents.indexOf(e)>=0&&r.node.dispatchEvent(r._createCustomEvent(e,t))},n.prototype.getSegInfo=function(){var e=this;return e.controller.getSegInfo()},n.prototype.notifyError=function(e){var t=this;t.error=e;var r=t.error.type||"decode";"open"===t.mediaSource.readyState&&t.mediaSource.endOfStream(r),t.controller.destroy()},n.prototype._createCustomEvent=function(e,t){var r=this;return new r.window.CustomEvent(e,{detail:t,bubbles:!1,cancelable:!1})},n.prototype.setABRMode=function(e){var t=this;t.controller.setABRMode(e)},n.prototype.play=function(e){var t=this;t.controller.play(e)},n.prototype.preload=function(e){var t=this;t.controller.preload(e)},n.prototype.destroy=function(){var e=this;e.controller.destroy(),e.appModel.destroy(),e.mediaSource=null,i.prototype.destroy.call(e)}},{"../lib/event-bus":168,"../lib/hls-utils":169,"../lib/user-agent":175,"./controller/main/controller-facade":190,"./event":200,"./model/main/app-model":208}],206:[function(e,t,r){"use strict";function n(e,t){var r=this;r._opts=t||{},"string"==typeof e?r._node=document.querySelector(e):r._node=e||null,Object.defineProperty(r,"error",{enumerable:!0,get:function(){return r._context?r._context.error:null}}),a.apply()}t.exports=n;var o=e("./hls-context"),i=e("./error"),a=e("../lib/polyfills");n.prototype.setSrc=function(e){var t=this;if(!t._node)throw new i.Error(i.ERR_API_NO_NODE).error;if(!e)return void(t._node.src="");if(e!==t._metadata){t._metadata=e,t._context&&t.unload();try{t._context=new o(window,t._node,t._metadata,t._opts)}catch(r){console.error("[HlsPlayer][setSrc] Exception = "+r.message+" stack = "+r.stack)}}},n.prototype.getSegInfo=function(){var e=this;try{return e._context?e._context.getSegInfo():null}catch(t){return console.error("[HlsPlayer][getSegInfo] Exception = "+t.message+" stack = "+t.stack),null}},n.prototype.setQuality=function(e){var t=this;try{t._context.setABRMode(e)}catch(r){console.error("[HlsPlayer][setQuality] Exception = "+r.message+" stack = "+r.stack)}},n.prototype.unload=function(){var e=this;e._context&&e._context.destroy(),e._context=null},n.prototype.play=function(e){var t=this;t._context&&t._context.play(e)},n.prototype.preload=function(e){var t=this;t._context&&t._context.preload(e)},n.prototype.destroy=function(){var e=this;e._context&&e._context.destroy(),e._context=null,e._metadata=null,e._opts=null,e._node=null}},{"../lib/polyfills":173,"./error":199,"./hls-context":205}],207:[function(e,t,r){"use strict";t.exports={debug:!1,useWorker:!0,maxRetries:5,maxBuffer:60,maxTotalBuffer:300,requestTimeout:10,chunkedRequestTimeout:5,pastBufferLengthLimit:{vod:180,live:10},segmentLoadMonitorInterval:1,preloadBufferLimit:0,variableMinBuffer:!0,minBufferTime:{vod:.1,live:4},sendAbrAnalytics:!1,demux:{startChunkWithKeyFrame:!0},stopBufferingOnPause:!1}},{}],208:[function(e,t,r){"use strict";function n(e){var t=this;t.configure(e),t.streams=[],t.subtitleStreams=[],t.live=!1,t.duration=0,t.lastSegmentSeqNum=Number.NaN,t.timescale=9e4,t.TIMESTAMP_COMPARE_EPSILON=.065,t.currentPlayingStreamIndex=0,t.currentLoadingStreamIndex=0,t.preloading=!1,t.currentKbps=0,t.infoUpdateSent=!0,t.setDimensions()}t.exports=n;var o=e("../default-config"),i=e("../../../lib/index");n.prototype.destroy=function(){var e=this;e.config=null,e.streams=[],e.subtitleStreams=[]},n.prototype.configure=function(e){var t=this;if(t.config=t.config||i.deepCopy(o),e&&(Object.keys(e).forEach(function(r){t.config.hasOwnProperty(r)&&(t.config[r]=e[r])}),t.userAgent=e.userAgent),!t.userAgent)throw new Error("Invalid/incomplete configuration");t.config.demux.startChunkWithKeyFrame=!(t.userAgent.chrome&&t.userAgent.chrome>=50),t.config.demux.useTimer=!(t.userAgent.chrome||t.userAgent.ie||t.userAgent.edge)},n.prototype.update=function(e){var t=this;e&&(Object.keys(e).forEach(function(r){("currentKbps"!==r||e.currentKbps||t.infoUpdateSent)&&t.hasOwnProperty(r)&&(t[r]=e[r])}),t.infoUpdateSent=!1)},n.prototype.setDimensions=function(){var e=this,t=e._context.node;e._dimensions={width:t?t.clientWidth:0,height:t?t.clientHeight:0}},n.prototype.getBufferLength=function(){var e,t,r=this,n=r._context.node,o=n.buffered,i=0,a=n.currentTime;if(0===a){for(e=0;e<o.length;e++)i+=o.end(e)-o.start(e);return i}for(e=0;e<o.length;e++)if(a>=o.start(e)&&a<o.end(e)){t=e;break}return t>=0&&o.length&&(i=o.end(t)-a),i},n.prototype.getBufferedDto=function(){for(var e=this,t=e._context.node,r=t.buffered,n={length:r.length,ranges:[]},o=0;o<r.length;o++)n.ranges[o]={start:r.start(o),end:r.end(o)};return n},n.prototype.getCurrentPlayingStream=function(){var e=this;return e.streams&&e.streams.length&&e.currentPlayingStreamIndex>=0&&e.currentPlayingStreamIndex<e.streams.length?e.streams[e.currentPlayingStreamIndex]:null},n.prototype.getDimensions=function(){var e=this;return e._dimensions},n.prototype.getPixelRatio=function(){var e=1;try{window&&(e=window.devicePixelRatio)}catch(t){e=1}return e||(e=1),e}},{"../../../lib/index":170,"../default-config":207}],209:[function(e,t,r){"use strict";function n(){var e=this;e.reset(),e.switchCount=0}t.exports=n,n.prototype.destroy=function(){var e=this;e._list=[]},n.prototype.reset=function(){var e=this;e.scenario="",e.estimatedBandwidth=NaN,e.currentIndex=NaN,e.displayWidth=NaN,e.displayHeight=NaN,e.pixelRatio=1,e.bufferLength=0,e.nextIndex=NaN,e.reason="",e._list=[],e.time=NaN},n.prototype.push=function(e){var t=this;e&&t._list.push(e)},n.prototype.getDto=function(){var e=this,t={};return t.sc=e.scenario.charAt(0),t.ci=e.currentIndex,t.dw=e.displayWidth,t.dh=e.displayHeight,t.pr=e.pixelRatio.toFixed(2),t.eb=e.estimatedBandwidth.toFixed(3),t.bl=e.bufferLength.toFixed(2),t.swc=e.switchCount,t.ted=e._list.slice(),t.ni=e.nextIndex,t.rs=e.reason,t.time=e.time,t}},{}],210:[function(e,t,r){"use strict";function n(e){var t=this;e&&(t.startSeqNum=e.startSeqNum,t.startTime=e.startTime,t.cuepointDuration=e.cuepointDuration,t.isCueOutFired=!1,t.isCueOutDetectedFired=!1)}t.exports=n,n.prototype.setCueOutFiredState=function(e){var t=this;t.isCueOutFired=e},n.prototype.setCueOutDetectedState=function(e){var t=this;t.isCueOutDetectedFired=e},n.prototype.setCueOutStartTime=function(e){var t=this;t.startTime=e},n.prototype.dto=function(){var e=this,t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}},{}],211:[function(e,t,r){"use strict";function n(e,t){var r=this;r.configure(t),r._setMetadata(e),r.streams=[],r.subtitleStreams=[],r.live=t.live,r.hasEndlist=!1,r.duration=0,r.bufferLength=0,r.pendingBufferLength=0,r.bufferedRanges={length:0,ranges:[]},r.currentTime=0,r.lastSegmentSeqNum=Number.NaN,r.timescale=9e4,r.TIMESTAMP_COMPARE_EPSILON=.065,r.preloading=!1,r.dimensions={width:NaN,height:NaN},r.pixelRatio=1,r._abrMode=o.AUTO,r._userReqBitrate=0,r._segTimeMap={}}r.Model=n,r.MetadataTypes={RAW:"raw",RAW_SUBTITLE:"rawSubtitle",STRUCTURED:"structured"};var o=r.AbrModes={AUTO:"auto",LOW:"low",MID:"medium",HIGH:"high"},i=e("./stream"),a=e("./subtitle-stream"),s=e("../../event").HLSEvent,l=e("./../default-config"),d=e("../../../lib/index");n.prototype.destroy=function(){var e=this;e.config=null,e.streams=[],e.subtitleStreams=[],e._segTimeMap={}},n.prototype.configure=function(e){var t=this;t.config=t.config||d.deepCopy(l),e&&(Object.keys(e).forEach(function(r){t.config.hasOwnProperty(r)&&(t.config[r]=e[r])}),t.userAgent=e.userAgent,t.inWorkerScope=e.inWorkerScope,t.seedBandwidth=e.seedBandwidth),t.userAgent&&(t.config.demux.startChunkWithKeyFrame=!(t.userAgent.chrome&&t.userAgent.chrome>=50))},n.prototype.build=function(e){var t=this;if(e){if(e.streamInfoList&&e.streamInfoList.length){var r=e.streamInfoList;t.userAgent.firefox&&e.streamInfoList[0].channels&&(r=t._filterMonoChannelStreams(e.streamInfoList)),r.forEach(function(e){e.sessionId=t.sessionId,t._setLiveConfig(e),t.streams.length&&e.index>=0&&e.index<t.streams.length&&e.url===t.streams[e.index].url?t.updateStream(e.index,e):t.addStream(e)}),t._sortStreams(),t.duration=t.live?NaN:r[0].duration}e.subtitleStreamInfoList&&e.subtitleStreamInfoList.length&&e.subtitleStreamInfoList.forEach(function(e){for(var r=!1,n=0;n<t.subtitleStreams.length;n++)if(t.subtitleStreams[n].url===e.url){t.subtitleStreams[n].updateConfig(e),r=!0;break}r||t.subtitleStreams.push(t._controller.create(a,e))})}},n.prototype._filterMonoChannelStreams=function(e){for(var t=!1,r=e[0].channels,n=1;n<e.length;n++)if(e[n].channels&&r!==e[n].channels){t=!0;break}return t?e.filter(function(e){return 1!==e.channels}):e},n.prototype.addStream=function(e){var t=this,r=t._controller.create(i,e);t.streams.push(r),r.setStreamIndex(t.streams.length-1),1===t.streams.length&&t.setCurrentLoadingStream(r.index),t.streams.length&&(t.lastSegmentSeqNum=t.streams[0].endSeqNum)},n.prototype.updateStream=function(e,t){var r=this;if(!(e>=r.streams.length)){var n=r.streams[e];t.hasEndList===!0&&(r.hasEndlist=!0),r.live&&r._convertSegmentStartTime(t),n.updateConfig(t),r.live&&r.lastSegmentSeqNum>=n.endSeqNum&&(n.refreshInterval=500*n.targetDuration),r.lastSegmentSeqNum=n.endSeqNum}},n.prototype.getCurrentLoadingStream=function(){var e=this;return e.streams&&e.streams.length&&e.currentLoadingStreamIndex>=0&&e.currentLoadingStreamIndex<e.streams.length?e.streams[e.currentLoadingStreamIndex]:null},n.prototype.setCurrentLoadingStream=function(e){var t=this;t.streams&&t.streams.length&&(0>e||e>=t.streams.length||(t.currentLoadingStreamIndex=e))},n.prototype.getCurrentPlayingStream=function(){var e=this;return e.streams&&e.streams.length&&e.currentPlayingStreamIndex>=0&&e.currentPlayingStreamIndex<e.streams.length?e.streams[e.currentPlayingStreamIndex]:null},n.prototype.setCurrentPlayingStream=function(e){var t=this;t.streams&&t.streams.length&&(0>e||e>=t.streams.length||(t.currentPlayingStreamIndex=e))},n.prototype.getTotalBufferLength=function(){for(var e=this,t=e.bufferedRanges,r=0,n=0;n<t.length;n++)r+=t.ranges[n].end-t.ranges[n].start;return r},n.prototype.setPCR=function(e){var t=this;(!t._pcr||isNaN(t._pcr))&&(t._pcr=e,t._controller.sendEvent(s.PCR_AVAILABLE,e))},n.prototype.getPCR=function(){var e=this;return e._pcr},n.prototype.setStartOffset=function(e){var t=this;(!t.startOffsetTimestamp||isNaN(t.startOffsetTimestamp))&&(t.startOffsetTimestamp=e)},n.prototype.getAssociatedSubtitleStream=function(e){var t=this;if(!(e&&e.subtitlesGroupId&&t.subtitleStreams&&t.subtitleStreams.length))return null;var r=t.subtitleStreams.filter(function(t){return t&&t.groupId===e.subtitlesGroupId});if(!r||!r.length)return null;for(var n=0;n<r.length;n++)if(r[n].defaultValue)return r[n];return null},n.prototype.getStreamRefreshInterval=function(){var e=this,t=e.getCurrentLoadingStream();return t?t.refreshInterval:null},n.prototype._setMetadata=function(e){var t=this;if(e){t.sessionId=e?e.sessionId:null,e.type=r.MetadataTypes.RAW,t.metadata=e;var n=e.streams,o=e.subtitleStreams;n&&n.length>0&&((n[0].hls_info||n[0].hlsInfo||n.length>1)&&(t.metadata.type=r.MetadataTypes.STRUCTURED,t.metadata.hasMediaMetadata=!0),(n[0].hls_info||n[0].hlsInfo)&&(t.metadata.hasStreamMetadata=!0,o&&o.length&&o[0].url.indexOf(".m3u8")>=0&&(t.metadata.hasSubtitleMetadata=!0)))}},n.prototype._sortStreams=function(){var e=this;e.streams.sort(function(e,t){return e.bitrate-t.bitrate}),e.streams.forEach(function(e,t){e.index=t;var r=e.segments;r.forEach(function(e){e.setStreamIndex(t)})})},n.prototype.getSegment=function(e,t){var r=this;return 0>e||e>=r.streams.length?null:r.streams[e].getSegmentfromSeqNum(t)},n.prototype._convertSegmentStartTime=function(e){var t=this;if(e){var r=e.segmentInfoList;if(r&&r.length){Object.keys(t._segTimeMap).length||(t._segTimeMap[r[0].sequenceNum]={startTime:r[0].startTime,programDateTime:r[0].programDateTime});var n,o,i,a,s=t._segTimeMap[r[0].sequenceNum];if(s&&"number"==typeof s.startTime)n=t._segTimeMap[r[0].sequenceNum].startTime;else{var l=Object.keys(t._segTimeMap),d=parseInt(l[l.length-1]);r[r.length-1].sequenceNum<d;var c=0;for(o=1;o<r.length;o++)if(-1!==l.indexOf(r[o].sequenceNum.toString())){c=o;break}if(c)for(n=t._segTimeMap[r[c].sequenceNum].startTime,o=c-1;o>=0;o--)n-=r[o].duration;else{if(r[0].sequenceNum>d)i=parseInt(l[l.length-1]),a=t._segTimeMap[i];else for(o=r[r.length-1].sequenceNum;d>=o;){if(-1!==l.indexOf(o.toString())){i=o,a=t._segTimeMap[i];break}o++}n="number"==typeof a.programDateTime?a.startTime+(r[0].programDateTime-a.programDateTime)/1e3:a.startTime+(r[0].sequenceNum-i)*r[0].duration}}var p=0;r.forEach(function(e){e.startTime=n+p,p+=e.duration,t._segTimeMap[e.sequenceNum]||(t._segTimeMap[e.sequenceNum]={startTime:e.startTime,programDateTime:e.programDateTime})})}}},n.prototype._getFallbackStreams=function(e){var t=this,r=[];return t.streams.forEach(function(t){t.index!==e&&r.push({index:t.index,url:t.url})}),r},n.prototype.selectFallbackStream=function(e){var t=this;return e.length>0?(t.setCurrentLoadingStream(e[0].index),0):void 0},n.prototype.setABRMode=function(e){var t=this,r=t._abrMode;return t._abrMode=o.AUTO,Object.keys(o).forEach(function(r){o[r]===e.preference&&(t._abrMode=e.preference)}),t._userReqBitrate=1e3*e.stream.bitrate,r!==t._abrMode},n.prototype.getABRMode=function(){var e=this;return e._abrMode},n.prototype.getMediaDto=function(){var e=this,t={streams:[],subtitleStreams:[],live:e.live,duration:e.duration,currentPlayingStreamIndex:e.currentPlayingStreamIndex,currentLoadingStreamIndex:e.currentLoadingStreamIndex,preloading:e.preloading,currentKbps:e._controller.services.segmentMetrics.getMetricsBandwidthInfo()};return e.streams.forEach(function(e){t.streams.push(e.dto())}),t},n.prototype.getUserReqBitrate=function(){var e=this;return e._userReqBitrate},n.prototype._setLiveConfig=function(e){var t=this;e&&e.segmentInfoList&&!d.isNullOrUndefined(e.hasEndList)&&d.isNullOrUndefined(t.live)&&(t.live=!e.hasEndList)}},{"../../../lib/index":170,"../../event":200,"./../default-config":207,"./stream":213,"./subtitle-stream":214}],212:[function(e,t,r){"use strict";function n(e){var t=this;e&&(t.duration=e.duration,t.url=e.url,t.seqNum=e.sequenceNum,t.startTime=e.startTime,t.continuity=e.discontinuityCounter,t.programDateTime=e.programDateTime,t.streamIndex=e.levelIndex,t.bitrate=e.bitrate,t.sessionId=e.sessionId,t.cdn=e.cdn,t._segmentIndex=t.streamIndex+"_"+t.seqNum),t.totalDownloadTime=0,t.timeToFirstByte=0,t._clockReference=0}t.exports=n,n.prototype.setStreamIndex=function(e){var t=this;t.streamIndex=e,t._segmentIndex=t.streamIndex+"_"+t.seqNum},n.prototype.dto=function(){var e=this,t={};return Object.keys(e).forEach(function(r){"_"!==r[0]&&(t[r]=e[r])}),t}},{}],213:[function(e,t,r){"use strict";function n(e){var t=this;t.segments=[],t.cuepoints=[],e&&t.updateConfig(e)}t.exports=n;var o=e("./segment"),i=e("./cuepoint");n.prototype.updateConfig=function(e){var t=this;if(e&&(t.bitrate=e.bitrate||t.bitrate,t.width=e.width||t.width,t.height=e.height||t.height,t.url=e.url||t.url,t.index=e.index||t.index,t.hlsInfo=e.hlsInfo||t.hlsInfo,t.audioStreamId=e.audioStreamId||t.audioStreamId,t.subtitlesGroupId=e.subtitlesGroupId||t.subtitlesGroupId,t.targetDuration=e.targetDuration||NaN,t.refreshInterval=1e3*t.targetDuration,t.sessionId=e.sessionId||null,t.cdn=e.cdn||t.cdn,void 0!==e.hasEndList&&null!==e.hasEndList&&(t.hasEndList=e.hasEndList),void 0!==e.audio&&null!==e.audio&&(t.audio=e.audio)),t.url&&t.url.length&&t.url.indexOf("_60fps")>=0?t.frameRate=60:t.frameRate=30,e&&e.segmentInfoList){var r=[];e.segmentInfoList.forEach(function(e){e.levelIndex=t.index,e.bitrate=t.bitrate,e.sessionId=t.sessionId,e.cdn=t.cdn,r.push(t._controller.create(o,e))}),r.length&&(t.segments=r,t.startSeqNum=r[0].seqNum,t.endSeqNum=r[r.length-1].seqNum,e.cuepointList&&e.cuepointList.length&&(e.cuepointList.forEach(function(e){t.hasCuepoint(e.startSeqNum)||t.cuepoints.push(new i(e))}),t.updateCuepointTime()))}},n.prototype.dto=function(){var e=this,t={segments:[],cuepoints:[]},r=["segments","_controller","cuepoints","subtitleStream"];return Object.keys(e).forEach(function(n){r.indexOf(n)>=0||(t[n]=e[n])}),e.segments.forEach(function(e){t.segments.push(e.dto())}),e.cuepoints.forEach(function(e){t.cuepoints.push(e.dto())}),t},n.prototype.setStreamIndex=function(e){var t=this;t.index=e,t.segments.forEach(function(t){t.setStreamIndex(e)})},n.prototype.getSeqNumBeforePosition=function(e){var t=this;if(!t.segments.length)return NaN;if(e<t.segments[0].startTime)return t.startSeqNum;for(var r=0;r<t.segments.length;r++){var n=t.segments[r];if(n&&n.startTime<=e&&n.startTime+n.duration>e)return t.startSeqNum+r}return t.endSeqNum},n.prototype.getSegmentfromSeqNum=function(e){var t=this,r=t.getIndexFromSeqNum(e);return r>=0&&r<t.segments.length?t.segments[r]:null},n.prototype.getIndexFromSeqNum=function(e){var t=this;if(e>=t.startSeqNum&&e<=t.endSeqNum)for(var r=0;r<t.segments.length;r++)if(t.segments[r]&&t.segments[r].seqNum===e)return r;return-1},n.prototype.contains=function(e){var t=this;return e>=t.startSeqNum&&e<=t.endSeqNum},n.prototype.isEmpty=function(){var e=this;return 0===e.segments.length},n.prototype.hasCuepoint=function(e){for(var t=this,r=t.cuepoints.length-1;r>=0;r--)if(t.cuepoints[r].startSeqNum===e)return!0;return!1},n.prototype.updateCuepointTime=function(){for(var e,t=this,r=0;r<t.cuepoints.length;r++)e=t.getSegmentfromSeqNum(t.cuepoints[r].startSeqNum),e&&t.cuepoints[r].setCueOutStartTime(e.startTime)}},{"./cuepoint":210,"./segment":212}],214:[function(e,t,r){"use strict";function n(e){var t=this;t.vttSegmentList=[],e&&t.updateConfig(e)}t.exports=n;var o=e("./vtt-segment");n.prototype.destroy=function(){var e=this;e.vttSegmentList=null},n.prototype.updateConfig=function(e){var t=this;e&&(t.url=e.url||t.url,t.groupId=e.groupId||t.groupId,t.language=e.language||t.language,t.name=e.name||t.name,void 0!==e.defaultValue&&null!==e.defaultValue&&(t.defaultValue=e.defaultValue),void 0!==e.autoSelect&&null!==e.autoSelect&&(t.autoSelect=e.autoSelect),void 0!==e.forced&&null!==e.forced&&(t.forced=e.forced)),e.segmentInfoList&&e.segmentInfoList.length&&(t.vttSegmentList=e.segmentInfoList.map(function(e){return t._controller.create(o,e)}))},n.prototype.getVTTSegment=function(e,t){for(var r=this,n=0;n<r.vttSegmentList.length;n++){var o=r.vttSegmentList[n];if(t&&o.programDateTime){var i=n<r.vttSegmentList.length-1?r.vttSegmentList[n+1].programDateTime:o.programDateTime+1e3*o.duration;if(t>=o.programDateTime&&i>t)return o}else if(o.sequenceNum===e)return o}return null}},{"./vtt-segment":215}],215:[function(e,t,r){"use strict";function n(e){var t=this;e&&(t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.url=e.url,t.duration=e.duration),t.clockReference=0,t.localCueTime=0,t.mpegTSTime=0,t.offset=0,t.adjustedTime=0}t.exports=n,n.prototype.toObject=function(){var e=this,t={};return t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.url=e.url,t.duration=e.duration,t.playlistUrl=e.playlistUrl,t.clockReference=e.clockReference,t.localCueTime=e.localCueTime,t.mpegTSTime=e.mpegTSTime,t.data=e.data,t.offset=e.offset,t.adjustedTime=e.adjustedTime,t},n.prototype.parseSegment=function(){var e=this;if(e.data){var t=e.data.split("\n");if(!(t.length<=0)&&0===t[0].indexOf("WEBVTT")){for(var r=0,n=1;n<t.length;n++){var o=t[n].trim();if(0===o.indexOf("X-TIMESTAMP-MAP")){var i="LOCAL:",a=Math.floor((Math.pow(2,33)-1)/90),s=o.split("=")[1],l=s.split(","),d=0,c=0;if(l.length){var p=l[0].indexOf(i)>=0?0:1,u=0===p?1:0,_=l[p].substr(i.length),m=_.split(":");if(m&&m.length>=3){var v=m[2].split("."),y=0,f=0;v&&v.length>=2&&(y=parseInt(v[0]),f=parseInt(v[1])),d=1e3*(3600*m[0]+60*m[1]+y)+f,d%=a}c=parseFloat(l[u].split(":")[1]),c=Math.round(c/90)}e.clockReference=e.pcr(),e.localCueTime=d,e.mpegTSTime=c}else if(o.indexOf("-->")>=0){var g=o.split("-->");if(g){var b=g[0].split(":");if(b){var A=parseInt(b[0]),E=parseInt(b[1]),h=parseFloat(b[2]),T=1e3*(3600*A+60*E+h);r=T,e.clockReference||(e.clockReference=T+e.mpegTSTime)}}break}}e.adjustedTime=c-d-e.clockReference+e.offset}}},n.prototype.pcr=function(){var e=this;if(!e._controller)return 0;var t=e._controller.model,r=t.getPCR();if(r&&(r=r/e._controller.model.timescale*1e3),t.live&&0>r){var n=-Math.floor(Math.pow(2,32)/90),o=Math.floor((Math.pow(2,32)-1)/90),i=Math.abs(r-n);r=i+o}return r}},{}],216:[function(e,t,r){"use strict";function n(){}t.exports=n;var o=8,i=12,a=i+4,s=9e4;n.prototype.initSegment=function(e,t){var r=this,n=r.ftyp(t),o=r.moov(e),i=new Uint8Array(n.byteLength+o.byteLength);return i.set(n),i.set(o,n.byteLength),i},n.prototype.ftyp=function(e){var t=this;e=e||"avc1";var r=new Uint8Array([105,115,111,109]),n=new Uint8Array([0,0,0,1]),o=new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);return t._box("ftyp",[r,n,o])},n.prototype.moov=function(e){var t=this,r=[];r.push(t._mvhd(e[0].config.duration,e[0].config.timescale));for(var n=0;n<e.length;n++)r.push(t._trak(e[n]));return r.push(t._mvex(e)),t._box("moov",r)},n.prototype.moof=function(e,t){var r=this,n=[];n.push(r._mfhd(e));for(var o=0;o<t.length;o++){var i=r._traf(t[o]);n.push(i)}return r._box("moof",n)},n.prototype.mdat=function(e){var t=this,r=[];if(e&&e.frames)for(var n=0;n<e.frames.length;n++)r.push(e.frames[n].data);return t._box("mdat",r)},n.prototype._mfhd=function(e){var t=this,r=new Uint8Array(4),n=new DataView(r.buffer);return n.setUint32(0,e),t._fullBox("mfhd",0,new Uint8Array(3),[r])},n.prototype._traf=function(e){if(e){var t=this,r=[],n=o+a+o,i=t._tfhd(e);n+=i.length,r.push(i);var s;e.frames&&e.frames.length&&(s=t._tfdt(e.frames[0].dts),n+=s.length,r.push(s));var l;return"video"===e.type&&(l=t._sdtp(e),n+=l.length),r.push(t._trun(e,n)),l&&r.push(l),t._box("traf",r)}},n.prototype._tfhd=function(e){var t=this,r=new Uint8Array(4),n=new DataView(r.buffer);return n.setUint32(0,e.streamId),t._fullBox("tfhd",0,new Uint8Array([0,0,0]),[r])},n.prototype._tfdt=function(e){var t=this,r=new Uint8Array(4),n=new DataView(r.buffer);return n.setUint32(0,Math.max(0,e)),t._fullBox("tfdt",0,new Uint8Array([0,0,0]),[r])},n.prototype._trun=function(e,t){for(var r=this,n=e.frames||[],a=n.length,s=r._getTrunFlags(n),l=0,d=s[1],c=0;4>c;c++)l+=d&1<<c?1:0;var p=new Uint8Array(4*l*a),u=new DataView(p.buffer);t+=i+8+p.length+o;var _=r._getTrunHeader(a,t),m=0;for(c=0;a>c;c++){var v=n[c];if(1&d&&(u.setUint32(m,v.duration),m+=4),2&d&&(u.setUint32(m,v.size),m+=4),4&d){var y=v.flags.isLeading<<2|v.flags.dependsOn,f=v.flags.isDependedOn<<6|v.flags.hasRedundancy<<4|v.flags.paddingValue<<1|v.flags.isNonSyncSample,g=240&v.flags.degradationPriority,b=15&v.flags.degradationPriority,A=y<<24|f<<16|g<<8|b;u.setUint32(m,A),m+=4}8&d&&(u.setUint32(m,v.pts-v.dts),m+=4)}return r._fullBox("trun",0,s,[_,p])},n.prototype._sdtp=function(e){for(var t=this,r=e.frames||[],n=r.length,o=new Uint8Array(n),i=0;n>i;i++){var a=r[i];a.flags&&(o[i]=a.flags.isLeading<<6|a.flags.dependsOn<<4|a.flags.isDependedOn<<2|a.flags.hasRedundancy)}return t._fullBox("sdtp",0,new Uint8Array(3),[o])},n.prototype._getTrunHeader=function(e,t){var r=new Uint8Array(8),n=new DataView(r.buffer);return n.setUint32(0,e),n.setInt32(4,t),r},n.prototype._getTrunFlags=function(e){var t=e.length,r=new Uint8Array(3);return r[2]=1,t&&(void 0!==e[0].duration&&(r[1]|=1),void 0!==e[0].size&&(r[1]|=2),void 0!==e[0].flags&&(r[1]|=4),void 0!==e[0].pts&&(r[1]|=8)),r},n.prototype._mvhd=function(e,t){var r=this,n=new Uint8Array(96),o=new DataView(n.buffer);o.setUint32(0,1),o.setUint32(4,2);var i=t||s;return o.setUint32(8,i),e&&o.setUint32(12,e),o.setUint32(16,65536),o.setUint16(20,256),o.setUint32(32,65536),o.setUint32(48,65536),o.setUint32(64,1073741824),o.setUint32(92,4294967295),r._fullBox("mvhd",0,new Uint8Array(3),[n])},n.prototype._trak=function(e){var t=this;e.config.duration=e.config.duration||4294967295;var r=[t._tkhd(e)];return e.config.useEditBox&&r.push(t._edts(e)),r.push(t._mdia(e)),t._box("trak",r)},n.prototype._tkhd=function(e){var t=this,r=new Uint8Array(80),n=new DataView(r.buffer);return n.setUint32(8,e.streamId),n.setUint32(16,e.config.duration),n.setUint8(32,"audio"===e.type?1:0),n.setUint32(36,65536),n.setUint32(52,65536),n.setUint32(68,1073741824),n.setUint16(72,e.config.width),n.setUint16(76,e.config.height),t._fullBox("tkhd",0,new Uint8Array([0,0,7]),[r])},n.prototype._edts=function(e){var t=this;return t._box("edts",[t._elst(e)])},n.prototype._elst=function(e){var t=this,r=new Uint8Array(16),n=new DataView(r.buffer);return n.setUint32(0,1),n.setUint32(4,0),n.setUint32(8,e.config.offset),n.setUint16(12,1),n.setUint16(14,0),t._fullBox("elst",0,new Uint8Array(3),[r])},n.prototype._mdia=function(e){var t=this;return t._box("mdia",[t._mdhd(e),t._hdlr(e.type),t._minf(e)])},n.prototype._mdhd=function(e){var t=this,r=new Uint8Array(20),n=new DataView(r.buffer);n.setUint32(0,2),n.setUint32(4,3);var o=e.config.timescale||s;return n.setUint32(8,o),n.setUint32(12,e.config.duration),n.setUint16(16,21956),t._fullBox("mdhd",0,new Uint8Array(3),[r])},n.prototype._hdlr=function(e){var t=this,r={video:1986618469,audio:1936684398,hint:1751740020},n=new Uint8Array(32),o=new DataView(n.buffer);return o.setUint32(4,r[e]),o.setUint32(20,r[e]),o.setUint32(24,1214344804),o.setUint32(28,1818587648),t._fullBox("hdlr",0,new Uint8Array(3),[n])},n.prototype._minf=function(e){var t=this,r="audio"===e.type?t._smhd():t._vmhd();return t._box("minf",[r,t._dinf(),t._stbl(e)])},n.prototype._vmhd=function(){var e=this,t=new Uint8Array(8);return e._fullBox("vmhd",0,new Uint8Array([0,0,1]),[t])},n.prototype._smhd=function(){var e=this,t=new Uint8Array(4);return e._fullBox("smhd",0,new Uint8Array(3),[t])},n.prototype._dinf=function(){var e=this;return e._box("dinf",[e._dref()])},n.prototype._dref=function(){var e=this,t=new Uint8Array([0,0,0,1]),r=[];return r.push(t),r.push(e._url(new Uint8Array([0,0,1]))),e._fullBox("dref",0,new Uint8Array(3),r)},n.prototype._url=function(e){var t=this;return t._fullBox("url ",0,e,[])},n.prototype._urn=function(e){var t=this;return t._fullBox("urn ",0,e,[])},n.prototype._stbl=function(e){var t=this;return t._box("stbl",[t._stsd(e),t._stts(),t._stsc(),t._stsz(),t._stco()])},n.prototype._stsd=function(e){var t=this,r="audio"===e.type?t._audioSample(e):t._videoSample(e),n=new Uint8Array([0,0,0,1]);return t._fullBox("stsd",0,new Uint8Array(3),[n,r])},n.prototype._videoSample=function(e){var t=this,r=[];r.push((65280&e.config.ppsLength)>>>8),r.push(255&e.config.ppsLength);try{e.config.ppsLength>0&&(r=r.concat(Array.prototype.slice.call(e.config.pps)))}catch(n){}var o=[];o.push((65280&e.config.spsLength)>>>8),o.push(255&e.config.spsLength);try{e.config.spsLength>0&&(o=o.concat(Array.prototype.slice.call(e.config.sps)))}catch(n){}var i=new Uint8Array(78),a=new DataView(i.buffer);return a.setUint16(6,1),a.setUint16(24,e.config.width),a.setUint16(26,e.config.height),a.setUint32(28,4718592),a.setUint32(32,4718592),a.setUint16(40,1),a.setUint32(42,259613032),a.setUint32(46,1869557110),a.setUint32(50,1768187247),a.setUint32(54,761818227),a.setUint16(74,24),a.setUint16(76,65535),t._box("avc1",[i,t._box("avcC",[new Uint8Array([1,e.config.profileIndication,e.config.profileCompatibility,e.config.levelIndication,255].concat([255&e.config.numOfSPS|224]).concat(o).concat([255&e.config.numOfPPS]).concat(r))]),t._btrt()])},n.prototype._btrt=function(){var e=this,t=new Uint8Array(12),r=new DataView(t.buffer);return r.setUint32(0,1875072),e._box("btrt",[t])},n.prototype._audioSample=function(e){var t=this,r=new Uint8Array(8),n=new DataView(r.buffer);n.setUint16(6,1);var o=new Uint8Array(20);return n=new DataView(o.buffer),n.setUint16(8,e.config.channels),n.setUint16(10,e.config.sampleSize),n.setUint16(16,e.config.samplingFreq),t._box("mp4a",[r,o,t._esds(e)])},n.prototype._esds=function(e){var t=this,r=new Uint8Array(27),n=new DataView(r.buffer);return n.setUint8(0,3),n.setUint8(1,25),n.setUint8(5,4),n.setUint8(6,17),n.setUint8(7,64),n.setUint8(8,21),n.setUint16(10,1536),n.setUint8(20,5),n.setUint8(21,2),n.setUint8(22,e.config.audioObjectTypeIndex<<3|e.config.samplingFreqIndex>>>1),n.setUint8(23,e.config.samplingFreqIndex<<7|e.config.channels<<3),n.setUint8(24,6),n.setUint8(25,1),n.setUint8(26,2),t._fullBox("esds",0,new Uint8Array(3),[r])},n.prototype._stts=function(){var e=this,t=new Uint8Array(4);return e._fullBox("stts",0,new Uint8Array(3),[t])},n.prototype._stsc=function(){var e=this,t=new Uint8Array(4);return e._fullBox("stsc",0,new Uint8Array(3),[t])},n.prototype._stsz=function(){var e=this,t=new Uint8Array(8);return e._fullBox("stsz",0,new Uint8Array(3),[t])},n.prototype._stco=function(){var e=this,t=new Uint8Array(4);return e._fullBox("stco",0,new Uint8Array(3),[t])},n.prototype._mvex=function(e){for(var t=this,r=[],n=0;n<e.length;n++)r.push(t._trex(e[n]));return t._box("mvex",r)},n.prototype._trex=function(e){var t=this,r=new Uint8Array(20),n=new DataView(r.buffer);return n.setUint32(0,e.streamId),n.setUint32(4,1),n.setUint32(16,65537),"video"!==e.type&&(r[r.length-1]=0),t._fullBox("trex",0,new Uint8Array(3),[r])},n.prototype._fullBox=function(e,t,r,n){var o=this,i=new Uint8Array(1);i[0]=t;var a=[i,r];return a=a.concat(n),o._box(e,a)},n.prototype._box=function(e,t){for(var r=0,n=new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]),o=0,i=0;i<t.length;i++)o+=t[i].length;var a=new Uint8Array(o+8),s=new DataView(a.buffer,a.byteOffset,a.byteLength);
for(s.setUint32(0,a.byteLength),a.set(n,4),r=8,i=0;i<t.length;i++)a.set(t[i],r),r+=t[i].length;return a}},{}],217:[function(e,t,r){"use strict";function n(){var e=this;e._mp4Content=null,e._mp4Box=new o}t.exports=n;var o=e("./mp4-box"),i=.0232199546,a=.0333333333;n.prototype.destroy=function(){var e=this;e._mp4Content=null},n.prototype.generate=function(e){if(!e)return null;var t=this,r=[e],n=null,o=null,i=null,a=0;if(e.config.shouldInit){var s="audio"===e.type?"mp41":"avc1";n=t._generateInitSegment(r,s),a+=n?n.length:0}e.frames.length&&(o=t._generateFragmentMetadata(r),a+=o?o.length:0,i=t._generateFragmentData(r),a+=i?i.length:0),t._mp4Content=new Uint8Array(a);var l=0;return n&&(t._mp4Content.set(n,l),l+=n.length),o&&(t._mp4Content.set(o,l),l+=o.length),i&&(t._mp4Content.set(i,l),l+=i.length),{data:t._mp4Content,type:e.type,codec:e.config.codec,startTime:e.frames.length?e.startTime/e.config.timescale:0,endTime:e.frames.length?(e.endTime+e.frames[e.frames.length-1].duration)/e.config.timescale:0}},n.prototype._generateInitSegment=function(e,t){var r=this;if(!e||!e.length)return null;var n=r._mp4Box.initSegment(e,t);return n?n:null},n.prototype._generateFragmentMetadata=function(e){var t=this,r=0;return e&&e.length?(e.forEach(function(e,t,n){r=e.config.seqNum,e.frames&&e.frames.length&&e.frames.forEach(function(t,r,n){if(t.size=t.nalUnitSize?t.nalUnitSize+4*t.nalUnits.length:t.data?t.data.length:0,r<n.length-1)t.duration=e.frames[r+1].dts-t.dts;else if(r>0)t.duration=t.dts-e.frames[r-1].dts;else{var o="audio"===e.type?i:a;o*=e.config.timescale,t.duration=e.config.defaultFrameDuration||o}t.duration<0})}),t._mp4Box.moof(r,e)):null},n.prototype._generateFragmentData=function(e){var t=this;if(!e||!e.length)return null;var r,n=[],o=0;e.forEach(function(e){"video"===e.type&&e.frames.forEach(function(e){e.normalizedData=new Uint8Array(e.nalUnitSize+4*e.nalUnits.length);var t=new DataView(e.normalizedData.buffer),r=0;e.nalUnits.forEach(function(n){t.setUint32(r,n.data.byteLength),r+=4,e.normalizedData.set(n.data,r),r+=n.data.byteLength}),e.data=e.normalizedData}),r=t._mp4Box.mdat(e),r&&r.length&&(n.push(r),o+=r.length)});var i=new Uint8Array(o),a=0;return n.forEach(function(e,t,r){i.set(e,a),a+=e.length}),i}},{"./mp4-box":216}],218:[function(e,t,r){"use strict";function n(e){var t=this;if(!e||o.isNullOrUndefined(e.maxRetries)||!e.requestTimeout||o.isNullOrUndefined(e.chunkedRequestTimeout))throw new Error("Invalid Arguments: Loader configs are not complete");a.call(t,"Loader"),t.opts=e,t._inWorkerScope=e.inWorkerScope,t.window=t._inWorkerScope?null:e.window||window,t.opts.method=e.method||"GET",t.opts.isChunkedLoad=e.isChunkedLoad||!1,t.opts.minChunkSize=o.isNullOrUndefined(e.minChunkSize)?1e5:e.minChunkSize,t.opts.responseType=e.responseType||"text",t._xhr=null,t._xhrMetaData={},t._maxRetries=e.maxRetries,t._backOffInit=[1e3,1e3,2e3,2e3,3e3,3e3,5e3],t._backOffInterval=5e3,t.fallback=!1,t.fallbackIdx=null,t._retryTimer=new l(1e3,1),t._retryTimer.addEventListener(t.load,t),t.REQUEST_TIMEOUT=1e3*e.requestTimeout,t.CHUNKED_REQUEST_TIMEOUT=1e3*e.chunkedRequestTimeout,t.MIN_TIMEOUT=2e3,t.MAX_TIMEOUT=15e3;var r=t._getTimeOut();t._requestTimer=new l(r,1),t._requestTimer.addEventListener(t._onTimeout,t),t._headerFields=e.headerFields}r.Loader=n,r.Events={COMPLETE:"complete",ERROR:"error",PROGRESS:"progress",BYTES_LOADED:"bytesLoaded"};var o=e("../../lib"),i=e("../../lib/hls-utils"),a=e("../../lib/event-bus"),s=e("./../error"),l=e("../../lib/timer"),d={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};i.inherits(n,a),n.prototype.load=function(e){var t=this;if("string"==typeof e&&(e={url:e}),t.req=e||t.req,t.opts.fallBackHandler=t.req&&t.req.fallBackHandler||null,!t.req||!t.req.url)return t.publish(r.Events.ERROR,new s.Error(s.ERR_XHR_LOAD));if(t.req.fallback&&t.req.fallback.length>0&&!t.req.fallBackHandler)return t.publish(r.Events.ERROR,new s.Error(s.ERR_XHR_LOAD));t._cancelCurrentRequest();var n=t.opts.isChunkedLoad||!1;t._xhr=t._inWorkerScope?new XMLHttpRequest:new t.window.XMLHttpRequest,t._xhr._offset=0,t._xhr._finished=!1,n?t.opts.useMSStream?t._initChunkedLoadIe():t._initChunkedLoad():t._initLoad(),t._xhr.open(t.opts.method,t.req.url,!0),n?t.opts.useMSStream?t._xhr.responseType="ms-stream":t._xhr.overrideMimeType("text/plain; charset=x-user-defined"):t._xhr.responseType=t.opts.responseType,t._requestTimer.reset(),t._requestTimer.start(),t._xhr.send()},n.prototype._initLoad=function(){var e=this;e._xhr.onerror=e._handleError.bind(e),e._xhr.onreadystatechange=function(){return e._xhr&&e._xhr.readyState===d.DONE?e._statusGood(e._xhr.status)?void(e._xhr._finished||(e._xhr._finished=!0,e.publish(r.Events.COMPLETE,{data:e._xhr.response,fallback:e.fallback,fallbackIdx:e.fallbackIdx}),e._requestTimer.stop())):(e._requestTimer.stop(),e._handleError()):void 0}},n.prototype._initChunkedLoad=function(){var e=this,t=function(){if(e._xhr&&!e._xhr._finished&&(e._xhr.readyState===d.DONE||e._xhr.readyState===d.LOADING)){if(!e._statusGood(e._xhr.status))return e._requestTimer.stop(),0===e._xhr._offset?e._handleError():void e._handlePartialLoadError();var t=e._xhr.responseText,n=t.length-e._xhr._offset;if(n>0&&(e._requestTimer.stop(),e._xhrMetaData.atlasMarker=e._getResponseHeader("X-ATLAS-MARKERS"),e.publish(r.Events.BYTES_LOADED,t.length,e._xhrMetaData)),n>e.opts.minChunkSize||e._xhr.readyState===d.DONE){for(var o=new Uint8Array(n),i=0;n>i;i++)o[i]=255&t.charCodeAt(i+e._xhr._offset);e._xhr._offset=t.length,e.publish(r.Events.PROGRESS,o,t.length)}e._requestTimer.start(),e._xhr.readyState===d.DONE&&(e._xhr._finished=!0,e.publish(r.Events.COMPLETE),e._requestTimer.stop())}};e._xhr.onreadystatechange=t,e._xhr.onprogress=t},n.prototype._initChunkedLoadIe=function(){var e=this;e._xhr.onreadystatechange=function(){if(e._xhr.readyState===d.LOADING){if(!e._statusGood(e._xhr.status))return e._requestTimer.stop(),e._handleError();var t=e._xhr.response;e._MSStreamReader||(e._MSStreamReader=e._inWorkerScope?new MSStreamReader:new e.window.MSStreamReader),e._MSStreamReader.readAsArrayBuffer(t),e._MSStreamReader.onprogress=function(){e._requestTimer.stop();var t=e._MSStreamReader.result;t.byteLength>0&&(e._xhrMetaData.atlasMarker=e._getResponseHeader("X-ATLAS-MARKERS"),e.publish(r.Events.BYTES_LOADED,t.byteLength,e._xhrMetaData));var n=new Uint8Array(t.slice(e._xhr._offset,t.byteLength));e._xhr._offset=t.byteLength,e.publish(r.Events.PROGRESS,n,t.byteLength),e._requestTimer.start()},e._MSStreamReader.onload=function(){e._requestTimer.stop(),e.publish(r.Events.COMPLETE)},e._MSStreamReader.onerror=function(){e._requestTimer.stop()}}}},n.prototype._getResponseHeader=function(e){var t=this,r=new RegExp(e+": (.*)","g"),n=t._xhr.getAllResponseHeaders(),o=r.exec(n);return o&&o.length>1?o[1]:""},n.prototype._statusGood=function(e){return e>=200&&300>e},n.prototype._onTimeout=function(){var e=this;Date.now()-e._requestTimestamp;return e._requestTimer.stop(),e.opts.isChunkedLoad&&e._xhr._offset>0&&e._xhr.readyState===d.LOADING?void e._handlePartialLoadError():void e._handleError()},n.prototype._handlePartialLoadError=function(){var e=this;e.reset(),e._sendError(s.ERR_PARTIAL_LOAD)},n.prototype._handleError=function(){var e=this;if(e.opts.retries=e.opts.retries||0,e._cancelCurrentRequest(),e.opts.retries<e._maxRetries){var t=e.opts.retries<e._backOffInit.length?e._backOffInit[e.opts.retries]:e._backOffInit[e._backOffInit.length-1]+e._backOffInterval*(e.opts.retries-e._backOffInit.length+1);e.opts.retries++,e._retryTimer.delay=t,e._retryTimer.reset(),e._retryTimer.start(),e._headerFields&&e._xhr.readyState===d.DONE&&0===e._xhr.status&&(e._headerFields=null)}else e.req.fallback&&e.req.fallback.length>0?e._fallback():e._sendError(s.ERR_XHR_LOAD)},n.prototype._fallback=function(){var e=this,t=e.opts.fallBackHandler(e.req.fallback);if(t>=0){var r=e.req.fallback.splice(t,1)[0];e.req.url=r.url,e.fallback=!0,e.fallbackIdx=r.index,e.load()}else e._sendError(s.ERR_XHR_LOAD)},n.prototype._sendError=function(e){var t=this;t.publish(r.Events.ERROR,new s.Error(e))},n.prototype._cancelCurrentRequest=function(){var e=this;e._xhr&&e._xhr.readyState!==d.DONE&&e._xhr.readyState!==d.UNSENT&&(e._xhr._finished=!0,e._xhr.abort()),e._retryTimer.stop(),e._requestTimer.stop()},n.prototype._getTimeOut=function(){var e,t=this;return e=!isNaN(t.opts.timeout)&&t.opts.timeout>=t.MIN_TIMEOUT&&t.opts.timeout<=t.MAX_TIMEOUT?t.opts.timeout:t.opts.isChunkedLoad?1e3*t.opts.chunkedRequestTimeout:1e3*t.opts.requestTimeout},n.prototype.reset=function(){var e=this;e._cancelCurrentRequest(),e._xhr=null,e.req=null,e.opts=null,e.fallback=null,e.fallbackIdx=null,e._MSStreamReader&&e._MSStreamReader.abort()},n.prototype.destroy=function(){var e=this;e.reset(),e._retryTimer.destroy(),e._requestTimer.destroy(),a.prototype.destroy.call(e)}},{"../../lib":170,"../../lib/event-bus":168,"../../lib/hls-utils":169,"../../lib/timer":174,"./../error":199}],219:[function(e,t,r){"use strict";function n(){var e=this;e._model=e._context.appModel,e._node=e._context.node,e._mediaInfo={currentStreamBitrate:0,frameDrop:0,frameRateSum:0,frameRateSampleCount:0,currentKbps:0,deliveryProtocol:e._getDeliveryProtocol(),bufferingCount:0,totalBufferingTime:0},e.FRAMERATE_SAMPLE_SIZE=4,e._frameRateStats={prevTotalFrames:0,prevTotalDroppedFrames:0,prevFrameRateMeasuredTime:0,frameRateSampleCollector:[],currentFrameRate:0},e._timer=new i(1e3),e._timer.addEventListener(e._sendInfoUpdate,e)}t.exports=n;var o=e("./../event").HLSEvent,i=e("../../lib/timer");n.prototype.destroy=function(){var e=this;e._mediaInfo=null,e._timer.destroy()},n.prototype.onPlay=function(){var e=this;e._timer.start()},n.prototype.onPause=function(){var e=this;e._timer.stop()},n.prototype.updateBufferingInfo=function(e){var t=this;e&&(e.value||e.bufferInit||(t._mediaInfo.bufferingCount++,t._mediaInfo.totalBufferingTime+=e.waitTime))},n.prototype._sendInfoUpdate=function(){var e=this,t=e._model.streams,r=e._mediaInfo,n=e._model.getCurrentPlayingStream(),i=e._getFpsStats();n&&(r.currentStreamIndex=e._model.currentPlayingStreamIndex,r.currentStreamBitrate=n.bitrate/1e3,r.mediaWidth=n.width,r.mediaHeight=n.height),t.length&&(r.qualityLevels=t.length,r.minBitRate=t[0].bitrate,r.maxBitRate=t[r.qualityLevels-1].bitrate),r.bufferLength=e._model.getBufferLength().toFixed(2),r.frameRate=i.frameRate.toFixed(2),r.droppedFrames=i.droppedFrames,r.currentKbps=(1e3*e._model.currentKbps).toFixed(0),e._model.infoUpdateSent=!0,e._context.sendEvent(o.INFO_UPDATE,{mediaInfo:e._mediaInfo})},n.prototype.getWindow=function(){return window},n.prototype._getDeliveryProtocol=function(){var e=this,t=e.getWindow();return t&&t.location&&t.location.protocol?t.location.protocol.slice(0,-1):"http"},n.prototype._getFpsStats=function(){var e,t,r=this,n=r._node,o=0,i=r._frameRateStats,a=n.currentTime-i.prevFrameRateMeasuredTime,s=r._fpsBrowserSupport(),l=0;return(s.isWebKitFpsAvailable||s.isNonWebKitFpsAvailable)&&(e=s.isWebKitFpsAvailable?n:n.getVideoPlaybackQuality(),t=s.isWebKitFpsAvailable?e.webkitDecodedFrameCount:e.totalVideoFrames,l=s.isWebKitFpsAvailable?e.webkitDroppedFrameCount:e.droppedVideoFrames,o=i.prevFrameRateMeasuredTime>0&&0!==a?(t-i.prevTotalFrames-(l-i.prevTotalDroppedFrames))/a:i.currentFrameRate,o&&i.frameRateSampleCollector.push(o),r._calculateCurrentFrameRate(),i.prevTotalFrames=t,i.prevTotalDroppedFrames=l,i.prevFrameRateMeasuredTime=n.currentTime),{frameRate:i.currentFrameRate,droppedFrames:l}},n.prototype._fpsBrowserSupport=function(){var e=this,t=e._node;return{isWebKitFpsAvailable:"undefined"!=typeof t.webkitDecodedFrameCount,isNonWebKitFpsAvailable:"function"==typeof t.getVideoPlaybackQuality}},n.prototype._calculateCurrentFrameRate=function(){var e=this,t=e._frameRateStats,r=t.frameRateSampleCollector;if(r.length>=e.FRAMERATE_SAMPLE_SIZE){var n=r.reduce(function(e,t){return e+t});e._frameRateStats.currentFrameRate=n/r.length,r.splice(0,r.length)}}},{"../../lib/timer":174,"./../event":200}],220:[function(e,t,r){"use strict";function n(){var e=this;e._cuepointList=[],e.ERRORS={INVALID_M3U8:1,EMPTY_DATA:2,NO_SEGMENTS:3}}t.exports=n;var o=e("./../model/worker-scope/model").MetadataTypes,i="#EXTM3U",a="#EXT-X-STREAM-INF:",s="#EXT-X-MEDIA:TYPE=SUBTITLES,",l="#EXTINF:",d="#EXT-X-MEDIA-SEQUENCE:",c="#EXT-X-DISCONTINUITY-SEQUENCE:",p="#EXT-X-DISCONTINUITY",u="#EXT-X-TARGETDURATION:",_="#EXT-X-PROGRAM-DATE-TIME:",m="#EXT-X-ENDLIST",v="#EXT-X-CUE-OUT:";n.prototype.parse=function(e){if(!e)return null;var t=this;return e.type===o.STRUCTURED?t._parseStructuredMetadata(e):t._parseRawMetadata(e)},n.prototype._parseRawMetadata=function(e){var t=this,r={},n=e.rawData;if(""===n||!n)return r.error=t.ERRORS.EMPTY_DATA,r;var o=n.split("\n");return 0!==o[0].indexOf(i)?(r.error=t.ERRORS.INVALID_M3U8,r):n.indexOf(l)>0?t._parseMediaPlaylist(o,e):n.indexOf(a)>0?t._parseMasterPlaylist(o,e.url):(r.error=t.ERRORS.INVALID_M3U8,r)},n.prototype._parseStructuredMetadata=function(e){var t=this,r={};if(r.streamInfoList=t.parseStreamInfo(e.streams),e.hasStreamMetadata&&r.streamInfoList.forEach(function(e){e.segmentInfoList=t.parseSegmentInfo(e.hlsInfo,e.index),e.duration=0,e.segmentInfoList.forEach(function(t){e.duration+=t.duration}),e.hasEndList=!0,e.targetDuration=e.hlsInfo.segment_duration}),r.subtitleStreamInfoList=[],e.subtitleStreams&&e.subtitleStreams.length){var n=e.subtitleStreams[0].manifestContent;if(0===n.indexOf(s)){var o=t._extractSubtitles(n,e.subtitleStreams[0].host);o&&r.subtitleStreamInfoList.push(o)}}return r},n.prototype._parseMasterPlaylist=function(e,t){for(var r=this,n={streamInfoList:[],subtitleStreamInfoList:[]},o=0;o<e.length;o++){var i=e[o].trim(),l=[];if(0===i.indexOf(a)){l=i.substr(a.length).split(",");var d=r._parseStreamAttributes(l,i);do o++,i=e[o];while(i.match(/^\s*$/));d.url=r._extractURL(i,t),n.streamInfoList.push(d)}else if(0===i.indexOf(s)){var c=r._extractSubtitles(i,t);c&&n.subtitleStreamInfoList.push(c)}}return n},n.prototype._parseMediaPlaylist=function(e,t){var r=this,n={},i={},a=[],s=[],y=t.url,f=t.index,g={streamInfoList:[],subtitleStreamInfoList:[]};i.discontinuityCounter=0,i.sequenceNum=0,i.startTime=0,i.programDateTime=0,i.brStartOffset=-1,i.brEndOffset=-1,i.levelIndex=f,n.discontinuitySeqNum=0,n.index=f,n.targetDuration=0,n.hasEndList=!1,n.url=y,n.duration=0;for(var b=0;b<e.length;b++){var A=e[b].trim();if(!A.match(/^\s*$/)){if(0===A.indexOf(d)&&(n.seqNum=parseInt(A.substr(d.length)),i.sequenceNum=n.seqNum),0===A.indexOf(c))n.discontinuitySeqNum=parseInt(A.substr(c.length));else if(0===A.indexOf(p))i.discontinuityCounter++;else if(0===A.indexOf(u))n.targetDuration=parseFloat(A.substr(u.length));else if(0===A.indexOf(_))i.programDateTime=r._parseProgramDateTime(A);else if(0===A.indexOf(l)){var E=A.indexOf(",");i.duration=-1===E?parseFloat(A.substr(l.length)):parseFloat(A.substr(l.length,E-l.length)),n.duration+=i.duration;do b++,A=e[b].trim();while(A.match(/^\s*$/));i.url=r._extractURL(A,y),a.push(r._copySegmentInfo(i)),i.startTime+=i.duration,i.sequenceNum++,i.programDateTime=0,i.brStartOffset=-1}else 0===A.indexOf(m)&&(n.hasEndList=!0);if(A.indexOf(v)>=0){var h=r._createCueOutSegment(i.sequenceNum,A);s.push(h)}}}return a.length&&(n.segmentInfoList=a),s.length&&(n.cuepointList=s),t.type===o.RAW?g.streamInfoList.push(n):t.type===o.RAW_SUBTITLE&&g.subtitleStreamInfoList.push(n),g},n.prototype._parseStreamAttributes=function(e,t){if(!e||!e.length)return null;for(var r={},n=0;n<e.length;n++){var o=e[n];if(o.indexOf("BANDWIDTH")>-1)r.bitrate=1*o.split("=")[1];else if(o.indexOf("RESOLUTION")>-1){var i=o.split("=")[1],a=i.split("x");r.width=parseInt(a[0]),r.height=parseInt(a[1])}else o.indexOf("CODECS")>-1&&-1===t.indexOf("avc1")?r.audio=!0:o.indexOf("AUDIO")>-1?(r.audioStreamId=o.split("=")[1],r.audioStreamId=r.audioStreamId.replace(/"/g,"")):o.indexOf("SUBTITLES")>-1&&(r.subtitlesGroupId=o.split("=")[1],r.subtitlesGroupId=r.subtitlesGroupId.replace(/"/g,""))}return r},n.prototype._extractURL=function(e,t){var r=null,n=null;return"http://"===e.substr(0,7)||"https://"===e.substr(0,8)?e:(t.indexOf("?")>-1&&(t=t.substr(0,t.indexOf("?"))),"/"===e.substr(0,1)?(r=t.substr(0,t.indexOf("//")+2),n=t.substr(t.indexOf("//")+2),r+n.substr(0,n.indexOf("/"))+e):t.substr(0,t.lastIndexOf("/")+1)+e)},n.prototype._extractSubtitles=function(e,t){var r=this;e=e.replace(/"/g,"");var n=e.substr(s.length).split(",");return r._parseSubtitleAttributes(n,e,t)},n.prototype._parseSubtitleAttributes=function(e,t,r){var n=this,o={};return e&&e.length&&e.forEach(function(e){e.indexOf("GROUP-ID")>-1?o.groupId=e.split("=")[1]:e.indexOf("LANGUAGE")>-1?o.language=e.split("=")[1]:e.indexOf("NAME")>-1?o.name=e.split("=")[1]:e.indexOf("AUTOSELECT")>-1?o.autoSelect="YES"===e.split("=")[1]:e.indexOf("DEFAULT")>-1?o.defaultValue="YES"===e.split("=")[1]:e.indexOf("URI")>-1?o.url=n._extractURL(e.substr(4),r):e.indexOf("FORCED")>-1&&(o.forced="YES"===e.split("=")[1])}),o},n.prototype._copyVTTInfo=function(e){var t={};return t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.url=e.url,t.duration=e.duration,t},n.prototype._parseProgramDateTime=function(e){if(!e)return 0;var t,r,n=e.substr(_.length),o=n.split("T"),i=o[0].split("-"),a=parseInt(i[0]),s=parseInt(i[1]),l=parseInt(i[2]),d=o[1],c=0;if(d.indexOf("Z")>=0)t=d.substr(0,d.indexOf("Z")).split(":");else if(d.indexOf("+")>=0){var p=d.split("+");t=p[0].split(":"),r=p[1].split(":"),c=-1}else if(d.indexOf("-")>=0){var u=d.split("-");t=u[0].split(":"),r=u[1].split(":"),c=1}var m=0,v=0,y=0;if(t&&(m=parseInt(t[0]),v=parseInt(t[1]),y=parseFloat(t[2])),r){var f=parseInt(r[0]),g=parseInt(r[1]);m=(24+m+c*f)%24,v+=c*g,v>=60?(m++,v-=60):0>v&&(m--,v+=60)}return new Date(a,s,l,m,v,y).getTime()},n.prototype._copySegmentInfo=function(e){var t={};return t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.brStartOffset=e.brStartOffset,t.brEndOffset=e.brEndOffset,t.levelIndex=e.levelIndex,t.url=e.url,t.duration=e.duration,t},n.prototype.parseStreamInfo=function(e){if(!e)return null;var t=[];return e.forEach(function(e,r){var n=e.host;e.path&&""!==e.path?n+=e.path:e.url&&(n=e.url);var o={bitrate:1e3*e.bitrate,channels:e.channels,height:e.height,width:e.width,url:n,index:r,hlsInfo:e.hls_info,cdn:e.cdn};if(e.manifestContent&&e.manifestContent.indexOf("SUBTITLES")>-1){var i=e.manifestContent.split('SUBTITLES="')[1];o.subtitlesGroupId=i.substr(0,i.indexOf('"'))}t.push(o)}),t},n.prototype.parseSegmentInfo=function(e,t){var r=this;if(!e)return null;var n=[],o={};o.brStartOffset=-1,o.brEndOffset=-1,o.programDateTime=0,o.discontinuityCounter=0,o.sequenceNum=e.start_index,o.startTime=0;for(var i=0;i<e.segments_count;i++)o.url=e.ts_url+"&num="+o.sequenceNum.toString(),o.levelIndex=t,o.duration=e.segment_duration,i===e.segments_count-1&&(o.duration=e.last_segment_duration),n.push(r._copySegmentInfo(o)),o.sequenceNum++,o.startTime+=o.duration;return n},n.prototype._cueoutTimeParser=function(e){var t=e.split(":"),r=0;return t.length>1&&(r=1e3*parseFloat(t[1])),r},n.prototype._createCueOutSegment=function(e,t){var r=this,n=e;if(!(0>n)){var o=r._cueoutTimeParser(t),i={};return i.startSeqNum=n,i.startTime=NaN,i.cuepointDuration=o,i}}},{"./../model/worker-scope/model":211}],221:[function(e,t,r){"use strict";function n(){var e=this;e._model=e._controller.model,e._ignoreBuffering=!1,e._buffering=!1,e._loadedList=[],e._renderedList=[],e._loadingSegment=null,e._renderingSegment=null,e._eventKeys={},e._prevAvgBandwidth=NaN,e._registerListeners(),e._playbackPosition=0,e._bufferingTime=0,e._timeUpdateTimestamp=0,e._isFirstSegment=!0}function o(){var e=this;e.seqNum=-1,e.beginTime=NaN,e.endTime=NaN,e.bitrateIndex=-1,e.switchReason="none",e.bufferCount=0,e.bufferTime=0,e.timeToFirstByte=0,e.timeToDownload=0,e.timeToRequest=0,e.observedBitrate=0,e.frameDrop=0,e.frameRateSum=0,e.frameRateSampleCount=0,e.frameRate=30}t.exports=n;var i=e("./../event").HLSEvent;n.prototype.destroy=function(){var e=this;e._loadedList=[],e._renderedList=[],e._renderingSegment=null,e._loadingSegment=null,e._removeListeners()},n.prototype._registerListeners=function(){var e=this;e._eventKeys[i.WAITING]=e._controller.addEventListener(i.WAITING,e._onWaiting,e)},n.prototype._removeListeners=function(){var e=this;e._controller.removeEventListeners(e._eventKeys)},n.prototype.onComplete=function(){var e=this;e.segmentRenderNext()},n.prototype.onTimeUpdate=function(e){var t=this,r=t._model.getCurrentPlayingStream();t._playbackPosition=e,t.updateRenderState(t._renderingSegment,t._playbackPosition),t._model.live&&r&&r.cuepoints.length>0&&t.cuepointEventDispatcher(t._playbackPosition,r.cuepoints)},n.prototype._onWaiting=function(e){var t=this;e&&(e.bufferInit||(e.value?t._onBufferingBegin():t._onBufferingEnd(e.waitTime)))},n.prototype.segmentLoadBegin=function(e,t){if(t){var r=this,n=new o;n.seqNum=e,n.beginTime=t.beginTime,n.timeToFirstByte=t.timeToFirstByte,n.bitrateIndex=Math.max(0,t.bitrateIndex),n.switchReason=t.switchReason,n.frameRate=t.frameRate,n.observedBitrate=1e3*t.observedBitrate,n.endTime=t.endTime,n.perfInfo={},r._loadingSegment&&r._loadedList.push(r._loadingSegment),r._loadingSegment=n,(r._renderingSegment&&e===r._renderingSegment.seqNum||!r._renderingSegment)&&r.segmentRenderNext(n)}},n.prototype.segmentLoadEnd=function(e,t){var r=this,n=r._loadingSegment;n&&n.seqNum===e&&(t&&(n.timeToDownload=t.timeToDownload,n.perfInfo=t.perfInfo,n.segmentInWorker=t.segmentInWorker),r._loadedList.push(n),r._loadingSegment=null)},n.prototype.segmentRenderNext=function(e){var t=this;t._renderingSegment&&(t._renderedList.push(t._renderingSegment),t._renderingSegment=null,t._controller.sendEvent(i.SEGMENT_RENDERED)),e&&(t._renderingSegment=e,t._model.setCurrentPlayingStream(e.bitrateIndex))},n.prototype.updateRenderState=function(e,t){var r=this;if(!(isNaN(t)||0>=t||(e||(e=r._getNextSegment(t),e&&r.segmentRenderNext(e)),e.frameDrop=0,e.frameRateSum+=0,t>=e.beginTime&&t<e.endTime))){var n=r._getNextSegment(t);if(n&&(r.segmentRenderNext(n),n.bitrateIndex!==e.bitrateIndex)){var o=r._model.streams,a={bitrate:o[n.bitrateIndex].bitrate/1e3,reason:n.switchReason,oldFrameRate:e.frameRate,newFrameRate:n.frameRate};r._controller.sendEvent(i.STREAM_SWITCHED,a)}}},n.prototype._getNextSegment=function(e){var t=this;if(t._loadingSegment&&e>=t._loadingSegment.beginTime&&e<t._loadingSegment.endTime)return t._loadingSegment;if(t._loadedList.length)for(var r=t._loadedList.length-1;r>=0;r--)if(e>=t._loadedList[r].beginTime&&e<t._loadedList[r].endTime)return t._loadedList[r];return null},n.prototype._onBufferingBegin=function(){var e=this;e._buffering||(e._buffering=!0,e._renderingSegment!==e._loadingSegment)},n.prototype._onBufferingEnd=function(e){var t=this;if(t._buffering){t._rebufferingStartTime=NaN,t._buffering=!1;var r=t._renderingSegment,n=r&&!isNaN(e)&&e>0;r&&(r.bufferTime+=n?e:0,r.bufferCount+=n?1:0)}},n.prototype.getMetrics=function(){var e=this,t=e._renderingSegment,r=[];if(e._renderedList.length){for(var n=0;n<e._renderedList.length;n++)r.push(e._dto(e._renderedList[n]));e._renderedList=[]}return t&&(r.push(e._dto(t)),t.bufferCount=0,t.bufferTime=0,t.timeToFirstByte=NaN,t.timeToDownload&&(t.timeToDownload=NaN)),r},n.prototype._dto=function(e){var t=this;if(!e)return null;var r=t._model.streams;e.bitrateIndex=r.length>0?Math.min(e.bitrateIndex,r.length-1):0;var n=r[e.bitrateIndex].bitrate/1e3;e.bufferTime>0&&!e.bufferCount?e.bufferCount=1:!e.bufferTime&&e.bufferCount>0&&(e.bufferCount=0);var o={seq_num:e.seqNum,ib:n,ob:e.observedBitrate.toFixed(2),num_buf:e.bufferCount,buf_dur:e.bufferTime,req_t:e.timeToRequest,fb_dl_t:e.timeToFirstByte,req_dl_t:e.timeToDownload,drop_f:e.frameDrop,avg_fr:(e.frameRateSum/e.frameRateSampleCount).toFixed(2),seg_in_wkr:e.segmentInWorker,to:e.to,from:0,fr_n:0,fr_avg:0};return e.perfInfo&&Object.keys(e.perfInfo).length&&(o.req_st=e.perfInfo.requestStart?e.perfInfo.requestStart.toFixed(2):0,o.resp_st=e.perfInfo.responseStart?e.perfInfo.responseStart.toFixed(2):0,o.resp_end=e.perfInfo.responseEnd?e.perfInfo.responseEnd.toFixed(2):0,o.sec_conn_st=e.perfInfo.secureConnectionStart?e.perfInfo.secureConnectionStart.toFixed(2):0,o.fetch_st=e.perfInfo.fetchStart?e.perfInfo.fetchStart.toFixed(2):0,t._isFirstSegment&&(t._isFirstSegment=!1,o.conn_st=e.perfInfo.connectStart?e.perfInfo.connectStart.toFixed(2):0,o.dmn_look_st=e.perfInfo.domainLookupStart?e.perfInfo.domainLookupStart.toFixed(2):0)),o},n.prototype.getMetricsBandwidthInfo=function(){var e=this,t=e._controller.services.bandwidthEstimator,r=t.averageBandwidth===e._prevAvgBandwidth?0:t.averageBandwidth;return e._prevAvgBandwidth!==t.averageBandwidth&&(e._prevAvgBandwidth=t.averageBandwidth),r},n.prototype.cuepointEventDispatcher=function(e,t){var r,n=this,o=t.length,a=o-1;if(o>0){if(n.shouldFireCueDetectedEvent(e,t[a]))return t[a].setCueOutDetectedState(!0),r={cuepointDuration:t[a].cuepointDuration,timeGapBeforeCUEOUT:t[a].startTime-e},void n._controller.sendEvent(i.CUEPOINT_DETECTED,r);if(n.shouldFireCueOutEvent(e,t[a]))return t[a].setCueOutFiredState(!0),r={cuepointDuration:t[a].cuepointDuration,cuepointPlayedTime:e-t[a].startTime},void n._controller.sendEvent(i.CUEPOINT_STARTED,r)}},n.prototype.shouldFireCueDetectedEvent=function(e,t){return t.startTime?!t.isCueOutDetectedFired&&t.startTime>e:!1},n.prototype.shouldFireCueOutEvent=function(e,t){var r=this;if(!t.startTime)return!1;var n=r._getCurrentPlayingSeqNum(e);return!t.isCueOutFired&&n===t.startSeqNum&&e>t.startTime},n.prototype._getCurrentPlayingSeqNum=function(e){var t=this,r=t._model.getCurrentPlayingStream(),n=r?r.segments:null;if(n){if(1===n.length)return n[0].seqNum;for(var o=n.length-1;o>=0;o--)if(e>=n[o].startTime)return n[o].seqNum}return null}},{"./../event":200}],222:[function(e,t,r){"use strict";function n(){var e=this;e._model=e._controller.model,e._workerMap={},e.bandwidthEstimator=new i(e._model.seedBandwidth),e.segmentMetrics=e._controller.create(a),e.metadataParser=e._controller.create(o)}t.exports=n;var o=e("./playlist-parser"),i=e("./../abr/bandwidth-estimator"),a=e("./segment-metrics"),s=e("./loader").Loader,l=e("./../worker-utils/worker-bridge"),d=e("webworkify");n.prototype.destroy=function(){var e=this;e.bandwidthEstimator.destroy(),e.segmentMetrics.destroy(),e._workerMap&&Object.keys(e._workerMap).forEach(function(t){e._workerMap[t].terminate()})},n.prototype.getNewLoader=function(e){var t=this,r=t._model.config,n=t._model.userAgent,o=e||{};o.maxRetries=r.maxRetries,o.requestTimeout=r.requestTimeout,o.chunkedRequestTimeout=r.chunkedRequestTimeout,o.inWorkerScope=t._model.inWorkerScope,o.useMSStream=n?n.ie||n.edge:!1;var i=null;try{i=new s(o)}catch(a){i=null}return i},n.prototype.getWorker=function(e){var t=this;if(!e)return null;var r=t._model.config;if(r.useWorker&&"undefined"!=typeof Worker)try{return t._workerMap[e]||(t._workerMap[e]=d(l)),t._workerMap[e]}catch(n){}return null}},{"./../abr/bandwidth-estimator":178,"./../worker-utils/worker-bridge":227,"./loader":218,"./playlist-parser":220,"./segment-metrics":221,webworkify:229}],223:[function(e,t,r){"use strict";function n(e){var t=this;t._frames=[],t._demuxConfig=e||{},t._config={},t.ready=!1,t._defaultFrameDuration=0}function o(e){var t=this;t._frames=[],t._demuxConfig=e||{},t._config={},t._keyFrameIndex=0,t.ready=!1,t._keyFrameCount=0,t._defaultFrameDuration=u*p}t.exports.AACStream=n,t.exports.AVCStream=o;var i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=["Null","Main","LC","SSR","LTP"],s="mp4a.40.2",l=66,d=0,c=10,p=9e4,u=.033,_={NON_IDR:1,IDR:5,SPS:7,PPS:8};n.prototype.destroy=function(){var e=this;e._frames=[]},n.prototype.readFrames=function(e){var t=this;if(e&&e.packetInfo){var r=e.packetInfo.streamData;if(r&&!(r.length<6)){for(var n=0,o=0,i=0;n<r.length;){var a=0,l=(r[n++]<<8)+r[n++],d=6&l,c=1&l;if(65520===(65520&l)&&0===d){t._parseConfig(r.subarray(n,n+2)),t._config.codec=s,n++;var p=(r[n++]<<16)+(r[n++]<<8)+r[n++];for(p=(262112&p)>>>5,o=(3&r[n++])+1,c?p-=7:(p-=9,n+=2);o>a&&n<r.length;){var u=e.packetInfo.pts+i*t._defaultFrameDuration;t._frames.push({data:r.subarray(n,n+p),dts:u,pts:u,keyframe:!1,flags:{isLeading:!1,dependsOn:!0,isDependedOn:!1,hasRedundancy:!1,paddingValue:!1,isNonSyncSample:!1,degradationPriority:1}}),n+=p,a++,i++}}else n--}t.ready=t._checkReadiness()}}},n.prototype._parseConfig=function(e){var t=this;if(e&&!(e.length<2)){var r=((192&e[0])>>>6)+1;r=r>4?4:r,t._config.audioObjectTypeIndex=r,t._config.audioObjectType=a[r],r=(60&e[0])>>>2,r=13>r?r:0,t._config.samplingFreqIndex=r,t._config.samplingFreq=i[r],t._config.channels=(1&e[0])<<2|(192&e[1])>>>6,t._config.sampleSize=16,t._defaultFrameDuration=1024*p/t._config.samplingFreq}},n.prototype._checkReadiness=function(){var e=this,t=e._frames.length,r=t>0?e._frames[t-1].pts-e._frames[0].pts+e._defaultFrameDuration:0,n=.1*p;return r>=n},n.prototype.getFrames=function(){var e=this;return e.ready=!1,e._frames.splice(0,e._frames.length)},n.prototype.getConfig=function(){var e=this;return e._config},o.prototype.destroy=function(){var e=this;e._frames=[]},o.prototype.readFrames=function(e){var t=this;if(e&&e.packetInfo){var r=e.packetInfo.streamData;if(r&&!(r.length<4)){for(var n,o,i,a=0,s=0,l=0,d=a,c={nalUnits:[],nalUnitSize:0,dts:e.packetInfo.dts,pts:e.packetInfo.pts,keyframe:!1,data:r,flags:{isLeading:0,dependsOn:0,isDependedOn:0,hasRedundancy:0,paddingValue:0,isNonSyncSample:!1,degradationPriority:0}},p=4294967295;a<r.length;){var u=r[a++];if(o=NaN,p=p<<8|u,1===p&&(o=4),i=16777215&p,1===i){if(p=4294967295,o=o||3,s=c.nalUnits.length,s>=1)switch(l=a-d-o,n=r.subarray(d,d+l),c.nalUnitSize+=l,c.nalUnits[s-1].data=n,c.nalUnits[s-1].type){case _.SPS:t._config.profileIndication=n[1],t._config.profileCompatibility=n[2],t._config.levelIndication=n[3],t._config.numOfSPS=1,t._config.spsLength=n.length,t._config.sps=n;break;case _.PPS:t._config.numOfPPS=1,t._config.ppsLength=n.length,t._config.pps=n}d=a,l=0;var m=31&r[a++];c.nalUnits.push({data:null,type:m}),m===_.IDR?(t._keyFrameIndex=t._frames.length,c.keyframe=!0,c.flags.dependsOn=2,t._keyFrameCount++):m===_.NON_IDR&&(c.keyframe=!1,c.flags.dependsOn=1,c.flags.isNonSyncSample=!0)}}s=c.nalUnits.length,s>=1&&null===c.nalUnits[s-1].data&&(l=a-d,c.nalUnits[s-1].data=r.subarray(d,d+l),c.nalUnitSize+=l),t._config.codec=t._getVideoCodecType(t._config),c.nalUnitSize>0&&t._frames.push(c),t.ready=t._checkReadiness()}}},o.prototype._checkReadiness=function(){var e=this,t=e._frames.length,r=t>0?e._frames[t-1].pts-e._frames[0].pts+e._defaultFrameDuration:0,n=.1*p;return e._demuxConfig.startChunkWithKeyFrame?e._keyFrameCount>=2:t>1&&r>=n},o.prototype.getFrames=function(e){var t=this,r=t._demuxConfig.startChunkWithKeyFrame&&e&&e.keyFrameBoundary,n=t._frames.length;r&&(n=t._keyFrameIndex,t._keyFrameCount=1,t.ready=!1);var o=t._frames.splice(0,n);return t._keyFrameIndex=0,o},o.prototype.getConfig=function(){var e=this;return e._config},o.prototype._getVideoCodecType=function(e){var t=e&&e.profileIndication||l;t=Math.max(t,l);var r=e&&e.profileCompatibility||d,n=e&&e.levelIndication||c;return"avc1."+(t<<16|r<<8|n).toString(16)}},{}],224:[function(e,t,r){"use strict";function n(e,t,r){var n=this;n.streamType=e,n.streamId=t,n._packetList=[],n._endOfSegment=!1,n._demuxConfig=r,"audio"===e?n._stream=new s(n._demuxConfig):"video"===e&&(n._stream=new l(n._demuxConfig))}function o(e){var t=this;t._data=new a(Uint8Array,e),t.complete=!1}t.exports=n;var i=e("./av-stream"),a=e("../../lib/data-manager"),s=i.AACStream,l=i.AVCStream;n.prototype.destroy=function(){var e=this;e._packetList=[],e._stream&&(e._stream.destroy(),e._stream=null)},n.prototype.isReady=function(){var e=this,t=e._stream?e._stream.ready:!1;return e._endOfSegment||t},n.prototype.addPacket=function(e){var t=this,r=t._packetList.length;r&&t._parsePacket(),t._packetList.push(new o(e))},n.prototype.append=function(e){var t=this,r=t._packetList.length;e&&r&&t._packetList[r-1].append(e);
},n.prototype.endOfSegment=function(){var e=this;e._endOfSegment=!0,e._parsePacket()},n.prototype.getFrames=function(e){var t=this;return t._stream?t._stream.getFrames(e):null},n.prototype.getConfig=function(){var e=this;return e._stream?e._stream.getConfig():null},n.prototype._parsePacket=function(){var e=this,t=e._packetList.length;if(t){var r=e._packetList[t-1];r.complete=!0,0===r.parse()&&e._stream&&(e._stream.readFrames(r),e._packetList.pop())}},o.prototype.append=function(e){var t=this;t._data&&t._data.set(e)},o.prototype.parse=function(){var e=this;if(e.packetInfo={},!e.complete||!e._data||!e._data.length)return e.packetInfo.result=-1,-1;if(e._data.length<6)return e.packetInfo.result=-2,-2;var t=0,r=(e._data.get(t++)<<16)+(e._data.get(t++)<<8)+e._data.get(t++);if(1!==r)return e.packetInfo.result=-3,-3;e.packetInfo.streamId=e._data.get(t++),t+=2,t++;var n=(192&e._data.get(t++))>>6,o=e._data.get(t++);return(2===n||3===n)&&(e.packetInfo.pts=e._parseTimestamp(e._data.subArray(t,t+5)),e.packetInfo.dts=e.packetInfo.pts,t+=5,o-=5,3===n&&(e.packetInfo.dts=e._parseTimestamp(e._data.subArray(t,t+5)),t+=5,o-=5)),t+=o,e.packetInfo.streamData=e._data.subArray(t),e.packetInfo.result=0,0},o.prototype._parseTimestamp=function(e){if(!e||!e.length)return 0;var t=0,r=(14&e[t++])>>>1,n=(e[t++]<<8)+(254&e[t++])>>>1,o=(e[t++]<<8)+e[t++]>>>1,i=(4&r)>>2;r&=3;var a=r<<29;n<<=15;var s=2*a+n+o,l=i?-1*Math.pow(2,32)+s:s;return l}},{"../../lib/data-manager":167,"./av-stream":223}],225:[function(e,t,r){"use strict";function n(e,t){var r=this;r._data=null,r._demuxConfig=e||{},r._dataListener=t,r._pcrPID=0,r._programMapPID=NaN,r._streamIds={},r._pesStreams={},r._packetsBeforePMT=[],r._state="initial",r._position="start",r._endOfSegment=!1}t.exports=n;var o=e("./pes"),i=e("./../error"),a=188,s=71,l=500,d=0;n.prototype.destroy=function(){var e=this;e._data=null,e._packetsBeforePMT=[],e._state="initial",e._position="start";var t=e._pesStreams;for(var r in t)t.hasOwnProperty(r)&&t[r].destroy();e._pesStreams={}},n.prototype.append=function(e){var t=this;if(e){var r=e.length;if(r){var n=null,o=0;t._data&&(n=t._data,o=n.length);var a=o+r;return t._data=new Uint8Array(a),n&&t._data.set(n),t._data.set(e,o),-2===t._parse()?{error:i.ERR_SEGMENT_PARSE}:void 0}}},n.prototype.endOfSegment=function(){var e=this;e._endOfSegment=!0,0===e._data.length&&e._handleEndOfSegment()},n.prototype._parse=function(){var e=this;if(!e._data)return-1;for(var t=0;e._data.length;){var r=e._parsePacket(e._data.subarray(0,a));if(0!==r){if(-2===r)return-2;break}t++,e._data=e._data.subarray(a),t>=l&&(e._sendDemuxedData(),t=0)}return e._endOfSegment&&0===e._data.length?e._handleEndOfSegment():e._sendDemuxedData(),0},n.prototype._parsePacket=function(e){var t=this;if(!e||e.length<a)return-1;var r=0,n={};if(e[r++]!==s)return-2;var o=e[r++];if(n.startIndicator=(64&o)>>6,n.pid=((31&o)<<8)+e[r++],o=e[r++],n.adaptationFieldExists=(32&o)>>5,n.payloadExists=(16&o)>>4,n.adaptationFieldLength=0,n.adaptationFieldExists){n.adaptationFieldLength=e[r++];var i=e[r++];16&i&&n.pid===t._pcrPID&&n.adaptationFieldLength>=7&&t._readPCR(e.subarray(r,r+6)),r+=n.adaptationFieldLength-1}return!n.payloadExists||n.adaptationFieldLength>=183?0:("pmtParsed"!==t._state&&n.pid!==d&&n.pid!==t._programMapPID&&t._packetsBeforePMT.push(e),t._parsePayload(e.subarray(r),n),0)},n.prototype._readPCR=function(e){var t=this;if(e&&!(e.length<6)){var r=0,n=e[r++],o=(128&n)>>>7;n&=127,n=(n<<24)+(e[r++]<<16)+(e[r++]<<8)+e[r++];var i=e[r++];r++;var a=(128&i)>>>7,s=2*n+a,l=o?-1*Math.pow(2,32)+s:s;t._firstPcr||(t._firstPcr=l)}},n.prototype._parsePayload=function(e,t){var r=this;if(e&&t&&!isNaN(t.pid)){var n,o;switch(r._streamIds.aac&&(n=r._streamIds.aac),r._streamIds.avc&&(o=r._streamIds.avc),t.pid){case d:r._parsePAT(e,t);break;case r._programMapPID:r._parsePMT(e,t);break;case n:r._parseMediaData("audio",e,t);break;case o:r._parseMediaData("video",e,t)}}},n.prototype._parsePAT=function(e,t){var r=this;if(e){var n=0;if(t.startIndicator){var o=e[n++];n+=o}n+=5,n+=3;var i=(e[n++]<<8)+e[n++];i>0&&(r._programMapPID=((31&e[n++])<<8)+e[n++]),r._state="patParsed"}},n.prototype._parsePMT=function(e,t){var r=this;if(e){var n=0;if(t&&t.startIndicator){var o=e[n++];n+=o}n++;var i=((15&e[n++])<<8)+e[n++],a=n;n+=2,n+=3,r._pcrPID=((31&e[n++])<<8)+e[n++];var s=((15&e[n++])<<8)+e[n++];n+=s;for(var l=null,d=null,c=0;i-4>n-a;)switch(l=e[n++],d=((31&e[n++])<<8)+e[n++],c=((15&e[n++])<<8)+e[n++],n+=c,l){case 3:case 4:r._streamIds.mp3=d;break;case 15:r._streamIds.aac=d;break;case 27:r._streamIds.avc=d}for(r._state="pmtParsed";r._packetsBeforePMT.length;)r._parsePacket(r._packetsBeforePMT.shift())}},n.prototype._parseMediaData=function(e,t,r){var n=this;if(t){var i=n._pesStreams,a="audio"===e?n._streamIds.aac:n._streamIds.avc,s=i[a];r.startIndicator?(s||(i[a]=new o(e,a,n._demuxConfig),s=i[a]),s.addPacket(t)):s&&s.append(t)}},n.prototype._isReady=function(){var e=this,t=!0;for(var r in e._streamIds)if(e._streamIds.hasOwnProperty(r)){var n=e._streamIds[r];t=t&&e._pesStreams[n]&&e._pesStreams[n].isReady()}return t},n.prototype._sendDemuxedData=function(){var e=this;if(e._isReady()){var t={},r=!1,n=!1,o=e._pesStreams,i=Number.POSITIVE_INFINITY;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];if(s){var l={frames:s.getFrames({keyFrameBoundary:"end"!==e._position}),config:s.getConfig(),streamId:s.streamId};"audio"===s.streamType&&a===e._streamIds.aac.toString()?(t.audio=l,r=t.audio.frames&&t.audio.frames.length):"video"===s.streamType&&a===e._streamIds.avc.toString()&&(t.video=l,n=t.video.frames&&t.video.frames.length)}}r&&(i=Math.min(i,t.audio.frames[0].dts)),n&&(i=Math.min(i,t.video.frames[0].dts)),t.pcr=e._firstPcr,i!==Number.POSITIVE_INFINITY&&(t.pcr=i),("end"===e._position||r||n)&&(e._dataListener&&e._dataListener({pos:e._position,avData:t}),"start"===e._position&&(e._position="middle"))}},n.prototype._handleEndOfSegment=function(){var e=this;e._position="end";var t=e._pesStreams;for(var r in t)t.hasOwnProperty(r)&&t[r].endOfSegment();e._sendDemuxedData()}},{"./../error":199,"./pes":224}],226:[function(e,t,r){"use strict";function n(e){var t=this;e&&(t.type=e.type,t.id=e.id,t.moduleName=e.moduleName,t.instanceId=e.instanceId,t.funcName=e.funcName,t.timestamp=e.timestamp||Date.now(),t.args=e.args||[],t.argNames=e.argNames||[],t.transferables=e.transferables)}t.exports=n,n.prototype.putParam=function(e,t){var r=this;t&&(r.args.push(t),r.argNames.push(e||""))},n.prototype.getParam=function(e){var t=this;if(!e)return null;var r=t.argNames.indexOf(e);return r>=0?t.args[r]:null},n.prototype.dto=function(){var e=this,t={};return Object.keys(e).forEach(function(r){"_"!==r[0]&&(t[r]=e[r])}),t},n.prototype.addMedia=function(){var e,t=this;return t._controller&&(e=t._controller.model.getMediaDto(),t.putParam("media",e)),e}},{}],227:[function(e,t,r){"use strict";function n(e){e._instances={},e.addEventListener("message",function(t){a(i(t,e),e)})}function o(e,t,r){if(r){var n=e.dto();r.postMessage(n,t)}}function i(e,t){if(t){var r=new c(e.data),n=r.instanceId;return r.putParam("callback",function(e,r){e.instanceId=n,o(e,r,t)}),r}}function a(e,t){var r=t;if(e){var n=e.instanceId,o=e.moduleName,i=e.funcName,a=e.args;switch(e.id){case d.CREATE:r._instances[n]=Object.create(l[o].prototype),l[o].apply(r._instances[n],a);break;case d.DESTROY:r._instances.hasOwnProperty(n)&&(r._instances[n].destroy(),delete r._instances[n]);break;case d.CALL_METHOD:if(r._instances.hasOwnProperty(n)){var s=r._instances[n];s&&s[i]&&"function"==typeof s[i]&&(s.updateToWorkerStats&&s.updateToWorkerStats(e.timestamp),s[i].apply(s,a))}}}}t.exports=n;var s=e("./worker-defs"),l=s.WorkerDefs,d=s.MessageIds,c=e("./message")},{"./message":226,"./worker-defs":228}],228:[function(e,t,r){"use strict";t.exports.WorkerDefs={HlsTransformer:e("../helper/hls-transformer"),Controller:e("../controller/worker-scope/controller")},t.exports.MessageTypes={EVENT:"event",MESSAGE:"message"},t.exports.MessageIds={CREATE:"create",DESTROY:"destroy",CALL_METHOD:"callMethod",EVENT:"eventPublish",APPEND_SRC_BUFFER:"appendSrcBuffer",CLEAR_SRC_BUFFER:"clearSrcBuffer",END_OF_STREAM:"endOfStream",SAVE_AVG_BANDWIDTH:"saveAvgBandwidth",QUALITY_CHANGE_PLAY:"qualityChangePlay",QUALITY_CHANGE_PAUSE:"qualityChangePause"}},{"../controller/worker-scope/controller":195,"../helper/hls-transformer":203}],229:[function(e,t,r){var n=arguments[3],o=arguments[4],i=arguments[5],a=JSON.stringify;t.exports=function(e){for(var t,r=Object.keys(i),s=0,l=r.length;l>s;s++){var d=r[s];if(i[d].exports===e){t=d;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},s=0,l=r.length;l>s;s++){var d=r[s];c[d]=d}o[t]=[Function(["require","module","exports"],"("+e+")(self)"),c]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={};u[t]=t,o[p]=[Function(["require"],"require("+a(t)+")(self)"),u];var _="("+n+")({"+Object.keys(o).map(function(e){return a(e)+":["+o[e][0]+","+a(o[e][1])+"]"}).join(",")+"},{},["+a(p)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(m.createObjectURL(new Blob([_],{type:"text/javascript"})))}},{}],230:[function(e,t,r){function n(e,t){function r(){4===c.readyState&&n()}function n(){var e=null,r=c.statusCode=c.status,n=c.body=c.response||c.responseText||c.responseXML;if(1223===r&&(r=204),0===r||r>=400&&600>r){var o=c.responseText||s[String(c.status).charAt(0)];e=new Error(o),e.statusCode=c.status}if(f)try{n=c.body=JSON.parse(n)}catch(i){}t(e,c,n)}function i(e){t(e,c)}"string"==typeof e&&(e={uri:e}),e=e||{},t=a(t);var c=e.xhr||null;!c&&e.cors?c=new d:c||(c=new l);var p,u=c.url=e.uri||e.url,_=c.method=e.method||"GET",m=e.body||e.data,v=c.headers=e.headers||{},y=!!e.sync,f=!1;if("json"in e&&(f=!0,v.Accept="application/json","GET"!==_&&"HEAD"!==_&&(v["Content-Type"]="application/json",m=JSON.stringify(e.json))),c.onreadystatechange=r,c.onload=n,c.onerror=i,c.onprogress=function(){},c.ontimeout=o,c.open(_,u,!y),e.cors&&(c.withCredentials=!0),y||(c.timeout="timeout"in e?e.timeout:5e3),c.setRequestHeader)for(p in v)v.hasOwnProperty(p)&&c.setRequestHeader(p,v[p]);return"responseType"in e&&(c.responseType=e.responseType),c.send(m),c}function o(){}var i=e("global/window"),a=e("once"),s={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},l=i.XMLHttpRequest||o,d="withCredentials"in new l?i.XMLHttpRequest:i.XDomainRequest;t.exports=n},{"global/window":231,once:232}],231:[function(e,t,r){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:t.exports={}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],232:[function(e,t,r){function n(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}]},{},[28]);
